var sA=e=>{throw TypeError(e)};var Bw=(e,t,r)=>t.has(e)||sA("Cannot "+r);var Ue=(e,t,r)=>(Bw(e,t,"read from private field"),r?r.call(e):t.get(e)),lr=(e,t,r)=>t.has(e)?sA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Bt=(e,t,r,n)=>(Bw(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Kn=(e,t,r)=>(Bw(e,t,"access private method"),r);var Vg=(e,t,r,n)=>({set _(a){Bt(e,t,a,r)},get _(){return Ue(e,t,n)}});function Zz(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $M={exports:{}},xx={},DM={exports:{}},Yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zp=Symbol.for("react.element"),eW=Symbol.for("react.portal"),tW=Symbol.for("react.fragment"),rW=Symbol.for("react.strict_mode"),nW=Symbol.for("react.profiler"),aW=Symbol.for("react.provider"),iW=Symbol.for("react.context"),sW=Symbol.for("react.forward_ref"),oW=Symbol.for("react.suspense"),lW=Symbol.for("react.memo"),cW=Symbol.for("react.lazy"),oA=Symbol.iterator;function uW(e){return e===null||typeof e!="object"?null:(e=oA&&e[oA]||e["@@iterator"],typeof e=="function"?e:null)}var LM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},FM=Object.assign,BM={};function Mf(e,t,r){this.props=e,this.context=t,this.refs=BM,this.updater=r||LM}Mf.prototype.isReactComponent={};Mf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Mf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function UM(){}UM.prototype=Mf.prototype;function ek(e,t,r){this.props=e,this.context=t,this.refs=BM,this.updater=r||LM}var tk=ek.prototype=new UM;tk.constructor=ek;FM(tk,Mf.prototype);tk.isPureReactComponent=!0;var lA=Array.isArray,qM=Object.prototype.hasOwnProperty,rk={current:null},zM={key:!0,ref:!0,__self:!0,__source:!0};function WM(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)qM.call(t,n)&&!zM.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:zp,type:e,key:i,ref:o,props:a,_owner:rk.current}}function dW(e,t){return{$$typeof:zp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function nk(e){return typeof e=="object"&&e!==null&&e.$$typeof===zp}function fW(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var cA=/\/+/g;function Uw(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fW(""+e.key):t.toString(36)}function Zv(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case zp:case eW:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Uw(o,0):n,lA(a)?(r="",e!=null&&(r=e.replace(cA,"$&/")+"/"),Zv(a,t,r,"",function(u){return u})):a!=null&&(nk(a)&&(a=dW(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(cA,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",lA(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Uw(i,l);o+=Zv(i,t,r,c,a)}else if(c=uW(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Uw(i,l++),o+=Zv(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Kg(e,t,r){if(e==null)return e;var n=[],a=0;return Zv(e,n,"","",function(i){return t.call(r,i,a++)}),n}function hW(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ua={current:null},ey={transition:null},mW={ReactCurrentDispatcher:ua,ReactCurrentBatchConfig:ey,ReactCurrentOwner:rk};function HM(){throw Error("act(...) is not supported in production builds of React.")}Yt.Children={map:Kg,forEach:function(e,t,r){Kg(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Kg(e,function(){t++}),t},toArray:function(e){return Kg(e,function(t){return t})||[]},only:function(e){if(!nk(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Yt.Component=Mf;Yt.Fragment=tW;Yt.Profiler=nW;Yt.PureComponent=ek;Yt.StrictMode=rW;Yt.Suspense=oW;Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mW;Yt.act=HM;Yt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=FM({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=rk.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)qM.call(t,c)&&!zM.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:zp,type:e.type,key:a,ref:i,props:n,_owner:o}};Yt.createContext=function(e){return e={$$typeof:iW,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:aW,_context:e},e.Consumer=e};Yt.createElement=WM;Yt.createFactory=function(e){var t=WM.bind(null,e);return t.type=e,t};Yt.createRef=function(){return{current:null}};Yt.forwardRef=function(e){return{$$typeof:sW,render:e}};Yt.isValidElement=nk;Yt.lazy=function(e){return{$$typeof:cW,_payload:{_status:-1,_result:e},_init:hW}};Yt.memo=function(e,t){return{$$typeof:lW,type:e,compare:t===void 0?null:t}};Yt.startTransition=function(e){var t=ey.transition;ey.transition={};try{e()}finally{ey.transition=t}};Yt.unstable_act=HM;Yt.useCallback=function(e,t){return ua.current.useCallback(e,t)};Yt.useContext=function(e){return ua.current.useContext(e)};Yt.useDebugValue=function(){};Yt.useDeferredValue=function(e){return ua.current.useDeferredValue(e)};Yt.useEffect=function(e,t){return ua.current.useEffect(e,t)};Yt.useId=function(){return ua.current.useId()};Yt.useImperativeHandle=function(e,t,r){return ua.current.useImperativeHandle(e,t,r)};Yt.useInsertionEffect=function(e,t){return ua.current.useInsertionEffect(e,t)};Yt.useLayoutEffect=function(e,t){return ua.current.useLayoutEffect(e,t)};Yt.useMemo=function(e,t){return ua.current.useMemo(e,t)};Yt.useReducer=function(e,t,r){return ua.current.useReducer(e,t,r)};Yt.useRef=function(e){return ua.current.useRef(e)};Yt.useState=function(e){return ua.current.useState(e)};Yt.useSyncExternalStore=function(e,t,r){return ua.current.useSyncExternalStore(e,t,r)};Yt.useTransition=function(){return ua.current.useTransition()};Yt.version="18.3.1";DM.exports=Yt;var h=DM.exports;const V=dr(h),VM=Zz({__proto__:null,default:V},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pW=h,gW=Symbol.for("react.element"),vW=Symbol.for("react.fragment"),yW=Object.prototype.hasOwnProperty,xW=pW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bW={key:!0,ref:!0,__self:!0,__source:!0};function KM(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)yW.call(t,n)&&!bW.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:gW,type:e,key:i,ref:o,props:a,_owner:xW.current}}xx.Fragment=vW;xx.jsx=KM;xx.jsxs=KM;$M.exports=xx;var s=$M.exports,GM={exports:{}},Ga={},YM={exports:{}},XM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,$){var re=M.length;M.push($);e:for(;0<re;){var ie=re-1>>>1,q=M[ie];if(0<a(q,$))M[ie]=$,M[re]=q,re=ie;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var $=M[0],re=M.pop();if(re!==$){M[0]=re;e:for(var ie=0,q=M.length,K=q>>>1;ie<K;){var ne=2*(ie+1)-1,ae=M[ne],_e=ne+1,pe=M[_e];if(0>a(ae,re))_e<q&&0>a(pe,ae)?(M[ie]=pe,M[_e]=re,ie=_e):(M[ie]=ae,M[ne]=re,ie=ne);else if(_e<q&&0>a(pe,re))M[ie]=pe,M[_e]=re,ie=_e;else break e}}return $}function a(M,$){var re=M.sortIndex-$.sortIndex;return re!==0?re:M.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,m=3,p=!1,v=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(M){for(var $=r(u);$!==null;){if($.callback===null)n(u);else if($.startTime<=M)n(u),$.sortIndex=$.expirationTime,t(c,$);else break;$=r(u)}}function _(M){if(g=!1,x(M),!v)if(r(c)!==null)v=!0,H(S);else{var $=r(u);$!==null&&B(_,$.startTime-M)}}function S(M,$){v=!1,g&&(g=!1,y(j),j=-1),p=!0;var re=m;try{for(x($),f=r(c);f!==null&&(!(f.expirationTime>$)||M&&!P());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,m=f.priorityLevel;var q=ie(f.expirationTime<=$);$=e.unstable_now(),typeof q=="function"?f.callback=q:f===r(c)&&n(c),x($)}else n(c);f=r(c)}if(f!==null)var K=!0;else{var ne=r(u);ne!==null&&B(_,ne.startTime-$),K=!1}return K}finally{f=null,m=re,p=!1}}var k=!1,C=null,j=-1,N=5,A=-1;function P(){return!(e.unstable_now()-A<N)}function T(){if(C!==null){var M=e.unstable_now();A=M;var $=!0;try{$=C(!0,M)}finally{$?L():(k=!1,C=null)}}else k=!1}var L;if(typeof w=="function")L=function(){w(T)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,D=U.port2;U.port1.onmessage=T,L=function(){D.postMessage(null)}}else L=function(){b(T,0)};function H(M){C=M,k||(k=!0,L())}function B(M,$){j=b(function(){M(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){v||p||(v=!0,H(S))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(M){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var re=m;m=$;try{return M()}finally{m=re}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,$){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var re=m;m=M;try{return $()}finally{m=re}},e.unstable_scheduleCallback=function(M,$,re){var ie=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ie+re:ie):re=ie,M){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=re+q,M={id:d++,callback:$,priorityLevel:M,startTime:re,expirationTime:q,sortIndex:-1},re>ie?(M.sortIndex=re,t(u,M),r(c)===null&&M===r(u)&&(g?(y(j),j=-1):g=!0,B(_,re-ie))):(M.sortIndex=q,t(c,M),v||p||(v=!0,H(S))),M},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(M){var $=m;return function(){var re=m;m=$;try{return M.apply(this,arguments)}finally{m=re}}}})(XM);YM.exports=XM;var wW=YM.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _W=h,Wa=wW;function Xe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var QM=new Set,bm={};function iu(e,t){Fd(e,t),Fd(e+"Capture",t)}function Fd(e,t){for(bm[e]=t,e=0;e<t.length;e++)QM.add(t[e])}var oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),U_=Object.prototype.hasOwnProperty,SW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uA={},dA={};function jW(e){return U_.call(dA,e)?!0:U_.call(uA,e)?!1:SW.test(e)?dA[e]=!0:(uA[e]=!0,!1)}function kW(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function NW(e,t,r,n){if(t===null||typeof t>"u"||kW(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function da(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qn[e]=new da(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qn[t]=new da(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qn[e]=new da(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qn[e]=new da(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qn[e]=new da(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qn[e]=new da(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qn[e]=new da(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qn[e]=new da(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qn[e]=new da(e,5,!1,e.toLowerCase(),null,!1,!1)});var ak=/[\-:]([a-z])/g;function ik(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ak,ik);qn[t]=new da(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ak,ik);qn[t]=new da(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ak,ik);qn[t]=new da(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qn[e]=new da(e,1,!1,e.toLowerCase(),null,!1,!1)});qn.xlinkHref=new da("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qn[e]=new da(e,1,!1,e.toLowerCase(),null,!0,!0)});function sk(e,t,r,n){var a=qn.hasOwnProperty(t)?qn[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(NW(t,r,a,n)&&(r=null),n||a===null?jW(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var jo=_W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gg=Symbol.for("react.element"),Gu=Symbol.for("react.portal"),Yu=Symbol.for("react.fragment"),ok=Symbol.for("react.strict_mode"),q_=Symbol.for("react.profiler"),JM=Symbol.for("react.provider"),ZM=Symbol.for("react.context"),lk=Symbol.for("react.forward_ref"),z_=Symbol.for("react.suspense"),W_=Symbol.for("react.suspense_list"),ck=Symbol.for("react.memo"),Qo=Symbol.for("react.lazy"),eR=Symbol.for("react.offscreen"),fA=Symbol.iterator;function mh(e){return e===null||typeof e!="object"?null:(e=fA&&e[fA]||e["@@iterator"],typeof e=="function"?e:null)}var Kr=Object.assign,qw;function Wh(e){if(qw===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);qw=t&&t[1]||""}return`
`+qw+e}var zw=!1;function Ww(e,t){if(!e||zw)return"";zw=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{zw=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Wh(e):""}function CW(e){switch(e.tag){case 5:return Wh(e.type);case 16:return Wh("Lazy");case 13:return Wh("Suspense");case 19:return Wh("SuspenseList");case 0:case 2:case 15:return e=Ww(e.type,!1),e;case 11:return e=Ww(e.type.render,!1),e;case 1:return e=Ww(e.type,!0),e;default:return""}}function H_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yu:return"Fragment";case Gu:return"Portal";case q_:return"Profiler";case ok:return"StrictMode";case z_:return"Suspense";case W_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ZM:return(e.displayName||"Context")+".Consumer";case JM:return(e._context.displayName||"Context")+".Provider";case lk:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ck:return t=e.displayName||null,t!==null?t:H_(e.type)||"Memo";case Qo:t=e._payload,e=e._init;try{return H_(e(t))}catch{}}return null}function EW(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H_(t);case 8:return t===ok?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function El(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function tR(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function AW(e){var t=tR(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Yg(e){e._valueTracker||(e._valueTracker=AW(e))}function rR(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=tR(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ky(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function V_(e,t){var r=t.checked;return Kr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function hA(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=El(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function nR(e,t){t=t.checked,t!=null&&sk(e,"checked",t,!1)}function K_(e,t){nR(e,t);var r=El(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?G_(e,t.type,r):t.hasOwnProperty("defaultValue")&&G_(e,t.type,El(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mA(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function G_(e,t,r){(t!=="number"||ky(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Hh=Array.isArray;function fd(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+El(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Y_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Xe(91));return Kr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pA(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Xe(92));if(Hh(r)){if(1<r.length)throw Error(Xe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:El(r)}}function aR(e,t){var r=El(t.value),n=El(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function gA(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function iR(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function X_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?iR(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xg,sR=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xg=Xg||document.createElement("div"),Xg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wm(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var rm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PW=["Webkit","ms","Moz","O"];Object.keys(rm).forEach(function(e){PW.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),rm[t]=rm[e]})});function oR(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||rm.hasOwnProperty(e)&&rm[e]?(""+t).trim():t+"px"}function lR(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=oR(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var TW=Kr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Q_(e,t){if(t){if(TW[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Xe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Xe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Xe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Xe(62))}}function J_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z_=null;function uk(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var eS=null,hd=null,md=null;function vA(e){if(e=Vp(e)){if(typeof eS!="function")throw Error(Xe(280));var t=e.stateNode;t&&(t=jx(t),eS(e.stateNode,e.type,t))}}function cR(e){hd?md?md.push(e):md=[e]:hd=e}function uR(){if(hd){var e=hd,t=md;if(md=hd=null,vA(e),t)for(e=0;e<t.length;e++)vA(t[e])}}function dR(e,t){return e(t)}function fR(){}var Hw=!1;function hR(e,t,r){if(Hw)return e(t,r);Hw=!0;try{return dR(e,t,r)}finally{Hw=!1,(hd!==null||md!==null)&&(fR(),uR())}}function _m(e,t){var r=e.stateNode;if(r===null)return null;var n=jx(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Xe(231,t,typeof r));return r}var tS=!1;if(oo)try{var ph={};Object.defineProperty(ph,"passive",{get:function(){tS=!0}}),window.addEventListener("test",ph,ph),window.removeEventListener("test",ph,ph)}catch{tS=!1}function OW(e,t,r,n,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var nm=!1,Ny=null,Cy=!1,rS=null,IW={onError:function(e){nm=!0,Ny=e}};function MW(e,t,r,n,a,i,o,l,c){nm=!1,Ny=null,OW.apply(IW,arguments)}function RW(e,t,r,n,a,i,o,l,c){if(MW.apply(this,arguments),nm){if(nm){var u=Ny;nm=!1,Ny=null}else throw Error(Xe(198));Cy||(Cy=!0,rS=u)}}function su(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function mR(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function yA(e){if(su(e)!==e)throw Error(Xe(188))}function $W(e){var t=e.alternate;if(!t){if(t=su(e),t===null)throw Error(Xe(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return yA(a),e;if(i===n)return yA(a),t;i=i.sibling}throw Error(Xe(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(Xe(189))}}if(r.alternate!==n)throw Error(Xe(190))}if(r.tag!==3)throw Error(Xe(188));return r.stateNode.current===r?e:t}function pR(e){return e=$W(e),e!==null?gR(e):null}function gR(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=gR(e);if(t!==null)return t;e=e.sibling}return null}var vR=Wa.unstable_scheduleCallback,xA=Wa.unstable_cancelCallback,DW=Wa.unstable_shouldYield,LW=Wa.unstable_requestPaint,an=Wa.unstable_now,FW=Wa.unstable_getCurrentPriorityLevel,dk=Wa.unstable_ImmediatePriority,yR=Wa.unstable_UserBlockingPriority,Ey=Wa.unstable_NormalPriority,BW=Wa.unstable_LowPriority,xR=Wa.unstable_IdlePriority,bx=null,ps=null;function UW(e){if(ps&&typeof ps.onCommitFiberRoot=="function")try{ps.onCommitFiberRoot(bx,e,void 0,(e.current.flags&128)===128)}catch{}}var Bi=Math.clz32?Math.clz32:WW,qW=Math.log,zW=Math.LN2;function WW(e){return e>>>=0,e===0?32:31-(qW(e)/zW|0)|0}var Qg=64,Jg=4194304;function Vh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ay(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Vh(l):(i&=o,i!==0&&(n=Vh(i)))}else o=r&~a,o!==0?n=Vh(o):i!==0&&(n=Vh(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Bi(t),a=1<<r,n|=e[r],t&=~a;return n}function HW(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VW(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Bi(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=HW(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function nS(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bR(){var e=Qg;return Qg<<=1,!(Qg&4194240)&&(Qg=64),e}function Vw(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Wp(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Bi(t),e[t]=r}function KW(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Bi(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function fk(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Bi(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var vr=0;function wR(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _R,hk,SR,jR,kR,aS=!1,Zg=[],vl=null,yl=null,xl=null,Sm=new Map,jm=new Map,tl=[],GW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bA(e,t){switch(e){case"focusin":case"focusout":vl=null;break;case"dragenter":case"dragleave":yl=null;break;case"mouseover":case"mouseout":xl=null;break;case"pointerover":case"pointerout":Sm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jm.delete(t.pointerId)}}function gh(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Vp(t),t!==null&&hk(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function YW(e,t,r,n,a){switch(t){case"focusin":return vl=gh(vl,e,t,r,n,a),!0;case"dragenter":return yl=gh(yl,e,t,r,n,a),!0;case"mouseover":return xl=gh(xl,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Sm.set(i,gh(Sm.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,jm.set(i,gh(jm.get(i)||null,e,t,r,n,a)),!0}return!1}function NR(e){var t=yc(e.target);if(t!==null){var r=su(t);if(r!==null){if(t=r.tag,t===13){if(t=mR(r),t!==null){e.blockedOn=t,kR(e.priority,function(){SR(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ty(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=iS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Z_=n,r.target.dispatchEvent(n),Z_=null}else return t=Vp(r),t!==null&&hk(t),e.blockedOn=r,!1;t.shift()}return!0}function wA(e,t,r){ty(e)&&r.delete(t)}function XW(){aS=!1,vl!==null&&ty(vl)&&(vl=null),yl!==null&&ty(yl)&&(yl=null),xl!==null&&ty(xl)&&(xl=null),Sm.forEach(wA),jm.forEach(wA)}function vh(e,t){e.blockedOn===t&&(e.blockedOn=null,aS||(aS=!0,Wa.unstable_scheduleCallback(Wa.unstable_NormalPriority,XW)))}function km(e){function t(a){return vh(a,e)}if(0<Zg.length){vh(Zg[0],e);for(var r=1;r<Zg.length;r++){var n=Zg[r];n.blockedOn===e&&(n.blockedOn=null)}}for(vl!==null&&vh(vl,e),yl!==null&&vh(yl,e),xl!==null&&vh(xl,e),Sm.forEach(t),jm.forEach(t),r=0;r<tl.length;r++)n=tl[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<tl.length&&(r=tl[0],r.blockedOn===null);)NR(r),r.blockedOn===null&&tl.shift()}var pd=jo.ReactCurrentBatchConfig,Py=!0;function QW(e,t,r,n){var a=vr,i=pd.transition;pd.transition=null;try{vr=1,mk(e,t,r,n)}finally{vr=a,pd.transition=i}}function JW(e,t,r,n){var a=vr,i=pd.transition;pd.transition=null;try{vr=4,mk(e,t,r,n)}finally{vr=a,pd.transition=i}}function mk(e,t,r,n){if(Py){var a=iS(e,t,r,n);if(a===null)r1(e,t,n,Ty,r),bA(e,n);else if(YW(a,e,t,r,n))n.stopPropagation();else if(bA(e,n),t&4&&-1<GW.indexOf(e)){for(;a!==null;){var i=Vp(a);if(i!==null&&_R(i),i=iS(e,t,r,n),i===null&&r1(e,t,n,Ty,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else r1(e,t,n,null,r)}}var Ty=null;function iS(e,t,r,n){if(Ty=null,e=uk(n),e=yc(e),e!==null)if(t=su(e),t===null)e=null;else if(r=t.tag,r===13){if(e=mR(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ty=e,null}function CR(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FW()){case dk:return 1;case yR:return 4;case Ey:case BW:return 16;case xR:return 536870912;default:return 16}default:return 16}}var dl=null,pk=null,ry=null;function ER(){if(ry)return ry;var e,t=pk,r=t.length,n,a="value"in dl?dl.value:dl.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return ry=a.slice(e,1<n?1-n:void 0)}function ny(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ev(){return!0}function _A(){return!1}function Ya(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ev:_A,this.isPropagationStopped=_A,this}return Kr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ev)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ev)},persist:function(){},isPersistent:ev}),t}var Rf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gk=Ya(Rf),Hp=Kr({},Rf,{view:0,detail:0}),ZW=Ya(Hp),Kw,Gw,yh,wx=Kr({},Hp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vk,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yh&&(yh&&e.type==="mousemove"?(Kw=e.screenX-yh.screenX,Gw=e.screenY-yh.screenY):Gw=Kw=0,yh=e),Kw)},movementY:function(e){return"movementY"in e?e.movementY:Gw}}),SA=Ya(wx),eH=Kr({},wx,{dataTransfer:0}),tH=Ya(eH),rH=Kr({},Hp,{relatedTarget:0}),Yw=Ya(rH),nH=Kr({},Rf,{animationName:0,elapsedTime:0,pseudoElement:0}),aH=Ya(nH),iH=Kr({},Rf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sH=Ya(iH),oH=Kr({},Rf,{data:0}),jA=Ya(oH),lH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dH(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uH[e])?!!t[e]:!1}function vk(){return dH}var fH=Kr({},Hp,{key:function(e){if(e.key){var t=lH[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ny(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cH[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vk,charCode:function(e){return e.type==="keypress"?ny(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ny(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hH=Ya(fH),mH=Kr({},wx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kA=Ya(mH),pH=Kr({},Hp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vk}),gH=Ya(pH),vH=Kr({},Rf,{propertyName:0,elapsedTime:0,pseudoElement:0}),yH=Ya(vH),xH=Kr({},wx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bH=Ya(xH),wH=[9,13,27,32],yk=oo&&"CompositionEvent"in window,am=null;oo&&"documentMode"in document&&(am=document.documentMode);var _H=oo&&"TextEvent"in window&&!am,AR=oo&&(!yk||am&&8<am&&11>=am),NA=" ",CA=!1;function PR(e,t){switch(e){case"keyup":return wH.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TR(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xu=!1;function SH(e,t){switch(e){case"compositionend":return TR(t);case"keypress":return t.which!==32?null:(CA=!0,NA);case"textInput":return e=t.data,e===NA&&CA?null:e;default:return null}}function jH(e,t){if(Xu)return e==="compositionend"||!yk&&PR(e,t)?(e=ER(),ry=pk=dl=null,Xu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return AR&&t.locale!=="ko"?null:t.data;default:return null}}var kH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function EA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kH[e.type]:t==="textarea"}function OR(e,t,r,n){cR(n),t=Oy(t,"onChange"),0<t.length&&(r=new gk("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var im=null,Nm=null;function NH(e){zR(e,0)}function _x(e){var t=Zu(e);if(rR(t))return e}function CH(e,t){if(e==="change")return t}var IR=!1;if(oo){var Xw;if(oo){var Qw="oninput"in document;if(!Qw){var AA=document.createElement("div");AA.setAttribute("oninput","return;"),Qw=typeof AA.oninput=="function"}Xw=Qw}else Xw=!1;IR=Xw&&(!document.documentMode||9<document.documentMode)}function PA(){im&&(im.detachEvent("onpropertychange",MR),Nm=im=null)}function MR(e){if(e.propertyName==="value"&&_x(Nm)){var t=[];OR(t,Nm,e,uk(e)),hR(NH,t)}}function EH(e,t,r){e==="focusin"?(PA(),im=t,Nm=r,im.attachEvent("onpropertychange",MR)):e==="focusout"&&PA()}function AH(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _x(Nm)}function PH(e,t){if(e==="click")return _x(t)}function TH(e,t){if(e==="input"||e==="change")return _x(t)}function OH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hi=typeof Object.is=="function"?Object.is:OH;function Cm(e,t){if(Hi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!U_.call(t,a)||!Hi(e[a],t[a]))return!1}return!0}function TA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function OA(e,t){var r=TA(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=TA(r)}}function RR(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?RR(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $R(){for(var e=window,t=ky();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ky(e.document)}return t}function xk(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function IH(e){var t=$R(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&RR(r.ownerDocument.documentElement,r)){if(n!==null&&xk(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=OA(r,i);var o=OA(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var MH=oo&&"documentMode"in document&&11>=document.documentMode,Qu=null,sS=null,sm=null,oS=!1;function IA(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;oS||Qu==null||Qu!==ky(n)||(n=Qu,"selectionStart"in n&&xk(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),sm&&Cm(sm,n)||(sm=n,n=Oy(sS,"onSelect"),0<n.length&&(t=new gk("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Qu)))}function tv(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ju={animationend:tv("Animation","AnimationEnd"),animationiteration:tv("Animation","AnimationIteration"),animationstart:tv("Animation","AnimationStart"),transitionend:tv("Transition","TransitionEnd")},Jw={},DR={};oo&&(DR=document.createElement("div").style,"AnimationEvent"in window||(delete Ju.animationend.animation,delete Ju.animationiteration.animation,delete Ju.animationstart.animation),"TransitionEvent"in window||delete Ju.transitionend.transition);function Sx(e){if(Jw[e])return Jw[e];if(!Ju[e])return e;var t=Ju[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in DR)return Jw[e]=t[r];return e}var LR=Sx("animationend"),FR=Sx("animationiteration"),BR=Sx("animationstart"),UR=Sx("transitionend"),qR=new Map,MA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rl(e,t){qR.set(e,t),iu(t,[e])}for(var Zw=0;Zw<MA.length;Zw++){var e1=MA[Zw],RH=e1.toLowerCase(),$H=e1[0].toUpperCase()+e1.slice(1);Rl(RH,"on"+$H)}Rl(LR,"onAnimationEnd");Rl(FR,"onAnimationIteration");Rl(BR,"onAnimationStart");Rl("dblclick","onDoubleClick");Rl("focusin","onFocus");Rl("focusout","onBlur");Rl(UR,"onTransitionEnd");Fd("onMouseEnter",["mouseout","mouseover"]);Fd("onMouseLeave",["mouseout","mouseover"]);Fd("onPointerEnter",["pointerout","pointerover"]);Fd("onPointerLeave",["pointerout","pointerover"]);iu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));iu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));iu("onBeforeInput",["compositionend","keypress","textInput","paste"]);iu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));iu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));iu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kh));function RA(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,RW(n,t,void 0,e),e.currentTarget=null}function zR(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;RA(a,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;RA(a,l,u),i=c}}}if(Cy)throw e=rS,Cy=!1,rS=null,e}function Or(e,t){var r=t[fS];r===void 0&&(r=t[fS]=new Set);var n=e+"__bubble";r.has(n)||(WR(t,e,2,!1),r.add(n))}function t1(e,t,r){var n=0;t&&(n|=4),WR(r,e,n,t)}var rv="_reactListening"+Math.random().toString(36).slice(2);function Em(e){if(!e[rv]){e[rv]=!0,QM.forEach(function(r){r!=="selectionchange"&&(DH.has(r)||t1(r,!1,e),t1(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[rv]||(t[rv]=!0,t1("selectionchange",!1,t))}}function WR(e,t,r,n){switch(CR(t)){case 1:var a=QW;break;case 4:a=JW;break;default:a=mk}r=a.bind(null,t,r,e),a=void 0,!tS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function r1(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=yc(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}hR(function(){var u=i,d=uk(r),f=[];e:{var m=qR.get(e);if(m!==void 0){var p=gk,v=e;switch(e){case"keypress":if(ny(r)===0)break e;case"keydown":case"keyup":p=hH;break;case"focusin":v="focus",p=Yw;break;case"focusout":v="blur",p=Yw;break;case"beforeblur":case"afterblur":p=Yw;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=SA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=tH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=gH;break;case LR:case FR:case BR:p=aH;break;case UR:p=yH;break;case"scroll":p=ZW;break;case"wheel":p=bH;break;case"copy":case"cut":case"paste":p=sH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=kA}var g=(t&4)!==0,b=!g&&e==="scroll",y=g?m!==null?m+"Capture":null:m;g=[];for(var w=u,x;w!==null;){x=w;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,y!==null&&(_=_m(w,y),_!=null&&g.push(Am(w,_,x)))),b)break;w=w.return}0<g.length&&(m=new p(m,v,null,r,d),f.push({event:m,listeners:g}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&r!==Z_&&(v=r.relatedTarget||r.fromElement)&&(yc(v)||v[lo]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=u,v=v?yc(v):null,v!==null&&(b=su(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(g=SA,_="onMouseLeave",y="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(g=kA,_="onPointerLeave",y="onPointerEnter",w="pointer"),b=p==null?m:Zu(p),x=v==null?m:Zu(v),m=new g(_,w+"leave",p,r,d),m.target=b,m.relatedTarget=x,_=null,yc(d)===u&&(g=new g(y,w+"enter",v,r,d),g.target=x,g.relatedTarget=b,_=g),b=_,p&&v)t:{for(g=p,y=v,w=0,x=g;x;x=_u(x))w++;for(x=0,_=y;_;_=_u(_))x++;for(;0<w-x;)g=_u(g),w--;for(;0<x-w;)y=_u(y),x--;for(;w--;){if(g===y||y!==null&&g===y.alternate)break t;g=_u(g),y=_u(y)}g=null}else g=null;p!==null&&$A(f,m,p,g,!1),v!==null&&b!==null&&$A(f,b,v,g,!0)}}e:{if(m=u?Zu(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=CH;else if(EA(m))if(IR)S=TH;else{S=AH;var k=EH}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=PH);if(S&&(S=S(e,u))){OR(f,S,r,d);break e}k&&k(e,m,u),e==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&G_(m,"number",m.value)}switch(k=u?Zu(u):window,e){case"focusin":(EA(k)||k.contentEditable==="true")&&(Qu=k,sS=u,sm=null);break;case"focusout":sm=sS=Qu=null;break;case"mousedown":oS=!0;break;case"contextmenu":case"mouseup":case"dragend":oS=!1,IA(f,r,d);break;case"selectionchange":if(MH)break;case"keydown":case"keyup":IA(f,r,d)}var C;if(yk)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Xu?PR(e,r)&&(j="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(j="onCompositionStart");j&&(AR&&r.locale!=="ko"&&(Xu||j!=="onCompositionStart"?j==="onCompositionEnd"&&Xu&&(C=ER()):(dl=d,pk="value"in dl?dl.value:dl.textContent,Xu=!0)),k=Oy(u,j),0<k.length&&(j=new jA(j,e,null,r,d),f.push({event:j,listeners:k}),C?j.data=C:(C=TR(r),C!==null&&(j.data=C)))),(C=_H?SH(e,r):jH(e,r))&&(u=Oy(u,"onBeforeInput"),0<u.length&&(d=new jA("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=C))}zR(f,t)})}function Am(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Oy(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=_m(e,r),i!=null&&n.unshift(Am(e,i,a)),i=_m(e,t),i!=null&&n.push(Am(e,i,a))),e=e.return}return n}function _u(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $A(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=_m(r,i),c!=null&&o.unshift(Am(r,c,l))):a||(c=_m(r,i),c!=null&&o.push(Am(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var LH=/\r\n?/g,FH=/\u0000|\uFFFD/g;function DA(e){return(typeof e=="string"?e:""+e).replace(LH,`
`).replace(FH,"")}function nv(e,t,r){if(t=DA(t),DA(e)!==t&&r)throw Error(Xe(425))}function Iy(){}var lS=null,cS=null;function uS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var dS=typeof setTimeout=="function"?setTimeout:void 0,BH=typeof clearTimeout=="function"?clearTimeout:void 0,LA=typeof Promise=="function"?Promise:void 0,UH=typeof queueMicrotask=="function"?queueMicrotask:typeof LA<"u"?function(e){return LA.resolve(null).then(e).catch(qH)}:dS;function qH(e){setTimeout(function(){throw e})}function n1(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),km(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);km(t)}function bl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function FA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var $f=Math.random().toString(36).slice(2),ls="__reactFiber$"+$f,Pm="__reactProps$"+$f,lo="__reactContainer$"+$f,fS="__reactEvents$"+$f,zH="__reactListeners$"+$f,WH="__reactHandles$"+$f;function yc(e){var t=e[ls];if(t)return t;for(var r=e.parentNode;r;){if(t=r[lo]||r[ls]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=FA(e);e!==null;){if(r=e[ls])return r;e=FA(e)}return t}e=r,r=e.parentNode}return null}function Vp(e){return e=e[ls]||e[lo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Xe(33))}function jx(e){return e[Pm]||null}var hS=[],ed=-1;function $l(e){return{current:e}}function Rr(e){0>ed||(e.current=hS[ed],hS[ed]=null,ed--)}function Nr(e,t){ed++,hS[ed]=e.current,e.current=t}var Al={},ea=$l(Al),ba=$l(!1),Fc=Al;function Bd(e,t){var r=e.type.contextTypes;if(!r)return Al;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function wa(e){return e=e.childContextTypes,e!=null}function My(){Rr(ba),Rr(ea)}function BA(e,t,r){if(ea.current!==Al)throw Error(Xe(168));Nr(ea,t),Nr(ba,r)}function HR(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(Xe(108,EW(e)||"Unknown",a));return Kr({},r,n)}function Ry(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Al,Fc=ea.current,Nr(ea,e),Nr(ba,ba.current),!0}function UA(e,t,r){var n=e.stateNode;if(!n)throw Error(Xe(169));r?(e=HR(e,t,Fc),n.__reactInternalMemoizedMergedChildContext=e,Rr(ba),Rr(ea),Nr(ea,e)):Rr(ba),Nr(ba,r)}var Gs=null,kx=!1,a1=!1;function VR(e){Gs===null?Gs=[e]:Gs.push(e)}function HH(e){kx=!0,VR(e)}function Dl(){if(!a1&&Gs!==null){a1=!0;var e=0,t=vr;try{var r=Gs;for(vr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Gs=null,kx=!1}catch(a){throw Gs!==null&&(Gs=Gs.slice(e+1)),vR(dk,Dl),a}finally{vr=t,a1=!1}}return null}var td=[],rd=0,$y=null,Dy=0,ii=[],si=0,Bc=null,Xs=1,Qs="";function ic(e,t){td[rd++]=Dy,td[rd++]=$y,$y=e,Dy=t}function KR(e,t,r){ii[si++]=Xs,ii[si++]=Qs,ii[si++]=Bc,Bc=e;var n=Xs;e=Qs;var a=32-Bi(n)-1;n&=~(1<<a),r+=1;var i=32-Bi(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Xs=1<<32-Bi(t)+a|r<<a|n,Qs=i+e}else Xs=1<<i|r<<a|n,Qs=e}function bk(e){e.return!==null&&(ic(e,1),KR(e,1,0))}function wk(e){for(;e===$y;)$y=td[--rd],td[rd]=null,Dy=td[--rd],td[rd]=null;for(;e===Bc;)Bc=ii[--si],ii[si]=null,Qs=ii[--si],ii[si]=null,Xs=ii[--si],ii[si]=null}var Ua=null,Ba=null,Dr=!1,Li=null;function GR(e,t){var r=ci(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function qA(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ua=e,Ba=bl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ua=e,Ba=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Bc!==null?{id:Xs,overflow:Qs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ci(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ua=e,Ba=null,!0):!1;default:return!1}}function mS(e){return(e.mode&1)!==0&&(e.flags&128)===0}function pS(e){if(Dr){var t=Ba;if(t){var r=t;if(!qA(e,t)){if(mS(e))throw Error(Xe(418));t=bl(r.nextSibling);var n=Ua;t&&qA(e,t)?GR(n,r):(e.flags=e.flags&-4097|2,Dr=!1,Ua=e)}}else{if(mS(e))throw Error(Xe(418));e.flags=e.flags&-4097|2,Dr=!1,Ua=e}}}function zA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ua=e}function av(e){if(e!==Ua)return!1;if(!Dr)return zA(e),Dr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!uS(e.type,e.memoizedProps)),t&&(t=Ba)){if(mS(e))throw YR(),Error(Xe(418));for(;t;)GR(e,t),t=bl(t.nextSibling)}if(zA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Xe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ba=bl(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ba=null}}else Ba=Ua?bl(e.stateNode.nextSibling):null;return!0}function YR(){for(var e=Ba;e;)e=bl(e.nextSibling)}function Ud(){Ba=Ua=null,Dr=!1}function _k(e){Li===null?Li=[e]:Li.push(e)}var VH=jo.ReactCurrentBatchConfig;function xh(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Xe(309));var n=r.stateNode}if(!n)throw Error(Xe(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Xe(284));if(!r._owner)throw Error(Xe(290,e))}return e}function iv(e,t){throw e=Object.prototype.toString.call(t),Error(Xe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function WA(e){var t=e._init;return t(e._payload)}function XR(e){function t(y,w){if(e){var x=y.deletions;x===null?(y.deletions=[w],y.flags|=16):x.push(w)}}function r(y,w){if(!e)return null;for(;w!==null;)t(y,w),w=w.sibling;return null}function n(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function a(y,w){return y=jl(y,w),y.index=0,y.sibling=null,y}function i(y,w,x){return y.index=x,e?(x=y.alternate,x!==null?(x=x.index,x<w?(y.flags|=2,w):x):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,w,x,_){return w===null||w.tag!==6?(w=d1(x,y.mode,_),w.return=y,w):(w=a(w,x),w.return=y,w)}function c(y,w,x,_){var S=x.type;return S===Yu?d(y,w,x.props.children,_,x.key):w!==null&&(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Qo&&WA(S)===w.type)?(_=a(w,x.props),_.ref=xh(y,w,x),_.return=y,_):(_=uy(x.type,x.key,x.props,null,y.mode,_),_.ref=xh(y,w,x),_.return=y,_)}function u(y,w,x,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=f1(x,y.mode,_),w.return=y,w):(w=a(w,x.children||[]),w.return=y,w)}function d(y,w,x,_,S){return w===null||w.tag!==7?(w=Mc(x,y.mode,_,S),w.return=y,w):(w=a(w,x),w.return=y,w)}function f(y,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=d1(""+w,y.mode,x),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Gg:return x=uy(w.type,w.key,w.props,null,y.mode,x),x.ref=xh(y,null,w),x.return=y,x;case Gu:return w=f1(w,y.mode,x),w.return=y,w;case Qo:var _=w._init;return f(y,_(w._payload),x)}if(Hh(w)||mh(w))return w=Mc(w,y.mode,x,null),w.return=y,w;iv(y,w)}return null}function m(y,w,x,_){var S=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:l(y,w,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Gg:return x.key===S?c(y,w,x,_):null;case Gu:return x.key===S?u(y,w,x,_):null;case Qo:return S=x._init,m(y,w,S(x._payload),_)}if(Hh(x)||mh(x))return S!==null?null:d(y,w,x,_,null);iv(y,x)}return null}function p(y,w,x,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(x)||null,l(w,y,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Gg:return y=y.get(_.key===null?x:_.key)||null,c(w,y,_,S);case Gu:return y=y.get(_.key===null?x:_.key)||null,u(w,y,_,S);case Qo:var k=_._init;return p(y,w,x,k(_._payload),S)}if(Hh(_)||mh(_))return y=y.get(x)||null,d(w,y,_,S,null);iv(w,_)}return null}function v(y,w,x,_){for(var S=null,k=null,C=w,j=w=0,N=null;C!==null&&j<x.length;j++){C.index>j?(N=C,C=null):N=C.sibling;var A=m(y,C,x[j],_);if(A===null){C===null&&(C=N);break}e&&C&&A.alternate===null&&t(y,C),w=i(A,w,j),k===null?S=A:k.sibling=A,k=A,C=N}if(j===x.length)return r(y,C),Dr&&ic(y,j),S;if(C===null){for(;j<x.length;j++)C=f(y,x[j],_),C!==null&&(w=i(C,w,j),k===null?S=C:k.sibling=C,k=C);return Dr&&ic(y,j),S}for(C=n(y,C);j<x.length;j++)N=p(C,y,j,x[j],_),N!==null&&(e&&N.alternate!==null&&C.delete(N.key===null?j:N.key),w=i(N,w,j),k===null?S=N:k.sibling=N,k=N);return e&&C.forEach(function(P){return t(y,P)}),Dr&&ic(y,j),S}function g(y,w,x,_){var S=mh(x);if(typeof S!="function")throw Error(Xe(150));if(x=S.call(x),x==null)throw Error(Xe(151));for(var k=S=null,C=w,j=w=0,N=null,A=x.next();C!==null&&!A.done;j++,A=x.next()){C.index>j?(N=C,C=null):N=C.sibling;var P=m(y,C,A.value,_);if(P===null){C===null&&(C=N);break}e&&C&&P.alternate===null&&t(y,C),w=i(P,w,j),k===null?S=P:k.sibling=P,k=P,C=N}if(A.done)return r(y,C),Dr&&ic(y,j),S;if(C===null){for(;!A.done;j++,A=x.next())A=f(y,A.value,_),A!==null&&(w=i(A,w,j),k===null?S=A:k.sibling=A,k=A);return Dr&&ic(y,j),S}for(C=n(y,C);!A.done;j++,A=x.next())A=p(C,y,j,A.value,_),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?j:A.key),w=i(A,w,j),k===null?S=A:k.sibling=A,k=A);return e&&C.forEach(function(T){return t(y,T)}),Dr&&ic(y,j),S}function b(y,w,x,_){if(typeof x=="object"&&x!==null&&x.type===Yu&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Gg:e:{for(var S=x.key,k=w;k!==null;){if(k.key===S){if(S=x.type,S===Yu){if(k.tag===7){r(y,k.sibling),w=a(k,x.props.children),w.return=y,y=w;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Qo&&WA(S)===k.type){r(y,k.sibling),w=a(k,x.props),w.ref=xh(y,k,x),w.return=y,y=w;break e}r(y,k);break}else t(y,k);k=k.sibling}x.type===Yu?(w=Mc(x.props.children,y.mode,_,x.key),w.return=y,y=w):(_=uy(x.type,x.key,x.props,null,y.mode,_),_.ref=xh(y,w,x),_.return=y,y=_)}return o(y);case Gu:e:{for(k=x.key;w!==null;){if(w.key===k)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){r(y,w.sibling),w=a(w,x.children||[]),w.return=y,y=w;break e}else{r(y,w);break}else t(y,w);w=w.sibling}w=f1(x,y.mode,_),w.return=y,y=w}return o(y);case Qo:return k=x._init,b(y,w,k(x._payload),_)}if(Hh(x))return v(y,w,x,_);if(mh(x))return g(y,w,x,_);iv(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(r(y,w.sibling),w=a(w,x),w.return=y,y=w):(r(y,w),w=d1(x,y.mode,_),w.return=y,y=w),o(y)):r(y,w)}return b}var qd=XR(!0),QR=XR(!1),Ly=$l(null),Fy=null,nd=null,Sk=null;function jk(){Sk=nd=Fy=null}function kk(e){var t=Ly.current;Rr(Ly),e._currentValue=t}function gS(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function gd(e,t){Fy=e,Sk=nd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(va=!0),e.firstContext=null)}function pi(e){var t=e._currentValue;if(Sk!==e)if(e={context:e,memoizedValue:t,next:null},nd===null){if(Fy===null)throw Error(Xe(308));nd=e,Fy.dependencies={lanes:0,firstContext:e}}else nd=nd.next=e;return t}var xc=null;function Nk(e){xc===null?xc=[e]:xc.push(e)}function JR(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Nk(t)):(r.next=a.next,a.next=r),t.interleaved=r,co(e,n)}function co(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Jo=!1;function Ck(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZR(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ro(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function wl(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ar&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,co(e,r)}return a=n.interleaved,a===null?(t.next=t,Nk(n)):(t.next=a.next,a.next=t),n.interleaved=t,co(e,r)}function ay(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,fk(e,r)}}function HA(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function By(e,t,r,n){var a=e.updateQueue;Jo=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,p=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,g=l;switch(m=t,p=r,g.tag){case 1:if(v=g.payload,typeof v=="function"){f=v.call(p,f,m);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,m=typeof v=="function"?v.call(p,f,m):v,m==null)break e;f=Kr({},f,m);break e;case 2:Jo=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);qc|=o,e.lanes=o,e.memoizedState=f}}function VA(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Xe(191,a));a.call(n)}}}var Kp={},gs=$l(Kp),Tm=$l(Kp),Om=$l(Kp);function bc(e){if(e===Kp)throw Error(Xe(174));return e}function Ek(e,t){switch(Nr(Om,t),Nr(Tm,e),Nr(gs,Kp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:X_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=X_(t,e)}Rr(gs),Nr(gs,t)}function zd(){Rr(gs),Rr(Tm),Rr(Om)}function e$(e){bc(Om.current);var t=bc(gs.current),r=X_(t,e.type);t!==r&&(Nr(Tm,e),Nr(gs,r))}function Ak(e){Tm.current===e&&(Rr(gs),Rr(Tm))}var Wr=$l(0);function Uy(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var i1=[];function Pk(){for(var e=0;e<i1.length;e++)i1[e]._workInProgressVersionPrimary=null;i1.length=0}var iy=jo.ReactCurrentDispatcher,s1=jo.ReactCurrentBatchConfig,Uc=0,Vr=null,xn=null,Pn=null,qy=!1,om=!1,Im=0,KH=0;function Gn(){throw Error(Xe(321))}function Tk(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Hi(e[r],t[r]))return!1;return!0}function Ok(e,t,r,n,a,i){if(Uc=i,Vr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,iy.current=e===null||e.memoizedState===null?QH:JH,e=r(n,a),om){i=0;do{if(om=!1,Im=0,25<=i)throw Error(Xe(301));i+=1,Pn=xn=null,t.updateQueue=null,iy.current=ZH,e=r(n,a)}while(om)}if(iy.current=zy,t=xn!==null&&xn.next!==null,Uc=0,Pn=xn=Vr=null,qy=!1,t)throw Error(Xe(300));return e}function Ik(){var e=Im!==0;return Im=0,e}function as(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Vr.memoizedState=Pn=e:Pn=Pn.next=e,Pn}function gi(){if(xn===null){var e=Vr.alternate;e=e!==null?e.memoizedState:null}else e=xn.next;var t=Pn===null?Vr.memoizedState:Pn.next;if(t!==null)Pn=t,xn=e;else{if(e===null)throw Error(Xe(310));xn=e,e={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},Pn===null?Vr.memoizedState=Pn=e:Pn=Pn.next=e}return Pn}function Mm(e,t){return typeof t=="function"?t(e):t}function o1(e){var t=gi(),r=t.queue;if(r===null)throw Error(Xe(311));r.lastRenderedReducer=e;var n=xn,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Uc&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Vr.lanes|=d,qc|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Hi(n,t.memoizedState)||(va=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Vr.lanes|=i,qc|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function l1(e){var t=gi(),r=t.queue;if(r===null)throw Error(Xe(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Hi(i,t.memoizedState)||(va=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function t$(){}function r$(e,t){var r=Vr,n=gi(),a=t(),i=!Hi(n.memoizedState,a);if(i&&(n.memoizedState=a,va=!0),n=n.queue,Mk(i$.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Pn!==null&&Pn.memoizedState.tag&1){if(r.flags|=2048,Rm(9,a$.bind(null,r,n,a,t),void 0,null),On===null)throw Error(Xe(349));Uc&30||n$(r,t,a)}return a}function n$(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Vr.updateQueue,t===null?(t={lastEffect:null,stores:null},Vr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function a$(e,t,r,n){t.value=r,t.getSnapshot=n,s$(t)&&o$(e)}function i$(e,t,r){return r(function(){s$(t)&&o$(e)})}function s$(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Hi(e,r)}catch{return!0}}function o$(e){var t=co(e,1);t!==null&&Ui(t,e,1,-1)}function KA(e){var t=as();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mm,lastRenderedState:e},t.queue=e,e=e.dispatch=XH.bind(null,Vr,e),[t.memoizedState,e]}function Rm(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Vr.updateQueue,t===null?(t={lastEffect:null,stores:null},Vr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function l$(){return gi().memoizedState}function sy(e,t,r,n){var a=as();Vr.flags|=e,a.memoizedState=Rm(1|t,r,void 0,n===void 0?null:n)}function Nx(e,t,r,n){var a=gi();n=n===void 0?null:n;var i=void 0;if(xn!==null){var o=xn.memoizedState;if(i=o.destroy,n!==null&&Tk(n,o.deps)){a.memoizedState=Rm(t,r,i,n);return}}Vr.flags|=e,a.memoizedState=Rm(1|t,r,i,n)}function GA(e,t){return sy(8390656,8,e,t)}function Mk(e,t){return Nx(2048,8,e,t)}function c$(e,t){return Nx(4,2,e,t)}function u$(e,t){return Nx(4,4,e,t)}function d$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function f$(e,t,r){return r=r!=null?r.concat([e]):null,Nx(4,4,d$.bind(null,t,e),r)}function Rk(){}function h$(e,t){var r=gi();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Tk(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function m$(e,t){var r=gi();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Tk(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function p$(e,t,r){return Uc&21?(Hi(r,t)||(r=bR(),Vr.lanes|=r,qc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,va=!0),e.memoizedState=r)}function GH(e,t){var r=vr;vr=r!==0&&4>r?r:4,e(!0);var n=s1.transition;s1.transition={};try{e(!1),t()}finally{vr=r,s1.transition=n}}function g$(){return gi().memoizedState}function YH(e,t,r){var n=Sl(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},v$(e))y$(t,r);else if(r=JR(e,t,r,n),r!==null){var a=ca();Ui(r,e,n,a),x$(r,t,n)}}function XH(e,t,r){var n=Sl(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(v$(e))y$(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Hi(l,o)){var c=t.interleaved;c===null?(a.next=a,Nk(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=JR(e,t,a,n),r!==null&&(a=ca(),Ui(r,e,n,a),x$(r,t,n))}}function v$(e){var t=e.alternate;return e===Vr||t!==null&&t===Vr}function y$(e,t){om=qy=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function x$(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,fk(e,r)}}var zy={readContext:pi,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},QH={readContext:pi,useCallback:function(e,t){return as().memoizedState=[e,t===void 0?null:t],e},useContext:pi,useEffect:GA,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,sy(4194308,4,d$.bind(null,t,e),r)},useLayoutEffect:function(e,t){return sy(4194308,4,e,t)},useInsertionEffect:function(e,t){return sy(4,2,e,t)},useMemo:function(e,t){var r=as();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=as();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=YH.bind(null,Vr,e),[n.memoizedState,e]},useRef:function(e){var t=as();return e={current:e},t.memoizedState=e},useState:KA,useDebugValue:Rk,useDeferredValue:function(e){return as().memoizedState=e},useTransition:function(){var e=KA(!1),t=e[0];return e=GH.bind(null,e[1]),as().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Vr,a=as();if(Dr){if(r===void 0)throw Error(Xe(407));r=r()}else{if(r=t(),On===null)throw Error(Xe(349));Uc&30||n$(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,GA(i$.bind(null,n,i,e),[e]),n.flags|=2048,Rm(9,a$.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=as(),t=On.identifierPrefix;if(Dr){var r=Qs,n=Xs;r=(n&~(1<<32-Bi(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Im++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=KH++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},JH={readContext:pi,useCallback:h$,useContext:pi,useEffect:Mk,useImperativeHandle:f$,useInsertionEffect:c$,useLayoutEffect:u$,useMemo:m$,useReducer:o1,useRef:l$,useState:function(){return o1(Mm)},useDebugValue:Rk,useDeferredValue:function(e){var t=gi();return p$(t,xn.memoizedState,e)},useTransition:function(){var e=o1(Mm)[0],t=gi().memoizedState;return[e,t]},useMutableSource:t$,useSyncExternalStore:r$,useId:g$,unstable_isNewReconciler:!1},ZH={readContext:pi,useCallback:h$,useContext:pi,useEffect:Mk,useImperativeHandle:f$,useInsertionEffect:c$,useLayoutEffect:u$,useMemo:m$,useReducer:l1,useRef:l$,useState:function(){return l1(Mm)},useDebugValue:Rk,useDeferredValue:function(e){var t=gi();return xn===null?t.memoizedState=e:p$(t,xn.memoizedState,e)},useTransition:function(){var e=l1(Mm)[0],t=gi().memoizedState;return[e,t]},useMutableSource:t$,useSyncExternalStore:r$,useId:g$,unstable_isNewReconciler:!1};function Pi(e,t){if(e&&e.defaultProps){t=Kr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function vS(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Kr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Cx={isMounted:function(e){return(e=e._reactInternals)?su(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ca(),a=Sl(e),i=ro(n,a);i.payload=t,r!=null&&(i.callback=r),t=wl(e,i,a),t!==null&&(Ui(t,e,a,n),ay(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ca(),a=Sl(e),i=ro(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=wl(e,i,a),t!==null&&(Ui(t,e,a,n),ay(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ca(),n=Sl(e),a=ro(r,n);a.tag=2,t!=null&&(a.callback=t),t=wl(e,a,n),t!==null&&(Ui(t,e,n,r),ay(t,e,n))}};function YA(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Cm(r,n)||!Cm(a,i):!0}function b$(e,t,r){var n=!1,a=Al,i=t.contextType;return typeof i=="object"&&i!==null?i=pi(i):(a=wa(t)?Fc:ea.current,n=t.contextTypes,i=(n=n!=null)?Bd(e,a):Al),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Cx,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function XA(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Cx.enqueueReplaceState(t,t.state,null)}function yS(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Ck(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=pi(i):(i=wa(t)?Fc:ea.current,a.context=Bd(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(vS(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Cx.enqueueReplaceState(a,a.state,null),By(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Wd(e,t){try{var r="",n=t;do r+=CW(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function c1(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function xS(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var eV=typeof WeakMap=="function"?WeakMap:Map;function w$(e,t,r){r=ro(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Hy||(Hy=!0,AS=n),xS(e,t)},r}function _$(e,t,r){r=ro(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){xS(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){xS(e,t),typeof n!="function"&&(_l===null?_l=new Set([this]):_l.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function QA(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new eV;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=mV.bind(null,e,t,r),t.then(e,e))}function JA(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ZA(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ro(-1,1),t.tag=2,wl(r,t,1))),r.lanes|=1),e)}var tV=jo.ReactCurrentOwner,va=!1;function ra(e,t,r,n){t.child=e===null?QR(t,null,r,n):qd(t,e.child,r,n)}function eP(e,t,r,n,a){r=r.render;var i=t.ref;return gd(t,a),n=Ok(e,t,r,n,i,a),r=Ik(),e!==null&&!va?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,uo(e,t,a)):(Dr&&r&&bk(t),t.flags|=1,ra(e,t,n,a),t.child)}function tP(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!zk(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,S$(e,t,i,n,a)):(e=uy(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Cm,r(o,n)&&e.ref===t.ref)return uo(e,t,a)}return t.flags|=1,e=jl(i,n),e.ref=t.ref,e.return=t,t.child=e}function S$(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Cm(i,n)&&e.ref===t.ref)if(va=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(va=!0);else return t.lanes=e.lanes,uo(e,t,a)}return bS(e,t,r,n,a)}function j$(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nr(id,Ta),Ta|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Nr(id,Ta),Ta|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Nr(id,Ta),Ta|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Nr(id,Ta),Ta|=n;return ra(e,t,a,r),t.child}function k$(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function bS(e,t,r,n,a){var i=wa(r)?Fc:ea.current;return i=Bd(t,i),gd(t,a),r=Ok(e,t,r,n,i,a),n=Ik(),e!==null&&!va?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,uo(e,t,a)):(Dr&&n&&bk(t),t.flags|=1,ra(e,t,r,a),t.child)}function rP(e,t,r,n,a){if(wa(r)){var i=!0;Ry(t)}else i=!1;if(gd(t,a),t.stateNode===null)oy(e,t),b$(t,r,n),yS(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=pi(u):(u=wa(r)?Fc:ea.current,u=Bd(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&XA(t,o,n,u),Jo=!1;var m=t.memoizedState;o.state=m,By(t,n,o,a),c=t.memoizedState,l!==n||m!==c||ba.current||Jo?(typeof d=="function"&&(vS(t,r,d,n),c=t.memoizedState),(l=Jo||YA(t,r,l,n,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,ZR(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Pi(t.type,l),o.props=u,f=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=pi(c):(c=wa(r)?Fc:ea.current,c=Bd(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&XA(t,o,n,c),Jo=!1,m=t.memoizedState,o.state=m,By(t,n,o,a);var v=t.memoizedState;l!==f||m!==v||ba.current||Jo?(typeof p=="function"&&(vS(t,r,p,n),v=t.memoizedState),(u=Jo||YA(t,r,u,n,m,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return wS(e,t,r,n,i,a)}function wS(e,t,r,n,a,i){k$(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&UA(t,r,!1),uo(e,t,i);n=t.stateNode,tV.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=qd(t,e.child,null,i),t.child=qd(t,null,l,i)):ra(e,t,l,i),t.memoizedState=n.state,a&&UA(t,r,!0),t.child}function N$(e){var t=e.stateNode;t.pendingContext?BA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&BA(e,t.context,!1),Ek(e,t.containerInfo)}function nP(e,t,r,n,a){return Ud(),_k(a),t.flags|=256,ra(e,t,r,n),t.child}var _S={dehydrated:null,treeContext:null,retryLane:0};function SS(e){return{baseLanes:e,cachePool:null,transitions:null}}function C$(e,t,r){var n=t.pendingProps,a=Wr.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Nr(Wr,a&1),e===null)return pS(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Px(o,n,0,null),e=Mc(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=SS(r),t.memoizedState=_S,e):$k(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return rV(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=jl(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=jl(l,i):(i=Mc(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?SS(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=_S,n}return i=e.child,e=i.sibling,n=jl(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function $k(e,t){return t=Px({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function sv(e,t,r,n){return n!==null&&_k(n),qd(t,e.child,null,r),e=$k(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rV(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=c1(Error(Xe(422))),sv(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Px({mode:"visible",children:n.children},a,0,null),i=Mc(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&qd(t,e.child,null,o),t.child.memoizedState=SS(o),t.memoizedState=_S,i);if(!(t.mode&1))return sv(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(Xe(419)),n=c1(i,n,void 0),sv(e,t,o,n)}if(l=(o&e.childLanes)!==0,va||l){if(n=On,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,co(e,a),Ui(n,e,a,-1))}return qk(),n=c1(Error(Xe(421))),sv(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=pV.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Ba=bl(a.nextSibling),Ua=t,Dr=!0,Li=null,e!==null&&(ii[si++]=Xs,ii[si++]=Qs,ii[si++]=Bc,Xs=e.id,Qs=e.overflow,Bc=t),t=$k(t,n.children),t.flags|=4096,t)}function aP(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),gS(e.return,t,r)}function u1(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function E$(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(ra(e,t,n.children,r),n=Wr.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&aP(e,r,t);else if(e.tag===19)aP(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Nr(Wr,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Uy(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),u1(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Uy(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}u1(t,!0,r,null,i);break;case"together":u1(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function oy(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function uo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),qc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Xe(153));if(t.child!==null){for(e=t.child,r=jl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=jl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function nV(e,t,r){switch(t.tag){case 3:N$(t),Ud();break;case 5:e$(t);break;case 1:wa(t.type)&&Ry(t);break;case 4:Ek(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Nr(Ly,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Nr(Wr,Wr.current&1),t.flags|=128,null):r&t.child.childLanes?C$(e,t,r):(Nr(Wr,Wr.current&1),e=uo(e,t,r),e!==null?e.sibling:null);Nr(Wr,Wr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return E$(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Nr(Wr,Wr.current),n)break;return null;case 22:case 23:return t.lanes=0,j$(e,t,r)}return uo(e,t,r)}var A$,jS,P$,T$;A$=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};jS=function(){};P$=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,bc(gs.current);var i=null;switch(r){case"input":a=V_(e,a),n=V_(e,n),i=[];break;case"select":a=Kr({},a,{value:void 0}),n=Kr({},n,{value:void 0}),i=[];break;case"textarea":a=Y_(e,a),n=Y_(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Iy)}Q_(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(bm.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(bm.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Or("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};T$=function(e,t,r,n){r!==n&&(t.flags|=4)};function bh(e,t){if(!Dr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Yn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function aV(e,t,r){var n=t.pendingProps;switch(wk(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(t),null;case 1:return wa(t.type)&&My(),Yn(t),null;case 3:return n=t.stateNode,zd(),Rr(ba),Rr(ea),Pk(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(av(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Li!==null&&(OS(Li),Li=null))),jS(e,t),Yn(t),null;case 5:Ak(t);var a=bc(Om.current);if(r=t.type,e!==null&&t.stateNode!=null)P$(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Xe(166));return Yn(t),null}if(e=bc(gs.current),av(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ls]=t,n[Pm]=i,e=(t.mode&1)!==0,r){case"dialog":Or("cancel",n),Or("close",n);break;case"iframe":case"object":case"embed":Or("load",n);break;case"video":case"audio":for(a=0;a<Kh.length;a++)Or(Kh[a],n);break;case"source":Or("error",n);break;case"img":case"image":case"link":Or("error",n),Or("load",n);break;case"details":Or("toggle",n);break;case"input":hA(n,i),Or("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Or("invalid",n);break;case"textarea":pA(n,i),Or("invalid",n)}Q_(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&nv(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&nv(n.textContent,l,e),a=["children",""+l]):bm.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Or("scroll",n)}switch(r){case"input":Yg(n),mA(n,i,!0);break;case"textarea":Yg(n),gA(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Iy)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=iR(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ls]=t,e[Pm]=n,A$(e,t,!1,!1),t.stateNode=e;e:{switch(o=J_(r,n),r){case"dialog":Or("cancel",e),Or("close",e),a=n;break;case"iframe":case"object":case"embed":Or("load",e),a=n;break;case"video":case"audio":for(a=0;a<Kh.length;a++)Or(Kh[a],e);a=n;break;case"source":Or("error",e),a=n;break;case"img":case"image":case"link":Or("error",e),Or("load",e),a=n;break;case"details":Or("toggle",e),a=n;break;case"input":hA(e,n),a=V_(e,n),Or("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Kr({},n,{value:void 0}),Or("invalid",e);break;case"textarea":pA(e,n),a=Y_(e,n),Or("invalid",e);break;default:a=n}Q_(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?lR(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&sR(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&wm(e,c):typeof c=="number"&&wm(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bm.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Or("scroll",e):c!=null&&sk(e,i,c,o))}switch(r){case"input":Yg(e),mA(e,n,!1);break;case"textarea":Yg(e),gA(e);break;case"option":n.value!=null&&e.setAttribute("value",""+El(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?fd(e,!!n.multiple,i,!1):n.defaultValue!=null&&fd(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Iy)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Yn(t),null;case 6:if(e&&t.stateNode!=null)T$(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Xe(166));if(r=bc(Om.current),bc(gs.current),av(t)){if(n=t.stateNode,r=t.memoizedProps,n[ls]=t,(i=n.nodeValue!==r)&&(e=Ua,e!==null))switch(e.tag){case 3:nv(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&nv(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ls]=t,t.stateNode=n}return Yn(t),null;case 13:if(Rr(Wr),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Dr&&Ba!==null&&t.mode&1&&!(t.flags&128))YR(),Ud(),t.flags|=98560,i=!1;else if(i=av(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(Xe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Xe(317));i[ls]=t}else Ud(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Yn(t),i=!1}else Li!==null&&(OS(Li),Li=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Wr.current&1?_n===0&&(_n=3):qk())),t.updateQueue!==null&&(t.flags|=4),Yn(t),null);case 4:return zd(),jS(e,t),e===null&&Em(t.stateNode.containerInfo),Yn(t),null;case 10:return kk(t.type._context),Yn(t),null;case 17:return wa(t.type)&&My(),Yn(t),null;case 19:if(Rr(Wr),i=t.memoizedState,i===null)return Yn(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)bh(i,!1);else{if(_n!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Uy(e),o!==null){for(t.flags|=128,bh(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Nr(Wr,Wr.current&1|2),t.child}e=e.sibling}i.tail!==null&&an()>Hd&&(t.flags|=128,n=!0,bh(i,!1),t.lanes=4194304)}else{if(!n)if(e=Uy(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),bh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Dr)return Yn(t),null}else 2*an()-i.renderingStartTime>Hd&&r!==1073741824&&(t.flags|=128,n=!0,bh(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=an(),t.sibling=null,r=Wr.current,Nr(Wr,n?r&1|2:r&1),t):(Yn(t),null);case 22:case 23:return Uk(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ta&1073741824&&(Yn(t),t.subtreeFlags&6&&(t.flags|=8192)):Yn(t),null;case 24:return null;case 25:return null}throw Error(Xe(156,t.tag))}function iV(e,t){switch(wk(t),t.tag){case 1:return wa(t.type)&&My(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zd(),Rr(ba),Rr(ea),Pk(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ak(t),null;case 13:if(Rr(Wr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Xe(340));Ud()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Rr(Wr),null;case 4:return zd(),null;case 10:return kk(t.type._context),null;case 22:case 23:return Uk(),null;case 24:return null;default:return null}}var ov=!1,Jn=!1,sV=typeof WeakSet=="function"?WeakSet:Set,it=null;function ad(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Jr(e,t,n)}else r.current=null}function kS(e,t,r){try{r()}catch(n){Jr(e,t,n)}}var iP=!1;function oV(e,t){if(lS=Py,e=$R(),xk(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var p;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===e)break t;if(m===r&&++u===a&&(l=o),m===i&&++d===n&&(c=o),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(cS={focusedElem:e,selectionRange:r},Py=!1,it=t;it!==null;)if(t=it,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,it=e;else for(;it!==null;){t=it;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,b=v.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Pi(t.type,g),b);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Xe(163))}}catch(_){Jr(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,it=e;break}it=t.return}return v=iP,iP=!1,v}function lm(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&kS(t,r,i)}a=a.next}while(a!==n)}}function Ex(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function NS(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function O$(e){var t=e.alternate;t!==null&&(e.alternate=null,O$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ls],delete t[Pm],delete t[fS],delete t[zH],delete t[WH])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function I$(e){return e.tag===5||e.tag===3||e.tag===4}function sP(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||I$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function CS(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Iy));else if(n!==4&&(e=e.child,e!==null))for(CS(e,t,r),e=e.sibling;e!==null;)CS(e,t,r),e=e.sibling}function ES(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(ES(e,t,r),e=e.sibling;e!==null;)ES(e,t,r),e=e.sibling}var Bn=null,Ri=!1;function Uo(e,t,r){for(r=r.child;r!==null;)M$(e,t,r),r=r.sibling}function M$(e,t,r){if(ps&&typeof ps.onCommitFiberUnmount=="function")try{ps.onCommitFiberUnmount(bx,r)}catch{}switch(r.tag){case 5:Jn||ad(r,t);case 6:var n=Bn,a=Ri;Bn=null,Uo(e,t,r),Bn=n,Ri=a,Bn!==null&&(Ri?(e=Bn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Bn.removeChild(r.stateNode));break;case 18:Bn!==null&&(Ri?(e=Bn,r=r.stateNode,e.nodeType===8?n1(e.parentNode,r):e.nodeType===1&&n1(e,r),km(e)):n1(Bn,r.stateNode));break;case 4:n=Bn,a=Ri,Bn=r.stateNode.containerInfo,Ri=!0,Uo(e,t,r),Bn=n,Ri=a;break;case 0:case 11:case 14:case 15:if(!Jn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&kS(r,t,o),a=a.next}while(a!==n)}Uo(e,t,r);break;case 1:if(!Jn&&(ad(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Jr(r,t,l)}Uo(e,t,r);break;case 21:Uo(e,t,r);break;case 22:r.mode&1?(Jn=(n=Jn)||r.memoizedState!==null,Uo(e,t,r),Jn=n):Uo(e,t,r);break;default:Uo(e,t,r)}}function oP(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new sV),t.forEach(function(n){var a=gV.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function ki(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Bn=l.stateNode,Ri=!1;break e;case 3:Bn=l.stateNode.containerInfo,Ri=!0;break e;case 4:Bn=l.stateNode.containerInfo,Ri=!0;break e}l=l.return}if(Bn===null)throw Error(Xe(160));M$(i,o,a),Bn=null,Ri=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Jr(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)R$(t,e),t=t.sibling}function R$(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ki(t,e),ns(e),n&4){try{lm(3,e,e.return),Ex(3,e)}catch(g){Jr(e,e.return,g)}try{lm(5,e,e.return)}catch(g){Jr(e,e.return,g)}}break;case 1:ki(t,e),ns(e),n&512&&r!==null&&ad(r,r.return);break;case 5:if(ki(t,e),ns(e),n&512&&r!==null&&ad(r,r.return),e.flags&32){var a=e.stateNode;try{wm(a,"")}catch(g){Jr(e,e.return,g)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&nR(a,i),J_(l,o);var u=J_(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?lR(a,f):d==="dangerouslySetInnerHTML"?sR(a,f):d==="children"?wm(a,f):sk(a,d,f,u)}switch(l){case"input":K_(a,i);break;case"textarea":aR(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?fd(a,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?fd(a,!!i.multiple,i.defaultValue,!0):fd(a,!!i.multiple,i.multiple?[]:"",!1))}a[Pm]=i}catch(g){Jr(e,e.return,g)}}break;case 6:if(ki(t,e),ns(e),n&4){if(e.stateNode===null)throw Error(Xe(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Jr(e,e.return,g)}}break;case 3:if(ki(t,e),ns(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{km(t.containerInfo)}catch(g){Jr(e,e.return,g)}break;case 4:ki(t,e),ns(e);break;case 13:ki(t,e),ns(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Fk=an())),n&4&&oP(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Jn=(u=Jn)||d,ki(t,e),Jn=u):ki(t,e),ns(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(it=e,d=e.child;d!==null;){for(f=it=d;it!==null;){switch(m=it,p=m.child,m.tag){case 0:case 11:case 14:case 15:lm(4,m,m.return);break;case 1:ad(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){Jr(n,r,g)}}break;case 5:ad(m,m.return);break;case 22:if(m.memoizedState!==null){cP(f);continue}}p!==null?(p.return=m,it=p):cP(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=oR("display",o))}catch(g){Jr(e,e.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Jr(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ki(t,e),ns(e),n&4&&oP(e);break;case 21:break;default:ki(t,e),ns(e)}}function ns(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(I$(r)){var n=r;break e}r=r.return}throw Error(Xe(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(wm(a,""),n.flags&=-33);var i=sP(e);ES(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=sP(e);CS(e,l,o);break;default:throw Error(Xe(161))}}catch(c){Jr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lV(e,t,r){it=e,$$(e)}function $$(e,t,r){for(var n=(e.mode&1)!==0;it!==null;){var a=it,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||ov;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Jn;l=ov;var u=Jn;if(ov=o,(Jn=c)&&!u)for(it=a;it!==null;)o=it,c=o.child,o.tag===22&&o.memoizedState!==null?uP(a):c!==null?(c.return=o,it=c):uP(a);for(;i!==null;)it=i,$$(i),i=i.sibling;it=a,ov=l,Jn=u}lP(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,it=i):lP(e)}}function lP(e){for(;it!==null;){var t=it;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Jn||Ex(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Jn)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Pi(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&VA(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}VA(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&km(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Xe(163))}Jn||t.flags&512&&NS(t)}catch(m){Jr(t,t.return,m)}}if(t===e){it=null;break}if(r=t.sibling,r!==null){r.return=t.return,it=r;break}it=t.return}}function cP(e){for(;it!==null;){var t=it;if(t===e){it=null;break}var r=t.sibling;if(r!==null){r.return=t.return,it=r;break}it=t.return}}function uP(e){for(;it!==null;){var t=it;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ex(4,t)}catch(c){Jr(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Jr(t,a,c)}}var i=t.return;try{NS(t)}catch(c){Jr(t,i,c)}break;case 5:var o=t.return;try{NS(t)}catch(c){Jr(t,o,c)}}}catch(c){Jr(t,t.return,c)}if(t===e){it=null;break}var l=t.sibling;if(l!==null){l.return=t.return,it=l;break}it=t.return}}var cV=Math.ceil,Wy=jo.ReactCurrentDispatcher,Dk=jo.ReactCurrentOwner,fi=jo.ReactCurrentBatchConfig,ar=0,On=null,hn=null,Un=0,Ta=0,id=$l(0),_n=0,$m=null,qc=0,Ax=0,Lk=0,cm=null,ma=null,Fk=0,Hd=1/0,Hs=null,Hy=!1,AS=null,_l=null,lv=!1,fl=null,Vy=0,um=0,PS=null,ly=-1,cy=0;function ca(){return ar&6?an():ly!==-1?ly:ly=an()}function Sl(e){return e.mode&1?ar&2&&Un!==0?Un&-Un:VH.transition!==null?(cy===0&&(cy=bR()),cy):(e=vr,e!==0||(e=window.event,e=e===void 0?16:CR(e.type)),e):1}function Ui(e,t,r,n){if(50<um)throw um=0,PS=null,Error(Xe(185));Wp(e,r,n),(!(ar&2)||e!==On)&&(e===On&&(!(ar&2)&&(Ax|=r),_n===4&&rl(e,Un)),_a(e,n),r===1&&ar===0&&!(t.mode&1)&&(Hd=an()+500,kx&&Dl()))}function _a(e,t){var r=e.callbackNode;VW(e,t);var n=Ay(e,e===On?Un:0);if(n===0)r!==null&&xA(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&xA(r),t===1)e.tag===0?HH(dP.bind(null,e)):VR(dP.bind(null,e)),UH(function(){!(ar&6)&&Dl()}),r=null;else{switch(wR(n)){case 1:r=dk;break;case 4:r=yR;break;case 16:r=Ey;break;case 536870912:r=xR;break;default:r=Ey}r=W$(r,D$.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function D$(e,t){if(ly=-1,cy=0,ar&6)throw Error(Xe(327));var r=e.callbackNode;if(vd()&&e.callbackNode!==r)return null;var n=Ay(e,e===On?Un:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ky(e,n);else{t=n;var a=ar;ar|=2;var i=F$();(On!==e||Un!==t)&&(Hs=null,Hd=an()+500,Ic(e,t));do try{fV();break}catch(l){L$(e,l)}while(!0);jk(),Wy.current=i,ar=a,hn!==null?t=0:(On=null,Un=0,t=_n)}if(t!==0){if(t===2&&(a=nS(e),a!==0&&(n=a,t=TS(e,a))),t===1)throw r=$m,Ic(e,0),rl(e,n),_a(e,an()),r;if(t===6)rl(e,n);else{if(a=e.current.alternate,!(n&30)&&!uV(a)&&(t=Ky(e,n),t===2&&(i=nS(e),i!==0&&(n=i,t=TS(e,i))),t===1))throw r=$m,Ic(e,0),rl(e,n),_a(e,an()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(Xe(345));case 2:sc(e,ma,Hs);break;case 3:if(rl(e,n),(n&130023424)===n&&(t=Fk+500-an(),10<t)){if(Ay(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){ca(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=dS(sc.bind(null,e,ma,Hs),t);break}sc(e,ma,Hs);break;case 4:if(rl(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Bi(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=an()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*cV(n/1960))-n,10<n){e.timeoutHandle=dS(sc.bind(null,e,ma,Hs),n);break}sc(e,ma,Hs);break;case 5:sc(e,ma,Hs);break;default:throw Error(Xe(329))}}}return _a(e,an()),e.callbackNode===r?D$.bind(null,e):null}function TS(e,t){var r=cm;return e.current.memoizedState.isDehydrated&&(Ic(e,t).flags|=256),e=Ky(e,t),e!==2&&(t=ma,ma=r,t!==null&&OS(t)),e}function OS(e){ma===null?ma=e:ma.push.apply(ma,e)}function uV(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Hi(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rl(e,t){for(t&=~Lk,t&=~Ax,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Bi(t),n=1<<r;e[r]=-1,t&=~n}}function dP(e){if(ar&6)throw Error(Xe(327));vd();var t=Ay(e,0);if(!(t&1))return _a(e,an()),null;var r=Ky(e,t);if(e.tag!==0&&r===2){var n=nS(e);n!==0&&(t=n,r=TS(e,n))}if(r===1)throw r=$m,Ic(e,0),rl(e,t),_a(e,an()),r;if(r===6)throw Error(Xe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sc(e,ma,Hs),_a(e,an()),null}function Bk(e,t){var r=ar;ar|=1;try{return e(t)}finally{ar=r,ar===0&&(Hd=an()+500,kx&&Dl())}}function zc(e){fl!==null&&fl.tag===0&&!(ar&6)&&vd();var t=ar;ar|=1;var r=fi.transition,n=vr;try{if(fi.transition=null,vr=1,e)return e()}finally{vr=n,fi.transition=r,ar=t,!(ar&6)&&Dl()}}function Uk(){Ta=id.current,Rr(id)}function Ic(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,BH(r)),hn!==null)for(r=hn.return;r!==null;){var n=r;switch(wk(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&My();break;case 3:zd(),Rr(ba),Rr(ea),Pk();break;case 5:Ak(n);break;case 4:zd();break;case 13:Rr(Wr);break;case 19:Rr(Wr);break;case 10:kk(n.type._context);break;case 22:case 23:Uk()}r=r.return}if(On=e,hn=e=jl(e.current,null),Un=Ta=t,_n=0,$m=null,Lk=Ax=qc=0,ma=cm=null,xc!==null){for(t=0;t<xc.length;t++)if(r=xc[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}xc=null}return e}function L$(e,t){do{var r=hn;try{if(jk(),iy.current=zy,qy){for(var n=Vr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}qy=!1}if(Uc=0,Pn=xn=Vr=null,om=!1,Im=0,Dk.current=null,r===null||r.return===null){_n=1,$m=t,hn=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Un,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=JA(o);if(p!==null){p.flags&=-257,ZA(p,o,l,i,t),p.mode&1&&QA(i,u,t),t=p,c=u;var v=t.updateQueue;if(v===null){var g=new Set;g.add(c),t.updateQueue=g}else v.add(c);break e}else{if(!(t&1)){QA(i,u,t),qk();break e}c=Error(Xe(426))}}else if(Dr&&l.mode&1){var b=JA(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),ZA(b,o,l,i,t),_k(Wd(c,l));break e}}i=c=Wd(c,l),_n!==4&&(_n=2),cm===null?cm=[i]:cm.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=w$(i,c,t);HA(i,y);break e;case 1:l=c;var w=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(_l===null||!_l.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=_$(i,l,t);HA(i,_);break e}}i=i.return}while(i!==null)}U$(r)}catch(S){t=S,hn===r&&r!==null&&(hn=r=r.return);continue}break}while(!0)}function F$(){var e=Wy.current;return Wy.current=zy,e===null?zy:e}function qk(){(_n===0||_n===3||_n===2)&&(_n=4),On===null||!(qc&268435455)&&!(Ax&268435455)||rl(On,Un)}function Ky(e,t){var r=ar;ar|=2;var n=F$();(On!==e||Un!==t)&&(Hs=null,Ic(e,t));do try{dV();break}catch(a){L$(e,a)}while(!0);if(jk(),ar=r,Wy.current=n,hn!==null)throw Error(Xe(261));return On=null,Un=0,_n}function dV(){for(;hn!==null;)B$(hn)}function fV(){for(;hn!==null&&!DW();)B$(hn)}function B$(e){var t=z$(e.alternate,e,Ta);e.memoizedProps=e.pendingProps,t===null?U$(e):hn=t,Dk.current=null}function U$(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=iV(r,t),r!==null){r.flags&=32767,hn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_n=6,hn=null;return}}else if(r=aV(r,t,Ta),r!==null){hn=r;return}if(t=t.sibling,t!==null){hn=t;return}hn=t=e}while(t!==null);_n===0&&(_n=5)}function sc(e,t,r){var n=vr,a=fi.transition;try{fi.transition=null,vr=1,hV(e,t,r,n)}finally{fi.transition=a,vr=n}return null}function hV(e,t,r,n){do vd();while(fl!==null);if(ar&6)throw Error(Xe(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Xe(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(KW(e,i),e===On&&(hn=On=null,Un=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||lv||(lv=!0,W$(Ey,function(){return vd(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=fi.transition,fi.transition=null;var o=vr;vr=1;var l=ar;ar|=4,Dk.current=null,oV(e,r),R$(r,e),IH(cS),Py=!!lS,cS=lS=null,e.current=r,lV(r),LW(),ar=l,vr=o,fi.transition=i}else e.current=r;if(lv&&(lv=!1,fl=e,Vy=a),i=e.pendingLanes,i===0&&(_l=null),UW(r.stateNode),_a(e,an()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Hy)throw Hy=!1,e=AS,AS=null,e;return Vy&1&&e.tag!==0&&vd(),i=e.pendingLanes,i&1?e===PS?um++:(um=0,PS=e):um=0,Dl(),null}function vd(){if(fl!==null){var e=wR(Vy),t=fi.transition,r=vr;try{if(fi.transition=null,vr=16>e?16:e,fl===null)var n=!1;else{if(e=fl,fl=null,Vy=0,ar&6)throw Error(Xe(331));var a=ar;for(ar|=4,it=e.current;it!==null;){var i=it,o=i.child;if(it.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(it=u;it!==null;){var d=it;switch(d.tag){case 0:case 11:case 15:lm(8,d,i)}var f=d.child;if(f!==null)f.return=d,it=f;else for(;it!==null;){d=it;var m=d.sibling,p=d.return;if(O$(d),d===u){it=null;break}if(m!==null){m.return=p,it=m;break}it=p}}}var v=i.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}it=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,it=o;else e:for(;it!==null;){if(i=it,i.flags&2048)switch(i.tag){case 0:case 11:case 15:lm(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,it=y;break e}it=i.return}}var w=e.current;for(it=w;it!==null;){o=it;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,it=x;else e:for(o=w;it!==null;){if(l=it,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ex(9,l)}}catch(S){Jr(l,l.return,S)}if(l===o){it=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,it=_;break e}it=l.return}}if(ar=a,Dl(),ps&&typeof ps.onPostCommitFiberRoot=="function")try{ps.onPostCommitFiberRoot(bx,e)}catch{}n=!0}return n}finally{vr=r,fi.transition=t}}return!1}function fP(e,t,r){t=Wd(r,t),t=w$(e,t,1),e=wl(e,t,1),t=ca(),e!==null&&(Wp(e,1,t),_a(e,t))}function Jr(e,t,r){if(e.tag===3)fP(e,e,r);else for(;t!==null;){if(t.tag===3){fP(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(_l===null||!_l.has(n))){e=Wd(r,e),e=_$(t,e,1),t=wl(t,e,1),e=ca(),t!==null&&(Wp(t,1,e),_a(t,e));break}}t=t.return}}function mV(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ca(),e.pingedLanes|=e.suspendedLanes&r,On===e&&(Un&r)===r&&(_n===4||_n===3&&(Un&130023424)===Un&&500>an()-Fk?Ic(e,0):Lk|=r),_a(e,t)}function q$(e,t){t===0&&(e.mode&1?(t=Jg,Jg<<=1,!(Jg&130023424)&&(Jg=4194304)):t=1);var r=ca();e=co(e,t),e!==null&&(Wp(e,t,r),_a(e,r))}function pV(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),q$(e,r)}function gV(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Xe(314))}n!==null&&n.delete(t),q$(e,r)}var z$;z$=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ba.current)va=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return va=!1,nV(e,t,r);va=!!(e.flags&131072)}else va=!1,Dr&&t.flags&1048576&&KR(t,Dy,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;oy(e,t),e=t.pendingProps;var a=Bd(t,ea.current);gd(t,r),a=Ok(null,t,n,e,a,r);var i=Ik();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,wa(n)?(i=!0,Ry(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Ck(t),a.updater=Cx,t.stateNode=a,a._reactInternals=t,yS(t,n,e,r),t=wS(null,t,n,!0,i,r)):(t.tag=0,Dr&&i&&bk(t),ra(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(oy(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=yV(n),e=Pi(n,e),a){case 0:t=bS(null,t,n,e,r);break e;case 1:t=rP(null,t,n,e,r);break e;case 11:t=eP(null,t,n,e,r);break e;case 14:t=tP(null,t,n,Pi(n.type,e),r);break e}throw Error(Xe(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Pi(n,a),bS(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Pi(n,a),rP(e,t,n,a,r);case 3:e:{if(N$(t),e===null)throw Error(Xe(387));n=t.pendingProps,i=t.memoizedState,a=i.element,ZR(e,t),By(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Wd(Error(Xe(423)),t),t=nP(e,t,n,r,a);break e}else if(n!==a){a=Wd(Error(Xe(424)),t),t=nP(e,t,n,r,a);break e}else for(Ba=bl(t.stateNode.containerInfo.firstChild),Ua=t,Dr=!0,Li=null,r=QR(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ud(),n===a){t=uo(e,t,r);break e}ra(e,t,n,r)}t=t.child}return t;case 5:return e$(t),e===null&&pS(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,uS(n,a)?o=null:i!==null&&uS(n,i)&&(t.flags|=32),k$(e,t),ra(e,t,o,r),t.child;case 6:return e===null&&pS(t),null;case 13:return C$(e,t,r);case 4:return Ek(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=qd(t,null,n,r):ra(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Pi(n,a),eP(e,t,n,a,r);case 7:return ra(e,t,t.pendingProps,r),t.child;case 8:return ra(e,t,t.pendingProps.children,r),t.child;case 12:return ra(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Nr(Ly,n._currentValue),n._currentValue=o,i!==null)if(Hi(i.value,o)){if(i.children===a.children&&!ba.current){t=uo(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=ro(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),gS(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Xe(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),gS(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ra(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,gd(t,r),a=pi(a),n=n(a),t.flags|=1,ra(e,t,n,r),t.child;case 14:return n=t.type,a=Pi(n,t.pendingProps),a=Pi(n.type,a),tP(e,t,n,a,r);case 15:return S$(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Pi(n,a),oy(e,t),t.tag=1,wa(n)?(e=!0,Ry(t)):e=!1,gd(t,r),b$(t,n,a),yS(t,n,a,r),wS(null,t,n,!0,e,r);case 19:return E$(e,t,r);case 22:return j$(e,t,r)}throw Error(Xe(156,t.tag))};function W$(e,t){return vR(e,t)}function vV(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(e,t,r,n){return new vV(e,t,r,n)}function zk(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yV(e){if(typeof e=="function")return zk(e)?1:0;if(e!=null){if(e=e.$$typeof,e===lk)return 11;if(e===ck)return 14}return 2}function jl(e,t){var r=e.alternate;return r===null?(r=ci(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function uy(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")zk(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Yu:return Mc(r.children,a,i,t);case ok:o=8,a|=8;break;case q_:return e=ci(12,r,t,a|2),e.elementType=q_,e.lanes=i,e;case z_:return e=ci(13,r,t,a),e.elementType=z_,e.lanes=i,e;case W_:return e=ci(19,r,t,a),e.elementType=W_,e.lanes=i,e;case eR:return Px(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case JM:o=10;break e;case ZM:o=9;break e;case lk:o=11;break e;case ck:o=14;break e;case Qo:o=16,n=null;break e}throw Error(Xe(130,e==null?e:typeof e,""))}return t=ci(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Mc(e,t,r,n){return e=ci(7,e,n,t),e.lanes=r,e}function Px(e,t,r,n){return e=ci(22,e,n,t),e.elementType=eR,e.lanes=r,e.stateNode={isHidden:!1},e}function d1(e,t,r){return e=ci(6,e,null,t),e.lanes=r,e}function f1(e,t,r){return t=ci(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xV(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vw(0),this.expirationTimes=Vw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vw(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Wk(e,t,r,n,a,i,o,l,c){return e=new xV(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ci(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ck(i),e}function bV(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gu,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function H$(e){if(!e)return Al;e=e._reactInternals;e:{if(su(e)!==e||e.tag!==1)throw Error(Xe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(wa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Xe(171))}if(e.tag===1){var r=e.type;if(wa(r))return HR(e,r,t)}return t}function V$(e,t,r,n,a,i,o,l,c){return e=Wk(r,n,!0,e,a,i,o,l,c),e.context=H$(null),r=e.current,n=ca(),a=Sl(r),i=ro(n,a),i.callback=t??null,wl(r,i,a),e.current.lanes=a,Wp(e,a,n),_a(e,n),e}function Tx(e,t,r,n){var a=t.current,i=ca(),o=Sl(a);return r=H$(r),t.context===null?t.context=r:t.pendingContext=r,t=ro(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=wl(a,t,o),e!==null&&(Ui(e,a,o,i),ay(e,a,o)),o}function Gy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hP(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Hk(e,t){hP(e,t),(e=e.alternate)&&hP(e,t)}function wV(){return null}var K$=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vk(e){this._internalRoot=e}Ox.prototype.render=Vk.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Xe(409));Tx(e,t,null,null)};Ox.prototype.unmount=Vk.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zc(function(){Tx(null,e,null,null)}),t[lo]=null}};function Ox(e){this._internalRoot=e}Ox.prototype.unstable_scheduleHydration=function(e){if(e){var t=jR();e={blockedOn:null,target:e,priority:t};for(var r=0;r<tl.length&&t!==0&&t<tl[r].priority;r++);tl.splice(r,0,e),r===0&&NR(e)}};function Kk(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ix(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mP(){}function _V(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=Gy(o);i.call(u)}}var o=V$(t,n,e,0,null,!1,!1,"",mP);return e._reactRootContainer=o,e[lo]=o.current,Em(e.nodeType===8?e.parentNode:e),zc(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=Gy(c);l.call(u)}}var c=Wk(e,0,!1,null,null,!1,!1,"",mP);return e._reactRootContainer=c,e[lo]=c.current,Em(e.nodeType===8?e.parentNode:e),zc(function(){Tx(t,c,r,n)}),c}function Mx(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Gy(o);l.call(c)}}Tx(t,o,e,a)}else o=_V(r,t,e,a,n);return Gy(o)}_R=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Vh(t.pendingLanes);r!==0&&(fk(t,r|1),_a(t,an()),!(ar&6)&&(Hd=an()+500,Dl()))}break;case 13:zc(function(){var n=co(e,1);if(n!==null){var a=ca();Ui(n,e,1,a)}}),Hk(e,1)}};hk=function(e){if(e.tag===13){var t=co(e,134217728);if(t!==null){var r=ca();Ui(t,e,134217728,r)}Hk(e,134217728)}};SR=function(e){if(e.tag===13){var t=Sl(e),r=co(e,t);if(r!==null){var n=ca();Ui(r,e,t,n)}Hk(e,t)}};jR=function(){return vr};kR=function(e,t){var r=vr;try{return vr=e,t()}finally{vr=r}};eS=function(e,t,r){switch(t){case"input":if(K_(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=jx(n);if(!a)throw Error(Xe(90));rR(n),K_(n,a)}}}break;case"textarea":aR(e,r);break;case"select":t=r.value,t!=null&&fd(e,!!r.multiple,t,!1)}};dR=Bk;fR=zc;var SV={usingClientEntryPoint:!1,Events:[Vp,Zu,jx,cR,uR,Bk]},wh={findFiberByHostInstance:yc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jV={bundleType:wh.bundleType,version:wh.version,rendererPackageName:wh.rendererPackageName,rendererConfig:wh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=pR(e),e===null?null:e.stateNode},findFiberByHostInstance:wh.findFiberByHostInstance||wV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cv.isDisabled&&cv.supportsFiber)try{bx=cv.inject(jV),ps=cv}catch{}}Ga.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SV;Ga.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kk(t))throw Error(Xe(200));return bV(e,t,null,r)};Ga.createRoot=function(e,t){if(!Kk(e))throw Error(Xe(299));var r=!1,n="",a=K$;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Wk(e,1,!1,null,null,r,!1,n,a),e[lo]=t.current,Em(e.nodeType===8?e.parentNode:e),new Vk(t)};Ga.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Xe(188)):(e=Object.keys(e).join(","),Error(Xe(268,e)));return e=pR(t),e=e===null?null:e.stateNode,e};Ga.flushSync=function(e){return zc(e)};Ga.hydrate=function(e,t,r){if(!Ix(t))throw Error(Xe(200));return Mx(null,e,t,!0,r)};Ga.hydrateRoot=function(e,t,r){if(!Kk(e))throw Error(Xe(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=K$;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=V$(t,null,e,1,r??null,a,!1,i,o),e[lo]=t.current,Em(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Ox(t)};Ga.render=function(e,t,r){if(!Ix(t))throw Error(Xe(200));return Mx(null,e,t,!1,r)};Ga.unmountComponentAtNode=function(e){if(!Ix(e))throw Error(Xe(40));return e._reactRootContainer?(zc(function(){Mx(null,null,e,!1,function(){e._reactRootContainer=null,e[lo]=null})}),!0):!1};Ga.unstable_batchedUpdates=Bk;Ga.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ix(r))throw Error(Xe(200));if(e==null||e._reactInternals===void 0)throw Error(Xe(38));return Mx(e,t,r,!1,n)};Ga.version="18.3.1-next-f1338f8080-20240426";function G$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(G$)}catch(e){console.error(e)}}G$(),GM.exports=Ga;var ou=GM.exports;const Y$=dr(ou);var X$,pP=ou;X$=pP.createRoot,pP.hydrateRoot;const kV=1,NV=1e6;let h1=0;function CV(){return h1=(h1+1)%Number.MAX_SAFE_INTEGER,h1.toString()}const m1=new Map,gP=e=>{if(m1.has(e))return;const t=setTimeout(()=>{m1.delete(e),dm({type:"REMOVE_TOAST",toastId:e})},NV);m1.set(e,t)},EV=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,kV)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?gP(r):e.toasts.forEach(n=>{gP(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},dy=[];let fy={toasts:[]};function dm(e){fy=EV(fy,e),dy.forEach(t=>{t(fy)})}function AV({...e}){const t=CV(),r=a=>dm({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>dm({type:"DISMISS_TOAST",toastId:t});return dm({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function PV(){const[e,t]=h.useState(fy);return h.useEffect(()=>(dy.push(t),()=>{const r=dy.indexOf(t);r>-1&&dy.splice(r,1)}),[e]),{...e,toast:AV,dismiss:r=>dm({type:"DISMISS_TOAST",toastId:r})}}function Ve(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function vP(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Rx(...e){return t=>{let r=!1;const n=e.map(a=>{const i=vP(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():vP(e[a],null)}}}}function Ot(...e){return h.useCallback(Rx(...e),e)}function TV(e,t){const r=h.createContext(t),n=i=>{const{children:o,...l}=i,c=h.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=h.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function zn(e,t=[]){let r=[];function n(i,o){const l=h.createContext(o),c=r.length;r=[...r,o];const u=f=>{var y;const{scope:m,children:p,...v}=f,g=((y=m==null?void 0:m[e])==null?void 0:y[c])||l,b=h.useMemo(()=>v,Object.values(v));return s.jsx(g.Provider,{value:b,children:p})};u.displayName=i+"Provider";function d(f,m){var g;const p=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,v=h.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=r.map(o=>h.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,OV(a,...t)]}function OV(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Pl(e){const t=MV(e),r=h.forwardRef((n,a)=>{const{children:i,...o}=n,l=h.Children.toArray(i),c=l.find(RV);if(c){const u=c.props.children,d=l.map(f=>f===c?h.Children.count(u)>1?h.Children.only(null):h.isValidElement(u)?u.props.children:null:f);return s.jsx(t,{...o,ref:a,children:h.isValidElement(u)?h.cloneElement(u,void 0,d):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var IV=Pl("Slot");function MV(e){const t=h.forwardRef((r,n)=>{const{children:a,...i}=r;if(h.isValidElement(a)){const o=DV(a),l=$V(i,a.props);return a.type!==h.Fragment&&(l.ref=n?Rx(n,o):o),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Q$=Symbol("radix.slottable");function J$(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=Q$,t}function RV(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Q$}function $V(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function DV(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Gp(e){const t=e+"CollectionProvider",[r,n]=zn(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:b,children:y}=g,w=V.useRef(null),x=V.useRef(new Map).current;return s.jsx(a,{scope:b,itemMap:x,collectionRef:w,children:y})};o.displayName=t;const l=e+"CollectionSlot",c=Pl(l),u=V.forwardRef((g,b)=>{const{scope:y,children:w}=g,x=i(l,y),_=Ot(b,x.collectionRef);return s.jsx(c,{ref:_,children:w})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",m=Pl(d),p=V.forwardRef((g,b)=>{const{scope:y,children:w,...x}=g,_=V.useRef(null),S=Ot(b,_),k=i(d,y);return V.useEffect(()=>(k.itemMap.set(_,{ref:_,...x}),()=>void k.itemMap.delete(_))),s.jsx(m,{[f]:"",ref:S,children:w})});p.displayName=d;function v(g){const b=i(e+"CollectionConsumer",g);return V.useCallback(()=>{const w=b.collectionRef.current;if(!w)return[];const x=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((k,C)=>x.indexOf(k.ref.current)-x.indexOf(C.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},v,n]}var LV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ot=LV.reduce((e,t)=>{const r=Pl(`Primitive.${t}`),n=h.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Gk(e,t){e&&ou.flushSync(()=>e.dispatchEvent(t))}function rn(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),h.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function FV(e,t=globalThis==null?void 0:globalThis.document){const r=rn(e);h.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var BV="DismissableLayer",IS="dismissableLayer.update",UV="dismissableLayer.pointerDownOutside",qV="dismissableLayer.focusOutside",yP,Z$=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),lu=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=h.useContext(Z$),[d,f]=h.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=h.useState({}),v=Ot(t,C=>f(C)),g=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(b),w=d?g.indexOf(d):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,_=w>=y,S=WV(C=>{const j=C.target,N=[...u.branches].some(A=>A.contains(j));!_||N||(a==null||a(C),o==null||o(C),C.defaultPrevented||l==null||l())},m),k=HV(C=>{const j=C.target;[...u.branches].some(A=>A.contains(j))||(i==null||i(C),o==null||o(C),C.defaultPrevented||l==null||l())},m);return FV(C=>{w===u.layers.size-1&&(n==null||n(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},m),h.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(yP=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),xP(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=yP)}},[d,m,r,u]),h.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),xP())},[d,u]),h.useEffect(()=>{const C=()=>p({});return document.addEventListener(IS,C),()=>document.removeEventListener(IS,C)},[]),s.jsx(ot.div,{...c,ref:v,style:{pointerEvents:x?_?"auto":"none":void 0,...e.style},onFocusCapture:Ve(e.onFocusCapture,k.onFocusCapture),onBlurCapture:Ve(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Ve(e.onPointerDownCapture,S.onPointerDownCapture)})});lu.displayName=BV;var zV="DismissableLayerBranch",eD=h.forwardRef((e,t)=>{const r=h.useContext(Z$),n=h.useRef(null),a=Ot(t,n);return h.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(ot.div,{...e,ref:a})});eD.displayName=zV;function WV(e,t=globalThis==null?void 0:globalThis.document){const r=rn(e),n=h.useRef(!1),a=h.useRef(()=>{});return h.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){tD(UV,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function HV(e,t=globalThis==null?void 0:globalThis.document){const r=rn(e),n=h.useRef(!1);return h.useEffect(()=>{const a=i=>{i.target&&!n.current&&tD(qV,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function xP(){const e=new CustomEvent(IS);document.dispatchEvent(e)}function tD(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?Gk(a,i):a.dispatchEvent(i)}var VV=lu,KV=eD,sn=globalThis!=null&&globalThis.document?h.useLayoutEffect:()=>{},GV="Portal",Df=h.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=h.useState(!1);sn(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?Y$.createPortal(s.jsx(ot.div,{...n,ref:t}),o):null});Df.displayName=GV;function YV(e,t){return h.useReducer((r,n)=>t[r][n]??r,e)}var Wn=e=>{const{present:t,children:r}=e,n=XV(t),a=typeof r=="function"?r({present:n.isPresent}):h.Children.only(r),i=Ot(n.ref,QV(a));return typeof r=="function"||n.isPresent?h.cloneElement(a,{ref:i}):null};Wn.displayName="Presence";function XV(e){const[t,r]=h.useState(),n=h.useRef(null),a=h.useRef(e),i=h.useRef("none"),o=e?"mounted":"unmounted",[l,c]=YV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const u=uv(n.current);i.current=l==="mounted"?u:"none"},[l]),sn(()=>{const u=n.current,d=a.current;if(d!==e){const m=i.current,p=uv(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),sn(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=p=>{const g=uv(n.current).includes(p.animationName);if(p.target===t&&g&&(c("ANIMATION_END"),!a.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},m=p=>{p.target===t&&(i.current=uv(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:h.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function uv(e){return(e==null?void 0:e.animationName)||"none"}function QV(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var JV=VM[" useInsertionEffect ".trim().toString()]||sn;function _s({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=ZV({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const d=h.useRef(e!==void 0);h.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=h.useCallback(d=>{var f;if(l){const m=eK(d)?d(e):d;m!==e&&((f=o.current)==null||f.call(o,m))}else i(d)},[l,e,i,o]);return[c,u]}function ZV({defaultProp:e,onChange:t}){const[r,n]=h.useState(e),a=h.useRef(r),i=h.useRef(t);return JV(()=>{i.current=t},[t]),h.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function eK(e){return typeof e=="function"}var rD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),tK="VisuallyHidden",$x=h.forwardRef((e,t)=>s.jsx(ot.span,{...e,ref:t,style:{...rD,...e.style}}));$x.displayName=tK;var rK=$x,Yk="ToastProvider",[Xk,nK,aK]=Gp("Toast"),[nD,l3e]=zn("Toast",[aK]),[iK,Dx]=nD(Yk),aD=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=h.useState(null),[u,d]=h.useState(0),f=h.useRef(!1),m=h.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Yk}\`. Expected non-empty \`string\`.`),s.jsx(Xk.Provider,{scope:t,children:s.jsx(iK,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:h.useCallback(()=>d(p=>p+1),[]),onToastRemove:h.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};aD.displayName=Yk;var iD="ToastViewport",sK=["F8"],MS="toast.viewportPause",RS="toast.viewportResume",sD=h.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=sK,label:a="Notifications ({hotkey})",...i}=e,o=Dx(iD,r),l=nK(r),c=h.useRef(null),u=h.useRef(null),d=h.useRef(null),f=h.useRef(null),m=Ot(t,f,o.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;h.useEffect(()=>{const b=y=>{var x;n.length!==0&&n.every(_=>y[_]||y.code===_)&&((x=f.current)==null||x.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[n]),h.useEffect(()=>{const b=c.current,y=f.current;if(v&&b&&y){const w=()=>{if(!o.isClosePausedRef.current){const k=new CustomEvent(MS);y.dispatchEvent(k),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const k=new CustomEvent(RS);y.dispatchEvent(k),o.isClosePausedRef.current=!1}},_=k=>{!b.contains(k.relatedTarget)&&x()},S=()=>{b.contains(document.activeElement)||x()};return b.addEventListener("focusin",w),b.addEventListener("focusout",_),b.addEventListener("pointermove",w),b.addEventListener("pointerleave",S),window.addEventListener("blur",w),window.addEventListener("focus",x),()=>{b.removeEventListener("focusin",w),b.removeEventListener("focusout",_),b.removeEventListener("pointermove",w),b.removeEventListener("pointerleave",S),window.removeEventListener("blur",w),window.removeEventListener("focus",x)}}},[v,o.isClosePausedRef]);const g=h.useCallback(({tabbingDirection:b})=>{const w=l().map(x=>{const _=x.ref.current,S=[_,...xK(_)];return b==="forwards"?S:S.reverse()});return(b==="forwards"?w.reverse():w).flat()},[l]);return h.useEffect(()=>{const b=f.current;if(b){const y=w=>{var S,k,C;const x=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!x){const j=document.activeElement,N=w.shiftKey;if(w.target===b&&N){(S=u.current)==null||S.focus();return}const T=g({tabbingDirection:N?"backwards":"forwards"}),L=T.findIndex(U=>U===j);p1(T.slice(L+1))?w.preventDefault():N?(k=u.current)==null||k.focus():(C=d.current)==null||C.focus()}};return b.addEventListener("keydown",y),()=>b.removeEventListener("keydown",y)}},[l,g]),s.jsxs(KV,{ref:c,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&s.jsx($S,{ref:u,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"forwards"});p1(b)}}),s.jsx(Xk.Slot,{scope:r,children:s.jsx(ot.ol,{tabIndex:-1,...i,ref:m})}),v&&s.jsx($S,{ref:d,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"backwards"});p1(b)}})]})});sD.displayName=iD;var oD="ToastFocusProxy",$S=h.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=Dx(oD,r);return s.jsx($x,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});$S.displayName=oD;var Yp="Toast",oK="toast.swipeStart",lK="toast.swipeMove",cK="toast.swipeCancel",uK="toast.swipeEnd",lD=h.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=_s({prop:n,defaultProp:a??!0,onChange:i,caller:Yp});return s.jsx(Wn,{present:r||l,children:s.jsx(hK,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:rn(e.onPause),onResume:rn(e.onResume),onSwipeStart:Ve(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ve(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Ve(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ve(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});lD.displayName=Yp;var[dK,fK]=nD(Yp,{onClose(){}}),hK=h.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:p,...v}=e,g=Dx(Yp,r),[b,y]=h.useState(null),w=Ot(t,U=>y(U)),x=h.useRef(null),_=h.useRef(null),S=a||g.duration,k=h.useRef(0),C=h.useRef(S),j=h.useRef(0),{onToastAdd:N,onToastRemove:A}=g,P=rn(()=>{var D;(b==null?void 0:b.contains(document.activeElement))&&((D=g.viewport)==null||D.focus()),o()}),T=h.useCallback(U=>{!U||U===1/0||(window.clearTimeout(j.current),k.current=new Date().getTime(),j.current=window.setTimeout(P,U))},[P]);h.useEffect(()=>{const U=g.viewport;if(U){const D=()=>{T(C.current),u==null||u()},H=()=>{const B=new Date().getTime()-k.current;C.current=C.current-B,window.clearTimeout(j.current),c==null||c()};return U.addEventListener(MS,H),U.addEventListener(RS,D),()=>{U.removeEventListener(MS,H),U.removeEventListener(RS,D)}}},[g.viewport,S,c,u,T]),h.useEffect(()=>{i&&!g.isClosePausedRef.current&&T(S)},[i,S,g.isClosePausedRef,T]),h.useEffect(()=>(N(),()=>A()),[N,A]);const L=h.useMemo(()=>b?pD(b):null,[b]);return g.viewport?s.jsxs(s.Fragment,{children:[L&&s.jsx(mK,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:L}),s.jsx(dK,{scope:r,onClose:P,children:ou.createPortal(s.jsx(Xk.ItemSlot,{scope:r,children:s.jsx(VV,{asChild:!0,onEscapeKeyDown:Ve(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||P(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(ot.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...v,ref:w,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ve(e.onKeyDown,U=>{U.key==="Escape"&&(l==null||l(U.nativeEvent),U.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:Ve(e.onPointerDown,U=>{U.button===0&&(x.current={x:U.clientX,y:U.clientY})}),onPointerMove:Ve(e.onPointerMove,U=>{if(!x.current)return;const D=U.clientX-x.current.x,H=U.clientY-x.current.y,B=!!_.current,M=["left","right"].includes(g.swipeDirection),$=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,re=M?$(0,D):0,ie=M?0:$(0,H),q=U.pointerType==="touch"?10:2,K={x:re,y:ie},ne={originalEvent:U,delta:K};B?(_.current=K,dv(lK,f,ne,{discrete:!1})):bP(K,g.swipeDirection,q)?(_.current=K,dv(oK,d,ne,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(D)>q||Math.abs(H)>q)&&(x.current=null)}),onPointerUp:Ve(e.onPointerUp,U=>{const D=_.current,H=U.target;if(H.hasPointerCapture(U.pointerId)&&H.releasePointerCapture(U.pointerId),_.current=null,x.current=null,D){const B=U.currentTarget,M={originalEvent:U,delta:D};bP(D,g.swipeDirection,g.swipeThreshold)?dv(uK,p,M,{discrete:!0}):dv(cK,m,M,{discrete:!0}),B.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),mK=e=>{const{__scopeToast:t,children:r,...n}=e,a=Dx(Yp,t),[i,o]=h.useState(!1),[l,c]=h.useState(!1);return vK(()=>o(!0)),h.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(Df,{asChild:!0,children:s.jsx($x,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},pK="ToastTitle",cD=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(ot.div,{...n,ref:t})});cD.displayName=pK;var gK="ToastDescription",uD=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(ot.div,{...n,ref:t})});uD.displayName=gK;var dD="ToastAction",fD=h.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(mD,{altText:r,asChild:!0,children:s.jsx(Qk,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${dD}\`. Expected non-empty \`string\`.`),null)});fD.displayName=dD;var hD="ToastClose",Qk=h.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=fK(hD,r);return s.jsx(mD,{asChild:!0,children:s.jsx(ot.button,{type:"button",...n,ref:t,onClick:Ve(e.onClick,a.onClose)})})});Qk.displayName=hD;var mD=h.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(ot.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function pD(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),yK(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...pD(n))}}),t}function dv(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?Gk(a,i):a.dispatchEvent(i)}var bP=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function vK(e=()=>{}){const t=rn(e);sn(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function yK(e){return e.nodeType===e.ELEMENT_NODE}function xK(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function p1(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var bK=aD,gD=sD,vD=lD,yD=cD,xD=uD,bD=fD,wD=Qk;function _D(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=_D(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function qt(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=_D(e))&&(n&&(n+=" "),n+=t);return n}const wP=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,_P=qt,Lf=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return _P(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=r==null?void 0:r[u],f=i==null?void 0:i[u];if(d===null)return null;const m=wP(d)||wP(f);return a[u][m]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:m,...p}=d;return Object.entries(p).every(v=>{let[g,b]=v;return Array.isArray(b)?b.includes({...i,...l}[g]):{...i,...l}[g]===b})?[...u,f,m]:u},[]);return _P(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wK=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SD=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _K={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SK=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>h.createElement("svg",{ref:c,..._K,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:SD("lucide",a),...l},[...o.map(([u,d])=>h.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(e,t)=>{const r=h.forwardRef(({className:n,...a},i)=>h.createElement(SK,{ref:i,iconNode:t,className:SD(`lucide-${wK(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=De("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kK=De("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NK=De("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CK=De("ArrowUpFromDot",[["path",{d:"m5 9 7-7 7 7",key:"1hw5ic"}],["path",{d:"M12 16V2",key:"ywoabb"}],["circle",{cx:"12",cy:"21",r:"1",key:"o0uj5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EK=De("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=De("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=De("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AK=De("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=De("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PK=De("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TK=De("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=De("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=De("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=De("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=De("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=De("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OK=De("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=De("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=De("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IK=De("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=De("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MK=De("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RK=De("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=De("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DK=De("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=De("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=De("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LK=De("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=De("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FK=De("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=De("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=De("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BK=De("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UK=De("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qK=De("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=De("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zK=De("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=De("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WK=De("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=De("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HK=De("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VK=De("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KK=De("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GK=De("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=De("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YK=De("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=De("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=De("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=De("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XK=De("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QK=De("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JK=De("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=De("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=De("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=De("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=De("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eG=De("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=De("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tG=De("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=De("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rG=De("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nG=De("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=De("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aG=De("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iG=De("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sG=De("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=De("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=De("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=De("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=De("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=De("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=De("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oG=De("NotebookPen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lG=De("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cG=De("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=De("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uG=De("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=De("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dG=De("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fG=De("Plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=De("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hG=De("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mG=De("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pG=De("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gG=De("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=De("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=De("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vG=De("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=De("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=De("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yG=De("ShieldX",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=De("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xG=De("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=De("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=De("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=De("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=De("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bG=De("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=De("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wG=De("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=De("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=De("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=De("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _G=De("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=De("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SG=De("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jG=De("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kG=De("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=De("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NG=De("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CG=De("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=De("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=De("UserRoundCheck",[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EG=De("UserRoundCog",[["path",{d:"M2 21a8 8 0 0 1 10.434-7.62",key:"1yezr2"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["path",{d:"m19.5 14.3-.4.9",key:"1eb35c"}],["path",{d:"m16.9 20.8-.4.9",key:"dfjc4z"}],["path",{d:"m21.7 19.5-.9-.4",key:"q4dx6b"}],["path",{d:"m15.2 16.9-.9-.4",key:"1r0w5f"}],["path",{d:"m21.7 16.5-.9.4",key:"1knoei"}],["path",{d:"m15.2 19.1-.9.4",key:"j188fs"}],["path",{d:"m19.5 21.7-.4-.9",key:"1tonu5"}],["path",{d:"m16.9 15.2-.4-.9",key:"699xu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AG=De("UserRoundPlus",[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M22 19h-6",key:"vcuq98"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=De("UserRoundX",[["path",{d:"M2 21a8 8 0 0 1 11.873-7",key:"74fkxq"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m17 17 5 5",key:"p7ous7"}],["path",{d:"m22 17-5 5",key:"gqnmv0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PG=De("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=De("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=De("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=De("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=De("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TG=De("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OG=De("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=De("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),oN="-",IG=e=>{const t=RG(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(oN);return l[0]===""&&l.length!==1&&l.shift(),n3(l,t)||MG(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},n3=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?n3(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(oN);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},SP=/^\[(.+)\]$/,MG=e=>{if(SP.test(e)){const t=SP.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},RG=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return DG(Object.entries(e.classGroups),r).forEach(([i,o])=>{LS(o,n,i,t)}),n},LS=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:jP(t,a);i.classGroupId=r;return}if(typeof a=="function"){if($G(a)){LS(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{LS(o,jP(t,i),r,n)})})},jP=(e,t)=>{let r=e;return t.split(oN).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},$G=e=>e.isThemeGetter,DG=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,LG=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},a3="!",FG=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let u=0,d=0,f;for(let b=0;b<l.length;b++){let y=l[b];if(u===0){if(y===a&&(n||l.slice(b,b+i)===t)){c.push(l.slice(d,b)),d=b+i;continue}if(y==="/"){f=b;continue}}y==="["?u++:y==="]"&&u--}const m=c.length===0?l:l.substring(d),p=m.startsWith(a3),v=p?m.substring(1):m,g=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:o}):o},BG=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},UG=e=>({cache:LG(e.cacheSize),parseClassName:FG(e),...IG(e)}),qG=/\s+/,zG=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(qG);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:p}=r(u);let v=!!p,g=n(v?m.substring(0,p):m);if(!g){if(!v){l=u+(l.length>0?" "+l:l);continue}if(g=n(m),!g){l=u+(l.length>0?" "+l:l);continue}v=!1}const b=BG(d).join(":"),y=f?b+a3:b,w=y+g;if(i.includes(w))continue;i.push(w);const x=a(g,v);for(let _=0;_<x.length;++_){const S=x[_];i.push(y+S)}l=u+(l.length>0?" "+l:l)}return l};function WG(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=i3(t))&&(n&&(n+=" "),n+=r);return n}const i3=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=i3(e[n]))&&(r&&(r+=" "),r+=t);return r};function HG(e,...t){let r,n,a,i=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return r=UG(u),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=zG(c,r);return a(c,d),d}return function(){return i(WG.apply(null,arguments))}}const Tr=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},s3=/^\[(?:([a-z-]+):)?(.+)\]$/i,VG=/^\d+\/\d+$/,KG=new Set(["px","full","screen"]),GG=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,YG=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,XG=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,QG=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,JG=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fs=e=>yd(e)||KG.has(e)||VG.test(e),qo=e=>Ff(e,"length",sY),yd=e=>!!e&&!Number.isNaN(Number(e)),g1=e=>Ff(e,"number",yd),_h=e=>!!e&&Number.isInteger(Number(e)),ZG=e=>e.endsWith("%")&&yd(e.slice(0,-1)),Ht=e=>s3.test(e),zo=e=>GG.test(e),eY=new Set(["length","size","percentage"]),tY=e=>Ff(e,eY,o3),rY=e=>Ff(e,"position",o3),nY=new Set(["image","url"]),aY=e=>Ff(e,nY,lY),iY=e=>Ff(e,"",oY),Sh=()=>!0,Ff=(e,t,r)=>{const n=s3.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},sY=e=>YG.test(e)&&!XG.test(e),o3=()=>!1,oY=e=>QG.test(e),lY=e=>JG.test(e),cY=()=>{const e=Tr("colors"),t=Tr("spacing"),r=Tr("blur"),n=Tr("brightness"),a=Tr("borderColor"),i=Tr("borderRadius"),o=Tr("borderSpacing"),l=Tr("borderWidth"),c=Tr("contrast"),u=Tr("grayscale"),d=Tr("hueRotate"),f=Tr("invert"),m=Tr("gap"),p=Tr("gradientColorStops"),v=Tr("gradientColorStopPositions"),g=Tr("inset"),b=Tr("margin"),y=Tr("opacity"),w=Tr("padding"),x=Tr("saturate"),_=Tr("scale"),S=Tr("sepia"),k=Tr("skew"),C=Tr("space"),j=Tr("translate"),N=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",Ht,t],T=()=>[Ht,t],L=()=>["",Fs,qo],U=()=>["auto",yd,Ht],D=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],B=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Ht],re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ie=()=>[yd,Ht];return{cacheSize:500,separator:":",theme:{colors:[Sh],spacing:[Fs,qo],blur:["none","",zo,Ht],brightness:ie(),borderColor:[e],borderRadius:["none","","full",zo,Ht],borderSpacing:T(),borderWidth:L(),contrast:ie(),grayscale:$(),hueRotate:ie(),invert:$(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[ZG,qo],inset:P(),margin:P(),opacity:ie(),padding:T(),saturate:ie(),scale:ie(),sepia:$(),skew:ie(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",Ht]}],container:["container"],columns:[{columns:[zo]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...D(),Ht]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_h,Ht]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ht]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",_h,Ht]}],"grid-cols":[{"grid-cols":[Sh]}],"col-start-end":[{col:["auto",{span:["full",_h,Ht]},Ht]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[Sh]}],"row-start-end":[{row:["auto",{span:[_h,Ht]},Ht]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ht]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ht]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ht,t]}],"min-w":[{"min-w":[Ht,t,"min","max","fit"]}],"max-w":[{"max-w":[Ht,t,"none","full","min","max","fit","prose",{screen:[zo]},zo]}],h:[{h:[Ht,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ht,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ht,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ht,t,"auto","min","max","fit"]}],"font-size":[{text:["base",zo,qo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",g1]}],"font-family":[{font:[Sh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ht]}],"line-clamp":[{"line-clamp":["none",yd,g1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Fs,Ht]}],"list-image":[{"list-image":["none",Ht]}],"list-style-type":[{list:["none","disc","decimal",Ht]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Fs,qo]}],"underline-offset":[{"underline-offset":["auto",Fs,Ht]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ht]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ht]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...D(),rY]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",tY]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},aY]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:H()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[Fs,Ht]}],"outline-w":[{outline:[Fs,qo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Fs,qo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",zo,iY]}],"shadow-color":[{shadow:[Sh]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...B(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",zo,Ht]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[x]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ht]}],duration:[{duration:ie()}],ease:[{ease:["linear","in","out","in-out",Ht]}],delay:[{delay:ie()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ht]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[_h,Ht]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ht]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ht]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ht]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Fs,qo,g1]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},uY=HG(cY);function Pe(...e){return uY(qt(e))}const dY={"align-left-1":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Align-Left-1--Streamline-Sharp" height="24" width="24">
  <desc>
    Align Left 1 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="align-left-1--align-design-left-horizontal">
    <path id="Rectangle 599" stroke="#000000" d="M6 14h15.5v6H6v-6Z" stroke-width="1.5"></path>
    <path id="Rectangle 600" stroke="#000000" d="M6 4h9.5v6H6V4Z" stroke-width="1.5"></path>
    <path id="Vector 1397" stroke="#000000" d="M2.5 1v22" stroke-width="1.5"></path>
  </g>
</svg>`,"application-add":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Application-Add--Streamline-Sharp" height="24" width="24">
  <desc>
    Application Add Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="application-add--application-new-add-square">
    <path id="Rectangle 889" stroke="#000000" d="M2 2h8v8H2z" stroke-width="1.5"></path>
    <path id="Rectangle 891" stroke="#000000" d="M2 14h8v8H2z" stroke-width="1.5"></path>
    <path id="Rectangle 890" stroke="#000000" d="M14 2h8v8h-8z" stroke-width="1.5"></path>
    <path id="Vector 2645" stroke="#000000" d="M18 13.5v9" stroke-width="1.5"></path>
    <path id="Vector 2646" stroke="#000000" d="M13.5 18h9" stroke-width="1.5"></path>
  </g>
</svg>`,"arrow-diagonal-2":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Arrow-Diagonal-2--Streamline-Sharp" height="24" width="24">
  <desc>
    Arrow Diagonal 2 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="arrow-diagonal-2--expand-smaller-retract-bigger-big-small-diagonal">
    <path id="Vector 2247" stroke="#000000" d="M2 11V2h9" stroke-width="1.5"></path>
    <path id="Vector 2248" stroke="#000000" d="m2 2 20 20" stroke-width="1.5"></path>
    <path id="Vector 2249" stroke="#000000" d="M22 13v9h-9" stroke-width="1.5"></path>
  </g>
</svg>`,"arrow-reload-horizontal-2":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Arrow-Reload-Horizontal-2--Streamline-Sharp" height="24" width="24">
  <desc>
    Arrow Reload Horizontal 2 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="arrow-reload-horizontal-2">
    <path id="Vector" stroke="#000000" d="m15.9177 13.8289 -3.9695 3.9695 3.9695 3.9694" stroke-width="1.5"></path>
    <path id="Vector_2" stroke="#000000" d="m8.18678 10.1711 3.96952 -3.96945 -3.96952 -3.96947" stroke-width="1.5"></path>
    <path id="Vector 995" stroke="#000000" d="m12.0508 17.7986 10.051 0 0 -11.59739 -5.4121 0" stroke-width="1.5"></path>
    <path id="Vector 996" stroke="#000000" d="m12.0508 6.20142 -10.05108 0 0 11.59738 5.41211 0" stroke-width="1.5"></path>
  </g>
</svg>`,"arrow-up-large-2":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Arrow-Up-Large-2--Streamline-Sharp" height="24" width="24">
  <desc>
    Arrow Up Large 2 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="arrow-up-large-2--move-up-arrow-arrows-large-head">
    <path id="Vector" stroke="#000000" d="M3.23 15.615 12 6.845l8.769 8.77" stroke-width="1.5"></path>
    <path id="Vector_2" stroke="#000000" d="m12 23 0 -16.154" stroke-width="1.5"></path>
    <path id="Vector_3" stroke="#000000" d="m1.5 2 21 0" stroke-width="1.5"></path>
  </g>
</svg>`,"bill-4":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Bill-4--Streamline-Sharp" height="24" width="24">
  <desc>
    Bill 4 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="bill-4--accounting-billing-payment-finance-cash-currency-money-bill-dollar-stack">
    <path id="Ellipse 174" stroke="#000000" d="M8 11a2.5 2.5 0 1 0 5 0 2.5 2.5 0 1 0 -5 0" stroke-width="1.5"></path>
    <path id="Vector 1760" stroke="#000000" d="M2 17V5h17v12H2Z" stroke-width="1.5"></path>
    <path id="Vector 1761" stroke="#000000" d="M5 20h17V8" stroke-width="1.5"></path>
  </g>
</svg>`,"button-fast-forward-2":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Button-Fast-Forward-2--Streamline-Sharp" height="24" width="24">
  <desc>
    Button Fast Forward 2 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="button-fast-forward-2--button-controls-fast-forward-movies-television-video-tv">
    <path id="Vector 1457" stroke="#000000" d="M2 19.5v-14l9 7 -9 7Z" stroke-width="1.5"></path>
    <path id="Vector 1458" stroke="#000000" d="M11.5 19.5v-14l9.5 7 -9.5 7Z" stroke-width="1.5"></path>
    <path id="Vector 1459" stroke="#000000" d="M22 4v17" stroke-width="1.5"></path>
  </g>
</svg>`,"calendar-mark":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Calendar-Mark--Streamline-Sharp" height="24" width="24">
  <desc>
    Calendar Mark Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="calendar-mark--calendar-date-day-month-mark">
    <path id="Rectangle 11" stroke="#000000" d="M2 4h20v18H2z" stroke-width="1.5"></path>
    <path id="Vector 39" stroke="#000000" d="M7 1v3" stroke-width="1.5"></path>
    <path id="Vector 40" stroke="#000000" d="M17 1v3" stroke-width="1.5"></path>
    <path id="Vector 38" stroke="#000000" d="M2 8h20" stroke-width="1.5"></path>
    <path id="Vector 1456" stroke="#000000" d="M5 12.5h3" stroke-width="1.5"></path>
    <path id="Vector 1457" stroke="#000000" d="M5 17.5h3" stroke-width="1.5"></path>
    <path id="Vector 1458" stroke="#000000" d="M10.5 12.5h3" stroke-width="1.5"></path>
    <path id="Vector 1460" stroke="#000000" d="M16 12.5h3" stroke-width="1.5"></path>
    <path id="Vector 1459" stroke="#000000" d="M10.5 17.5h3" stroke-width="1.5"></path>
  </g>
</svg>`,"chat-bubble-square-write":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Chat-Bubble-Square-Write--Streamline-Sharp" height="24" width="24">
  <desc>
    Chat Bubble Square Write Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="chat-bubble-square-write--messages-message-bubble-chat-square-write-review-pen-pencil-compose">
    <path id="Rectangle 729" stroke="#000000" d="M14.541 2.5 3 2.5l0 19L7 19l14 0 0 -9.465" stroke-width="1.5"></path>
    <path id="Vector" stroke="#000000" d="m22 4.89 -7.515 7.516h-2.89v-2.89L19.11 2 22 4.89Z" stroke-width="1.5"></path>
  </g>
</svg>`,check:`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Check--Streamline-Sharp" height="24" width="24">
  <desc>
    Check Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="check--check-form-validation-checkmark-success-add-addition-tick">
    <path id="Vector 2356" stroke="#000000" d="m1.5 12.5 7 7 14 -14" stroke-width="1.5"></path>
  </g>
</svg>`,"clean-broom-wipe":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Clean-Broom-Wipe--Streamline-Sharp" height="24" width="24">
  <desc>
    Clean Broom Wipe Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="clean-broom-wipe">
    <path id="Rectangle 21" stroke="#000000" stroke-linecap="square" d="M3.26512 16.4295c0.3934 -1.7245 1.9271 -2.9477 3.6959 -2.9477v0c2.09363 0 3.79088 1.6972 3.79088 3.7909v0.515c0 0.8872 0.2949 1.7492 0.8384 2.4504l1.2444 1.6056H2.03003l1.23509 -5.4142Z" stroke-width="1.5"></path>
    <path id="Vector 2098" stroke="#000000" stroke-linecap="square" d="m7.3977 13.3439 4.0664 -11.18753" stroke-width="1.5"></path>
    <path id="Vector 2097" stroke="#000000" stroke-linecap="square" d="M17.2299 21.8434H21.97" stroke-width="1.5"></path>
    <path id="Vector 2099" stroke="#000000" stroke-linecap="square" d="M15.62 18.205h4.7401" stroke-width="1.5"></path>
    <path id="Vector 2100" stroke="#000000" stroke-linecap="square" d="M13.6078 14.3734h4.7401" stroke-width="1.5"></path>
  </g>
</svg>`,cog:`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Cog--Streamline-Sharp" height="24" width="24">
  <desc>
    Cog Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="cog--work-loading-cog-gear-settings-machine">
    <path id="Ellipse 404" stroke="#000000" d="M9 12a3 3 0 1 0 6 0 3 3 0 1 0 -6 0" stroke-width="1.5"></path>
    <path id="Ellipse 405" stroke="#000000" d="m14.5 2 -5 0 0 2.398a7.992 7.992 0 0 0 -2.831 1.637l-2.08 -1.2 -2.5 4.33 2.078 1.2a8.034 8.034 0 0 0 0 3.27l-2.077 1.2 2.5 4.33 2.079 -1.2a7.992 7.992 0 0 0 2.83 1.637V22h5l0 -2.398a7.992 7.992 0 0 0 2.832 -1.637l2.08 1.2 2.5 -4.33 -2.078 -1.2a8.039 8.039 0 0 0 0 -3.27l2.077 -1.2 -2.5 -4.33 -2.079 1.2A7.992 7.992 0 0 0 14.5 4.398V2Z" stroke-width="1.5"></path>
  </g>
</svg>`,"decent-work-and-economic-growth":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Decent-Work-And-Economic-Growth--Streamline-Sharp" height="24" width="24">
  <desc>
    Decent Work And Economic Growth Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="decent-work-and-economic-growth">
    <path id="Vector 2588" stroke="#000000" d="m2 11 7 -6.5 6.5 7L22 5" stroke-width="1.5"></path>
    <path id="Vector 2589" stroke="#000000" d="M22 9V5h-4" stroke-width="1.5"></path>
    <path id="Vector 2590" stroke="#000000" d="M3 23v-8.5" stroke-width="1.5"></path>
    <path id="Vector 2591" stroke="#000000" d="M9 10v13" stroke-width="1.5"></path>
    <path id="Vector 2592" stroke="#000000" d="M15 16v7" stroke-width="1.5"></path>
    <path id="Vector 2593" stroke="#000000" d="M21 12.5V23" stroke-width="1.5"></path>
  </g>
</svg>`,"delete-tag":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Delete-Tag--Streamline-Sharp" height="24" width="24">
  <desc>
    Delete Tag Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="delete-tag--delete-tag-remove-cross-x-button-mathematics-math">
    <path id="Vector 2457" stroke="#000000" d="M1.921 5.615h14.385L21.921 12l-5.615 6.384H1.921V5.615Z" stroke-width="1.5"></path>
    <path id="Vector 1144" stroke="#000000" d="M12.062 14.818 6.427 9.183" stroke-width="1.5"></path>
    <path id="Vector 2458" stroke="#000000" d="m12.062 9.183 -5.635 5.635" stroke-width="1.5"></path>
  </g>
</svg>`,"double-heart":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Double-Heart--Streamline-Sharp" height="24" width="24">
  <desc>
    Double Heart Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="double-heart--reward-social-rating-media-heart-it-like-favorite-love">
    <path id="Vector 2027" stroke="#000000" d="M11.786 20.891 3.305 12.41a4.798 4.798 0 0 1 6.785 -6.785l1.696 1.696 1.696 -1.696a4.798 4.798 0 0 1 8.168 3.862" stroke-width="1.5"></path>
    <path id="Vector 2028" stroke="#000000" d="m15.875 12.597 0.922 0.922 0.921 -0.922a2.606 2.606 0 1 1 3.686 3.686l-4.607 4.608 -4.608 -4.608a2.606 2.606 0 1 1 3.686 -3.686Z" stroke-width="1.5"></path>
  </g>
</svg>`,"download-square":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Download-Square--Streamline-Sharp" height="24" width="24">
  <desc>
    Download Square Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="download-square--arrow-down-download-internet-network-server-square-upload">
    <path id="Vector 1427" stroke="#000000" d="m8 12.5 4 4 4 -4" stroke-width="1.5"></path>
    <path id="Vector 1428" stroke="#000000" d="M12 16.5v-10" stroke-width="1.5"></path>
    <path id="Rectangle 639" stroke="#000000" d="M2 2h20v20H2z" stroke-width="1.5"></path>
  </g>
</svg>`,"filter-2":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Filter-2--Streamline-Sharp" height="24" width="24">
  <desc>
    Filter 2 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="filter-2--funnel-filter-angle-oil">
    <path id="Union" stroke="#000000" d="M14.5 13.5 22 6V2H2v4l7.5 7.5v8l5 -3v-5Z" stroke-width="1.5"></path>
  </g>
</svg>`,"forward-email":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Forward-Email--Streamline-Sharp" height="24" width="24">
  <desc>
    Forward Email Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="forward-email--mail-email-send-message-envelope-actions-action-forward-arrow">
    <path id="Ellipse 681" stroke="#000000" d="M14 8.5h-4a8 8 0 0 0 -8 8v4a6 6 0 0 1 6 -6h6V19h0.5l7.5 -7.5L14.5 4H14v4.5Z" stroke-width="1.5"></path>
  </g>
</svg>`,"google-drive":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Google-Drive--Streamline-Sharp" height="24" width="24">
  <desc>
    Google Drive Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="google-drive">
    <path id="Vector 2878" stroke="#000000" d="M16 3H8L1.5 15l4 6H19l3.5 -6L16 3Z" stroke-width="1.5"></path>
    <path id="Vector 2879" stroke="#000000" d="M22.5 15 8.6875 15" stroke-width="1.5"></path>
    <path id="Vector 2881" stroke="#000000" d="m9 3 7 12" stroke-width="1.5"></path>
    <path id="Vector 2959" stroke="#000000" d="m5.5 21 6.5625 -12.25" stroke-width="1.5"></path>
  </g>
</svg>`,"graph-arrow-user-increase":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Graph-Arrow-User-Increase--Streamline-Sharp" height="24" width="24">
  <desc>
    Graph Arrow User Increase Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="graph-arrow-user-increase--ascend-growth-up-arrow-stats-graph-right-grow-user">
    <path id="Vector 2454" stroke="#000000" d="m1 13 7 -7 1.5 1.5M22 2l-3.5 3.5" stroke-width="1.5"></path>
    <path id="Vector 2455" stroke="#000000" d="M16.5 2H22v5.5" stroke-width="1.5"></path>
    <path id="Ellipse 418" stroke="#000000" d="M11.5 10.5a3.5 3.5 0 1 0 7 0 3.5 3.5 0 1 0 -7 0" stroke-width="1.5"></path>
    <path id="Ellipse 419" stroke="#000000" d="M22 18.873A13.936 13.936 0 0 0 15 17c-2.55 0 -4.94 0.682 -7 1.873V22h14v-3.127Z" stroke-width="1.5"></path>
  </g>
</svg>`,"hierarchy-16":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Hierarchy-16--Streamline-Sharp" height="24" width="24">
  <desc>
    Hierarchy 16 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="hierarchy-16">
    <path id="Vector 2255" stroke="#000000" d="M10.5 7 2 7l0 -5 8.5 0v5Z" stroke-width="1.5"></path>
    <path id="Vector 2257" stroke="#000000" d="m22 22 -11 0 0 -4.5 11 0V22Z" stroke-width="1.5"></path>
    <path id="Vector 2266" stroke="#000000" d="m22 14.5 -11 0 0 -4.5 11 0v4.5Z" stroke-width="1.5"></path>
    <path id="Vector 2264" stroke="#000000" d="M5.99988 6.99969V19.7497h5.00002" stroke-width="1.5"></path>
    <path id="Vector 2265" stroke="#000000" d="M6 12.25h5" stroke-width="1.5"></path>
  </g>
</svg>`,"horizontal-menu-square":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Horizontal-Menu-Square--Streamline-Sharp" height="24" width="24">
  <desc>
    Horizontal Menu Square Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="horizontal-menu-square--navigation-dots-three-square-button-horizontal-menu">
    <path id="Rectangle 893" stroke="#000000" d="M2 2h20v20H2z" stroke-width="1.5"></path>
    <path id="Vector 2975" stroke="#000000" d="M7.25 11.75h-0.5v0.5h0.5v-0.5Z" stroke-width="1.5"></path>
    <path id="Vector 2976" stroke="#000000" d="M12.25 11.75h-0.5v0.5h0.5v-0.5Z" stroke-width="1.5"></path>
    <path id="Vector 2977" stroke="#000000" d="M17.25 11.75h-0.5v0.5h0.5v-0.5Z" stroke-width="1.5"></path>
  </g>
</svg>`,inbox:`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Inbox--Streamline-Sharp" height="24" width="24">
  <desc>
    Inbox Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="inbox--mail-email-outbox-drawer-empty-open-inbox">
    <path id="Rectangle 19" stroke="#000000" d="M2 2h20v20H2z" stroke-width="1.5"></path>
    <path id="Vector 88" stroke="#000000" d="M2 12h6v1a4 4 0 0 0 8 0v-1h6" stroke-width="1.5"></path>
  </g>
</svg>`,"landscape-2":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Landscape-2--Streamline-Sharp" height="24" width="24">
  <desc>
    Landscape 2 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="landscape-2--photos-photo-landscape-picture-photography-camera-pictures-image">
    <path id="Vector 2860" stroke="#000000" d="M2 22V2h20v20H2Z" stroke-width="1.5"></path>
    <path id="Vector 2866" stroke="#000000" d="M7.5 5.5a2 2 0 1 1 0 4 2 2 0 0 1 0 -4Z" stroke-width="1.5"></path>
    <path id="Vector 2869" stroke="#000000" d="M2 17h20" stroke-width="1.5"></path>
    <path id="Vector 2867" stroke="#000000" d="m22 15 -6 -6 -8 8" stroke-width="1.5"></path>
  </g>
</svg>`,"layers-1":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Layers-1--Streamline-Sharp" height="24" width="24">
  <desc>
    Layers 1 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="layers-1--design-layer-layers-pile-stack-align">
    <path id="Vector 1398" stroke="#000000" d="M12 2 3 7l9 5 9 -5 -9 -5Z" stroke-width="1.5"></path>
    <path id="Vector 1399" stroke="#000000" d="M2 11.5454 12 17l10 -5.4546" stroke-width="1.5"></path>
    <path id="Vector 1400" stroke="#000000" d="M22 16.5454 12 22 2 16.5454" stroke-width="1.5"></path>
  </g>
</svg>`,"layout-right-sidebar":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Layout-Right-Sidebar--Streamline-Sharp" height="24" width="24">
  <desc>
    Layout Right Sidebar Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="layout-right-sidebar">
    <path id="Rectangle 594" stroke="#000000" d="M2 2h20v20H2z" stroke-width="1.5"></path>
    <path id="Vector 1371" stroke="#000000" d="M14 2v20" stroke-width="1.5"></path>
    <path id="Vector 1372" stroke="#000000" d="M16.5625 5h3" stroke-width="1.5"></path>
    <path id="Vector 1373" stroke="#000000" d="M16.5625 8h3" stroke-width="1.5"></path>
  </g>
</svg>`,"light-dark-mode":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Light-Dark-Mode--Streamline-Sharp" height="24" width="24">
  <desc>
    Light Dark Mode Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="light-dark-mode--light-dark-mode-setting-camera-picture-photo-image-brightness">
    <path id="Vector" stroke="#000000" stroke-linecap="square" stroke-linejoin="round" d="M12.0001 18.3078c3.4836 0 6.3077 -2.8241 6.3077 -6.3077 0 -3.48367 -2.8241 -6.30772 -6.3077 -6.30772 -3.48367 0 -6.30772 2.82405 -6.30772 6.30772 0 3.4836 2.82405 6.3077 6.30772 6.3077Z" stroke-width="1.5"></path>
    <path id="Subtract" stroke="#000000" stroke-linecap="square" stroke-linejoin="round" d="M17.9736 14.0311c-0.6374 0.2167 -1.3206 0.3342 -2.0313 0.3342 -3.4836 0 -6.30769 -2.824 -6.30769 -6.30767 0 -0.71066 0.11752 -1.39387 0.3342 -2.03126 -2.48707 0.84546 -4.27643 3.20051 -4.27643 5.97353 0 3.4836 2.82405 6.3076 6.30772 6.3076 2.773 0 5.128 -1.7893 5.9735 -4.2764Z" stroke-width="1.5"></path>
    <path id="Vector_2" stroke="#000000" stroke-linecap="square" stroke-linejoin="round" d="m16.4604 16.4604 2.7877 2.7877" stroke-width="1.5"></path>
    <path id="Vector_3" stroke="#000000" stroke-linecap="square" stroke-linejoin="round" d="M18.3076 12h3.9423" stroke-width="1.5"></path>
    <path id="Vector_4" stroke="#000000" stroke-linecap="square" stroke-linejoin="round" d="m19.2481 4.75244 -2.7877 2.78763" stroke-width="1.5"></path>
    <path id="Vector_5" stroke="#000000" stroke-linecap="square" stroke-linejoin="round" d="M12 1.75v3.94231" stroke-width="1.5"></path>
    <path id="Vector_6" stroke="#000000" stroke-linecap="square" stroke-linejoin="round" d="M7.54007 7.54007 4.75244 4.75244" stroke-width="1.5"></path>
    <path id="Vector_7" stroke="#000000" stroke-linecap="square" stroke-linejoin="round" d="M5.69231 12 1.75 12" stroke-width="1.5"></path>
    <path id="Vector_8" stroke="#000000" stroke-linecap="square" stroke-linejoin="round" d="m7.54007 16.4604 -2.78763 2.7877" stroke-width="1.5"></path>
    <path id="Vector_9" stroke="#000000" stroke-linecap="square" stroke-linejoin="round" d="M12 18.3076v3.9423" stroke-width="1.5"></path>
  </g>
</svg>`,"like-1":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Like-1--Streamline-Sharp" height="24" width="24">
  <desc>
    Like 1 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="like-1--reward-social-up-rating-media-like-thumb-hand">
    <path id="Vector 33" stroke="#000000" d="M6 11.5 6 21" stroke-width="1.5"></path>
    <path id="Vector 34" stroke="#000000" d="M19.5 21H2v-9.5h4L8.5 3h0.9A3.6 3.6 0 0 1 13 6.6V9h9l-2.5 12Z" stroke-width="1.5"></path>
  </g>
</svg>`,"link-chain":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Link-Chain--Streamline-Sharp" height="24" width="24">
  <desc>
    Link Chain Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="link-chain--create-hyperlink-link-make-unlink-connection-chain">
    <path id="Vector 47" stroke="#000000" d="m16 8 -8 8" stroke-width="1.5"></path>
    <path id="Vector 48" stroke="#000000" d="M10.5 7.5 16 2l6 6 -5.5 5.5" stroke-width="1.5"></path>
    <path id="Vector 1348" stroke="#000000" d="M13.5 16.5 8 22l-6 -6 5.5 -5.5" stroke-width="1.5"></path>
  </g>
</svg>`,"link-share-2":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Link-Share-2--Streamline-Sharp" height="24" width="24">
  <desc>
    Link Share 2 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="link-share-2--create-hyperlink-link-make-unlink-square">
    <path id="Vector 1312" stroke="#000000" d="M12 5H2v17h17V12" stroke-width="1.5"></path>
    <path id="Vector 1309" stroke="#000000" d="M10 14 22 2" stroke-width="1.5"></path>
    <path id="Vector 1310" stroke="#000000" d="M14 2h8v8" stroke-width="1.5"></path>
  </g>
</svg>`,"magnifying-glass":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Magnifying-Glass--Streamline-Sharp" height="24" width="24">
  <desc>
    Magnifying Glass Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="magnifying-glass--glass-search-magnifying">
    <path id="Ellipse 44" stroke="#000000" d="M2 11a9 9 0 1 0 18 0 9 9 0 1 0 -18 0" stroke-width="1.5"></path>
    <path id="Vector 195" stroke="#000000" d="M17.364 17.364 22 22" stroke-width="1.5"></path>
  </g>
</svg>`,"mail-send-email-message":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Mail-Send-Email-Message--Streamline-Sharp" height="24" width="24">
  <desc>
    Mail Send Email Message Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="mail-send-email-message--send-email-paper-airplane-deliver">
    <path id="Vector 2587" stroke="#000000" d="M3 9.436 21.63 2.37 14.565 21l-3.855 -7.709L3 9.436Z" stroke-width="1.5"></path>
    <path id="Vector 2588" stroke="#000000" d="m10.709 13.291 4.497 -4.497" stroke-width="1.5"></path>
  </g>
</svg>`,"new-file":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="New-File--Streamline-Sharp" height="24" width="24">
  <desc>
    New File Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="new-file--empty-common-file-content">
    <path id="Rectangle 842" stroke="#000000" d="M16 2H3v20h18V7l-5 -5Z" stroke-width="1.5"></path>
    <path id="Vector 1941" stroke="#000000" d="M15 2v6h6" stroke-width="1.5"></path>
  </g>
</svg>`,"new-folder":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="New-Folder--Streamline-Sharp" height="24" width="24">
  <desc>
    New Folder Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="new-folder--empty-folder">
    <path id="Rectangle 18" stroke="#000000" d="M2 3h6l4 4h10v15H2V3Z" stroke-width="1.5"></path>
  </g>
</svg>`,"padlock-square-1":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Padlock-Square-1--Streamline-Sharp" height="24" width="24">
  <desc>
    Padlock Square 1 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="padlock-square-1--combination-combo-lock-locked-padlock-secure-security-shield-keyhole">
    <path id="Ellipse 1" stroke="#000000" d="M20 11 4 11l0 11 16 0 0 -11Z" stroke-width="1.5"></path>
    <path id="Vector 26" stroke="#000000" d="M7 11V7a5 5 0 0 1 10 0v4" stroke-width="1.5"></path>
    <path id="Vector 1270" stroke="#000000" d="M12 15v3" stroke-width="1.5"></path>
  </g>
</svg>`,"padlock-square-2":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Padlock-Square-2--Streamline-Sharp" height="24" width="24">
  <desc>
    Padlock Square 2 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="padlock-square-2--combination-combo-key-keyhole-lock-secure-security-square-unlock-unlocked">
    <path id="Ellipse 1" stroke="#000000" d="M20 11 4 11l0 11 16 0 0 -11Z" stroke-width="1.5"></path>
    <path id="Vector 26" stroke="#000000" d="M7 11V7a5 5 0 0 1 10 0" stroke-width="1.5"></path>
    <path id="Vector 1270" stroke="#000000" d="M12 15v3" stroke-width="1.5"></path>
  </g>
</svg>`,"paperclip-2":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Paperclip-2--Streamline-Sharp" height="24" width="24">
  <desc>
    Paperclip 2 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="paperclip-2--attachment-link-paperclip-unlink">
    <path id="Vector 1471" stroke="#000000" d="M18 18V2H6v20h8V7h-4v11" stroke-width="1.5"></path>
  </g>
</svg>`,"pie-chart":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Pie-Chart--Streamline-Sharp" height="24" width="24">
  <desc>
    Pie Chart Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="pie-chart--product-data-analysis-analytics-pie-business-chart">
    <path id="Intersect" stroke="#000000" d="M22 10.5A8.5 8.5 0 0 0 13.5 2v8.5l8.5 0Z" stroke-width="1.5"></path>
    <path id="Subtract" stroke="#000000" d="M10.5 22a8.5 8.5 0 0 0 8.5 -8.5l-8.5 0 0 -8.5a8.5 8.5 0 0 0 0 17Z" stroke-width="1.5"></path>
  </g>
</svg>`,"pin-1":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Pin-1--Streamline-Sharp" height="24" width="24">
  <desc>
    Pin 1 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="pin-1--pin-push-thumbtack">
    <path id="Vector 48" stroke="#000000" d="m17.0001 12 4.5 -2.5 -7 -7 -2.5 4.5L3.5 10.5l10 10 3.5001 -8.5Z" stroke-width="1.5"></path>
    <path id="Vector 118" stroke="#000000" d="m1.5 22.5 7 -7" stroke-width="1.5"></path>
  </g>
</svg>`,"play-list-1":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Play-List-1--Streamline-Sharp" height="24" width="24">
  <desc>
    Play List 1 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="play-list-1--screen-television-display-player-movies-movie-tv-media-players-video-entertainment">
    <path id="Vector 1441" stroke="#000000" d="M2 22V2h20v20H2Z" stroke-width="1.5"></path>
    <path id="Vector 1258" stroke="#000000" d="M10 17.5v-6l5 3 -5 3Z" stroke-width="1.5"></path>
    <path id="Vector 1442" stroke="#000000" d="M2 7.5h20" stroke-width="1.5"></path>
    <path id="Vector 1444" stroke="#000000" d="m11.25 2 -5.5 5.5" stroke-width="1.5"></path>
    <path id="Vector 1445" stroke="#000000" d="m18.75 2 -5.5 5.5" stroke-width="1.5"></path>
  </g>
</svg>`,"play-list-8":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Play-List-8--Streamline-Sharp" height="24" width="24">
  <desc>
    Play List 8 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="play-list-8--player-television-movies-slider-media-tv-players-video-stack-entertainment">
    <path id="Rectangle 18" stroke="#000000" d="M18 18 2 18 2 2l16 0z" stroke-width="1.5"></path>
    <path id="Vector 64" stroke="#000000" d="m22 6 0 16 -16 0" stroke-width="1.5"></path>
    <path id="Vector 1258" stroke="#000000" d="M7.5 13V7l5 3 -5 3Z" stroke-width="1.5"></path>
  </g>
</svg>`,"recycle-bin-2":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Recycle-Bin-2--Streamline-Sharp" height="24" width="24">
  <desc>
    Recycle Bin 2 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="recycle-bin-2--remove-delete-empty-bin-trash-garbage">
    <path id="Vector 2273" stroke="#000000" d="M1 6h22" stroke-width="1.5"></path>
    <path id="Rectangle 760" stroke="#000000" d="M4 6h16v16H4V6Z" stroke-width="1.5"></path>
    <path id="Vector 2275" stroke="#000000" d="M9 10v8" stroke-width="1.5"></path>
    <path id="Vector 2277" stroke="#000000" d="M15 10v8" stroke-width="1.5"></path>
    <path id="Vector 2274" stroke="#000000" d="M8 6a4 4 0 0 1 8 0" stroke-width="1.5"></path>
  </g>
</svg>`,"script-1":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Script-1--Streamline-Sharp" height="24" width="24">
  <desc>
    Script 1 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="script-1--language-programming-code">
    <path id="Rectangle 821" stroke="#000000" d="M14.25 22h3.25H2l0 -6 12.25 0v4" stroke-width="1.5"></path>
    <path id="Vector 2068" stroke="#000000" d="M13.5 22H18V4.5" stroke-width="1.5"></path>
    <path id="Vector 2066" stroke="#000000" d="M8 8h7" stroke-width="1.5"></path>
    <path id="Vector 2067" stroke="#000000" d="M8 12h7" stroke-width="1.5"></path>
    <path id="Vector 2649" stroke="#000000" d="M5 16V2h17v6h-4" stroke-width="1.5"></path>
  </g>
</svg>`,"share-link":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Share-Link--Streamline-Sharp" height="24" width="24">
  <desc>
    Share Link Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="share-link--share-transmit">
    <path id="Ellipse 425" stroke="#000000" d="M2 12.5a3.5 3.5 0 1 0 7 0 3.5 3.5 0 1 0 -7 0" stroke-width="1.5"></path>
    <path id="Ellipse 426" stroke="#000000" d="M15 6.5a3.5 3.5 0 1 0 7 0 3.5 3.5 0 1 0 -7 0" stroke-width="1.5"></path>
    <path id="Ellipse 427" stroke="#000000" d="M15 17.5a3.5 3.5 0 1 0 7 0 3.5 3.5 0 1 0 -7 0" stroke-width="1.5"></path>
    <path id="Vector 1321" stroke="#000000" d="m8.768 13.757 6.464 2.486" stroke-width="1.5"></path>
    <path id="Vector 1320" stroke="#000000" d="m8.679 11.033 6.642 -3.066" stroke-width="1.5"></path>
  </g>
</svg>`,"shield-2":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Shield-2--Streamline-Sharp" height="24" width="24">
  <desc>
    Shield 2 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="shield-2--shield-protection-security-defend-crime-war-cover">
    <path id="Rectangle 38" stroke="#000000" d="m2.5 3.5 0 13.5 9.5 5 9.5 -5 0 -13.5 -0.494 0.148a10 10 0 0 1 -8.42 -1.258L12 2l-1.056 0.634a10 10 0 0 1 -8.307 0.912L2.5 3.5Z" stroke-width="1.5"></path>
  </g>
</svg>`,"signal-full":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Signal-Full--Streamline-Sharp" height="24" width="24">
  <desc>
    Signal Full Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="signal-full--phone-mobile-device-signal-wireless-smartphone-iphone-bar-bars-full-android">
    <path id="Vector 2335" stroke="#000000" d="M2.5 19.5V16H9v3.5" stroke-width="1.5"></path>
    <path id="Vector 2336" stroke="#000000" d="M9 19.5v-10h6.5v10" stroke-width="1.5"></path>
    <path id="Vector 2337" stroke="#000000" d="M15.5 19.5v-17h6v17" stroke-width="1.5"></path>
    <path id="Vector 2338" stroke="#000000" d="M1 22h22" stroke-width="1.5"></path>
  </g>
</svg>`,"star-2":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Star-2--Streamline-Sharp" height="24" width="24">
  <desc>
    Star 2 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="star-2--reward-rating-rate-social-star-media-favorite-like-stars-spark">
    <path id="Vector 2134" stroke="#000000" d="M12 2.844 9.19 9.22l-6.377 2.811 6.377 2.811L12 21.22l2.812 -6.377 6.376 -2.811 -6.376 -2.811L12 2.844Z" stroke-width="1.5"></path>
  </g>
</svg>`,"user-add-plus":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="User-Add-Plus--Streamline-Sharp" height="24" width="24">
  <desc>
    User Add Plus Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="user-add-plus--actions-add-close-geometric-human-person-plus-single-up-user">
    <path id="Ellipse 442" stroke="#000000" d="M12 18.5H2v-2.8a17.421 17.421 0 0 1 8.5 -2.2c1.737 0 3.416 0.253 5 0.725" stroke-width="1.5"></path>
    <path id="Ellipse 350" stroke="#000000" d="M6.5 6.25a4.25 4.25 0 1 0 8.5 0 4.25 4.25 0 1 0 -8.5 0" stroke-width="1.5"></path>
    <path id="Vector 1140" stroke="#000000" d="M23 18.5h-9m4.5 -4.5v9" stroke-width="1.5"></path>
  </g>
</svg>`,"user-multiple-circle":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="User-Multiple-Circle--Streamline-Sharp" height="24" width="24">
  <desc>
    User Multiple Circle Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="user-multiple-circle--close-geometric-human-multiple-person-up-user-circle">
    <path id="Ellipse 350" stroke="#000000" d="M2 12a10 10 0 1 0 20 0 10 10 0 1 0 -20 0" stroke-width="1.5"></path>
    <path id="Ellipse 418" stroke="#000000" d="M5.218 9.578a2.891 2.891 0 1 0 5.782 0 2.891 2.891 0 1 0 -5.782 0" stroke-width="1.5"></path>
    <path id="Ellipse 419" stroke="#000000" d="M14.062 12.047a2.469 2.469 0 1 0 4.938 0 2.469 2.469 0 1 0 -4.938 0" stroke-width="1.5"></path>
    <path id="Ellipse 417" stroke="#000000" d="M12.91 21.625v-5.566a11.517 11.517 0 0 0 -4.955 -1.113c-1.773 0 -3.453 0.4 -4.955 1.113" stroke-width="1.5"></path>
    <path id="Ellipse 420" stroke="#000000" d="M19.71 18.344c-1.236 -0.558 -2.742 -0.927 -4.188 -0.927 -0.903 0 -1.777 0.121 -2.609 0.349" stroke-width="1.5"></path>
  </g>
</svg>`,"user-work-laptop-wifi":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="User-Work-Laptop-Wifi--Streamline-Sharp" height="24" width="24">
  <desc>
    User Work Laptop Wifi Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="user-work-laptop-wifi--geometric-work-laptop-wifi-person-single-user">
    <path id="Ellipse 352" stroke="#000000" d="M10.243 3.757A5.981 5.981 0 0 0 6 2a5.981 5.981 0 0 0 -4.243 1.757" stroke-width="1.5"></path>
    <path id="Ellipse 353" stroke="#000000" d="M3.879 5.879A2.99 2.99 0 0 1 6 5a2.99 2.99 0 0 1 2.121 0.879" stroke-width="1.5"></path>
    <path id="Vector 1155" stroke="#000000" d="M16 20h-4m0 0H4l-2 -6h8l2 6Z" stroke-width="1.5"></path>
    <path id="Ellipse 418" stroke="#000000" d="M19.5 8.5a3.5 3.5 0 1 1 -7 0 3.5 3.5 0 0 1 7 0Z" stroke-width="1.5"></path>
    <path id="Ellipse 417" stroke="#000000" d="M18 20h4v-3.653A13.945 13.945 0 0 0 16 15c-1.03 0 -2.034 0.111 -3 0.322" stroke-width="1.5"></path>
  </g>
</svg>`,"vertical-slider-2":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Vertical-Slider-2--Streamline-Sharp" height="24" width="24">
  <desc>
    Vertical Slider 2 Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="vertical-slider-2--adjustment-adjust-controls-fader-vertical-settings-slider">
    <path id="Vector 2003" stroke="#000000" d="m12 1 0 6.5" stroke-width="1.5"></path>
    <path id="Vector 2004" stroke="#000000" d="m12 16.5 0 6.5" stroke-width="1.5"></path>
    <path id="Ellipse 611" stroke="#000000" d="M10 12a2 2 0 1 0 4 0 2 2 0 1 0 -4 0" stroke-width="1.5"></path>
    <path id="Vector 2006" stroke="#000000" d="M20 8.5 20 23" stroke-width="1.5"></path>
    <path id="Ellipse 612" stroke="#000000" d="M18 4a2 2 0 1 0 4 0 2 2 0 1 0 -4 0" stroke-width="1.5"></path>
    <path id="Vector 2007" stroke="#000000" d="m4 1 0 14.5" stroke-width="1.5"></path>
    <path id="Ellipse 613" stroke="#000000" d="M2 20a2 2 0 1 0 4 0 2 2 0 1 0 -4 0" stroke-width="1.5"></path>
  </g>
</svg>`,"video-subtitles":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Video-Subtitles--Streamline-Sharp" height="24" width="24">
  <desc>
    Video Subtitles Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="video-subtitles">
    <path id="Rectangle 729" stroke="#000000" d="M21 2.5 21 19 6.99976 19 3 21.5l0 -19 18 0Z" stroke-width="1.5"></path>
    <path id="Vector 2046" stroke="#000000" d="M6 12h7" stroke-width="1.5"></path>
    <path id="Vector 2047" stroke="#000000" d="M6 15.5h4" stroke-width="1.5"></path>
    <path id="Vector 2048" stroke="#000000" d="M12 15.5h6" stroke-width="1.5"></path>
    <path id="Vector 2601" stroke="#000000" d="M18 12h-3" stroke-width="1.5"></path>
  </g>
</svg>`,"webcam-video":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Webcam-Video--Streamline-Sharp" height="24" width="24">
  <desc>
    Webcam Video Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="webcam-video--work-video-meeting-camera-company-conference-office">
    <path id="Union" stroke="#000000" d="M17 5H2v14h15v-4l5 2V7l-5 2V5Z" stroke-width="1.5"></path>
  </g>
</svg>`,wrench:`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Wrench--Streamline-Sharp" height="24" width="24">
  <desc>
    Wrench Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="wrench--crescent-tool-construction-tools-wrench-setting-edit-adjust">
    <path id="Union" stroke="#000000" d="M15.5 2a6.48 6.48 0 0 1 2.846 0.654L14.5 6.5v3h3l3.846 -3.846a6.5 6.5 0 0 1 -8.347 8.847L5.5 22 2 18.5l7.499 -7.499A6.5 6.5 0 0 1 15.5 2Z" stroke-width="1.5"></path>
  </g>
</svg>`,"zip-file":`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Zip-File--Streamline-Sharp" height="24" width="24">
  <desc>
    Zip File Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="zip-file--file-common-zip">
    <path id="Vector 1956" stroke="#000000" d="M9 2v14" stroke-width="1.5"></path>
    <path id="Vector 1957" stroke="#000000" d="M6 13.5h6" stroke-width="1.5"></path>
    <path id="Vector 1958" stroke="#000000" d="M6 9.5h6" stroke-width="1.5"></path>
    <path id="Vector 1959" stroke="#000000" d="M6 5.5h6" stroke-width="1.5"></path>
    <path id="Rectangle 842" stroke="#000000" d="M16 2H3v20h18V7l-5 -5Z" stroke-width="1.5"></path>
  </g>
</svg>`},fY={3:12,"3.5":14,4:16,5:20,6:24,7:28,8:32,9:36,10:40,12:48,14:56,16:64},hY=e=>{if(!e)return;const t=e.match(/(?:^|\s)w-([0-9.]+)/);if(t)return fY[t[1]]},fv=new Map,mY=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/[_\s]+/g,"-").toLowerCase(),pY={search:["magnifying-glass"],settings:["cog"],"settings-2":["vertical-slider-2"],inbox:["inbox"],layers:["layers-1"],filter:["filter-2"],calendar:["calendar-mark"],"external-link":["arrow-diagonal-2","share-link"],"refresh-cw":["arrow-reload-horizontal-2"],"link-2":["link-chain","link-share-2"],paperclip:["paperclip-2"],trash2:["recycle-bin-2"],"trash-2":["recycle-bin-2"],download:["download-square"],check:["check"],star:["star-2"],"thumbs-up":["like-1"],"user-plus":["user-add-plus"],users:["user-multiple-circle"],lock:["padlock-square-1","padlock-square-2"],mail:["forward-email","mail-send-email-message"],send:["mail-send-email-message"],video:["webcam-video","video-subtitles"],upload:["arrow-up-large-2"],"message-square":["align-left-1"],"bar-chart-3":["pie-chart","graph-arrow-user-increase"]},gY=e=>{const t=e.trim().toLowerCase();if(!t)return null;if(fv.has(t))return fv.get(t)??null;const r=dY[t];if(!r)return fv.set(t,null),null;const n=r.match(/viewBox=['"]([^'"]+)['"]/i),a=(n==null?void 0:n[1])??"0 0 24 24",i=r.replace(/<\?xml[\s\S]*?\?>/gi,"").replace(/<!DOCTYPE[\s\S]*?>/gi,"").replace(/^[\s\S]*?<svg[^>]*>/i,"").replace(/<\/svg>\s*$/i,"").replace(/\sstyle=['"][^'"]*['"]/gi,"").replace(/\scolor=['"][^'"]*['"]/gi,"").replace(/\sstroke=['"](?!none)[^'"]*['"]/gi,' stroke="currentColor"').replace(/\sfill=['"](?!none)[^'"]*['"]/gi,' fill="none"'),o={viewBox:a,innerSvg:i};return fv.set(t,o),o},Ke=(e,t=20,r=2,n)=>{const a=h.forwardRef(({className:i,size:o,strokeWidth:l,...c},u)=>{const d=o??hY(i)??t,f=n||mY(e.displayName||e.name||""),m=Array.isArray(f)?f:[f],v=[...m,...m.flatMap(g=>pY[g]||[])].filter(Boolean).map(g=>gY(g)).find(Boolean)||null;return v?s.jsx("svg",{ref:u,xmlns:"http://www.w3.org/2000/svg",viewBox:v.viewBox,width:d,height:d,fill:"none",className:Pe("icon-crisp",i),dangerouslySetInnerHTML:{__html:v.innerSvg},...c}):s.jsx(e,{ref:u,size:d,strokeWidth:l??r,className:Pe("lucide-icon icon-crisp",i),...c})});return a.displayName="Icon",a},Hx=Ke($K),vY=Ke(kG),yY=Ke(jK),ho=Ke(kK),Ll=Ke(NK);Ke(EK);Ke(OK);Ke(Lx);const xY=Ke(Fx,20,2,"calendar"),mo=Ke(Fx,20,2,"calendar"),Ha=Ke(hy),Vx=Ke(DK),bY=Ke(Bx),Kx=Ke(JD),Kd=Ke(oi),wY=Ke(IK),Gx=Ke(AD),_Y=Ke(MK);Ke(RK);const Gd=Ke(FK),Yd=Ke(OD),Yy=Ke(UK);Ke(zK);const lN=Ke(ID,20,2,"download-square"),Yx=Ke(HK),Xd=Ke(KK),Fm=Ke(VK),SY=Ke(RD),jY=Ke(GK),Xx=Ke(Ux);Ke(YK);Ke($D);const hv=Ke(QK),kY=Ke(XK),NY=Ke(ZK),CY=Ke(PD);Ke(eG);const FS=Ke(tG),EY=Ke(LD);Ke(FD);const AY=Ke(rG),bn=Ke(aG),Bm=Ke(iG),Qx=Ke(sG),PY=Ke(qx),TY=Ke(qx,20,2,"link-chain"),Xp=Ke(BD),l3=Ke(tN),cN=Ke(Hc);Ke(qD);const uN=Ke(MD),c3=Ke(WK),OY=Ke(MD,20,2,"horizontal-menu-square");Ke(lG);Ke(cG);const IY=Ke(WD);Ke(LK);const kl=Ke(HD),MY=Ke(uG),RY=Ke(VD),$Y=Ke(pG),DY=Ke(gG),Jx=Ke(zx),Zx=Ke(Wx,20,2,"mail-send-email-message"),LY=Ke(vG);Ke(XD,20,2,"settings-2");const v1=Ke(Ss);Ke(YD);const FY=Ke(YD,20,2,"shield-2"),BY=Ke(yG);Ke(CK,20,2,"sparkles");Ke(rN);const kP=Ke(rN,20,2,"signal-full"),UY=Ke(_G),u3=Ke(nN),Va=Ke(ZD);Ke(SG);Ke(jG);const d3=Ke(NG),eb=Ke(PG,20,2,"user");Ke(EG,20,2,"user-cog");const Um=Ke(AG,20,2,"user-plus"),qY=Ke(Tl),Vc=Ke(t3,20,2,"users"),NP=Ke(t3,20,2,"user-work-laptop-wifi"),dN=Ke(r3),zY=Ke(bG,20,2,"chat-bubble-square-write"),WY=Ke(FD,20,2,"play-list-1"),f3=Ke(Ux,20,2,"script-1"),HY=Ke(nN,20,2,"like-1"),VY=Ke(RD,20,2,"zip-file"),KY=Ke(JD,20,2,"clean-broom-wipe"),Bf=Ke(my),fN=Ke(Wc),y1=Ke(OG),GY=bK,h3=h.forwardRef(({className:e,...t},r)=>s.jsx(gD,{ref:r,className:Pe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));h3.displayName=gD.displayName;const YY=Lf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-border bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),m3=h.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(vD,{ref:n,className:Pe(YY({variant:t}),e),...r}));m3.displayName=vD.displayName;const XY=h.forwardRef(({className:e,...t},r)=>s.jsx(bD,{ref:r,className:Pe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-border hover:bg-secondary group-[.destructive]:hover:border-border group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));XY.displayName=bD.displayName;const p3=h.forwardRef(({className:e,...t},r)=>s.jsx(wD,{ref:r,className:Pe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Bf,{className:"h-4 w-4"})}));p3.displayName=wD.displayName;const g3=h.forwardRef(({className:e,...t},r)=>s.jsx(yD,{ref:r,className:Pe("text-sm font-semibold",e),...t}));g3.displayName=yD.displayName;const v3=h.forwardRef(({className:e,...t},r)=>s.jsx(xD,{ref:r,className:Pe("text-sm opacity-90",e),...t}));v3.displayName=xD.displayName;function QY(){const{toasts:e}=PV();return s.jsxs(GY,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(m3,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(g3,{children:r}),n&&s.jsx(v3,{children:n})]}),a,s.jsx(p3,{})]},t)}),s.jsx(h3,{})]})}var CP=["light","dark"],JY="(prefers-color-scheme: dark)",ZY=h.createContext(void 0),eX={setTheme:e=>{},themes:[]},tX=()=>{var e;return(e=h.useContext(ZY))!=null?e:eX};h.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=a?CP.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(v,g=!1,b=!0)=>{let y=o?o[v]:v,w=g?v+"|| ''":`'${y}'`,x="";return a&&b&&!g&&CP.includes(v)&&(x+=`d.style.colorScheme = '${v}';`),r==="class"?g||y?x+=`c.add(${w})`:x+="null":y&&(x+=`d[s](n,${w})`),x},p=e?`!function(){${d}${m(e)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${JY}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${u?"":"else{"+m(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${f}}catch(t){}}();`;return h.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var rX=e=>{switch(e){case"success":return iX;case"info":return oX;case"warning":return sX;case"error":return lX;default:return null}},nX=Array(12).fill(0),aX=({visible:e,className:t})=>V.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},V.createElement("div",{className:"sonner-spinner"},nX.map((r,n)=>V.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),iX=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),sX=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),oX=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),lX=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),cX=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},V.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),V.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),uX=()=>{let[e,t]=V.useState(document.hidden);return V.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},BS=1,dX=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:BS++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0,i,o=n.then(async c=>{if(i=["resolve",c],V.isValidElement(c))a=!1,this.create({id:r,type:"default",message:c});else if(hX(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:d})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||BS++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ha=new dX,fX=(e,t)=>{let r=(t==null?void 0:t.id)||BS++;return ha.addToast({title:e,...t,id:r}),r},hX=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",mX=fX,pX=()=>ha.toasts,gX=()=>ha.getActiveToasts(),ee=Object.assign(mX,{success:ha.success,info:ha.info,warning:ha.warning,error:ha.error,custom:ha.custom,message:ha.message,promise:ha.promise,dismiss:ha.dismiss,loading:ha.loading},{getHistory:pX,getToasts:gX});function vX(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}vX(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function mv(e){return e.label!==void 0}var yX=3,xX="32px",bX="16px",EP=4e3,wX=356,_X=14,SX=20,jX=200;function Ni(...e){return e.filter(Boolean).join(" ")}function kX(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var NX=e=>{var t,r,n,a,i,o,l,c,u,d,f;let{invert:m,toast:p,unstyled:v,interacting:g,setHeights:b,visibleToasts:y,heights:w,index:x,toasts:_,expanded:S,removeToast:k,defaultRichColors:C,closeButton:j,style:N,cancelButtonStyle:A,actionButtonStyle:P,className:T="",descriptionClassName:L="",duration:U,position:D,gap:H,loadingIcon:B,expandByDefault:M,classNames:$,icons:re,closeButtonAriaLabel:ie="Close toast",pauseWhenPageIsHidden:q}=e,[K,ne]=V.useState(null),[ae,_e]=V.useState(null),[pe,ye]=V.useState(!1),[ce,me]=V.useState(!1),[Q,te]=V.useState(!1),[Ne,je]=V.useState(!1),[J,oe]=V.useState(!1),[Ce,R]=V.useState(0),[Y,Se]=V.useState(0),Re=V.useRef(p.duration||U||EP),de=V.useRef(null),G=V.useRef(null),ue=x===0,he=x+1<=y,Z=p.type,ge=p.dismissible!==!1,Ie=p.className||"",Ee=p.descriptionClassName||"",We=V.useMemo(()=>w.findIndex(ct=>ct.toastId===p.id)||0,[w,p.id]),Oe=V.useMemo(()=>{var ct;return(ct=p.closeButton)!=null?ct:j},[p.closeButton,j]),Fe=V.useMemo(()=>p.duration||U||EP,[p.duration,U]),rt=V.useRef(0),nt=V.useRef(0),Gt=V.useRef(0),ht=V.useRef(null),[dt,gt]=D.split("-"),It=V.useMemo(()=>w.reduce((ct,xe,et)=>et>=We?ct:ct+xe.height,0),[w,We]),Qt=uX(),Nn=p.invert||m,Br=Z==="loading";nt.current=V.useMemo(()=>We*H+It,[We,It]),V.useEffect(()=>{Re.current=Fe},[Fe]),V.useEffect(()=>{ye(!0)},[]),V.useEffect(()=>{let ct=G.current;if(ct){let xe=ct.getBoundingClientRect().height;return Se(xe),b(et=>[{toastId:p.id,height:xe,position:p.position},...et]),()=>b(et=>et.filter(Wt=>Wt.toastId!==p.id))}},[b,p.id]),V.useLayoutEffect(()=>{if(!pe)return;let ct=G.current,xe=ct.style.height;ct.style.height="auto";let et=ct.getBoundingClientRect().height;ct.style.height=xe,Se(et),b(Wt=>Wt.find(Jt=>Jt.toastId===p.id)?Wt.map(Jt=>Jt.toastId===p.id?{...Jt,height:et}:Jt):[{toastId:p.id,height:et,position:p.position},...Wt])},[pe,p.title,p.description,b,p.id]);let nr=V.useCallback(()=>{me(!0),R(nt.current),b(ct=>ct.filter(xe=>xe.toastId!==p.id)),setTimeout(()=>{k(p)},jX)},[p,k,b,nt]);V.useEffect(()=>{if(p.promise&&Z==="loading"||p.duration===1/0||p.type==="loading")return;let ct;return S||g||q&&Qt?(()=>{if(Gt.current<rt.current){let xe=new Date().getTime()-rt.current;Re.current=Re.current-xe}Gt.current=new Date().getTime()})():Re.current!==1/0&&(rt.current=new Date().getTime(),ct=setTimeout(()=>{var xe;(xe=p.onAutoClose)==null||xe.call(p,p),nr()},Re.current)),()=>clearTimeout(ct)},[S,g,p,Z,q,Qt,nr]),V.useEffect(()=>{p.delete&&nr()},[nr,p.delete]);function nn(){var ct,xe,et;return re!=null&&re.loading?V.createElement("div",{className:Ni($==null?void 0:$.loader,(ct=p==null?void 0:p.classNames)==null?void 0:ct.loader,"sonner-loader"),"data-visible":Z==="loading"},re.loading):B?V.createElement("div",{className:Ni($==null?void 0:$.loader,(xe=p==null?void 0:p.classNames)==null?void 0:xe.loader,"sonner-loader"),"data-visible":Z==="loading"},B):V.createElement(aX,{className:Ni($==null?void 0:$.loader,(et=p==null?void 0:p.classNames)==null?void 0:et.loader),visible:Z==="loading"})}return V.createElement("li",{tabIndex:0,ref:G,className:Ni(T,Ie,$==null?void 0:$.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,$==null?void 0:$.default,$==null?void 0:$[Z],(r=p==null?void 0:p.classNames)==null?void 0:r[Z]),"data-sonner-toast":"","data-rich-colors":(n=p.richColors)!=null?n:C,"data-styled":!(p.jsx||p.unstyled||v),"data-mounted":pe,"data-promise":!!p.promise,"data-swiped":J,"data-removed":ce,"data-visible":he,"data-y-position":dt,"data-x-position":gt,"data-index":x,"data-front":ue,"data-swiping":Q,"data-dismissible":ge,"data-type":Z,"data-invert":Nn,"data-swipe-out":Ne,"data-swipe-direction":ae,"data-expanded":!!(S||M&&pe),style:{"--index":x,"--toasts-before":x,"--z-index":_.length-x,"--offset":`${ce?Ce:nt.current}px`,"--initial-height":M?"auto":`${Y}px`,...N,...p.style},onDragEnd:()=>{te(!1),ne(null),ht.current=null},onPointerDown:ct=>{Br||!ge||(de.current=new Date,R(nt.current),ct.target.setPointerCapture(ct.pointerId),ct.target.tagName!=="BUTTON"&&(te(!0),ht.current={x:ct.clientX,y:ct.clientY}))},onPointerUp:()=>{var ct,xe,et,Wt;if(Ne||!ge)return;ht.current=null;let Jt=Number(((ct=G.current)==null?void 0:ct.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ur=Number(((xe=G.current)==null?void 0:xe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),mr=new Date().getTime()-((et=de.current)==null?void 0:et.getTime()),Ur=K==="x"?Jt:ur,ke=Math.abs(Ur)/mr;if(Math.abs(Ur)>=SX||ke>.11){R(nt.current),(Wt=p.onDismiss)==null||Wt.call(p,p),_e(K==="x"?Jt>0?"right":"left":ur>0?"down":"up"),nr(),je(!0),oe(!1);return}te(!1),ne(null)},onPointerMove:ct=>{var xe,et,Wt,Jt;if(!ht.current||!ge||((xe=window.getSelection())==null?void 0:xe.toString().length)>0)return;let ur=ct.clientY-ht.current.y,mr=ct.clientX-ht.current.x,Ur=(et=e.swipeDirections)!=null?et:kX(D);!K&&(Math.abs(mr)>1||Math.abs(ur)>1)&&ne(Math.abs(mr)>Math.abs(ur)?"x":"y");let ke={x:0,y:0};K==="y"?(Ur.includes("top")||Ur.includes("bottom"))&&(Ur.includes("top")&&ur<0||Ur.includes("bottom")&&ur>0)&&(ke.y=ur):K==="x"&&(Ur.includes("left")||Ur.includes("right"))&&(Ur.includes("left")&&mr<0||Ur.includes("right")&&mr>0)&&(ke.x=mr),(Math.abs(ke.x)>0||Math.abs(ke.y)>0)&&oe(!0),(Wt=G.current)==null||Wt.style.setProperty("--swipe-amount-x",`${ke.x}px`),(Jt=G.current)==null||Jt.style.setProperty("--swipe-amount-y",`${ke.y}px`)}},Oe&&!p.jsx?V.createElement("button",{"aria-label":ie,"data-disabled":Br,"data-close-button":!0,onClick:Br||!ge?()=>{}:()=>{var ct;nr(),(ct=p.onDismiss)==null||ct.call(p,p)},className:Ni($==null?void 0:$.closeButton,(a=p==null?void 0:p.classNames)==null?void 0:a.closeButton)},(i=re==null?void 0:re.close)!=null?i:cX):null,p.jsx||h.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:V.createElement(V.Fragment,null,Z||p.icon||p.promise?V.createElement("div",{"data-icon":"",className:Ni($==null?void 0:$.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||nn():null,p.type!=="loading"?p.icon||(re==null?void 0:re[Z])||rX(Z):null):null,V.createElement("div",{"data-content":"",className:Ni($==null?void 0:$.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},V.createElement("div",{"data-title":"",className:Ni($==null?void 0:$.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?V.createElement("div",{"data-description":"",className:Ni(L,Ee,$==null?void 0:$.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),h.isValidElement(p.cancel)?p.cancel:p.cancel&&mv(p.cancel)?V.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||A,onClick:ct=>{var xe,et;mv(p.cancel)&&ge&&((et=(xe=p.cancel).onClick)==null||et.call(xe,ct),nr())},className:Ni($==null?void 0:$.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,h.isValidElement(p.action)?p.action:p.action&&mv(p.action)?V.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||P,onClick:ct=>{var xe,et;mv(p.action)&&((et=(xe=p.action).onClick)==null||et.call(xe,ct),!ct.defaultPrevented&&nr())},className:Ni($==null?void 0:$.actionButton,(f=p==null?void 0:p.classNames)==null?void 0:f.actionButton)},p.action.label):null))};function AP(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function CX(e,t){let r={};return[e,t].forEach((n,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?bX:xX;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(l)}),r}var EX=h.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:f,duration:m,style:p,visibleToasts:v=yX,toastOptions:g,dir:b=AP(),gap:y=_X,loadingIcon:w,icons:x,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:S}=e,[k,C]=V.useState([]),j=V.useMemo(()=>Array.from(new Set([n].concat(k.filter(q=>q.position).map(q=>q.position)))),[k,n]),[N,A]=V.useState([]),[P,T]=V.useState(!1),[L,U]=V.useState(!1),[D,H]=V.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),B=V.useRef(null),M=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=V.useRef(null),re=V.useRef(!1),ie=V.useCallback(q=>{C(K=>{var ne;return(ne=K.find(ae=>ae.id===q.id))!=null&&ne.delete||ha.dismiss(q.id),K.filter(({id:ae})=>ae!==q.id)})},[]);return V.useEffect(()=>ha.subscribe(q=>{if(q.dismiss){C(K=>K.map(ne=>ne.id===q.id?{...ne,delete:!0}:ne));return}setTimeout(()=>{Y$.flushSync(()=>{C(K=>{let ne=K.findIndex(ae=>ae.id===q.id);return ne!==-1?[...K.slice(0,ne),{...K[ne],...q},...K.slice(ne+1)]:[q,...K]})})})}),[]),V.useEffect(()=>{if(d!=="system"){H(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window>"u")return;let q=window.matchMedia("(prefers-color-scheme: dark)");try{q.addEventListener("change",({matches:K})=>{H(K?"dark":"light")})}catch{q.addListener(({matches:ne})=>{try{H(ne?"dark":"light")}catch(ae){console.error(ae)}})}},[d]),V.useEffect(()=>{k.length<=1&&T(!1)},[k]),V.useEffect(()=>{let q=K=>{var ne,ae;a.every(_e=>K[_e]||K.code===_e)&&(T(!0),(ne=B.current)==null||ne.focus()),K.code==="Escape"&&(document.activeElement===B.current||(ae=B.current)!=null&&ae.contains(document.activeElement))&&T(!1)};return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[a]),V.useEffect(()=>{if(B.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,re.current=!1)}},[B.current]),V.createElement("section",{ref:t,"aria-label":`${_} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},j.map((q,K)=>{var ne;let[ae,_e]=q.split("-");return k.length?V.createElement("ol",{key:q,dir:b==="auto"?AP():b,tabIndex:-1,ref:B,className:l,"data-sonner-toaster":!0,"data-theme":D,"data-y-position":ae,"data-lifted":P&&k.length>1&&!i,"data-x-position":_e,style:{"--front-toast-height":`${((ne=N[0])==null?void 0:ne.height)||0}px`,"--width":`${wX}px`,"--gap":`${y}px`,...p,...CX(c,u)},onBlur:pe=>{re.current&&!pe.currentTarget.contains(pe.relatedTarget)&&(re.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||re.current||(re.current=!0,$.current=pe.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{L||T(!1)},onDragEnd:()=>T(!1),onPointerDown:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||U(!0)},onPointerUp:()=>U(!1)},k.filter(pe=>!pe.position&&K===0||pe.position===q).map((pe,ye)=>{var ce,me;return V.createElement(NX,{key:pe.id,icons:x,index:ye,toast:pe,defaultRichColors:f,duration:(ce=g==null?void 0:g.duration)!=null?ce:m,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:v,closeButton:(me=g==null?void 0:g.closeButton)!=null?me:o,interacting:L,position:q,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ie,toasts:k.filter(Q=>Q.position==pe.position),heights:N.filter(Q=>Q.position==pe.position),setHeights:A,expandByDefault:i,gap:y,loadingIcon:w,expanded:P,pauseWhenPageIsHidden:S,swipeDirections:e.swipeDirections})})):null}))});const AX=({...e})=>{const{theme:t="system"}=tX();return s.jsx(EX,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var PX=VM[" useId ".trim().toString()]||(()=>{}),TX=0;function qi(e){const[t,r]=h.useState(PX());return sn(()=>{r(n=>n??String(TX++))},[e]),t?`radix-${t}`:""}const OX=["top","right","bottom","left"],Ol=Math.min,$a=Math.max,Xy=Math.round,pv=Math.floor,vs=e=>({x:e,y:e}),IX={left:"right",right:"left",bottom:"top",top:"bottom"},MX={start:"end",end:"start"};function US(e,t,r){return $a(e,Ol(t,r))}function po(e,t){return typeof e=="function"?e(t):e}function go(e){return e.split("-")[0]}function Uf(e){return e.split("-")[1]}function hN(e){return e==="x"?"y":"x"}function mN(e){return e==="y"?"height":"width"}const RX=new Set(["top","bottom"]);function us(e){return RX.has(go(e))?"y":"x"}function pN(e){return hN(us(e))}function $X(e,t,r){r===void 0&&(r=!1);const n=Uf(e),a=pN(e),i=mN(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Qy(o)),[o,Qy(o)]}function DX(e){const t=Qy(e);return[qS(e),t,qS(t)]}function qS(e){return e.replace(/start|end/g,t=>MX[t])}const PP=["left","right"],TP=["right","left"],LX=["top","bottom"],FX=["bottom","top"];function BX(e,t,r){switch(e){case"top":case"bottom":return r?t?TP:PP:t?PP:TP;case"left":case"right":return t?LX:FX;default:return[]}}function UX(e,t,r,n){const a=Uf(e);let i=BX(go(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(qS)))),i}function Qy(e){return e.replace(/left|right|bottom|top/g,t=>IX[t])}function qX(e){return{top:0,right:0,bottom:0,left:0,...e}}function y3(e){return typeof e!="number"?qX(e):{top:e,right:e,bottom:e,left:e}}function Jy(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function OP(e,t,r){let{reference:n,floating:a}=e;const i=us(t),o=pN(t),l=mN(o),c=go(t),u=i==="y",d=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,m=n[l]/2-a[l]/2;let p;switch(c){case"top":p={x:d,y:n.y-a.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:f};break;case"left":p={x:n.x-a.width,y:f};break;default:p={x:n.x,y:n.y}}switch(Uf(t)){case"start":p[o]-=m*(r&&u?-1:1);break;case"end":p[o]+=m*(r&&u?-1:1);break}return p}const zX=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:f}=OP(u,n,c),m=n,p={},v=0;for(let g=0;g<l.length;g++){const{name:b,fn:y}=l[g],{x:w,y:x,data:_,reset:S}=await y({x:d,y:f,initialPlacement:n,placement:m,strategy:a,middlewareData:p,rects:u,platform:o,elements:{reference:e,floating:t}});d=w??d,f=x??f,p={...p,[b]:{...p[b],..._}},S&&v<=50&&(v++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):S.rects),{x:d,y:f}=OP(u,m,c)),g=-1)}return{x:d,y:f,placement:m,strategy:a,middlewareData:p}};async function qm(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:p=0}=po(t,e),v=y3(p),b=l[m?f==="floating"?"reference":"floating":f],y=Jy(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),w=f==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},S=Jy(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:x,strategy:c}):w);return{top:(y.top-S.top+v.top)/_.y,bottom:(S.bottom-y.bottom+v.bottom)/_.y,left:(y.left-S.left+v.left)/_.x,right:(S.right-y.right+v.right)/_.x}}const WX=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=po(e,t)||{};if(u==null)return{};const f=y3(d),m={x:r,y:n},p=pN(a),v=mN(p),g=await o.getDimensions(u),b=p==="y",y=b?"top":"left",w=b?"bottom":"right",x=b?"clientHeight":"clientWidth",_=i.reference[v]+i.reference[p]-m[p]-i.floating[v],S=m[p]-i.reference[p],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=k?k[x]:0;(!C||!await(o.isElement==null?void 0:o.isElement(k)))&&(C=l.floating[x]||i.floating[v]);const j=_/2-S/2,N=C/2-g[v]/2-1,A=Ol(f[y],N),P=Ol(f[w],N),T=A,L=C-g[v]-P,U=C/2-g[v]/2+j,D=US(T,U,L),H=!c.arrow&&Uf(a)!=null&&U!==D&&i.reference[v]/2-(U<T?A:P)-g[v]/2<0,B=H?U<T?U-T:U-L:0;return{[p]:m[p]+B,data:{[p]:D,centerOffset:U-D-B,...H&&{alignmentOffset:B}},reset:H}}}),HX=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...b}=po(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const y=go(a),w=us(l),x=go(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=m||(x||!g?[Qy(l)]:DX(l)),k=v!=="none";!m&&k&&S.push(...UX(l,g,v,_));const C=[l,...S],j=await qm(t,b),N=[];let A=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&N.push(j[y]),f){const U=$X(a,o,_);N.push(j[U[0]],j[U[1]])}if(A=[...A,{placement:a,overflows:N}],!N.every(U=>U<=0)){var P,T;const U=(((P=i.flip)==null?void 0:P.index)||0)+1,D=C[U];if(D&&(!(f==="alignment"?w!==us(D):!1)||A.every(M=>M.overflows[0]>0&&us(M.placement)===w)))return{data:{index:U,overflows:A},reset:{placement:D}};let H=(T=A.filter(B=>B.overflows[0]<=0).sort((B,M)=>B.overflows[1]-M.overflows[1])[0])==null?void 0:T.placement;if(!H)switch(p){case"bestFit":{var L;const B=(L=A.filter(M=>{if(k){const $=us(M.placement);return $===w||$==="y"}return!0}).map(M=>[M.placement,M.overflows.filter($=>$>0).reduce(($,re)=>$+re,0)]).sort((M,$)=>M[1]-$[1])[0])==null?void 0:L[0];B&&(H=B);break}case"initialPlacement":H=l;break}if(a!==H)return{reset:{placement:H}}}return{}}}};function IP(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function MP(e){return OX.some(t=>e[t]>=0)}const VX=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=po(e,t);switch(n){case"referenceHidden":{const i=await qm(t,{...a,elementContext:"reference"}),o=IP(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:MP(o)}}}case"escaped":{const i=await qm(t,{...a,altBoundary:!0}),o=IP(i,r.floating);return{data:{escapedOffsets:o,escaped:MP(o)}}}default:return{}}}}},x3=new Set(["left","top"]);async function KX(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=go(r),l=Uf(r),c=us(r)==="y",u=x3.has(o)?-1:1,d=i&&c?-1:1,f=po(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof v=="number"&&(p=l==="end"?v*-1:v),c?{x:p*d,y:m*u}:{x:m*u,y:p*d}}const GX=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await KX(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},YX=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x:y,y:w}=b;return{x:y,y:w}}},...c}=po(e,t),u={x:r,y:n},d=await qm(t,c),f=us(go(a)),m=hN(f);let p=u[m],v=u[f];if(i){const b=m==="y"?"top":"left",y=m==="y"?"bottom":"right",w=p+d[b],x=p-d[y];p=US(w,p,x)}if(o){const b=f==="y"?"top":"left",y=f==="y"?"bottom":"right",w=v+d[b],x=v-d[y];v=US(w,v,x)}const g=l.fn({...t,[m]:p,[f]:v});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[m]:i,[f]:o}}}}}},XX=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=po(e,t),d={x:r,y:n},f=us(a),m=hN(f);let p=d[m],v=d[f];const g=po(l,t),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const x=m==="y"?"height":"width",_=i.reference[m]-i.floating[x]+b.mainAxis,S=i.reference[m]+i.reference[x]-b.mainAxis;p<_?p=_:p>S&&(p=S)}if(u){var y,w;const x=m==="y"?"width":"height",_=x3.has(go(a)),S=i.reference[f]-i.floating[x]+(_&&((y=o.offset)==null?void 0:y[f])||0)+(_?0:b.crossAxis),k=i.reference[f]+i.reference[x]+(_?0:((w=o.offset)==null?void 0:w[f])||0)-(_?b.crossAxis:0);v<S?v=S:v>k&&(v=k)}return{[m]:p,[f]:v}}}},QX=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=po(e,t),d=await qm(t,u),f=go(a),m=Uf(a),p=us(a)==="y",{width:v,height:g}=i.floating;let b,y;f==="top"||f==="bottom"?(b=f,y=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=f,b=m==="end"?"top":"bottom");const w=g-d.top-d.bottom,x=v-d.left-d.right,_=Ol(g-d[b],w),S=Ol(v-d[y],x),k=!t.middlewareData.shift;let C=_,j=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(j=x),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(C=w),k&&!m){const A=$a(d.left,0),P=$a(d.right,0),T=$a(d.top,0),L=$a(d.bottom,0);p?j=v-2*(A!==0||P!==0?A+P:$a(d.left,d.right)):C=g-2*(T!==0||L!==0?T+L:$a(d.top,d.bottom))}await c({...t,availableWidth:j,availableHeight:C});const N=await o.getDimensions(l.floating);return v!==N.width||g!==N.height?{reset:{rects:!0}}:{}}}};function tb(){return typeof window<"u"}function qf(e){return b3(e)?(e.nodeName||"").toLowerCase():"#document"}function qa(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Es(e){var t;return(t=(b3(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function b3(e){return tb()?e instanceof Node||e instanceof qa(e).Node:!1}function Vi(e){return tb()?e instanceof Element||e instanceof qa(e).Element:!1}function js(e){return tb()?e instanceof HTMLElement||e instanceof qa(e).HTMLElement:!1}function RP(e){return!tb()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof qa(e).ShadowRoot}const JX=new Set(["inline","contents"]);function Qp(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Ki(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!JX.has(a)}const ZX=new Set(["table","td","th"]);function eQ(e){return ZX.has(qf(e))}const tQ=[":popover-open",":modal"];function rb(e){return tQ.some(t=>{try{return e.matches(t)}catch{return!1}})}const rQ=["transform","translate","scale","rotate","perspective"],nQ=["transform","translate","scale","rotate","perspective","filter"],aQ=["paint","layout","strict","content"];function gN(e){const t=vN(),r=Vi(e)?Ki(e):e;return rQ.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||nQ.some(n=>(r.willChange||"").includes(n))||aQ.some(n=>(r.contain||"").includes(n))}function iQ(e){let t=Il(e);for(;js(t)&&!Qd(t);){if(gN(t))return t;if(rb(t))return null;t=Il(t)}return null}function vN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const sQ=new Set(["html","body","#document"]);function Qd(e){return sQ.has(qf(e))}function Ki(e){return qa(e).getComputedStyle(e)}function nb(e){return Vi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Il(e){if(qf(e)==="html")return e;const t=e.assignedSlot||e.parentNode||RP(e)&&e.host||Es(e);return RP(t)?t.host:t}function w3(e){const t=Il(e);return Qd(t)?e.ownerDocument?e.ownerDocument.body:e.body:js(t)&&Qp(t)?t:w3(t)}function zm(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=w3(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=qa(a);if(i){const l=zS(o);return t.concat(o,o.visualViewport||[],Qp(a)?a:[],l&&r?zm(l):[])}return t.concat(a,zm(a,[],r))}function zS(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function _3(e){const t=Ki(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=js(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=Xy(r)!==i||Xy(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function yN(e){return Vi(e)?e:e.contextElement}function xd(e){const t=yN(e);if(!js(t))return vs(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=_3(t);let o=(i?Xy(r.width):r.width)/n,l=(i?Xy(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const oQ=vs(0);function S3(e){const t=qa(e);return!vN()||!t.visualViewport?oQ:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function lQ(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==qa(e)?!1:t}function Kc(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=yN(e);let o=vs(1);t&&(n?Vi(n)&&(o=xd(n)):o=xd(e));const l=lQ(i,r,n)?S3(i):vs(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,f=a.height/o.y;if(i){const m=qa(i),p=n&&Vi(n)?qa(n):n;let v=m,g=zS(v);for(;g&&n&&p!==v;){const b=xd(g),y=g.getBoundingClientRect(),w=Ki(g),x=y.left+(g.clientLeft+parseFloat(w.paddingLeft))*b.x,_=y.top+(g.clientTop+parseFloat(w.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,f*=b.y,c+=x,u+=_,v=qa(g),g=zS(v)}}return Jy({width:d,height:f,x:c,y:u})}function xN(e,t){const r=nb(e).scrollLeft;return t?t.left+r:Kc(Es(e)).left+r}function j3(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:xN(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function cQ(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=Es(n),l=t?rb(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=vs(1);const d=vs(0),f=js(n);if((f||!f&&!i)&&((qf(n)!=="body"||Qp(o))&&(c=nb(n)),js(n))){const p=Kc(n);u=xd(n),d.x=p.x+n.clientLeft,d.y=p.y+n.clientTop}const m=o&&!f&&!i?j3(o,c,!0):vs(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:r.y*u.y-c.scrollTop*u.y+d.y+m.y}}function uQ(e){return Array.from(e.getClientRects())}function dQ(e){const t=Es(e),r=nb(e),n=e.ownerDocument.body,a=$a(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=$a(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+xN(e);const l=-r.scrollTop;return Ki(n).direction==="rtl"&&(o+=$a(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function fQ(e,t){const r=qa(e),n=Es(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=vN();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const hQ=new Set(["absolute","fixed"]);function mQ(e,t){const r=Kc(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=js(e)?xd(e):vs(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function $P(e,t,r){let n;if(t==="viewport")n=fQ(e,r);else if(t==="document")n=dQ(Es(e));else if(Vi(t))n=mQ(t,r);else{const a=S3(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Jy(n)}function k3(e,t){const r=Il(e);return r===t||!Vi(r)||Qd(r)?!1:Ki(r).position==="fixed"||k3(r,t)}function pQ(e,t){const r=t.get(e);if(r)return r;let n=zm(e,[],!1).filter(l=>Vi(l)&&qf(l)!=="body"),a=null;const i=Ki(e).position==="fixed";let o=i?Il(e):e;for(;Vi(o)&&!Qd(o);){const l=Ki(o),c=gN(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&hQ.has(a.position)||Qp(o)&&!c&&k3(e,o))?n=n.filter(d=>d!==o):a=l,o=Il(o)}return t.set(e,n),n}function gQ(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?rb(t)?[]:pQ(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const f=$P(t,d,a);return u.top=$a(f.top,u.top),u.right=Ol(f.right,u.right),u.bottom=Ol(f.bottom,u.bottom),u.left=$a(f.left,u.left),u},$P(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function vQ(e){const{width:t,height:r}=_3(e);return{width:t,height:r}}function yQ(e,t,r){const n=js(t),a=Es(t),i=r==="fixed",o=Kc(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=vs(0);function u(){c.x=xN(a)}if(n||!n&&!i)if((qf(t)!=="body"||Qp(a))&&(l=nb(t)),n){const p=Kc(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else a&&u();i&&!n&&a&&u();const d=a&&!n&&!i?j3(a,l):vs(0),f=o.left+l.scrollLeft-c.x-d.x,m=o.top+l.scrollTop-c.y-d.y;return{x:f,y:m,width:o.width,height:o.height}}function x1(e){return Ki(e).position==="static"}function DP(e,t){if(!js(e)||Ki(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Es(e)===r&&(r=r.ownerDocument.body),r}function N3(e,t){const r=qa(e);if(rb(e))return r;if(!js(e)){let a=Il(e);for(;a&&!Qd(a);){if(Vi(a)&&!x1(a))return a;a=Il(a)}return r}let n=DP(e,t);for(;n&&eQ(n)&&x1(n);)n=DP(n,t);return n&&Qd(n)&&x1(n)&&!gN(n)?r:n||iQ(e)||r}const xQ=async function(e){const t=this.getOffsetParent||N3,r=this.getDimensions,n=await r(e.floating);return{reference:yQ(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function bQ(e){return Ki(e).direction==="rtl"}const wQ={convertOffsetParentRelativeRectToViewportRelativeRect:cQ,getDocumentElement:Es,getClippingRect:gQ,getOffsetParent:N3,getElementRects:xQ,getClientRects:uQ,getDimensions:vQ,getScale:xd,isElement:Vi,isRTL:bQ};function C3(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function _Q(e,t){let r=null,n;const a=Es(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:f,width:m,height:p}=u;if(l||t(),!m||!p)return;const v=pv(f),g=pv(a.clientWidth-(d+m)),b=pv(a.clientHeight-(f+p)),y=pv(d),x={rootMargin:-v+"px "+-g+"px "+-b+"px "+-y+"px",threshold:$a(0,Ol(1,c))||1};let _=!0;function S(k){const C=k[0].intersectionRatio;if(C!==c){if(!_)return o();C?o(!1,C):n=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!C3(u,e.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(S,{...x,root:a.ownerDocument})}catch{r=new IntersectionObserver(S,x)}r.observe(e)}return o(!0),i}function SQ(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=yN(e),d=a||i?[...u?zm(u):[],...zm(t)]:[];d.forEach(y=>{a&&y.addEventListener("scroll",r,{passive:!0}),i&&y.addEventListener("resize",r)});const f=u&&l?_Q(u,r):null;let m=-1,p=null;o&&(p=new ResizeObserver(y=>{let[w]=y;w&&w.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var x;(x=p)==null||x.observe(t)})),r()}),u&&!c&&p.observe(u),p.observe(t));let v,g=c?Kc(e):null;c&&b();function b(){const y=Kc(e);g&&!C3(g,y)&&r(),g=y,v=requestAnimationFrame(b)}return r(),()=>{var y;d.forEach(w=>{a&&w.removeEventListener("scroll",r),i&&w.removeEventListener("resize",r)}),f==null||f(),(y=p)==null||y.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const jQ=GX,kQ=YX,NQ=HX,CQ=QX,EQ=VX,LP=WX,AQ=XX,PQ=(e,t,r)=>{const n=new Map,a={platform:wQ,...r},i={...a.platform,_c:n};return zX(e,t,{...a,platform:i})};var TQ=typeof document<"u",OQ=function(){},py=TQ?h.useLayoutEffect:OQ;function Zy(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Zy(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!Zy(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function E3(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function FP(e,t){const r=E3(e);return Math.round(t*r)/r}function b1(e){const t=h.useRef(e);return py(()=>{t.current=e}),t}function IQ(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=h.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=h.useState(n);Zy(m,n)||p(n);const[v,g]=h.useState(null),[b,y]=h.useState(null),w=h.useCallback(M=>{M!==k.current&&(k.current=M,g(M))},[]),x=h.useCallback(M=>{M!==C.current&&(C.current=M,y(M))},[]),_=i||v,S=o||b,k=h.useRef(null),C=h.useRef(null),j=h.useRef(d),N=c!=null,A=b1(c),P=b1(a),T=b1(u),L=h.useCallback(()=>{if(!k.current||!C.current)return;const M={placement:t,strategy:r,middleware:m};P.current&&(M.platform=P.current),PQ(k.current,C.current,M).then($=>{const re={...$,isPositioned:T.current!==!1};U.current&&!Zy(j.current,re)&&(j.current=re,ou.flushSync(()=>{f(re)}))})},[m,t,r,P,T]);py(()=>{u===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[u]);const U=h.useRef(!1);py(()=>(U.current=!0,()=>{U.current=!1}),[]),py(()=>{if(_&&(k.current=_),S&&(C.current=S),_&&S){if(A.current)return A.current(_,S,L);L()}},[_,S,L,A,N]);const D=h.useMemo(()=>({reference:k,floating:C,setReference:w,setFloating:x}),[w,x]),H=h.useMemo(()=>({reference:_,floating:S}),[_,S]),B=h.useMemo(()=>{const M={position:r,left:0,top:0};if(!H.floating)return M;const $=FP(H.floating,d.x),re=FP(H.floating,d.y);return l?{...M,transform:"translate("+$+"px, "+re+"px)",...E3(H.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:$,top:re}},[r,l,H.floating,d.x,d.y]);return h.useMemo(()=>({...d,update:L,refs:D,elements:H,floatingStyles:B}),[d,L,D,H,B])}const MQ=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?LP({element:n.current,padding:a}).fn(r):{}:n?LP({element:n,padding:a}).fn(r):{}}}},RQ=(e,t)=>({...jQ(e),options:[e,t]}),$Q=(e,t)=>({...kQ(e),options:[e,t]}),DQ=(e,t)=>({...AQ(e),options:[e,t]}),LQ=(e,t)=>({...NQ(e),options:[e,t]}),FQ=(e,t)=>({...CQ(e),options:[e,t]}),BQ=(e,t)=>({...EQ(e),options:[e,t]}),UQ=(e,t)=>({...MQ(e),options:[e,t]});var qQ="Arrow",A3=h.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(ot.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});A3.displayName=qQ;var zQ=A3;function bN(e){const[t,r]=h.useState(void 0);return sn(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var wN="Popper",[P3,Fl]=zn(wN),[WQ,T3]=P3(wN),O3=e=>{const{__scopePopper:t,children:r}=e,[n,a]=h.useState(null);return s.jsx(WQ,{scope:t,anchor:n,onAnchorChange:a,children:r})};O3.displayName=wN;var I3="PopperAnchor",M3=h.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=T3(I3,r),o=h.useRef(null),l=Ot(t,o);return h.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:s.jsx(ot.div,{...a,ref:l})});M3.displayName=I3;var _N="PopperContent",[HQ,VQ]=P3(_N),R3=h.forwardRef((e,t)=>{var pe,ye,ce,me,Q,te;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:v,...g}=e,b=T3(_N,r),[y,w]=h.useState(null),x=Ot(t,Ne=>w(Ne)),[_,S]=h.useState(null),k=bN(_),C=(k==null?void 0:k.width)??0,j=(k==null?void 0:k.height)??0,N=n+(i!=="center"?"-"+i:""),A=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(u)?u:[u],T=P.length>0,L={padding:A,boundary:P.filter(GQ),altBoundary:T},{refs:U,floatingStyles:D,placement:H,isPositioned:B,middlewareData:M}=IQ({strategy:"fixed",placement:N,whileElementsMounted:(...Ne)=>SQ(...Ne,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[RQ({mainAxis:a+j,alignmentAxis:o}),c&&$Q({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?DQ():void 0,...L}),c&&LQ({...L}),FQ({...L,apply:({elements:Ne,rects:je,availableWidth:J,availableHeight:oe})=>{const{width:Ce,height:R}=je.reference,Y=Ne.floating.style;Y.setProperty("--radix-popper-available-width",`${J}px`),Y.setProperty("--radix-popper-available-height",`${oe}px`),Y.setProperty("--radix-popper-anchor-width",`${Ce}px`),Y.setProperty("--radix-popper-anchor-height",`${R}px`)}}),_&&UQ({element:_,padding:l}),YQ({arrowWidth:C,arrowHeight:j}),m&&BQ({strategy:"referenceHidden",...L})]}),[$,re]=L3(H),ie=rn(v);sn(()=>{B&&(ie==null||ie())},[B,ie]);const q=(pe=M.arrow)==null?void 0:pe.x,K=(ye=M.arrow)==null?void 0:ye.y,ne=((ce=M.arrow)==null?void 0:ce.centerOffset)!==0,[ae,_e]=h.useState();return sn(()=>{y&&_e(window.getComputedStyle(y).zIndex)},[y]),s.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...D,transform:B?D.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ae,"--radix-popper-transform-origin":[(me=M.transformOrigin)==null?void 0:me.x,(Q=M.transformOrigin)==null?void 0:Q.y].join(" "),...((te=M.hide)==null?void 0:te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(HQ,{scope:r,placedSide:$,onArrowChange:S,arrowX:q,arrowY:K,shouldHideArrow:ne,children:s.jsx(ot.div,{"data-side":$,"data-align":re,...g,ref:x,style:{...g.style,animation:B?void 0:"none"}})})})});R3.displayName=_N;var $3="PopperArrow",KQ={top:"bottom",right:"left",bottom:"top",left:"right"},D3=h.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=VQ($3,n),o=KQ[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(zQ,{...a,ref:r,style:{...a.style,display:"block"}})})});D3.displayName=$3;function GQ(e){return e!==null}var YQ=e=>({name:"transformOrigin",options:e,fn(t){var b,y,w;const{placement:r,rects:n,middlewareData:a}=t,o=((b=a.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=L3(r),f={start:"0%",center:"50%",end:"100%"}[d],m=(((y=a.arrow)==null?void 0:y.x)??0)+l/2,p=(((w=a.arrow)==null?void 0:w.y)??0)+c/2;let v="",g="";return u==="bottom"?(v=o?f:`${m}px`,g=`${-c}px`):u==="top"?(v=o?f:`${m}px`,g=`${n.floating.height+c}px`):u==="right"?(v=`${-c}px`,g=o?f:`${p}px`):u==="left"&&(v=`${n.floating.width+c}px`,g=o?f:`${p}px`),{data:{x:v,y:g}}}});function L3(e){const[t,r="center"]=e.split("-");return[t,r]}var SN=O3,Jp=M3,ab=R3,ib=D3,[sb,c3e]=zn("Tooltip",[Fl]),jN=Fl(),F3="TooltipProvider",XQ=700,BP="tooltip.open",[QQ,B3]=sb(F3),U3=e=>{const{__scopeTooltip:t,delayDuration:r=XQ,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=h.useRef(!0),l=h.useRef(!1),c=h.useRef(0);return h.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),s.jsx(QQ,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:h.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:h.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:h.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:i})};U3.displayName=F3;var q3="Tooltip",[u3e,ob]=sb(q3),WS="TooltipTrigger",JQ=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=ob(WS,r),i=B3(WS,r),o=jN(r),l=h.useRef(null),c=Ot(t,l,a.onTriggerChange),u=h.useRef(!1),d=h.useRef(!1),f=h.useCallback(()=>u.current=!1,[]);return h.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),s.jsx(Jp,{asChild:!0,...o,children:s.jsx(ot.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:Ve(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ve(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Ve(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Ve(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:Ve(e.onBlur,a.onClose),onClick:Ve(e.onClick,a.onClose)})})});JQ.displayName=WS;var ZQ="TooltipPortal",[d3e,eJ]=sb(ZQ,{forceMount:void 0}),Jd="TooltipContent",z3=h.forwardRef((e,t)=>{const r=eJ(Jd,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=ob(Jd,e.__scopeTooltip);return s.jsx(Wn,{present:n||o.open,children:o.disableHoverableContent?s.jsx(W3,{side:a,...i,ref:t}):s.jsx(tJ,{side:a,...i,ref:t})})}),tJ=h.forwardRef((e,t)=>{const r=ob(Jd,e.__scopeTooltip),n=B3(Jd,e.__scopeTooltip),a=h.useRef(null),i=Ot(t,a),[o,l]=h.useState(null),{trigger:c,onClose:u}=r,d=a.current,{onPointerInTransitChange:f}=n,m=h.useCallback(()=>{l(null),f(!1)},[f]),p=h.useCallback((v,g)=>{const b=v.currentTarget,y={x:v.clientX,y:v.clientY},w=sJ(y,b.getBoundingClientRect()),x=oJ(y,w),_=lJ(g.getBoundingClientRect()),S=uJ([...x,..._]);l(S),f(!0)},[f]);return h.useEffect(()=>()=>m(),[m]),h.useEffect(()=>{if(c&&d){const v=b=>p(b,d),g=b=>p(b,c);return c.addEventListener("pointerleave",v),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",g)}}},[c,d,p,m]),h.useEffect(()=>{if(o){const v=g=>{const b=g.target,y={x:g.clientX,y:g.clientY},w=(c==null?void 0:c.contains(b))||(d==null?void 0:d.contains(b)),x=!cJ(y,o);w?m():x&&(m(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,d,o,u,m]),s.jsx(W3,{...e,ref:i})}),[rJ,nJ]=sb(q3,{isInside:!1}),aJ=J$("TooltipContent"),W3=h.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=ob(Jd,r),u=jN(r),{onClose:d}=c;return h.useEffect(()=>(document.addEventListener(BP,d),()=>document.removeEventListener(BP,d)),[d]),h.useEffect(()=>{if(c.trigger){const f=m=>{const p=m.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),s.jsx(lu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:s.jsxs(ab,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(aJ,{children:n}),s.jsx(rJ,{scope:r,isInside:!0,children:s.jsx(rK,{id:c.contentId,role:"tooltip",children:a||n})})]})})});z3.displayName=Jd;var H3="TooltipArrow",iJ=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=jN(r);return nJ(H3,r).isInside?null:s.jsx(ib,{...a,...n,ref:t})});iJ.displayName=H3;function sJ(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function oJ(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function lJ(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function cJ(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,m=c.y;d>n!=m>n&&r<(f-u)*(n-d)/(m-d)+u&&(a=!a)}return a}function uJ(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),dJ(t)}function dJ(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var fJ=U3,V3=z3;const hJ=fJ,mJ=h.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(V3,{ref:n,sideOffset:t,className:Pe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));mJ.displayName=V3.displayName;var lb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},cb=typeof window>"u"||"Deno"in globalThis;function Ti(){}function pJ(e,t){return typeof e=="function"?e(t):e}function gJ(e){return typeof e=="number"&&e>=0&&e!==1/0}function vJ(e,t){return Math.max(e+(t||0)-Date.now(),0)}function HS(e,t){return typeof e=="function"?e(t):e}function yJ(e,t){return typeof e=="function"?e(t):e}function UP(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==kN(o,t.options))return!1}else if(!Hm(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function qP(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Wm(t.options.mutationKey)!==Wm(i))return!1}else if(!Hm(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function kN(e,t){return((t==null?void 0:t.queryKeyHashFn)||Wm)(e)}function Wm(e){return JSON.stringify(e,(t,r)=>VS(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Hm(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Hm(e[r],t[r])):!1}function K3(e,t){if(e===t)return e;const r=zP(e)&&zP(t);if(r||VS(e)&&VS(t)){const n=r?e:Object.keys(e),a=n.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<o;d++){const f=r?d:i[d];(!r&&c.has(f)||r)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,u++):(l[f]=K3(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&u++)}return a===o&&u===a?e:l}return t}function zP(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function VS(e){if(!WP(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!WP(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function WP(e){return Object.prototype.toString.call(e)==="[object Object]"}function xJ(e){return new Promise(t=>{setTimeout(t,e)})}function bJ(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?K3(e,t):t}function wJ(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function _J(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var NN=Symbol();function G3(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===NN?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Cc,sl,Td,EM,SJ=(EM=class extends lb{constructor(){super();lr(this,Cc);lr(this,sl);lr(this,Td);Bt(this,Td,t=>{if(!cb&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Ue(this,sl)||this.setEventListener(Ue(this,Td))}onUnsubscribe(){var t;this.hasListeners()||((t=Ue(this,sl))==null||t.call(this),Bt(this,sl,void 0))}setEventListener(t){var r;Bt(this,Td,t),(r=Ue(this,sl))==null||r.call(this),Bt(this,sl,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Ue(this,Cc)!==t&&(Bt(this,Cc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Ue(this,Cc)=="boolean"?Ue(this,Cc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Cc=new WeakMap,sl=new WeakMap,Td=new WeakMap,EM),Y3=new SJ,Od,ol,Id,AM,jJ=(AM=class extends lb{constructor(){super();lr(this,Od,!0);lr(this,ol);lr(this,Id);Bt(this,Id,t=>{if(!cb&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Ue(this,ol)||this.setEventListener(Ue(this,Id))}onUnsubscribe(){var t;this.hasListeners()||((t=Ue(this,ol))==null||t.call(this),Bt(this,ol,void 0))}setEventListener(t){var r;Bt(this,Id,t),(r=Ue(this,ol))==null||r.call(this),Bt(this,ol,t(this.setOnline.bind(this)))}setOnline(t){Ue(this,Od)!==t&&(Bt(this,Od,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Ue(this,Od)}},Od=new WeakMap,ol=new WeakMap,Id=new WeakMap,AM),e0=new jJ;function kJ(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function NJ(e){return Math.min(1e3*2**e,3e4)}function X3(e){return(e??"online")==="online"?e0.isOnline():!0}var Q3=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function w1(e){return e instanceof Q3}function J3(e){let t=!1,r=0,n=!1,a;const i=kJ(),o=g=>{var b;n||(m(new Q3(g)),(b=e.abort)==null||b.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>Y3.isFocused()&&(e.networkMode==="always"||e0.isOnline())&&e.canRun(),d=()=>X3(e.networkMode)&&e.canRun(),f=g=>{var b;n||(n=!0,(b=e.onSuccess)==null||b.call(e,g),a==null||a(),i.resolve(g))},m=g=>{var b;n||(n=!0,(b=e.onError)==null||b.call(e,g),a==null||a(),i.reject(g))},p=()=>new Promise(g=>{var b;a=y=>{(n||u())&&g(y)},(b=e.onPause)==null||b.call(e)}).then(()=>{var g;a=void 0,n||(g=e.onContinue)==null||g.call(e)}),v=()=>{if(n)return;let g;const b=r===0?e.initialPromise:void 0;try{g=b??e.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(f).catch(y=>{var k;if(n)return;const w=e.retry??(cb?0:3),x=e.retryDelay??NJ,_=typeof x=="function"?x(r,y):x,S=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,y);if(t||!S){m(y);return}r++,(k=e.onFail)==null||k.call(e,r,y),xJ(_).then(()=>u()?void 0:p()).then(()=>{t?m(y):v()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?v():p().then(v),i)}}var CJ=e=>setTimeout(e,0);function EJ(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=CJ;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var aa=EJ(),Ec,PM,Z3=(PM=class{constructor(){lr(this,Ec)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),gJ(this.gcTime)&&Bt(this,Ec,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(cb?1/0:5*60*1e3))}clearGcTimeout(){Ue(this,Ec)&&(clearTimeout(Ue(this,Ec)),Bt(this,Ec,void 0))}},Ec=new WeakMap,PM),Md,Ac,ni,Pc,Xn,Up,Tc,Ii,Ws,TM,AJ=(TM=class extends Z3{constructor(t){super();lr(this,Ii);lr(this,Md);lr(this,Ac);lr(this,ni);lr(this,Pc);lr(this,Xn);lr(this,Up);lr(this,Tc);Bt(this,Tc,!1),Bt(this,Up,t.defaultOptions),this.setOptions(t.options),this.observers=[],Bt(this,Pc,t.client),Bt(this,ni,Ue(this,Pc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Bt(this,Md,TJ(this.options)),this.state=t.state??Ue(this,Md),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ue(this,Xn))==null?void 0:t.promise}setOptions(t){this.options={...Ue(this,Up),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ue(this,ni).remove(this)}setData(t,r){const n=bJ(this.state.data,t,this.options);return Kn(this,Ii,Ws).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Kn(this,Ii,Ws).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=Ue(this,Xn))==null?void 0:n.promise;return(a=Ue(this,Xn))==null||a.cancel(t),r?r.then(Ti).catch(Ti):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ue(this,Md))}isActive(){return this.observers.some(t=>yJ(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===NN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>HS(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!vJ(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Ue(this,Xn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Ue(this,Xn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ue(this,ni).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Ue(this,Xn)&&(Ue(this,Tc)?Ue(this,Xn).cancel({revert:!0}):Ue(this,Xn).cancelRetry()),this.scheduleGc()),Ue(this,ni).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Kn(this,Ii,Ws).call(this,{type:"invalidate"})}fetch(t,r){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Ue(this,Xn))return Ue(this,Xn).continueRetry(),Ue(this,Xn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Bt(this,Tc,!0),n.signal)})},i=()=>{const m=G3(this.options,r),v=(()=>{const g={client:Ue(this,Pc),queryKey:this.queryKey,meta:this.meta};return a(g),g})();return Bt(this,Tc,!1),this.options.persister?this.options.persister(m,v,this):m(v)},l=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Ue(this,Pc),state:this.state,fetchFn:i};return a(m),m})();(u=this.options.behavior)==null||u.onFetch(l,this),Bt(this,Ac,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Kn(this,Ii,Ws).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=m=>{var p,v,g,b;w1(m)&&m.silent||Kn(this,Ii,Ws).call(this,{type:"error",error:m}),w1(m)||((v=(p=Ue(this,ni).config).onError)==null||v.call(p,m,this),(b=(g=Ue(this,ni).config).onSettled)==null||b.call(g,this.state.data,m,this)),this.scheduleGc()};return Bt(this,Xn,J3({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:m=>{var p,v,g,b;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(y){c(y);return}(v=(p=Ue(this,ni).config).onSuccess)==null||v.call(p,m,this),(b=(g=Ue(this,ni).config).onSettled)==null||b.call(g,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,p)=>{Kn(this,Ii,Ws).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{Kn(this,Ii,Ws).call(this,{type:"pause"})},onContinue:()=>{Kn(this,Ii,Ws).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Ue(this,Xn).start()}},Md=new WeakMap,Ac=new WeakMap,ni=new WeakMap,Pc=new WeakMap,Xn=new WeakMap,Up=new WeakMap,Tc=new WeakMap,Ii=new WeakSet,Ws=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...PJ(n.data,this.options),fetchMeta:t.meta??null};case"success":return Bt(this,Ac,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return w1(a)&&a.revert&&Ue(this,Ac)?{...Ue(this,Ac),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),aa.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Ue(this,ni).notify({query:this,type:"updated",action:t})})},TM);function PJ(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:X3(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function TJ(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var is,OM,OJ=(OM=class extends lb{constructor(t={}){super();lr(this,is);this.config=t,Bt(this,is,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??kN(a,r);let o=this.get(i);return o||(o=new AJ({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Ue(this,is).has(t.queryHash)||(Ue(this,is).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Ue(this,is).get(t.queryHash);r&&(t.destroy(),r===t&&Ue(this,is).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){aa.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ue(this,is).get(t)}getAll(){return[...Ue(this,is).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>UP(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>UP(t,n)):r}notify(t){aa.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){aa.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){aa.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},is=new WeakMap,OM),ss,ta,Oc,os,Go,IM,IJ=(IM=class extends Z3{constructor(t){super();lr(this,os);lr(this,ss);lr(this,ta);lr(this,Oc);this.mutationId=t.mutationId,Bt(this,ta,t.mutationCache),Bt(this,ss,[]),this.state=t.state||MJ(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ue(this,ss).includes(t)||(Ue(this,ss).push(t),this.clearGcTimeout(),Ue(this,ta).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Bt(this,ss,Ue(this,ss).filter(r=>r!==t)),this.scheduleGc(),Ue(this,ta).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ue(this,ss).length||(this.state.status==="pending"?this.scheduleGc():Ue(this,ta).remove(this))}continue(){var t;return((t=Ue(this,Oc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,c,u,d,f,m,p,v,g,b,y,w,x,_,S,k,C,j;const r=()=>{Kn(this,os,Go).call(this,{type:"continue"})};Bt(this,Oc,J3({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(N,A)=>{Kn(this,os,Go).call(this,{type:"failed",failureCount:N,error:A})},onPause:()=>{Kn(this,os,Go).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ue(this,ta).canRun(this)}));const n=this.state.status==="pending",a=!Ue(this,Oc).canStart();try{if(n)r();else{Kn(this,os,Go).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(i=Ue(this,ta).config).onMutate)==null?void 0:o.call(i,t,this));const A=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));A!==this.state.context&&Kn(this,os,Go).call(this,{type:"pending",context:A,variables:t,isPaused:a})}const N=await Ue(this,Oc).start();return await((d=(u=Ue(this,ta).config).onSuccess)==null?void 0:d.call(u,N,t,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,N,t,this.state.context)),await((v=(p=Ue(this,ta).config).onSettled)==null?void 0:v.call(p,N,null,this.state.variables,this.state.context,this)),await((b=(g=this.options).onSettled)==null?void 0:b.call(g,N,null,t,this.state.context)),Kn(this,os,Go).call(this,{type:"success",data:N}),N}catch(N){try{throw await((w=(y=Ue(this,ta).config).onError)==null?void 0:w.call(y,N,t,this.state.context,this)),await((_=(x=this.options).onError)==null?void 0:_.call(x,N,t,this.state.context)),await((k=(S=Ue(this,ta).config).onSettled)==null?void 0:k.call(S,void 0,N,this.state.variables,this.state.context,this)),await((j=(C=this.options).onSettled)==null?void 0:j.call(C,void 0,N,t,this.state.context)),N}finally{Kn(this,os,Go).call(this,{type:"error",error:N})}}finally{Ue(this,ta).runNext(this)}}},ss=new WeakMap,ta=new WeakMap,Oc=new WeakMap,os=new WeakSet,Go=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),aa.batch(()=>{Ue(this,ss).forEach(n=>{n.onMutationUpdate(t)}),Ue(this,ta).notify({mutation:this,type:"updated",action:t})})},IM);function MJ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ys,Mi,qp,MM,RJ=(MM=class extends lb{constructor(t={}){super();lr(this,Ys);lr(this,Mi);lr(this,qp);this.config=t,Bt(this,Ys,new Set),Bt(this,Mi,new Map),Bt(this,qp,0)}build(t,r,n){const a=new IJ({mutationCache:this,mutationId:++Vg(this,qp)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){Ue(this,Ys).add(t);const r=gv(t);if(typeof r=="string"){const n=Ue(this,Mi).get(r);n?n.push(t):Ue(this,Mi).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Ue(this,Ys).delete(t)){const r=gv(t);if(typeof r=="string"){const n=Ue(this,Mi).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&Ue(this,Mi).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=gv(t);if(typeof r=="string"){const n=Ue(this,Mi).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=gv(t);if(typeof r=="string"){const a=(n=Ue(this,Mi).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){aa.batch(()=>{Ue(this,Ys).forEach(t=>{this.notify({type:"removed",mutation:t})}),Ue(this,Ys).clear(),Ue(this,Mi).clear()})}getAll(){return Array.from(Ue(this,Ys))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>qP(r,n))}findAll(t={}){return this.getAll().filter(r=>qP(t,r))}notify(t){aa.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return aa.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ti))))}},Ys=new WeakMap,Mi=new WeakMap,qp=new WeakMap,MM);function gv(e){var t;return(t=e.options.scope)==null?void 0:t.id}function HP(e){return{onFetch:(t,r)=>{var d,f,m,p,v;const n=t.options,a=(m=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const b=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},y=G3(t.options,t.fetchOptions),w=async(x,_,S)=>{if(g)return Promise.reject();if(_==null&&x.pages.length)return Promise.resolve(x);const C=(()=>{const P={client:t.client,queryKey:t.queryKey,pageParam:_,direction:S?"backward":"forward",meta:t.options.meta};return b(P),P})(),j=await y(C),{maxPages:N}=t.options,A=S?_J:wJ;return{pages:A(x.pages,j,N),pageParams:A(x.pageParams,_,N)}};if(a&&i.length){const x=a==="backward",_=x?$J:VP,S={pages:i,pageParams:o},k=_(n,S);l=await w(S,k,x)}else{const x=e??i.length;do{const _=c===0?o[0]??n.initialPageParam:VP(n,l);if(c>0&&_==null)break;l=await w(l,_),c++}while(c<x)}return l};t.options.persister?t.fetchFn=()=>{var g,b;return(b=(g=t.options).persister)==null?void 0:b.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function VP(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function $J(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Xr,ll,cl,Rd,$d,ul,Dd,Ld,RM,DJ=(RM=class{constructor(e={}){lr(this,Xr);lr(this,ll);lr(this,cl);lr(this,Rd);lr(this,$d);lr(this,ul);lr(this,Dd);lr(this,Ld);Bt(this,Xr,e.queryCache||new OJ),Bt(this,ll,e.mutationCache||new RJ),Bt(this,cl,e.defaultOptions||{}),Bt(this,Rd,new Map),Bt(this,$d,new Map),Bt(this,ul,0)}mount(){Vg(this,ul)._++,Ue(this,ul)===1&&(Bt(this,Dd,Y3.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ue(this,Xr).onFocus())})),Bt(this,Ld,e0.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ue(this,Xr).onOnline())})))}unmount(){var e,t;Vg(this,ul)._--,Ue(this,ul)===0&&((e=Ue(this,Dd))==null||e.call(this),Bt(this,Dd,void 0),(t=Ue(this,Ld))==null||t.call(this),Bt(this,Ld,void 0))}isFetching(e){return Ue(this,Xr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ue(this,ll).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ue(this,Xr).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Ue(this,Xr).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(HS(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Ue(this,Xr).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=Ue(this,Xr).get(n.queryHash),i=a==null?void 0:a.state.data,o=pJ(t,i);if(o!==void 0)return Ue(this,Xr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return aa.batch(()=>Ue(this,Xr).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ue(this,Xr).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Ue(this,Xr);aa.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Ue(this,Xr);return aa.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=aa.batch(()=>Ue(this,Xr).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Ti).catch(Ti)}invalidateQueries(e,t={}){return aa.batch(()=>(Ue(this,Xr).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=aa.batch(()=>Ue(this,Xr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Ti)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Ti)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Ue(this,Xr).build(this,t);return r.isStaleByTime(HS(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ti).catch(Ti)}fetchInfiniteQuery(e){return e.behavior=HP(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ti).catch(Ti)}ensureInfiniteQueryData(e){return e.behavior=HP(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return e0.isOnline()?Ue(this,ll).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ue(this,Xr)}getMutationCache(){return Ue(this,ll)}getDefaultOptions(){return Ue(this,cl)}setDefaultOptions(e){Bt(this,cl,e)}setQueryDefaults(e,t){Ue(this,Rd).set(Wm(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ue(this,Rd).values()],r={};return t.forEach(n=>{Hm(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){Ue(this,$d).set(Wm(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ue(this,$d).values()],r={};return t.forEach(n=>{Hm(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ue(this,cl).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=kN(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===NN&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ue(this,cl).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ue(this,Xr).clear(),Ue(this,ll).clear()}},Xr=new WeakMap,ll=new WeakMap,cl=new WeakMap,Rd=new WeakMap,$d=new WeakMap,ul=new WeakMap,Dd=new WeakMap,Ld=new WeakMap,RM),LJ=h.createContext(void 0),FJ=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(LJ.Provider,{value:e,children:t}));/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var KP="popstate";function BJ(e={}){function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return KS("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Vm(a)}return qJ(t,r,null,e)}function Fr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ka(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function UJ(){return Math.random().toString(36).substring(2,10)}function GP(e,t){return{usr:e.state,key:e.key,idx:t}}function KS(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?zf(t):t,state:r,key:t&&t.key||n||UJ()}}function Vm({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function zf(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function qJ(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function f(){l="POP";let b=d(),y=b==null?null:b-u;u=b,c&&c({action:l,location:g.location,delta:y})}function m(b,y){l="PUSH";let w=KS(g.location,b,y);u=d()+1;let x=GP(w,u),_=g.createHref(w);try{o.pushState(x,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(_)}i&&c&&c({action:l,location:g.location,delta:1})}function p(b,y){l="REPLACE";let w=KS(g.location,b,y);u=d();let x=GP(w,u),_=g.createHref(w);o.replaceState(x,"",_),i&&c&&c({action:l,location:g.location,delta:0})}function v(b){return zJ(b)}let g={get action(){return l},get location(){return e(a,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(KP,f),c=b,()=>{a.removeEventListener(KP,f),c=null}},createHref(b){return t(a,b)},createURL:v,encodeLocation(b){let y=v(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:p,go(b){return o.go(b)}};return g}function zJ(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Fr(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Vm(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function eL(e,t,r="/"){return WJ(e,t,r,!1)}function WJ(e,t,r,n){let a=typeof t=="string"?zf(t):t,i=vo(a.pathname||"/",r);if(i==null)return null;let o=tL(e);HJ(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=rZ(i);l=eZ(o[c],u,n)}return l}function tL(e,t=[],r=[],n="",a=!1){let i=(o,l,c=a,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;Fr(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=no([n,d.relativePath]),m=r.concat(d);o.children&&o.children.length>0&&(Fr(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),tL(o.children,t,m,f,c)),!(o.path==null&&!o.index)&&t.push({path:f,score:JJ(f,o.index),routesMeta:m})};return e.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let u of rL(o.path))i(o,l,!0,u)}),t}function rL(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=rL(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function HJ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ZJ(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var VJ=/^:[\w-]+$/,KJ=3,GJ=2,YJ=1,XJ=10,QJ=-2,YP=e=>e==="*";function JJ(e,t){let r=e.split("/"),n=r.length;return r.some(YP)&&(n+=QJ),t&&(n+=GJ),r.filter(a=>!YP(a)).reduce((a,i)=>a+(VJ.test(i)?KJ:i===""?YJ:XJ),n)}function ZJ(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function eZ(e,t,r=!1){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=t0({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=t0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:no([i,f.pathname]),pathnameBase:sZ(no([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=no([i,f.pathnameBase]))}return o}function t0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=tZ(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},m)=>{if(d==="*"){let v=l[m]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const p=l[m];return f&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function tZ(e,t=!1,r=!0){Ka(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function rZ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ka(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function vo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var nL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nZ=e=>nL.test(e);function aZ(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?zf(e):e,i;if(r)if(nZ(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Ka(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${r}`)}r.startsWith("/")?i=XP(r.substring(1),"/"):i=XP(r,t)}else i=t;return{pathname:i,search:oZ(n),hash:lZ(a)}}function XP(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function _1(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iZ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function CN(e){let t=iZ(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function EN(e,t,r,n=!1){let a;typeof e=="string"?a=zf(e):(a={...e},Fr(!a.pathname||!a.pathname.includes("?"),_1("?","pathname","search",a)),Fr(!a.pathname||!a.pathname.includes("#"),_1("#","pathname","hash",a)),Fr(!a.search||!a.search.includes("#"),_1("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;a.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=aZ(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var no=e=>e.join("/").replace(/\/\/+/g,"/"),sZ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oZ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,lZ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,cZ=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function uZ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function dZ(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var aL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function iL(e,t){let r=e;if(typeof r!="string"||!nL.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,a=!1;if(aL)try{let i=new URL(window.location.href),o=r.startsWith("//")?new URL(i.protocol+r):new URL(r),l=vo(o.pathname,t);o.origin===i.origin&&l!=null?r=l+o.search+o.hash:a=!0}catch{Ka(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:a,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var sL=["POST","PUT","PATCH","DELETE"];new Set(sL);var fZ=["GET",...sL];new Set(fZ);var Wf=h.createContext(null);Wf.displayName="DataRouter";var ub=h.createContext(null);ub.displayName="DataRouterState";var hZ=h.createContext(!1),oL=h.createContext({isTransitioning:!1});oL.displayName="ViewTransition";var mZ=h.createContext(new Map);mZ.displayName="Fetchers";var pZ=h.createContext(null);pZ.displayName="Await";var Xa=h.createContext(null);Xa.displayName="Navigation";var Zp=h.createContext(null);Zp.displayName="Location";var wi=h.createContext({outlet:null,matches:[],isDataRoute:!1});wi.displayName="Route";var AN=h.createContext(null);AN.displayName="RouteError";var lL="REACT_ROUTER_ERROR",gZ="REDIRECT",vZ="ROUTE_ERROR_RESPONSE";function yZ(e){if(e.startsWith(`${lL}:${gZ}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function xZ(e){if(e.startsWith(`${lL}:${vZ}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new cZ(t.status,t.statusText,t.data)}catch{}}function bZ(e,{relative:t}={}){Fr(Hf(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=h.useContext(Xa),{hash:a,pathname:i,search:o}=eg(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:no([r,i])),n.createHref({pathname:l,search:o,hash:a})}function Hf(){return h.useContext(Zp)!=null}function Hn(){return Fr(Hf(),"useLocation() may be used only in the context of a <Router> component."),h.useContext(Zp).location}var cL="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uL(e){h.useContext(Xa).static||h.useLayoutEffect(e)}function Xt(){let{isDataRoute:e}=h.useContext(wi);return e?RZ():wZ()}function wZ(){Fr(Hf(),"useNavigate() may be used only in the context of a <Router> component.");let e=h.useContext(Wf),{basename:t,navigator:r}=h.useContext(Xa),{matches:n}=h.useContext(wi),{pathname:a}=Hn(),i=JSON.stringify(CN(n)),o=h.useRef(!1);return uL(()=>{o.current=!0}),h.useCallback((c,u={})=>{if(Ka(o.current,cL),!o.current)return;if(typeof c=="number"){r.go(c);return}let d=EN(c,JSON.parse(i),a,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:no([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,i,a,e])}var _Z=h.createContext(null);function SZ(e){let t=h.useContext(wi).outlet;return h.useMemo(()=>t&&h.createElement(_Z.Provider,{value:e},t),[t,e])}function db(){let{matches:e}=h.useContext(wi),t=e[e.length-1];return t?t.params:{}}function eg(e,{relative:t}={}){let{matches:r}=h.useContext(wi),{pathname:n}=Hn(),a=JSON.stringify(CN(r));return h.useMemo(()=>EN(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function jZ(e,t){return dL(e,t)}function dL(e,t,r,n,a){var w;Fr(Hf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=h.useContext(Xa),{matches:o}=h.useContext(wi),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",f=l&&l.route;{let x=f&&f.path||"";hL(u,!f||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let m=Hn(),p;if(t){let x=typeof t=="string"?zf(t):t;Fr(d==="/"||((w=x.pathname)==null?void 0:w.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${x.pathname}" was given in the \`location\` prop.`),p=x}else p=m;let v=p.pathname||"/",g=v;if(d!=="/"){let x=d.replace(/^\//,"").split("/");g="/"+v.replace(/^\//,"").split("/").slice(x.length).join("/")}let b=eL(e,{pathname:g});Ka(f||b!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Ka(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=AZ(b&&b.map(x=>Object.assign({},x,{params:Object.assign({},c,x.params),pathname:no([d,i.encodeLocation?i.encodeLocation(x.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?d:no([d,i.encodeLocation?i.encodeLocation(x.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathnameBase])})),o,r,n,a);return t&&y?h.createElement(Zp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},y):y}function kZ(){let e=MZ(),t=uZ(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=h.createElement(h.Fragment,null,h.createElement("p",null," Hey developer "),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",h.createElement("code",{style:i},"ErrorBoundary")," or"," ",h.createElement("code",{style:i},"errorElement")," prop on your route.")),h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),r?h.createElement("pre",{style:a},r):null,o)}var NZ=h.createElement(kZ,null),fL=class extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=xZ(e.digest);r&&(e=r)}let t=e!==void 0?h.createElement(wi.Provider,{value:this.props.routeContext},h.createElement(AN.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?h.createElement(CZ,{error:e},t):t}};fL.contextType=hZ;var S1=new WeakMap;function CZ({children:e,error:t}){let{basename:r}=h.useContext(Xa);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=yZ(t.digest);if(n){let a=S1.get(t);if(a)throw a;let i=iL(n.location,r);if(aL&&!S1.get(t))if(i.isExternal||n.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:n.replace}));throw S1.set(t,o),o}return h.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function EZ({routeContext:e,match:t,children:r}){let n=h.useContext(Wf);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),h.createElement(wi.Provider,{value:e},r)}function AZ(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r==null?void 0:r.errors;if(o!=null){let d=i.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);Fr(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,c=-1;if(r)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:m,errors:p}=r,v=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||v){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let u=r&&n?(d,f)=>{var m,p;n(d,{location:r.location,params:((p=(m=r.matches)==null?void 0:m[0])==null?void 0:p.params)??{},unstable_pattern:dZ(r.matches),errorInfo:f})}:void 0;return i.reduceRight((d,f,m)=>{let p,v=!1,g=null,b=null;r&&(p=o&&f.route.id?o[f.route.id]:void 0,g=f.route.errorElement||NZ,l&&(c<0&&m===0?(hL("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,b=null):c===m&&(v=!0,b=f.route.hydrateFallbackElement||null)));let y=t.concat(i.slice(0,m+1)),w=()=>{let x;return p?x=g:v?x=b:f.route.Component?x=h.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=d,h.createElement(EZ,{match:f,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:x})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?h.createElement(fL,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0},onError:u}):w()},null)}function PN(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PZ(e){let t=h.useContext(Wf);return Fr(t,PN(e)),t}function TZ(e){let t=h.useContext(ub);return Fr(t,PN(e)),t}function OZ(e){let t=h.useContext(wi);return Fr(t,PN(e)),t}function TN(e){let t=OZ(e),r=t.matches[t.matches.length-1];return Fr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function IZ(){return TN("useRouteId")}function MZ(){var n;let e=h.useContext(AN),t=TZ("useRouteError"),r=TN("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function RZ(){let{router:e}=PZ("useNavigate"),t=TN("useNavigate"),r=h.useRef(!1);return uL(()=>{r.current=!0}),h.useCallback(async(a,i={})=>{Ka(r.current,cL),r.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var QP={};function hL(e,t,r){!t&&!QP[e]&&(QP[e]=!0,Ka(!1,r))}h.memo($Z);function $Z({routes:e,future:t,state:r,onError:n}){return dL(e,void 0,r,n,t)}function fc({to:e,replace:t,state:r,relative:n}){Fr(Hf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=h.useContext(Xa);Ka(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=h.useContext(wi),{pathname:o}=Hn(),l=Xt(),c=EN(e,CN(i),o,n==="path"),u=JSON.stringify(c);return h.useEffect(()=>{l(JSON.parse(u),{replace:t,state:r,relative:n})},[l,u,n,t,r]),null}function DZ(e){return SZ(e.context)}function Nt(e){Fr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function LZ({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:i=!1,unstable_useTransitions:o}){Fr(!Hf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=h.useMemo(()=>({basename:l,navigator:a,static:i,unstable_useTransitions:o,future:{}}),[l,a,i,o]);typeof r=="string"&&(r=zf(r));let{pathname:u="/",search:d="",hash:f="",state:m=null,key:p="default"}=r,v=h.useMemo(()=>{let g=vo(u,l);return g==null?null:{location:{pathname:g,search:d,hash:f,state:m,key:p},navigationType:n}},[l,u,d,f,m,p,n]);return Ka(v!=null,`<Router basename="${l}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:h.createElement(Xa.Provider,{value:c},h.createElement(Zp.Provider,{children:t,value:v}))}function FZ({children:e,location:t}){return jZ(GS(e),t)}function GS(e,t=[]){let r=[];return h.Children.forEach(e,(n,a)=>{if(!h.isValidElement(n))return;let i=[...t,a];if(n.type===h.Fragment){r.push.apply(r,GS(n.props.children,i));return}Fr(n.type===Nt,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=GS(n.props.children,i)),r.push(o)}),r}var gy="get",vy="application/x-www-form-urlencoded";function fb(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function BZ(e){return fb(e)&&e.tagName.toLowerCase()==="button"}function UZ(e){return fb(e)&&e.tagName.toLowerCase()==="form"}function qZ(e){return fb(e)&&e.tagName.toLowerCase()==="input"}function zZ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function WZ(e,t){return e.button===0&&(!t||t==="_self")&&!zZ(e)}function YS(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function HZ(e,t){let r=YS(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}var vv=null;function VZ(){if(vv===null)try{new FormData(document.createElement("form"),0),vv=!1}catch{vv=!0}return vv}var KZ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function j1(e){return e!=null&&!KZ.has(e)?(Ka(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vy}"`),null):e}function GZ(e,t){let r,n,a,i,o;if(UZ(e)){let l=e.getAttribute("action");n=l?vo(l,t):null,r=e.getAttribute("method")||gy,a=j1(e.getAttribute("enctype"))||vy,i=new FormData(e)}else if(BZ(e)||qZ(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(n=c?vo(c,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||gy,a=j1(e.getAttribute("formenctype"))||j1(l.getAttribute("enctype"))||vy,i=new FormData(l,e),!VZ()){let{name:u,type:d,value:f}=e;if(d==="image"){let m=u?`${u}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else u&&i.append(u,f)}}else{if(fb(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=gy,n=null,a=vy,o=e}return i&&a==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ON(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function YZ(e,t,r,n){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${n}`:a.pathname=`${a.pathname}.${n}`:a.pathname==="/"?a.pathname=`_root.${n}`:t&&vo(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function XZ(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function QZ(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function JZ(e,t,r){let n=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let o=await XZ(i,r);return o.links?o.links():[]}return[]}));return ree(n.flat(1).filter(QZ).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function JP(e,t,r,n,a,i){let o=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return i==="assets"?t.filter((c,u)=>o(c,u)||l(c,u)):i==="data"?t.filter((c,u)=>{var f;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function ZZ(e,t,{includeHydrateFallback:r}={}){return eee(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function eee(e){return[...new Set(e)]}function tee(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function ree(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let i=JSON.stringify(tee(a));return r.has(i)||(r.add(i),n.push({key:i,link:a})),n},[])}function mL(){let e=h.useContext(Wf);return ON(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function nee(){let e=h.useContext(ub);return ON(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var IN=h.createContext(void 0);IN.displayName="FrameworkContext";function pL(){let e=h.useContext(IN);return ON(e,"You must render this element inside a <HydratedRouter> element"),e}function aee(e,t){let r=h.useContext(IN),[n,a]=h.useState(!1),[i,o]=h.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,m=h.useRef(null);h.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let g=y=>{y.forEach(w=>{o(w.isIntersecting)})},b=new IntersectionObserver(g,{threshold:.5});return m.current&&b.observe(m.current),()=>{b.disconnect()}}},[e]),h.useEffect(()=>{if(n){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[n]);let p=()=>{a(!0)},v=()=>{a(!1),o(!1)};return r?e!=="intent"?[i,m,{}]:[i,m,{onFocus:jh(l,p),onBlur:jh(c,v),onMouseEnter:jh(u,p),onMouseLeave:jh(d,v),onTouchStart:jh(f,p)}]:[!1,m,{}]}function jh(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function iee({page:e,...t}){let{router:r}=mL(),n=h.useMemo(()=>eL(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?h.createElement(oee,{page:e,matches:n,...t}):null}function see(e){let{manifest:t,routeModules:r}=pL(),[n,a]=h.useState([]);return h.useEffect(()=>{let i=!1;return JZ(e,t,r).then(o=>{i||a(o)}),()=>{i=!0}},[e,t,r]),n}function oee({page:e,matches:t,...r}){let n=Hn(),{future:a,manifest:i,routeModules:o}=pL(),{basename:l}=mL(),{loaderData:c,matches:u}=nee(),d=h.useMemo(()=>JP(e,t,u,i,n,"data"),[e,t,u,i,n]),f=h.useMemo(()=>JP(e,t,u,i,n,"assets"),[e,t,u,i,n]),m=h.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let g=new Set,b=!1;if(t.forEach(w=>{var _;let x=i.routes[w.route.id];!x||!x.hasLoader||(!d.some(S=>S.route.id===w.route.id)&&w.route.id in c&&((_=o[w.route.id])!=null&&_.shouldRevalidate)||x.hasClientLoader?b=!0:g.add(w.route.id))}),g.size===0)return[];let y=YZ(e,l,a.unstable_trailingSlashAwareDataRequests,"data");return b&&g.size>0&&y.searchParams.set("_routes",t.filter(w=>g.has(w.route.id)).map(w=>w.route.id).join(",")),[y.pathname+y.search]},[l,a.unstable_trailingSlashAwareDataRequests,c,n,i,d,t,e,o]),p=h.useMemo(()=>ZZ(f,i),[f,i]),v=see(f);return h.createElement(h.Fragment,null,m.map(g=>h.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),p.map(g=>h.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),v.map(({key:g,link:b})=>h.createElement("link",{key:g,nonce:r.nonce,...b})))}function lee(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var cee=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cee&&(window.__reactRouterVersion="7.12.0")}catch{}function uee({basename:e,children:t,unstable_useTransitions:r,window:n}){let a=h.useRef();a.current==null&&(a.current=BJ({window:n,v5Compat:!0}));let i=a.current,[o,l]=h.useState({action:i.action,location:i.location}),c=h.useCallback(u=>{r===!1?l(u):h.startTransition(()=>l(u))},[r]);return h.useLayoutEffect(()=>i.listen(c),[i,c]),h.createElement(LZ,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:r})}var gL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ml=h.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:m,...p},v){let{basename:g,unstable_useTransitions:b}=h.useContext(Xa),y=typeof u=="string"&&gL.test(u),w=iL(u,g);u=w.to;let x=bZ(u,{relative:a}),[_,S,k]=aee(n,p),C=mee(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:b});function j(A){t&&t(A),A.defaultPrevented||C(A)}let N=h.createElement("a",{...p,...k,href:w.absoluteURL||x,onClick:w.isExternal||i?t:j,ref:lee(v,S),target:c,"data-discover":!y&&r==="render"?"true":void 0});return _&&!y?h.createElement(h.Fragment,null,N,h.createElement(iee,{page:x})):N});Ml.displayName="Link";var dee=h.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:i,to:o,viewTransition:l,children:c,...u},d){let f=eg(o,{relative:u.relative}),m=Hn(),p=h.useContext(ub),{navigator:v,basename:g}=h.useContext(Xa),b=p!=null&&xee(f)&&l===!0,y=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,w=m.pathname,x=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(w=w.toLowerCase(),x=x?x.toLowerCase():null,y=y.toLowerCase()),x&&g&&(x=vo(x,g)||x);const _=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let S=w===y||!a&&w.startsWith(y)&&w.charAt(_)==="/",k=x!=null&&(x===y||!a&&x.startsWith(y)&&x.charAt(y.length)==="/"),C={isActive:S,isPending:k,isTransitioning:b},j=S?t:void 0,N;typeof n=="function"?N=n(C):N=[n,S?"active":null,k?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let A=typeof i=="function"?i(C):i;return h.createElement(Ml,{...u,"aria-current":j,className:N,ref:d,style:A,to:o,viewTransition:l},typeof c=="function"?c(C):c)});dee.displayName="NavLink";var fee=h.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:i,method:o=gy,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:m,...p},v)=>{let{unstable_useTransitions:g}=h.useContext(Xa),b=vee(),y=yee(l,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&gL.test(l),_=S=>{if(c&&c(S),S.defaultPrevented)return;S.preventDefault();let k=S.nativeEvent.submitter,C=(k==null?void 0:k.getAttribute("formmethod"))||o,j=()=>b(k||S.currentTarget,{fetcherKey:t,method:C,navigate:r,replace:a,state:i,relative:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:m});g&&r!==!1?h.startTransition(()=>j()):j()};return h.createElement("form",{ref:v,method:w,action:y,onSubmit:n?c:_,...p,"data-discover":!x&&e==="render"?"true":void 0})});fee.displayName="Form";function hee(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vL(e){let t=h.useContext(Wf);return Fr(t,hee(e)),t}function mee(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let u=Xt(),d=Hn(),f=eg(e,{relative:i});return h.useCallback(m=>{if(WZ(m,t)){m.preventDefault();let p=r!==void 0?r:Vm(d)===Vm(f),v=()=>u(e,{replace:p,state:n,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?h.startTransition(()=>v()):v()}},[d,u,f,r,n,t,e,a,i,o,l,c])}function Vf(e){Ka(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=h.useRef(YS(e)),r=h.useRef(!1),n=Hn(),a=h.useMemo(()=>HZ(n.search,r.current?null:t.current),[n.search]),i=Xt(),o=h.useCallback((l,c)=>{const u=YS(typeof l=="function"?l(new URLSearchParams(a)):l);r.current=!0,i("?"+u,c)},[i,a]);return[a,o]}var pee=0,gee=()=>`__${String(++pee)}__`;function vee(){let{router:e}=vL("useSubmit"),{basename:t}=h.useContext(Xa),r=IZ(),n=e.fetch,a=e.navigate;return h.useCallback(async(i,o={})=>{let{action:l,method:c,encType:u,formData:d,body:f}=GZ(i,t);if(o.navigate===!1){let m=o.fetcherKey||gee();await n(m,r,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:f,formMethod:o.method||c,formEncType:o.encType||u,flushSync:o.flushSync})}else await a(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:f,formMethod:o.method||c,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,a,t,r])}function yee(e,{relative:t}={}){let{basename:r}=h.useContext(Xa),n=h.useContext(wi);Fr(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...eg(e||".",{relative:t})},o=Hn();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();i.search=d?`?${d}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:no([r,i.pathname])),Vm(i)}function xee(e,{relative:t}={}){let r=h.useContext(oL);Fr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=vL("useViewTransitionState"),a=eg(e,{relative:t});if(!r.isTransitioning)return!1;let i=vo(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=vo(r.nextLocation.pathname,n)||r.nextLocation.pathname;return t0(a.pathname,o)!=null||t0(a.pathname,i)!=null}var cs=function(){return cs=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},cs.apply(this,arguments)};function Kf(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function bee(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function wee(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}const _ee=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class MN extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class See extends MN{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class ZP extends MN{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class eT extends MN{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var XS;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(XS||(XS={}));class jee{constructor(t,{headers:r={},customFetch:n,region:a=XS.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=_ee(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return bee(this,arguments,void 0,function*(r,n={}){var a;let i,o;try{const{headers:l,method:c,body:u,signal:d,timeout:f}=n;let m={},{region:p}=n;p||(p=this.region);const v=new URL(`${this.url}/${r}`);p&&p!=="any"&&(m["x-region"]=p,v.searchParams.set("forceFunctionRegion",p));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(m["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(m["Content-Type"]="application/json",g=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?g=JSON.stringify(u):g=u;let b=d;f&&(o=new AbortController,i=setTimeout(()=>o.abort(),f),d?(b=o.signal,d.addEventListener("abort",()=>o.abort())):b=o.signal);const y=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:g,signal:b}).catch(S=>{throw new See(S)}),w=y.headers.get("x-relay-error");if(w&&w==="true")throw new ZP(y);if(!y.ok)throw new eT(y);let x=((a=y.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),_;return x==="application/json"?_=yield y.json():x==="application/octet-stream"||x==="application/pdf"?_=yield y.blob():x==="text/event-stream"?_=y:x==="multipart/form-data"?_=yield y.formData():_=yield y.text(),{data:_,error:null,response:y}}catch(l){return{data:null,error:l,response:l instanceof eT||l instanceof ZP?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var kee=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Nee=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,u=i.status,d=i.statusText;if(i.ok){var f,m;if(r.method!=="HEAD"){var p;const y=await i.text();y===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((p=r.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?l=y:l=JSON.parse(y))}const g=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),b=(m=i.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");g&&b&&b.length>1&&(c=parseInt(b[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var v;const g=await i.text();try{o=JSON.parse(g),Array.isArray(o)&&i.status===404&&(l=[],o=null,u=200,d="OK")}catch{i.status===404&&g===""?(u=204,d="No Content"):o={message:g}}if(o&&r.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&r.shouldThrowOnError)throw new kee(o)}return{error:o,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let l="";const c=i==null?void 0:i.cause;if(c){var u,d,f,m;const v=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",g=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(f=i==null?void 0:i.name)!==null&&f!==void 0?f:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(m=c==null?void 0:c.name)!==null&&m!==void 0?m:"Error"}: ${v}`,g&&(l+=` (${g})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var p;l=(p=i==null?void 0:i.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},Cee=class extends Nee{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const tT=new RegExp("[,()]");var qu=class extends Cee{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&tT.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&tT.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},Eee=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),n&&c.append("Prefer",`count=${n}`),new qu({method:a,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const a="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",c.join(","))}}return new qu({method:a,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}={}){var i;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),a||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);l.searchParams.set("columns",d.join(","))}}return new qu({method:o,url:l,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:a,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new qu({method:n,url:a,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new qu({method:r,url:n,headers:a,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Aee=class yL{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Eee(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new yL(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(d)),f=n&&Object.values(r).some(d);f?(l="POST",u=r):n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([p,v])=>v!==void 0).map(([p,v])=>[p,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([p,v])=>{c.searchParams.append(p,v)})):(l="POST",u=r);const m=new Headers(this.headers);return f?m.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&m.set("Prefer",`count=${i}`),new qu({method:l,url:c,headers:m,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class Pee{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const a=n.node,i=parseInt(a.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Tee="2.90.1",Oee=`realtime-js/${Tee}`,xL="1.0.0",Iee="2.0.0",rT=xL,QS=1e4,Mee=1e3,Ree=100;var Zo;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Zo||(Zo={}));var yn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(yn||(yn={}));var $i;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})($i||($i={}));var JS;(function(e){e.websocket="websocket"})(JS||(JS={}));var hc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(hc||(hc={}));class $ee{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var a,i;const o=t.topic,l=(a=t.ref)!==null&&a!==void 0?a:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+f.length,p=new ArrayBuffer(this.HEADER_LENGTH+m);let v=new DataView(p),g=0;v.setUint8(g++,this.KINDS.userBroadcastPush),v.setUint8(g++,c.length),v.setUint8(g++,l.length),v.setUint8(g++,o.length),v.setUint8(g++,u.length),v.setUint8(g++,f.length),v.setUint8(g++,r),Array.from(c,y=>v.setUint8(g++,y.charCodeAt(0))),Array.from(l,y=>v.setUint8(g++,y.charCodeAt(0))),Array.from(o,y=>v.setUint8(g++,y.charCodeAt(0))),Array.from(u,y=>v.setUint8(g++,y.charCodeAt(0))),Array.from(f,y=>v.setUint8(g++,y.charCodeAt(0)));var b=new Uint8Array(p.byteLength+n.byteLength);return b.set(new Uint8Array(p),0),b.set(new Uint8Array(n),p.byteLength),b.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,o,l,c]=n;return r({join_ref:a,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+a));c=c+a;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+o));c=c+o;const m=t.slice(c,t.byteLength),p=l===this.JSON_ENCODING?JSON.parse(n.decode(m)):m,v={type:this.BROADCAST_EVENT,event:d,payload:p};return o>0&&(v.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class bL{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Sr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Sr||(Sr={}));const nT=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=Dee(o,e,t,a),i),{}):{}},Dee=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?wL(i,o):ZS(o)},wL=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Uee(t,r)}switch(e){case Sr.bool:return Lee(t);case Sr.float4:case Sr.float8:case Sr.int2:case Sr.int4:case Sr.int8:case Sr.numeric:case Sr.oid:return Fee(t);case Sr.json:case Sr.jsonb:return Bee(t);case Sr.timestamp:return qee(t);case Sr.abstime:case Sr.date:case Sr.daterange:case Sr.int4range:case Sr.int8range:case Sr.money:case Sr.reltime:case Sr.text:case Sr.time:case Sr.timestamptz:case Sr.timetz:case Sr.tsrange:case Sr.tstzrange:return ZS(t);default:return ZS(t)}},ZS=e=>e,Lee=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Fee=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Bee=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Uee=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>wL(t,l))}return e},qee=e=>typeof e=="string"?e.replace(" ","T"):e,_L=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class k1{constructor(t,r,n={},a=QS){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var aT;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(aT||(aT={}));class fm{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fm.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=fm.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=fm.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const m=d.map(b=>b.presence_ref),p=f.map(b=>b.presence_ref),v=d.filter(b=>p.indexOf(b.presence_ref)<0),g=f.filter(b=>m.indexOf(b.presence_ref)<0);v.length>0&&(l[u]=v),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(p=>p.presence_ref),m=d.filter(p=>f.indexOf(p.presence_ref)<0);t[l].unshift(...m)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var iT;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(iT||(iT={}));var hm;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(hm||(hm={}));var Vs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Vs||(Vs={}));class sd{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=yn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new k1(this,$i.join,this.params,this.timeout),this.rejoinTimer=new bL(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this._on($i.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new fm(this),this.broadcastEndpointURL=_L(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==yn.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[hm.PRESENCE]&&this.bindings[hm.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Vs.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Vs.CLOSED)),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(Vs.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,b=(v=g==null?void 0:g.length)!==null&&v!==void 0?v:0,y=[];for(let w=0;w<b;w++){const x=g[w],{filter:{event:_,schema:S,table:k,filter:C}}=x,j=p&&p[w];if(j&&j.event===_&&sd.isFilterValueEqual(j.schema,S)&&sd.isFilterValueEqual(j.table,k)&&sd.isFilterValueEqual(j.filter,C))y.push(Object.assign(Object.assign({},x),{id:j.id}));else{this.unsubscribe(),this.state=yn.errored,t==null||t(Vs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Vs.SUBSCRIBED);return}}).receive("error",p=>{this.state=yn.errored,t==null||t(Vs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Vs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===yn.joined&&t===hm.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=yn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($i.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new k1(this,$i.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=yn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new k1(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Ree){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=$i;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var v,g,b;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(g=p.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var v,g,b,y,w,x,_,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const k=p.id,C=(v=p.filter)===null||v===void 0?void 0:v.event;return k&&((g=r.ids)===null||g===void 0?void 0:g.includes(k))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))&&(!(!((y=p.filter)===null||y===void 0)&&y.table)||p.filter.table===((w=r.data)===null||w===void 0?void 0:w.table))}else{const k=(_=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return k==="*"||k===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:g,table:b,commit_timestamp:y,type:w,errors:x}=v;m=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:y,eventType:w,new:{},old:{},errors:x}),this._getPayloadRecords(v))}p.callback(m,n)})}_isClosed(){return this.state===yn.closed}_isJoined(){return this.state===yn.joined}_isJoining(){return this.state===yn.joining}_isLeaving(){return this.state===yn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&sd.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on($i.close,{},t)}_onError(t){this._on($i.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=nT(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=nT(t.columns,t.old_record)),r}}const N1=()=>{},yv={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},zee=[1e3,2e3,5e3,1e4],Wee=1e4,Hee=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Vee{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=QS,this.transport=null,this.heartbeatIntervalMs=yv.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=N1,this.ref=0,this.reconnectTimer=null,this.vsn=rT,this.logger=N1,this.conn=null,this.sendBuffer=[],this.serializer=new $ee,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${JS.websocket}`,this.httpEndpoint=_L(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Pee.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Zo.connecting:return hc.Connecting;case Zo.open:return hc.Open;case Zo.closing:return hc.Closing;default:return hc.Closed}}isConnected(){return this.connectionState()===hc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new sd(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Mee,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},yv.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Zo.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Zo.open||this.conn.readyState===Zo.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger($i.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Hee],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:Oee};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push($i.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new bL(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},yv.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,c,u,d,f,m,p;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:QS,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:yv.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:N1,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:rT,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:v=>zee[v-1]||Wee,this.vsn){case xL:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(v,g)=>g(JSON.stringify(v)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(v,g)=>g(JSON.parse(v));break;case Iee:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Km=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Kee(e,t,r){const n=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function Gee(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Yee(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:i,headers:o}){const l=Kee(e.baseUrl,n,a),c=await Gee(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),m=f&&d?JSON.parse(d):d;if(!u.ok){const p=f?m:void 0,v=p==null?void 0:p.error;throw new Km((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:p})}return{status:u.status,headers:u.headers,data:m}}}}function xv(e){return e.join("")}var Xee=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:xv(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xv(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xv(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xv(e.namespace)}`}),!0}catch(t){if(t instanceof Km&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Km&&r.status===409)return;throw r}}};function Su(e){return e.join("")}var Qee=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Su(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Su(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Su(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Su(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Su(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Su(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Km&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Km&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},Jee=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Yee({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new Xee(this.client,t),this.tableOps=new Qee(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},hb=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function zr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Zee=class extends hb{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},e2=class extends hb{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const RN=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),ete=()=>Response,t2=e=>{if(Array.isArray(e))return e.map(r=>t2(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=t2(n)}),t},tte=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},rte=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function nte(e,t){if(Gm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Gm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ate(e){var t=nte(e,"string");return Gm(t)=="symbol"?t:t+""}function ite(e,t,r){return(t=ate(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sT(Object(r),!0).forEach(function(n){ite(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const C1=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},ste=async(e,t,r)=>{e instanceof await ete()&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const a=e.status||500,i=(n==null?void 0:n.statusCode)||a+"";t(new Zee(C1(n),a,i))}).catch(n=>{t(new e2(C1(n),n))}):t(new e2(C1(e),e))},ote=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(tte(n)?(a.headers=At({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),At(At({},a),r))};async function tg(e,t,r,n,a,i){return new Promise((o,l)=>{e(r,ote(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>ste(c,l,n))})}async function Ym(e,t,r,n){return tg(e,"GET",t,r,n)}async function Oi(e,t,r,n,a){return tg(e,"POST",t,n,a,r)}async function r2(e,t,r,n,a){return tg(e,"PUT",t,n,a,r)}async function lte(e,t,r,n){return tg(e,"HEAD",t,At(At({},r),{},{noResolveJson:!0}),n)}async function $N(e,t,r,n,a){return tg(e,"DELETE",t,n,a,r)}var cte=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(zr(t))return{data:null,error:t};throw t}}};let SL;SL=Symbol.toStringTag;var ute=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[SL]="BlobDownloadBuilder",this.promise=null}asStream(){return new cte(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(zr(t))return{data:null,error:t};throw t}}};const dte={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},oT={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var fte=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=RN(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var a=this;try{let i;const o=At(At({},oT),n);let l=At(At({},a.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",a.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=a.toBase64(a.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=At(At({},l),n.headers));const u=a._removeEmptyFolders(t),d=a._getFinalPath(u),f=await(e=="PUT"?r2:Oi)(a.fetch,`${a.url}/object/${d}`,i,At({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(zr(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var a=this;const i=a._removeEmptyFolders(e),o=a._getFinalPath(i),l=new URL(a.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const u=At({upsert:oT.upsert},n),d=At(At({},a.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await r2(a.fetch,l.toString(),c,{headers:d})).Key},error:null}}catch(c){if(a.shouldThrowOnError)throw c;if(zr(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const a=At({},r.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const i=await Oi(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new hb("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(zr(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await Oi(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(zr(a))return{data:null,error:a};throw a}}async copy(e,t,r){var n=this;try{return{data:{path:(await Oi(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(zr(a))return{data:null,error:a};throw a}}async createSignedUrl(e,t,r){var n=this;try{let a=n._getFinalPath(e),i=await Oi(n.fetch,`${n.url}/object/sign/${a}`,At({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(zr(a))return{data:null,error:a};throw a}}async createSignedUrls(e,t,r){var n=this;try{const a=await Oi(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>At(At({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(zr(a))return{data:null,error:a};throw a}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>Ym(this.fetch,`${this.url}/${r}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new ute(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:t2(await Ym(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(zr(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await lte(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(zr(n)&&n instanceof e2){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;try{return{data:await $N(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zr(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const a=At(At(At({},dte),t),{},{prefix:e||""});return{data:await Oi(n.fetch,`${n.url}/object/list/${n.bucketId}`,a,{headers:n.headers},r),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(zr(a))return{data:null,error:a};throw a}}async listV2(e,t){var r=this;try{const n=At({},e);return{data:await Oi(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(zr(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const jL="2.90.1",kL={"X-Client-Info":`storage-js/${jL}`};var hte=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=At(At({},kL),t),this.fetch=RN(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await Ym(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zr(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Ym(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zr(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await Oi(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(zr(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await r2(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(zr(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await Oi(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zr(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await $N(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zr(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},mte=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=At(At({},kL),t),this.fetch=RN(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Oi(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zr(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),a=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await Ym(t.fetch,a,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zr(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await $N(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zr(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!rte(e))throw new hb("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Jee({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(a,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}};const DN={"X-Client-Info":`storage-js/${jL}`,"Content-Type":"application/json"};var NL=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Da(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var E1=class extends NL{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},pte=class extends NL{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const LN=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),gte=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},lT=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),vte=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";t(new E1(lT(i),n,o))}).catch(()=>{const i=n+"";t(new E1(a.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new E1(a.statusText||`HTTP ${n} error`,n,i))}}else t(new pte(lT(e),e))},yte=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(gte(n)?(a.headers=At({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,At(At({},a),r)):a};async function xte(e,t,r,n,a,i){return new Promise((o,l)=>{e(r,yte(t,n,a,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>vte(c,l,n))})}async function La(e,t,r,n,a){return xte(e,"POST",t,n,a,r)}var bte=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=At(At({},DN),t),this.fetch=LN(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await La(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Da(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await La(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Da(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await La(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Da(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await La(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Da(n))return{data:null,error:n};throw n}}},wte=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=At(At({},DN),t),this.fetch=LN(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await La(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Da(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await La(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Da(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await La(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Da(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await La(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Da(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await La(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Da(r))return{data:null,error:r};throw r}}},_te=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=At(At({},DN),t),this.fetch=LN(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await La(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Da(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await La(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Da(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await La(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Da(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await La(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Da(r))return{data:null,error:r};throw r}}},Ste=class extends _te{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new jte(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},jte=class extends bte{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,At(At({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,At(At({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new kte(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},kte=class extends wte{constructor(e,t,r,n,a){super(e,t,a),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,At(At({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,At(At({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,At(At({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,At(At({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,At(At({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Nte=class extends hte{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new fte(this.url,this.headers,e,this.fetch)}get vectors(){return new Ste(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new mte(this.url+"/iceberg",this.headers,this.fetch)}};const CL="2.90.1",zu=30*1e3,n2=3,A1=n2*zu,Cte="http://localhost:9999",Ete="supabase.auth.token",Ate={"X-Client-Info":`gotrue-js/${CL}`},a2="X-Supabase-Api-Version",EL={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Pte=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Tte=10*60*1e3;class Xm extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ft(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Ote extends Xm{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Ite(e){return ft(e)&&e.name==="AuthApiError"}class mc extends Xm{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ko extends Xm{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Aa extends ko{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Mte(e){return ft(e)&&e.name==="AuthSessionMissingError"}class ju extends ko{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bv extends ko{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class wv extends ko{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Rte(e){return ft(e)&&e.name==="AuthImplicitGrantRedirectError"}class cT extends ko{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $te extends ko{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class i2 extends ko{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function P1(e){return ft(e)&&e.name==="AuthRetryableFetchError"}class uT extends ko{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class s2 extends ko{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const r0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dT=` 	
\r=`.split(""),Dte=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<dT.length;t+=1)e[dT[t].charCodeAt(0)]=-2;for(let t=0;t<r0.length;t+=1)e[r0[t].charCodeAt(0)]=t;return e})();function fT(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(r0[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(r0[n]),t.queuedBits-=6}}function AL(e,t,r){const n=Dte[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function hT(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{Bte(o,n,r)};for(let o=0;o<e.length;o+=1)AL(e.charCodeAt(o),a,i);return t.join("")}function Lte(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Fte(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Lte(n,t)}}function Bte(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function bd(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)AL(e.charCodeAt(a),r,n);return new Uint8Array(t)}function Ute(e){const t=[];return Fte(e,r=>t.push(r)),new Uint8Array(t)}function wc(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>fT(a,r,n)),fT(null,r,n),t.join("")}function qte(e){return Math.round(Date.now()/1e3)+e}function zte(){return Symbol("auth-callback")}const Dn=()=>typeof window<"u"&&typeof document<"u",Jl={tested:!1,writable:!1},PL=()=>{if(!Dn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Jl.tested)return Jl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Jl.tested=!0,Jl.writable=!0}catch{Jl.tested=!0,Jl.writable=!1}return Jl.writable};function Wte(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const TL=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Hte=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Wu=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Zl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Rn=async(e,t)=>{await e.removeItem(t)};class mb{constructor(){this.promise=new mb.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}mb.promiseConstructor=Promise;function T1(e){const t=e.split(".");if(t.length!==3)throw new s2("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Pte.test(t[n]))throw new s2("JWT not in base64url format");return{header:JSON.parse(hT(t[0])),payload:JSON.parse(hT(t[1])),signature:bd(t[2]),raw:{header:t[0],payload:t[1]}}}async function Vte(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Kte(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function Gte(e){return("0"+e.toString(16)).substr(-2)}function Yte(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,Gte).join("")}async function Xte(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Qte(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Xte(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ku(e,t,r=!1){const n=Yte();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Wu(e,`${t}-code-verifier`,a);const i=await Qte(n);return[i,n===i?"plain":"s256"]}const Jte=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Zte(e){const t=e.headers.get(a2);if(!t||!t.match(Jte))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ere(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function tre(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const rre=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Nu(e){if(!rre.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function O1(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function nre(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function mT(e){return JSON.parse(JSON.stringify(e))}const oc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),are=[502,503,504];async function pT(e){var t;if(!Hte(e))throw new i2(oc(e),0);if(are.includes(e.status))throw new i2(oc(e),e.status);let r;try{r=await e.json()}catch(i){throw new mc(oc(i),i)}let n;const a=Zte(e);if(a&&a.getTime()>=EL["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new uT(oc(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Aa}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new uT(oc(r),e.status,r.weak_password.reasons);throw new Ote(oc(r),e.status||500,n)}const ire=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Et(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[a2]||(i[a2]=EL["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await sre(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function sre(e,t,r,n,a,i){const o=ire(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new i2(oc(c),0)}if(l.ok||await pT(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await pT(c)}}function Ei(e){var t;let r=null;cre(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=qte(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function gT(e){const t=Ei(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function nl(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function ore(e){return{data:e,error:null}}function lre(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=Kf(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function vT(e){return e}function cre(e){return e.access_token&&e.refresh_token&&e.expires_in}const I1=["global","local","others"];class ure{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=TL(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=I1[0]){if(I1.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${I1.join(", ")}`);try{return await Et(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ft(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Et(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:nl})}catch(n){if(ft(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Kf(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Et(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:lre,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ft(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Et(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:nl})}catch(r){if(ft(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Et(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:vT});if(d.error)throw d.error;const f=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);u[`${b}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ft(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Nu(t);try{return await Et(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:nl})}catch(r){if(ft(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Nu(t);try{return await Et(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:nl})}catch(n){if(ft(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Nu(t);try{return await Et(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:nl})}catch(n){if(ft(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Nu(t.userId);try{const{data:r,error:n}=await Et(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(ft(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Nu(t.userId),Nu(t.id);try{return{data:await Et(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ft(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Et(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:vT});if(d.error)throw d.error;const f=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);u[`${b}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ft(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Et(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ft(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Et(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ft(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Et(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ft(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Et(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ft(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Et(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ft(r))return{data:null,error:r};throw r}}}function yT(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Cu={debug:!!(globalThis&&PL()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class OL extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class dre extends OL{}async function fre(e,t,r){Cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Cu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new dre(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Cu.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function hre(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function IL(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function mre(e){return parseInt(e,16)}function pre(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function gre(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:f,version:m}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=IL(e.address),v=d?`${d}://${n}`:n,g=e.statement?`${e.statement}
`:"",b=`${v} wants you to sign in with your Ethereum account:
${p}

${g}`;let y=`URI: ${f}
Version: ${m}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(y+=`
Expiration Time: ${a.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let w=`
Resources:`;for(const x of u){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);w+=`
- ${x}`}y+=w}return`${b}
${y}`}class un extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class n0 extends un{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function vre({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new un({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new un({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new un({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new un({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new un({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new un({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new un({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new un({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(ML(o)){if(i.rp.id!==o)return new un({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new un({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new un({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new un({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new un({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function yre({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new un({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new un({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(ML(n)){if(r.rpId!==n)return new un({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new un({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new un({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new un({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class xre{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const bre=new xre;function wre(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=Kf(e,["challenge","user","excludeCredentials"]),i=bd(t).buffer,o=Object.assign(Object.assign({},r),{id:bd(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:bd(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function _re(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Kf(e,["challenge","allowCredentials"]),a=bd(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:bd(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Sre(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:wc(new Uint8Array(e.response.attestationObject)),clientDataJSON:wc(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function jre(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:wc(new Uint8Array(a.authenticatorData)),clientDataJSON:wc(new Uint8Array(a.clientDataJSON)),signature:wc(new Uint8Array(a.signature)),userHandle:a.userHandle?wc(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ML(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function xT(){var e,t;return!!(Dn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function kre(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new n0("Browser returned unexpected credential type",t)}:{data:null,error:new n0("Empty credential response",t)}}catch(t){return{data:null,error:vre({error:t,options:e})}}}async function Nre(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new n0("Browser returned unexpected credential type",t)}:{data:null,error:new n0("Empty credential response",t)}}catch(t){return{data:null,error:yre({error:t,options:e})}}}const Cre={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Ere={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function a0(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=a0(l,o):n[i]=a0(o)}else n[i]=o}return n}function Are(e,t){return a0(Cre,e,t||{})}function Pre(e,t){return a0(Ere,e,t||{})}class Tre{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=a??bre.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=Are(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:f}=await kre({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=Pre(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:f}=await Nre(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(o){return ft(o)?{data:null,error:o}:{data:null,error:new mc("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Xm("rpId is required for WebAuthn authentication")};try{if(!xT())return{data:null,error:new mc("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return ft(o)?{data:null,error:o}:{data:null,error:new mc("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Xm("rpId is required for WebAuthn registration")};try{if(!xT())return{data:null,error:new mc("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return ft(o)?{data:null,error:o}:{data:null,error:new mc("Unexpected error in register",o)}}}}hre();const Ore={url:Cte,storageKey:Ete,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ate,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function bT(e,t,r){return await r()}const Eu={};class Qm{get jwks(){var t,r;return(r=(t=Eu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Eu[this.storageKey]=Object.assign(Object.assign({},Eu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Eu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Eu[this.storageKey]=Object.assign(Object.assign({},Eu[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Ore),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Qm.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Qm.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Dn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new ure({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=TL(i.fetch),this.lock=i.lock||bT,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Dn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=fre:this.lock=bT,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Tre(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:PL()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=yT(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=yT(this.memoryStorage)),Dn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${CL}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Dn()&&(r=Wte(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Dn()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Rte(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ft(r)?this._returnResult({error:r}):this._returnResult({error:new mc("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ei}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(ft(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:m}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await ku(this.storage,this.storageKey)),i=await Et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:v},xform:Ei})}else if("phone"in t){const{phone:d,password:f,options:m}=t;i=await Et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ei})}else throw new bv("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await Rn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await Rn(this.storage,`${this.storageKey}-code-verifier`),ft(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:gT})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:gT})}else throw new bv("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new ju;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(ft(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,o,l,c,u,d,f,m;let p,v;if("message"in t)p=t.message,v=t.signature;else{const{chain:g,wallet:b,statement:y,options:w}=t;let x;if(Dn())if(typeof b=="object")x=b;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")x=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=b}const _=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href),S=await x.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=IL(S[0]);let C=(n=w==null?void 0:w.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!C){const N=await x.request({method:"eth_chainId"});C=mre(N)}const j={domain:_.host,address:k,statement:y,uri:_.href,version:"1",chainId:C,nonce:(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=w==null?void 0:w.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=w==null?void 0:w.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=gre(j),v=await x.request({method:"personal_sign",params:[pre(p),k]})}try{const{data:g,error:b}=await Et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:v},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Ei});if(b)throw b;if(!g||!g.session||!g.user){const y=new ju;return this._returnResult({data:{user:null,session:null},error:y})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:b})}catch(g){if(ft(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,n,a,i,o,l,c,u,d,f,m,p;let v,g;if("message"in t)v=t.message,g=t.signature;else{const{chain:b,wallet:y,statement:w,options:x}=t;let _;if(Dn())if(typeof y=="object")_=y;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))_=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const S=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const k=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),w?{statement:w}:null));let C;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")C=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)C=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)v=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),g=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(a=(n=x==null?void 0:x.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((f=(d=x==null?void 0:x.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...x.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const k=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=k}}try{const{data:b,error:y}=await Et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:wc(g)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ei});if(y)throw y;if(!b||!b.session||!b.user){const w=new ju;return this._returnResult({data:{user:null,session:null},error:w})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:y})}catch(b){if(ft(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(t){const r=await Zl(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new $te;const{data:i,error:o}=await Et(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ei});if(await Rn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new ju;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await Rn(this.storage,`${this.storageKey}-code-verifier`),ft(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await Et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ei}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new ju;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(ft(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ku(this.storage,this.storageKey));const{error:f}=await Et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new bv("You must provide either an email or phone number.")}catch(l){if(await Rn(this.storage,`${this.storageKey}-code-verifier`),ft(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Et(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ei});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(ft(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await ku(this.storage,this.storageKey));const u=await Et(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:ore});return!((i=u.data)===null||i===void 0)&&i.url&&Dn()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Rn(this.storage,`${this.storageKey}-code-verifier`),ft(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Aa;const{error:a}=await Et(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(ft(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await Et(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await Et(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new bv("You must provide either an email or phone number and a type")}catch(r){if(ft(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Zl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<A1:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Zl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=O1()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=nre(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:nl}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Aa}:await Et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:nl})})}catch(r){if(ft(r))return Mte(r)&&(await this._removeSession(),await Rn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Aa;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ku(this.storage,this.storageKey));const{data:u,error:d}=await Et(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:nl});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Rn(this.storage,`${this.storageKey}-code-verifier`),ft(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Aa;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=T1(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(ft(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Aa;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ft(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Dn())throw new wv("No browser detected.");if(t.error||t.error_description||t.error_code)throw new wv(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new cT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wv("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new cT("No code detected.");const{data:w,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new wv("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let m=d+f;c&&(m=parseInt(c));const p=m-d;p*1e3<=zu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const v=m-f;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:g,error:b}=await this._getUser(i);if(b)throw b;const y={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(n){if(ft(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Zl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(Ite(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Rn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=zte(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await ku(this.storage,this.storageKey,!0));try{return await Et(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Rn(this.storage,`${this.storageKey}-code-verifier`),ft(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(ft(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:m}=i;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Et(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Dn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(ft(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,f=await Et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ei}),{data:m,error:p}=f;return p?this._returnResult({data:{user:null,session:null},error:p}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new ju}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:p}))}catch(a){if(await Rn(this.storage,`${this.storageKey}-code-verifier`),ft(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await Et(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(ft(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Kte(async a=>(a>0&&await Vte(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Et(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ei})),(a,i)=>{const o=200*Math.pow(2,a);return i&&P1(i)&&Date.now()+o-n<zu})}catch(n){if(this._debug(r,"error",n),ft(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Dn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Zl(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Zl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Wu(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:O1()}else if(a&&!a.user&&!a.user){const o=await Zl(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Rn(this.storage,this.storageKey+"-user"),await Wu(this.storage,this.storageKey,a)):a.user=O1()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<A1;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${A1}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),P1(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Aa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new mb;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Aa;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),ft(i)){const o={data:null,error:i};return P1(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Rn(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Wu(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=mT(a);await Wu(this.storage,this.storageKey,i)}else{const a=mT(r);await Wu(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Rn(this.storage,this.storageKey),await Rn(this.storage,this.storageKey+"-code-verifier"),await Rn(this.storage,this.storageKey+"-user"),this.userStorage&&await Rn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Dn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),zu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/zu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${zu}ms, refresh threshold is ${n2} ticks`),a<=n2&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof OL)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Dn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await ku(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Et(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ft(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Et(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(ft(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Sre(t.webauthn.credential_response):jre(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Et(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(ft(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await Et(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:wre(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:_re(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ft(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=T1(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Et(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Aa})})}catch(r){if(ft(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Aa});const o=await Et(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Dn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(ft(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Aa});const o=await Et(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Dn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(ft(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Et(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Aa})})}catch(t){if(ft(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await Et(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Aa})})}catch(r){if(ft(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+Tte>a)return n;const{data:i,error:o}=await Et(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:v}=await this.getSession();if(v||!p.session)return this._returnResult({data:null,error:v});n=p.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=T1(n);r!=null&&r.allowExpired||ere(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:a,signature:o},error:null}}const d=tre(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,Ute(`${l}.${c}`)))throw new s2("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(ft(n))return this._returnResult({data:null,error:n});throw n}}}Qm.nextInstanceID={};const Ire=Qm,Mre="2.90.1";let Gh="";typeof Deno<"u"?Gh="deno":typeof document<"u"?Gh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gh="react-native":Gh="node";const Rre={"X-Client-Info":`supabase-js-${Gh}/${Mre}`},$re={headers:Rre},Dre={schema:"public"},Lre={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Fre={};function Jm(e){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jm(e)}function Bre(e,t){if(Jm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Jm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ure(e){var t=Bre(e,"string");return Jm(t)=="symbol"?t:t+""}function qre(e,t,r){return(t=Ure(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wT(Object(r),!0).forEach(function(n){qre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const zre=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Wre=()=>Headers,Hre=(e,t,r)=>{const n=zre(r),a=Wre();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Qr(Qr({},o),{},{headers:u}))}};function Vre(e){return e.endsWith("/")?e:e+"/"}function Kre(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,m={db:Qr(Qr({},c),a),auth:Qr(Qr({},u),i),realtime:Qr(Qr({},d),o),storage:{},global:Qr(Qr(Qr({},f),l),{},{headers:Qr(Qr({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function Gre(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Vre(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Yre=class extends Ire{constructor(e){super(e)}},Xre=class{constructor(e,t,r){var n,a;this.supabaseUrl=e,this.supabaseKey=t;const i=Gre(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:Dre,realtime:Fre,auth:Qr(Qr({},Lre),{},{storageKey:o}),global:$re},c=Kre(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=c.global.headers)!==null&&a!==void 0?a:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=Hre(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Qr({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new Aee(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new Nte(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new jee(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:u},d,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Yre({url:this.authUrl.href,headers:Qr(Qr({},m),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,flowType:o,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Vee(this.realtimeUrl.href,Qr(Qr({},e),{},{params:Qr(Qr({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Qre=(e,t,r)=>new Xre(e,t,r);function Jre(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Jre()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Zre="https://efpagcbqixencqosalgr.supabase.co",ene="sb_publishable_ktTr3ZQxN75xr4EOfBsPqQ_FxZq1uvM",z=Qre(Zre,ene,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});function FN(e){const t=String(e||"");return t.startsWith("/setter-portal")?"setter_portal":t.startsWith("/portal")?"client_portal":"main_app"}function BN(e,t,r=!1){if(!Array.isArray(e)||e.length===0)return null;const n=()=>e.find(o=>o.role==="client"&&(o.client_id!=null?String(o.client_id).trim()!=="":!1))||e.find(o=>o.role==="client"),a=()=>e.find(o=>o.role==="setter"),i=()=>e.find(o=>o.role==="coach");return t==="client_portal"?n()||a()||i()||e[0]||null:a()||i()||n()||e[0]||null}function Zm(e,t,r){if(!Array.isArray(e)||e.length===0)return null;const n=e.find(i=>i.role==="owner"),a=e.find(i=>i.role==="setter");return t==="setter_portal"||t==="main_app"?a||n||e[0]||null:n||a||e[0]||null}const tne="acq_setter_role_hint:",RL=e=>`${tne}${e}`,yo=e=>{if(typeof window>"u"||!e)return!1;try{return window.localStorage.getItem(RL(e))==="setter"}catch{return!1}},ya=e=>{if(!(typeof window>"u"||!e))try{window.localStorage.setItem(RL(e),"setter")}catch{}},xo=e=>{const t=e==null?void 0:e.acq_role_hint;return String(t||"").trim().toLowerCase()==="setter"},o2="acq-avatar-mode",l2="acq-avatar-color",kh=()=>{if(typeof window>"u")return{mode:null,color:null};const e=window.localStorage.getItem(o2),t=window.localStorage.getItem(l2);return{mode:e,color:t}},rne=(e,t)=>{typeof window>"u"||(e!==void 0&&(e===null?window.localStorage.removeItem(o2):window.localStorage.setItem(o2,e)),t!==void 0&&(t===null?window.localStorage.removeItem(l2):window.localStorage.setItem(l2,t)))},M1=e=>{const t=Number((e==null?void 0:e.status)||(e==null?void 0:e.statusCode)||0),r=String((e==null?void 0:e.code)||"").toLowerCase(),n=String((e==null?void 0:e.message)||e||"").toLowerCase();return t===401||r.includes("jwt")||n.includes("invalid jwt")||n.includes("jwt")||n.includes("token")&&n.includes("expired")},$L=h.createContext(void 0);function nne({children:e}){const[t,r]=h.useState(null),[n,a]=h.useState(null),[i,o]=h.useState(null),[l,c]=h.useState(!0),u=h.useCallback(async(y,w,x,_,S)=>{var U;const k=async D=>{try{const{data:H,error:B}=await z.from("workspace_members").select("display_name,role,created_at").eq("user_id",y).order("created_at",{ascending:!1}).limit(20);if(B)return console.warn("Failed to load membership names for profile sync:",B),D;const M=Array.isArray(H)?H:[],$=M.find(ae=>String((ae==null?void 0:ae.role)||"")==="owner"&&String((ae==null?void 0:ae.display_name)||"").trim()),re=M.find(ae=>String((ae==null?void 0:ae.display_name)||"").trim()),ie=String(($||re||{}).display_name||"").trim();if(!ie)return D;const q=String(D.full_name||D.display_name||"").trim();if(ie===q)return D;const K={...D,display_name:ie,full_name:ie},{error:ne}=await z.from("profiles").update({display_name:ie,full_name:ie}).eq("id",y);return ne&&console.warn("Failed to persist membership name back to profile:",ne),K}catch(H){return console.warn("Membership name sync failed:",H),D}},C=async()=>z.from("profiles").select("*").eq("id",y).maybeSingle();let{data:j,error:N}=await C();if(N&&M1(N))try{const{data:D,error:H}=await z.auth.refreshSession();!H&&(D!=null&&D.session)&&({data:j,error:N}=await C())}catch(D){console.warn("Session refresh failed while fetching profile:",D)}if(N){if(console.error("Error fetching profile:",N),M1(N))try{await z.auth.signOut()}catch(D){console.warn("Sign out after invalid session failed:",D)}return null}const A=!!(x||S),P=async D=>{try{const H=typeof window<"u"&&window.location.pathname||"",B=FN(H),M=typeof window<"u"&&window.sessionStorage.getItem("acq_signin_intent")==="setter";M&&ya(D.id);const $=H==="/accept-invite"||H.startsWith("/portal")||H.startsWith("/setter-portal"),re=typeof window<"u"&&window.sessionStorage.getItem("acq_signin_intent")==="owner",ie=yo(D.id)||xo(t==null?void 0:t.user_metadata);let q=re&&!M&&!ie,K=String(D.current_workspace_id||"").trim()||null,ne=!1,ae=!1,_e=!1,pe=!1,ye=null,ce=null;const{data:me,error:Q}=await z.from("portal_roles").select("workspace_id,role,client_id").eq("user_id",D.id);if(!Q&&Array.isArray(me)&&me.length>0){_e=!0,pe=me.some(Se=>String((Se==null?void 0:Se.role)||"")==="setter"),pe&&(q=!1,ya(D.id));const Y=BN(me,B,q);ye=String((Y==null?void 0:Y.workspace_id)||"").trim()||null,ce=(Y==null?void 0:Y.role)||null}else Q&&console.warn("Failed to fetch portal roles while ensuring workspace:",Q);let te=[];const{data:Ne,error:je}=await z.from("workspace_members").select("workspace_id,role,created_at").eq("user_id",D.id).order("created_at",{ascending:!1}).limit(20);!je&&Array.isArray(Ne)?(ne=Ne.length>0,te=Ne.map(Y=>({workspace_id:String(Y.workspace_id),role:String(Y.role),created_at:Y.created_at?String(Y.created_at):null})),ae=te.some(Y=>String(Y.role||"")==="setter"),ae&&(q=!1,ya(D.id))):je&&console.warn("Failed to fetch workspace memberships while ensuring workspace:",je);const J=Zm(te,B,q),oe=String((J==null?void 0:J.workspace_id)||"").trim()||null,Ce=ce==="setter"&&B!=="client_portal";if(Ce&&(q=!1,ya(D.id)),ye&&(Ce||!q||$)&&(K?(ce==="setter"&&K!==ye||B==="client_portal"&&K!==ye)&&(K=ye):K=ye),K&&oe&&String((J==null?void 0:J.role)||"")==="setter"&&K!==oe&&(K=oe),(!K&&oe||K&&!te.some(Se=>String(Se.workspace_id||"").trim()===K)&&oe)&&(K=oe),!K){if(!(!$&&!ne&&!_e&&!ae&&!pe&&!ie))return D;const Se=D.display_name||D.full_name||(w==null?void 0:w.split("@")[0])||"Workspace",Re=D.full_name||D.display_name||(w==null?void 0:w.split("@")[0])||null,{data:de,error:G}=await z.rpc("create_workspace_for_user",{p_workspace_name:Se,p_user_id:D.id});if(!G&&de)K=String(de).trim()||null;else{G&&console.warn("create_workspace_for_user RPC failed, trying direct fallback:",G);const ue=crypto.randomUUID(),{data:he,error:Z}=await z.from("workspaces").insert({id:ue,name:Se}).select().single();if(Z)console.warn("Direct workspace insert fallback failed:",Z);else if(he!=null&&he.id){const{error:ge}=await z.from("workspace_members").insert({id:crypto.randomUUID(),workspace_id:ue,user_id:D.id,role:"owner",display_name:Re});if(!ge||String((ge==null?void 0:ge.code)||"")==="23505"){K=ue;const{error:Ie}=await z.from("onboarding_responses").insert({id:crypto.randomUUID(),workspace_id:ue,business_name:Se});Ie&&String((Ie==null?void 0:Ie.code)||"")!=="23505"&&console.warn("Direct workspace onboarding seed failed:",Ie)}else console.warn("Direct workspace owner membership insert failed:",ge)}}}if(K){const{data:Y,error:Se}=await z.from("workspace_members").select("workspace_id").eq("workspace_id",K).eq("user_id",D.id).limit(1).maybeSingle();if(Se&&console.warn("Final workspace membership validation failed:",Se),!(Y!=null&&Y.workspace_id)){const{data:Re}=await z.from("workspace_members").select("workspace_id,role,created_at").eq("user_id",D.id).order("created_at",{ascending:!1}).limit(20),de=Array.isArray(Re)?Re.map(ue=>({workspace_id:String(ue.workspace_id),role:String(ue.role),created_at:ue.created_at?String(ue.created_at):null})):[],G=Zm(de,B,q);K=String((G==null?void 0:G.workspace_id)||"").trim()||null}}if(!K&&D.current_workspace_id&&!$&&(await z.from("profiles").update({current_workspace_id:null}).eq("id",D.id),D.current_workspace_id=null),K&&K!==D.current_workspace_id&&(await z.from("profiles").update({current_workspace_id:K,onboarding_completed:!0}).eq("id",D.id),D.current_workspace_id=K,D.onboarding_completed=!0),re&&typeof window<"u")try{window.sessionStorage.removeItem("acq_signin_intent")}catch{}}catch(H){console.error("Error ensuring workspace:",H)}return D};if(!j){console.log("No profile found, creating one for user:",y);const{data:D}=await z.auth.getUser(),H=((U=D==null?void 0:D.user)==null?void 0:U.user_metadata)||{},B=String(H.full_name||H.fullName||"").trim(),M=String(H.display_name||H.displayName||"").trim(),$=String((w==null?void 0:w.split("@")[0])||"").trim(),re=B||M||$||null,{data:ie,error:q}=await z.from("profiles").insert({id:y,display_name:re,full_name:B||null,avatar_url:_||null,email_verified:A,onboarding_completed:!0}).select().single();if(q){console.error("Error creating profile:",q);const ae=kh();let _e=null,pe=null;try{const{data:ce}=await z.from("workspace_members").select("workspace_id,display_name").eq("user_id",y).order("created_at",{ascending:!1}).limit(1).maybeSingle();_e=String((ce==null?void 0:ce.workspace_id)||"").trim()||null,pe=String((ce==null?void 0:ce.display_name)||"").trim()||null}catch(ce){console.warn("Failed to load membership fallback for profile bootstrap:",ce)}let ye={id:y,display_name:pe||B||M||$||null,full_name:B||pe||null,avatar_url:_||null,avatar_mode:ae.mode??"photo",avatar_color:ae.color??"#2A2A2A",email_verified:A,current_workspace_id:_e,onboarding_completed:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return ye=await P(ye),o(ye),ye}const K=kh();let ne={id:ie.id,display_name:ie.display_name,full_name:ie.full_name,avatar_url:ie.avatar_url,avatar_mode:K.mode??ie.avatar_mode??"photo",avatar_color:K.color??ie.avatar_color??"#2A2A2A",email_verified:ie.email_verified??!1,current_workspace_id:ie.current_workspace_id,onboarding_completed:!0,created_at:ie.created_at,updated_at:ie.updated_at};return ne=await P(ne),ne=await k(ne),o(ne),ne}if(A&&!j.email_verified){console.log("Email verified detected, marking profile as verified");const{error:D}=await z.from("profiles").update({email_verified:!0}).eq("id",y);D||(j.email_verified=!0)}if(j.onboarding_completed||(await z.from("profiles").update({onboarding_completed:!0}).eq("id",y),j.onboarding_completed=!0),_&&!j.avatar_url){const{error:D}=await z.from("profiles").update({avatar_url:_}).eq("id",y);D||(j.avatar_url=_)}const T=kh();let L={id:j.id,display_name:j.display_name,full_name:j.full_name,avatar_url:j.avatar_url,avatar_mode:T.mode??j.avatar_mode??"photo",avatar_color:T.color??j.avatar_color??"#2A2A2A",email_verified:j.email_verified??!1,current_workspace_id:j.current_workspace_id,onboarding_completed:!0,created_at:j.created_at,updated_at:j.updated_at};return L=await P(L),L=await k(L),o(L),L},[]);h.useEffect(()=>{let y=!0,w=!1;const x=()=>{if(!w){w=!0;try{clearTimeout(S)}catch{}}},_=C=>{console.warn("[auth] forcing login due to init stall:",C);try{const j="efpagcbqixencqosalgr".trim();j&&typeof window<"u"&&window.localStorage.removeItem(`sb-${j}-auth-token`)}catch{}y&&(a(null),r(null),o(null),c(!1))},S=window.setTimeout(()=>{w||_("timeout")},8e3),{data:{subscription:k}}=z.auth.onAuthStateChange((C,j)=>{var N,A,P;if(x(),a(j),r((j==null?void 0:j.user)??null),j!=null&&j.user){if(!(C!=="TOKEN_REFRESHED")){y&&c(!1);return}const L=((N=j.user.app_metadata)==null?void 0:N.provider)==="google"||(((A=j.user.app_metadata)==null?void 0:A.providers)||[]).includes("google"),U=((P=j.user.user_metadata)==null?void 0:P.avatar_url)||null,D=j.user.email_confirmed_at||j.user.confirmed_at||null;setTimeout(()=>{u(j.user.id,j.user.email,L,U,D)},0)}else o(null);y&&c(!1)});return z.auth.getSession().then(({data:{session:C}})=>{var j,N,A;if(a(C),r((C==null?void 0:C.user)??null),C!=null&&C.user){const P=((j=C.user.app_metadata)==null?void 0:j.provider)==="google"||(((N=C.user.app_metadata)==null?void 0:N.providers)||[]).includes("google"),T=((A=C.user.user_metadata)==null?void 0:A.avatar_url)||null,L=C.user.email_confirmed_at||C.user.confirmed_at||null;u(C.user.id,C.user.email,P,T,L)}y&&c(!1),x()}),()=>{y=!1;try{clearTimeout(S)}catch{}k.unsubscribe()}},[u]);const d=async(y,w,x)=>{var N;const{data:_,error:S}=await z.auth.signUp({email:y,password:w,options:{emailRedirectTo:`${window.location.origin}/email-verified`,data:{display_name:x||y.split("@")[0],full_name:x}}});if(S)return{error:S};const k=(N=_.user)==null?void 0:N.id,C=String(x||"").trim();k&&await z.from("profiles").upsert({id:k,full_name:C||null,display_name:C||y.split("@")[0]||null},{onConflict:"id"});const j=!_.session;return{error:null,userId:k,needsEmailConfirmation:j}},f=async(y,w)=>{const{error:x}=await z.auth.signInWithPassword({email:y,password:w});return{error:x}},m=async()=>{const{error:y}=await z.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth`,scopes:"https://www.googleapis.com/auth/youtube.force-ssl https://www.googleapis.com/auth/yt-analytics.readonly",queryParams:{access_type:"offline",prompt:"consent"}}});return{error:y}},p=async()=>{await z.auth.signOut();try{window.sessionStorage.removeItem("acq_signin_intent")}catch{}o(null)},v=async y=>{var k,C,j,N;if(!t)return{error:new Error("Not authenticated")};const w={};y.display_name!==void 0&&(w.display_name=y.display_name),y.full_name!==void 0&&(w.full_name=y.full_name),y.avatar_url!==void 0&&(w.avatar_url=y.avatar_url),(y.avatar_mode!==void 0||y.avatar_color!==void 0)&&rne(y.avatar_mode??void 0,y.avatar_color??void 0),y.email_verified!==void 0&&(w.email_verified=y.email_verified),y.current_workspace_id!==void 0&&(w.current_workspace_id=y.current_workspace_id),y.onboarding_completed!==void 0&&(w.onboarding_completed=y.onboarding_completed);let x=null,_=null,S=!1;if(Object.keys(w).length>0){const A=()=>z.from("profiles").update(w,{count:"exact"}).eq("id",t.id);let P=await A();if(P.error&&M1(P.error))try{await z.auth.refreshSession(),P=await A()}catch(L){console.warn("Session refresh failed while updating profile:",L)}let T=Number(P.count||0);if(!P.error&&T===0&&!(yo(t.id)||xo(t.user_metadata)))try{const U=String((i==null?void 0:i.full_name)||(i==null?void 0:i.display_name)||((k=t.email)==null?void 0:k.split("@")[0])||"Workspace").trim()||"Workspace";await z.rpc("create_workspace_for_user",{p_workspace_name:U,p_user_id:t.id}),P=await A(),T=Number(P.count||0)}catch(U){console.warn("Profile row repair attempt failed during updateProfile:",U)}if(x=P.error,S=!x&&T===0,!x&&!S){const{data:L,error:U}=await z.from("profiles").select("*").eq("id",t.id).maybeSingle();!U&&L?_=L:U&&console.warn("Failed to fetch fresh profile row after update:",U)}}if(!x){let A=String(y.current_workspace_id??(i==null?void 0:i.current_workspace_id)??"").trim();const P=String(y.full_name??y.display_name??(i==null?void 0:i.full_name)??(i==null?void 0:i.display_name)??"").trim(),T=y.full_name!==void 0||y.display_name!==void 0;if(T&&P){const{error:L}=await z.from("workspace_members").update({display_name:P}).eq("user_id",t.id);L&&console.warn("Failed to sync workspace member display names:",L)}if(!A&&P&&T)try{const{data:L}=await z.from("workspace_members").select("workspace_id,role,created_at").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(20),D=(L||[]).find(H=>String((H==null?void 0:H.role)||"")==="owner")||(L||[])[0];A=String((D==null?void 0:D.workspace_id)||"").trim()}catch(L){console.warn("Failed to resolve fallback workspace for profile name sync:",L)}if(A&&P&&T){const{error:L}=await z.from("workspace_members").update({display_name:P}).eq("workspace_id",A).eq("user_id",t.id);L&&console.warn("Failed to sync workspace member display name:",L)}if(_){const L=kh(),U={id:_.id,display_name:_.display_name,full_name:_.full_name,avatar_url:_.avatar_url,avatar_mode:y.avatar_mode??L.mode??_.avatar_mode??(i==null?void 0:i.avatar_mode)??"photo",avatar_color:y.avatar_color??L.color??_.avatar_color??(i==null?void 0:i.avatar_color)??"#2A2A2A",email_verified:_.email_verified??(i==null?void 0:i.email_verified)??!1,current_workspace_id:_.current_workspace_id??(i==null?void 0:i.current_workspace_id)??null,onboarding_completed:_.onboarding_completed??(i==null?void 0:i.onboarding_completed)??!0,created_at:_.created_at??(i==null?void 0:i.created_at)??new Date().toISOString(),updated_at:_.updated_at??(i==null?void 0:i.updated_at)??new Date().toISOString()};o(U)}else if(i)o({...i,...y});else{const L=kh(),U=t.user_metadata||{},D=String(U.full_name||U.display_name||"").trim(),H=String(y.full_name??y.display_name??D??((C=t.email)==null?void 0:C.split("@")[0])??"").trim(),B=((j=t.app_metadata)==null?void 0:j.provider)==="google"||(((N=t.app_metadata)==null?void 0:N.providers)||[]).includes("google"),M=t.email_confirmed_at||t.confirmed_at||null,$=y.display_name??(H||null),re=y.full_name??(H||null);o({id:t.id,display_name:$,full_name:re,avatar_url:y.avatar_url??null,avatar_mode:y.avatar_mode??L.mode??"photo",avatar_color:y.avatar_color??L.color??"#2A2A2A",email_verified:!!(B||M),current_workspace_id:y.current_workspace_id??null,onboarding_completed:!!(y.onboarding_completed??!0),created_at:new Date().toISOString(),updated_at:new Date().toISOString()})}}return{error:x}},g=async()=>{t&&await u(t.id)},b=async y=>{try{await z.functions.invoke("send-verification-email",{body:{email:y,type:"password-reset"}})}catch(w){console.error("Password reset error:",w)}return{error:null}};return s.jsx($L.Provider,{value:{user:t,session:n,profile:i,loading:l,signUp:d,signIn:f,signInWithGoogle:m,signOut:p,updateProfile:v,refreshProfile:g,requestPasswordReset:b},children:e})}function Kt(){const e=h.useContext($L);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function _T(e){if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t}function wd(e){const t=e.onboarding_completed?"active":e.user_id?"onboarding_pending":"invitation_pending",r=_T(e.updated_at)||new Date,n=_T(e.created_at)||r;return{id:e.id,workspaceId:e.workspace_id,userId:e.user_id,name:e.name,email:e.email,phone:e.phone,instagramHandle:e.instagram_handle,businessName:e.business_name,goals:e.goals,onboardingCompleted:e.onboarding_completed,onboardingCompletedAt:e.onboarding_completed_at?new Date(e.onboarding_completed_at):null,portalStatus:e.portal_status||t,latestInviteSentAt:e.latest_invite_sent_at?new Date(e.latest_invite_sent_at):null,latestInviteExpiresAt:e.latest_invite_expires_at?new Date(e.latest_invite_expires_at):null,subscriptionStatus:e.subscription_status,accessUntil:e.access_until?new Date(e.access_until):null,createdAt:n,updatedAt:r}}function ane(e){return{id:e.id,clientId:e.client_id,workspaceId:e.workspace_id,parentFolderId:e.parent_folder_id,name:e.name,createdBy:e.created_by,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)}}function DL(e){return{id:e.id,clientId:e.client_id,workspaceId:e.workspace_id,createdBy:e.created_by,title:e.title,description:e.description,dueDate:e.due_date?new Date(e.due_date):null,status:e.status,completedAt:e.completed_at?new Date(e.completed_at):null,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)}}function LL(e){return{id:e.id,clientId:e.client_id,workspaceId:e.workspace_id,folderId:e.folder_id||null,uploadedBy:e.uploaded_by,filename:e.filename,fileUrl:e.file_url,fileType:e.file_type,mimeType:e.mime_type,sizeBytes:e.size_bytes,isVideo:e.is_video,createdAt:new Date(e.created_at)}}const ine=6e4;let Ja=null;function Qi(){const{user:e,profile:t,updateProfile:r,loading:n}=Kt(),a=typeof window<"u"&&window.location.pathname||"",i=FN(a),[o,l]=h.useState(()=>{const d=Ja;return d&&(e==null?void 0:e.id)&&d.userId===e.id&&d.context===i&&Date.now()-d.cachedAtMs<ine?d.value:{portalRole:null,client:null,workspaceId:null,loading:n?!0:!!e,error:null,isAccessBlocked:!1,blockReason:null}}),c=h.useCallback(async()=>{var d;if(!e){Ja=null,l({portalRole:null,client:null,workspaceId:null,loading:!1,error:null,isAccessBlocked:!1,blockReason:null});return}try{const f=typeof window<"u"&&window.sessionStorage.getItem("acq_signin_intent")==="setter",m=typeof window<"u"&&window.sessionStorage.getItem("acq_signin_intent")==="owner",p=yo(e.id)||xo(e.user_metadata);let v=m&&!f&&!p;const g=()=>{ya(e.id)},b=async N=>{const A=String(N||"").trim();if(!(!A||i==="client_portal"))try{const{data:P,error:T}=await z.from("workspace_members").select("user_id,role").eq("workspace_id",A).eq("role","owner");if(T){console.warn("Failed to inspect owner rows for setter self-heal:",T);return}const L=Array.isArray(P)?P:[],U=L.some(B=>String((B==null?void 0:B.user_id)||"").trim()!==e.id);if(!L.some(B=>String((B==null?void 0:B.user_id)||"").trim()===e.id)||!U)return;const{error:H}=await z.from("workspace_members").update({role:"setter"}).eq("workspace_id",A).eq("user_id",e.id).eq("role","owner");H&&console.warn("Failed to self-heal drifted setter owner role:",H)}catch(P){console.warn("Setter role self-heal failed:",P)}};if((f||p)&&i!=="client_portal"){const N=String((t==null?void 0:t.current_workspace_id)||"").trim()||null;await b(N),g();const A={portalRole:"setter",client:null,workspaceId:N,loading:!1,error:null,isAccessBlocked:!1,blockReason:null};l(A),Ja={userId:e.id,context:i,value:A,cachedAtMs:Date.now()};return}let y=[];try{const{data:N,error:A}=await z.from("workspace_members").select("workspace_id,role,created_at").eq("user_id",e.id).in("role",["owner","setter"]).order("created_at",{ascending:!1}).limit(20);if(A)throw A;if(y=(Array.isArray(N)?N:[]).map(T=>({workspace_id:String((T==null?void 0:T.workspace_id)||"").trim(),role:String((T==null?void 0:T.role)||"").trim(),created_at:T!=null&&T.created_at?String(T.created_at):null})),y.some(T=>T.role==="setter"&&T.workspace_id)&&i!=="client_portal"){v=!1,g();const T=Zm(y,"setter_portal",!1),L=String((T==null?void 0:T.workspace_id)||"").trim();try{L&&String((t==null?void 0:t.current_workspace_id)||"")!==L&&await r({current_workspace_id:L})}catch(D){console.warn("Failed to align setter current workspace from membership fallback:",D)}const U={portalRole:"setter",client:null,workspaceId:L||null,loading:!1,error:null,isAccessBlocked:!1,blockReason:null};l(U),Ja={userId:e.id,context:i,value:U,cachedAtMs:Date.now()};return}}catch(N){console.warn("Failed to fetch workspace memberships for portal role resolution:",N)}const{data:w,error:x}=await z.from("portal_roles").select("*").eq("user_id",e.id);if(x)throw x;const S=BN(w||[],i,v);if(!S){const{data:N,error:A}=await z.from("clients").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(A)throw A;if(N){const L=wd(N),U=new Date,D=L.subscriptionStatus==="paused",H=L.accessUntil&&L.accessUntil<U;l({portalRole:"client",client:L,workspaceId:N.workspace_id,loading:!1,error:null,isAccessBlocked:D||H,blockReason:D?"paused":H?"expired":null}),Ja={userId:e.id,context:i,value:{portalRole:"client",client:L,workspaceId:N.workspace_id,loading:!1,error:null,isAccessBlocked:D||H,blockReason:D?"paused":H?"expired":null},cachedAtMs:Date.now()};return}const P=Zm(y,i,v);if((P==null?void 0:P.role)==="setter"){g();try{const U=String(P.workspace_id||"").trim();U&&String((t==null?void 0:t.current_workspace_id)||"")!==U&&await r({current_workspace_id:U})}catch(U){console.warn("Failed to align setter current workspace:",U)}const L={portalRole:"setter",client:null,workspaceId:P.workspace_id,loading:!1,error:null,isAccessBlocked:!1,blockReason:null};l(L),Ja={userId:e.id,context:i,value:L,cachedAtMs:Date.now()};return}if((P==null?void 0:P.role)==="owner"){const L={portalRole:"coach",client:null,workspaceId:P.workspace_id,loading:!1,error:null,isAccessBlocked:!1,blockReason:null};l(L),Ja={userId:e.id,context:i,value:L,cachedAtMs:Date.now()};return}const T={portalRole:null,client:null,workspaceId:null,loading:!1,error:null,isAccessBlocked:!1,blockReason:null};l(T),Ja={userId:e.id,context:i,value:T,cachedAtMs:Date.now()};return}const k=S.role,C=S.workspace_id;if(k==="client"&&S.client_id){const{data:N,error:A}=await z.from("clients").select("*").eq("id",S.client_id).maybeSingle();if(A)throw A;if(N){const P=wd(N),T=new Date,L=P.subscriptionStatus==="paused",U=P.accessUntil&&P.accessUntil<T,D={portalRole:k,client:P,workspaceId:C,loading:!1,error:null,isAccessBlocked:L||U,blockReason:L?"paused":U?"expired":null};l(D),Ja={userId:e.id,context:i,value:D,cachedAtMs:Date.now()};return}}if(k==="setter"){g();try{const A=String(C||"").trim();if(A){const P=String((t==null?void 0:t.full_name)||(t==null?void 0:t.display_name)||((d=e.email)==null?void 0:d.split("@")[0])||"").trim(),{error:T}=await z.from("workspace_members").insert({workspace_id:A,user_id:e.id,role:"setter",display_name:P||null});T&&String((T==null?void 0:T.code)||"")!=="23505"&&console.warn("Failed to ensure workspace_members row for setter:",T),String((t==null?void 0:t.current_workspace_id)||"")!==A&&await r({current_workspace_id:A})}}catch(A){console.warn("Setter workspace self-heal failed:",A)}const N={portalRole:"setter",client:null,workspaceId:C,loading:!1,error:null,isAccessBlocked:!1,blockReason:null};l(N),Ja={userId:e.id,context:i,value:N,cachedAtMs:Date.now()};return}const j={portalRole:k,client:null,workspaceId:C,loading:!1,error:null,isAccessBlocked:!1,blockReason:null};l(j),Ja={userId:e.id,context:i,value:j,cachedAtMs:Date.now()}}catch(f){console.error("Error fetching portal role:",f);const m={portalRole:null,client:null,workspaceId:null,loading:!1,error:f,isAccessBlocked:!1,blockReason:null};l(m),Ja={userId:e.id,context:i,value:m,cachedAtMs:Date.now()}}},[e,t==null?void 0:t.full_name,t==null?void 0:t.display_name,t==null?void 0:t.current_workspace_id,r,i]);return h.useEffect(()=>{n||c()},[n,c]),{...o,authLoading:n,updateClient:async d=>{if(!o.client)return{error:new Error("No client")};try{const f={};d.businessName!==void 0&&(f.business_name=d.businessName),d.instagramHandle!==void 0&&(f.instagram_handle=d.instagramHandle),d.phone!==void 0&&(f.phone=d.phone),d.goals!==void 0&&(f.goals=d.goals),d.onboardingCompleted!==void 0&&(f.onboarding_completed=d.onboardingCompleted,d.onboardingCompleted&&(f.onboarding_completed_at=new Date().toISOString()));const{error:m}=await z.from("clients").update(f).eq("id",o.client.id);if(m)throw m;return l(p=>({...p,client:p.client?{...p.client,...d}:null})),{error:null}}catch(f){return console.error("Error updating client:",f),{error:f}}},refetch:c}}const FL=h.createContext(void 0);function sne({children:e}){const{user:t,profile:r,updateProfile:n,loading:a}=Kt(),[i,o]=h.useState(null),[l,c]=h.useState([]),[u,d]=h.useState(null),[f,m]=h.useState(null),[p,v]=h.useState(!0),g=j=>{const N=Number((j==null?void 0:j.status)||(j==null?void 0:j.statusCode)||0),A=String((j==null?void 0:j.code)||"").toLowerCase(),P=String((j==null?void 0:j.message)||j||"").toLowerCase();return N===401||A.includes("jwt")||P.includes("invalid jwt")||P.includes("jwt")||P.includes("token")&&P.includes("expired")},b=h.useCallback(async()=>{var q,K;if(!t){o(null),c([]),d(null),m(null),v(!1);return}if(a){o(null),c([]),d(null),m(null),v(!0);return}const j=typeof window<"u"&&window.location.pathname||"",N=FN(j),A=typeof window<"u"&&window.sessionStorage.getItem("acq_signin_intent")==="setter";A&&ya(t.id);const P=typeof window<"u"&&window.sessionStorage.getItem("acq_signin_intent")==="owner",T=yo(t.id)||xo(t.user_metadata);let L=P&&!A&&!T;const U=j==="/accept-invite"||j.startsWith("/portal")||j.startsWith("/setter-portal");let D=String((r==null?void 0:r.current_workspace_id)||"").trim()||null,H=[],B=null,M=!1,$=!1,re=!1,ie=!1;try{if(!D){let me=await z.from("profiles").select("current_workspace_id").eq("id",t.id).maybeSingle();if(me.error&&g(me.error))try{await z.auth.refreshSession(),me=await z.from("profiles").select("current_workspace_id").eq("id",t.id).maybeSingle()}catch(Ne){console.warn("Profile workspace lookup session refresh failed:",Ne)}const{data:Q,error:te}=me;te?console.warn("Failed to fetch profile workspace id:",te):D=String((Q==null?void 0:Q.current_workspace_id)||"").trim()||null}let ne=await z.from("workspace_members").select("workspace_id,role,created_at").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(20);if(ne.error&&g(ne.error))try{await z.auth.refreshSession(),ne=await z.from("workspace_members").select("workspace_id,role,created_at").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(20)}catch(me){console.warn("Membership lookup session refresh failed:",me)}const{data:ae,error:_e}=ne;if(!_e&&Array.isArray(ae)){M=ae.length>0,H=ae.map(Q=>({workspace_id:String(Q.workspace_id),role:String(Q.role),created_at:Q.created_at?String(Q.created_at):null})),$=H.some(Q=>String(Q.role||"")==="setter"),$&&(L=!1,ya(t.id));const me=Zm(H,N,L);B=String((me==null?void 0:me.workspace_id)||"").trim()||null,!D&&B||D&&B&&String((me==null?void 0:me.role)||"")==="setter"&&D!==B?D=B:D&&(H.some(te=>String(te.workspace_id||"").trim()===D)||(B?D=B:U||(D=null)))}else _e&&console.warn("Failed to fetch workspace memberships:",_e);let pe=await z.from("portal_roles").select("workspace_id,role,client_id").eq("user_id",t.id);if(pe.error&&g(pe.error))try{await z.auth.refreshSession(),pe=await z.from("portal_roles").select("workspace_id,role,client_id").eq("user_id",t.id)}catch(me){console.warn("Portal role lookup session refresh failed:",me)}const{data:ye,error:ce}=pe;if(!ce&&ye&&ye.length>0){re=!0,ie=ye.some(Ne=>String((Ne==null?void 0:Ne.role)||"")==="setter"),ie&&(L=!1,ya(t.id));const me=BN(ye,N,L),Q=String((me==null?void 0:me.workspace_id)||"").trim()||null,te=String((me==null?void 0:me.role)||"").trim().toLowerCase();(!D&&Q||te==="setter"&&Q&&D!==Q&&N!=="client_portal"||N==="client_portal"&&Q&&D!==Q)&&(D=Q)}else ce&&console.warn("Failed to fetch portal roles for workspace inference:",ce);if(D&&String((r==null?void 0:r.current_workspace_id)||"").trim()!==D)if(r)await n({current_workspace_id:D});else{const{error:me}=await z.from("profiles").update({current_workspace_id:D}).eq("id",t.id);me&&console.warn("Failed to persist inferred workspace id:",me)}}catch(ne){console.warn("Failed to determine active workspace id:",ne)}if(!D)try{if(!U&&!M&&!re&&!$&&!ie&&!T){const ae=String((r==null?void 0:r.full_name)||(r==null?void 0:r.display_name)||((q=t.email)==null?void 0:q.split("@")[0])||"Workspace").trim()||"Workspace",_e=String((r==null?void 0:r.full_name)||(r==null?void 0:r.display_name)||((K=t.email)==null?void 0:K.split("@")[0])||"").trim()||null;let pe=await z.rpc("create_workspace_for_user",{p_workspace_name:ae,p_user_id:t.id});if(pe.error&&g(pe.error))try{await z.auth.refreshSession(),pe=await z.rpc("create_workspace_for_user",{p_workspace_name:ae,p_user_id:t.id})}catch(me){console.warn("Owner workspace RPC session refresh failed:",me)}const{data:ye,error:ce}=pe;if(!ce&&ye)D=String(ye).trim()||null;else{ce&&console.warn("Owner workspace auto-provision RPC failed:",ce);const me=crypto.randomUUID();let Q=await z.from("workspaces").insert({id:me,name:ae}).select().single();if(Q.error&&g(Q.error))try{await z.auth.refreshSession(),Q=await z.from("workspaces").insert({id:me,name:ae}).select().single()}catch(je){console.warn("Owner workspace fallback insert session refresh failed:",je)}const{data:te,error:Ne}=Q;if(Ne)console.warn("Owner workspace fallback insert failed:",Ne);else if(te!=null&&te.id){let je=await z.from("workspace_members").insert({id:crypto.randomUUID(),workspace_id:me,user_id:t.id,role:"owner",display_name:_e});if(je.error&&g(je.error))try{await z.auth.refreshSession(),je=await z.from("workspace_members").insert({id:crypto.randomUUID(),workspace_id:me,user_id:t.id,role:"owner",display_name:_e})}catch(oe){console.warn("Owner membership fallback insert session refresh failed:",oe)}const{error:J}=je;if(J&&String((J==null?void 0:J.code)||"")!=="23505")console.warn("Owner workspace fallback membership insert failed:",J);else{D=me;const{error:oe}=await z.from("onboarding_responses").insert({id:crypto.randomUUID(),workspace_id:me,business_name:ae});oe&&String((oe==null?void 0:oe.code)||"")!=="23505"&&console.warn("Owner workspace fallback onboarding insert failed:",oe)}}}if(D&&String((r==null?void 0:r.current_workspace_id)||"").trim()!==D)if(r)await n({current_workspace_id:D});else{const{error:me}=await z.from("profiles").update({current_workspace_id:D}).eq("id",t.id);me&&console.warn("Failed to persist auto-provisioned workspace id:",me)}}}catch(ne){console.warn("Owner workspace auto-provision failed:",ne)}if(!D){o(null),c([]),d(null),m(null),v(!1);return}try{const{data:ne,error:ae}=await z.from("workspaces").select("*").eq("id",D).single();if(ae)throw ae;o({id:ne.id,name:ne.name,createdAt:new Date(ne.created_at),updatedAt:new Date(ne.updated_at)});const{data:_e,error:pe}=await z.from("workspace_members").select("*").eq("workspace_id",D);if(pe)throw pe;const ye=(_e||[]).map(J=>String(J.user_id)).filter(Boolean),ce={};if(ye.length>0){const{data:J,error:oe}=await z.from("profiles").select("id,full_name,display_name").in("id",ye);if(oe)console.warn("Error fetching workspace member profiles:",oe);else for(const Ce of J||[]){const R=String(Ce.id||""),Y=String(Ce.full_name||Ce.display_name||"").trim();R&&Y&&(ce[R]=Y)}}const me=(_e||[]).map(J=>{const oe=String(J.display_name||"").trim(),Ce=ce[String(J.user_id)]||"";return{id:J.id,workspaceId:J.workspace_id,userId:J.user_id,role:J.role,displayName:oe||Ce||null,createdAt:new Date(J.created_at),updatedAt:new Date(J.updated_at)}});c(me);const Q=me.find(J=>J.userId===t.id);let te=(Q==null?void 0:Q.role)||null;try{const{data:J,error:oe}=await z.from("portal_roles").select("role").eq("user_id",t.id).eq("workspace_id",D);oe?console.warn("Error fetching user portal roles for workspace role resolution:",oe):Array.isArray(J)&&(J.some(Ce=>String((Ce==null?void 0:Ce.role)||"")==="setter")?te="setter":!te&&J.some(Ce=>String((Ce==null?void 0:Ce.role)||"")==="coach")&&(te="owner"))}catch(J){console.warn("Portal role lookup failed during workspace role resolution:",J)}A&&N!=="client_portal"&&(te="setter"),T&&N!=="client_portal"&&(te="setter"),te==="setter"&&ya(t.id),d(te);const{data:Ne,error:je}=await z.from("onboarding_responses").select("*").eq("workspace_id",D).maybeSingle();je&&console.warn("Error fetching onboarding:",je),Ne&&m({id:Ne.id,workspaceId:Ne.workspace_id,businessName:Ne.business_name,hasTeam:Ne.has_team,revenueRange:Ne.revenue_range,kpiFilePath:Ne.kpi_file_path,completedAt:Ne.completed_at?new Date(Ne.completed_at):null,createdAt:new Date(Ne.created_at),updatedAt:new Date(Ne.updated_at)})}catch(ne){console.error("Error fetching workspace:",ne)}finally{v(!1)}},[t,r,r==null?void 0:r.current_workspace_id,n,a]);h.useEffect(()=>{b()},[b]);const y=async j=>{var N,A,P;if(!t)return console.error("[createWorkspace] No user found in context"),{workspace:null,error:new Error("Not authenticated")};console.log("[createWorkspace] User ID from context:",t.id),console.log("[createWorkspace] Attempting to create workspace:",j);try{const{data:T,error:L}=await z.auth.getSession();if(console.log("[createWorkspace] Session check:",{hasSession:!!(T!=null&&T.session),userId:(A=(N=T==null?void 0:T.session)==null?void 0:N.user)==null?void 0:A.id,expiresAt:(P=T==null?void 0:T.session)==null?void 0:P.expires_at,error:L}),!(T!=null&&T.session)){console.log("[createWorkspace] No session, attempting refresh...");const{data:re,error:ie}=await z.auth.refreshSession();if(ie||!(re!=null&&re.session))return console.error("[createWorkspace] Session refresh failed:",ie),{workspace:null,error:new Error("Session expired. Please log in again.")};console.log("[createWorkspace] Session refreshed successfully")}console.log("[createWorkspace] Inserting workspace...");const U=crypto.randomUUID(),{data:D,error:H}=await z.from("workspaces").insert({id:U,name:j}).select().single();if(console.log("[createWorkspace] Insert result:",{wsData:D,wsError:H}),H)throw H;const{error:B}=await z.from("workspace_members").insert({id:crypto.randomUUID(),workspace_id:D.id,user_id:t.id,role:"owner",display_name:(r==null?void 0:r.full_name)||(r==null?void 0:r.display_name)});if(B)throw B;const{error:M}=await z.from("onboarding_responses").insert({id:crypto.randomUUID(),workspace_id:D.id,business_name:j});if(M)throw M;await n({current_workspace_id:D.id});const $={id:D.id,name:D.name,createdAt:new Date(D.created_at),updatedAt:new Date(D.updated_at)};return o($),d("owner"),{workspace:$,error:null}}catch(T){return console.error("Error creating workspace:",T),{workspace:null,error:T}}},w=async j=>{if(!i)return{error:new Error("No workspace selected")};try{const{error:N}=await z.from("workspaces").update({name:j.name}).eq("id",i.id);if(N)throw N;return o({...i,...j}),{error:null}}catch(N){return console.error("Error updating workspace:",N),{error:N}}},x=async j=>{await n({current_workspace_id:j}),await b()},_=async(j,N)=>{if(!t||!i)return{token:null,error:new Error("Not authenticated or no workspace")};try{const A=crypto.randomUUID()+"-"+crypto.randomUUID(),{error:P}=await z.from("invites").insert({workspace_id:i.id,email:j,role:N,token:A,invited_by:t.id,expires_at:new Date(Date.now()+7*24*60*60*1e3).toISOString()});if(P)throw P;const{error:T}=await z.functions.invoke("send-verification-email",{body:{email:j,type:"invite",inviteToken:A,workspaceName:i.name}});return T&&console.error("Error sending invite email:",T),{token:A,error:null}}catch(A){return console.error("Error inviting member:",A),{token:null,error:A}}},S=async j=>{if(!i)return{error:new Error("No workspace selected")};try{const{error:N}=await z.from("workspace_members").delete().eq("id",j);if(N)throw N;return c(A=>A.filter(P=>P.id!==j)),{error:null}}catch(N){return console.error("Error removing member:",N),{error:N}}},k=async j=>{if(!i)return{error:new Error("No workspace selected")};try{const{error:N}=await z.from("onboarding_responses").update({business_name:j.businessName,has_team:j.hasTeam,revenue_range:j.revenueRange,kpi_file_path:j.kpiFilePath}).eq("workspace_id",i.id);if(N)throw N;return m(A=>A?{...A,...j}:null),{error:null}}catch(N){return console.error("Error saving onboarding:",N),{error:N}}},C=async()=>{if(!i||!t)return{error:new Error("No workspace or user")};try{const{error:j}=await z.from("onboarding_responses").update({completed_at:new Date().toISOString()}).eq("workspace_id",i.id);if(j)throw j;return await n({onboarding_completed:!0}),m(N=>N?{...N,completedAt:new Date}:null),{error:null}}catch(j){return console.error("Error completing onboarding:",j),{error:j}}};return s.jsx(FL.Provider,{value:{workspace:i,members:l,userRole:u,onboarding:f,loading:p,createWorkspace:y,updateWorkspace:w,switchWorkspace:x,inviteMember:_,removeMember:S,saveOnboarding:k,completeOnboarding:C,refreshWorkspace:b},children:e})}function on(){const e=h.useContext(FL);if(e===void 0)throw new Error("useWorkspace must be used within a WorkspaceProvider");return e}function $e({className:e,...t}){return s.jsx("div",{className:Pe("animate-pulse rounded-md bg-muted",e),...t})}function BL(){return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-start justify-between gap-4 mb-8",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx($e,{className:"h-9 w-44 rounded-2xl bg-white/10"}),s.jsx($e,{className:"h-4 w-72 rounded-xl bg-white/[0.06] mt-3"})]}),s.jsx($e,{className:"h-10 w-32 rounded-2xl bg-white/10"})]}),s.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[s.jsxs("div",{className:"col-span-12 lg:col-span-8 space-y-6",children:[s.jsx($e,{className:"h-[260px] rounded-3xl bg-white/[0.06]"}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsx($e,{className:"h-[140px] rounded-3xl bg-white/[0.06]"}),s.jsx($e,{className:"h-[140px] rounded-3xl bg-white/[0.06]"})]})]}),s.jsxs("div",{className:"col-span-12 lg:col-span-4 space-y-6",children:[s.jsx($e,{className:"h-[220px] rounded-3xl bg-white/[0.06]"}),s.jsx($e,{className:"h-[220px] rounded-3xl bg-white/[0.06]"})]})]})]})}function UN(){return s.jsx("div",{className:"min-h-screen bg-background",children:s.jsx("div",{className:"max-w-6xl mx-auto pt-16 px-8",children:s.jsx(BL,{})})})}function one(){const e=Xt(),{user:t,profile:r,loading:n}=Kt(),{userRole:a,loading:i}=on(),{portalRole:o,loading:l}=Qi(),c=typeof window<"u"&&window.sessionStorage.getItem("acq_signin_intent")==="setter",u=!!(t!=null&&t.id)&&yo(t.id),d=xo(t==null?void 0:t.user_metadata);return h.useEffect(()=>{if(n||l)return;const f=window.location.hash.includes("access_token="),m=window.location.search.includes("code=");if(f||m){e(`/email-verified${window.location.search}${window.location.hash}`,{replace:!0});return}if(!t)e("/auth");else{if(c||u||d){e("/setter-portal/messages",{replace:!0});return}if(o==="client"){e("/portal/meetings",{replace:!0});return}if(o==="setter"){e("/setter-portal/messages",{replace:!0});return}if(i)return;e(a==="setter"?"/setter-portal/messages":"/dashboard")}},[t,n,l,o,e,a,i,c,u,d]),s.jsx(UN,{})}function lne(){const[e,t]=h.useState(!1),{user:r,signInWithGoogle:n}=Kt(),a=Xt();h.useEffect(()=>{r&&a("/",{replace:!0})},[r,a]);const i=async()=>{t(!0);try{sessionStorage.setItem("acq_signin_intent","owner")}catch{}const{error:o}=await n();o&&ee.error("Failed to sign in with Google"),t(!1)};return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsx("div",{className:"w-full max-w-sm",children:s.jsxs("div",{className:"relative rounded-2xl p-8 overflow-hidden",style:{background:"#0e0e0e"},children:[s.jsx("div",{className:"absolute inset-0 rounded-2xl pointer-events-none",style:{background:`linear-gradient(155deg, 
                rgba(255, 255, 255, 0.16) 0%, 
                rgba(255, 255, 255, 0.10) 20%, 
                rgba(255, 255, 255, 0.06) 40%, 
                rgba(255, 255, 255, 0.035) 60%,
                rgba(255, 255, 255, 0.02) 80%,
                rgba(255, 255, 255, 0.008) 95%,
                transparent 100%
              )`,padding:"1px",WebkitMask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",WebkitMaskComposite:"xor",maskComposite:"exclude"}}),s.jsx("div",{className:"absolute inset-0 rounded-2xl pointer-events-none",style:{background:`linear-gradient(155deg, 
                rgba(255, 255, 255, 0.035) 0%, 
                rgba(255, 255, 255, 0.012) 35%, 
                transparent 65%
              )`}}),s.jsxs("div",{className:"relative z-10 flex flex-col gap-6",children:[s.jsxs("h1",{className:"leading-tight text-white",style:{fontWeight:400,fontSize:"2rem",letterSpacing:"0.005em",textShadow:"0 2px 4px rgba(0,0,0,0.65)"},children:["Welcome",s.jsx("br",{}),"back"]}),s.jsxs("button",{onClick:i,disabled:e,className:"group flex items-center justify-center gap-3 px-4 py-3 rounded-xl text-sm transition-all duration-300 w-full bg-white/5 border border-border hover:bg-white hover:border-border disabled:opacity-50 disabled:cursor-not-allowed",style:{fontFamily:"'Inter', sans-serif",fontWeight:500},children:[s.jsxs("svg",{className:"w-5 h-5 text-white/70 group-hover:text-black transition-colors duration-300",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s.jsx("span",{className:"text-white/70 group-hover:text-black transition-colors duration-300",children:e?"Connecting...":"Continue with Google"}),s.jsx(Ll,{className:"w-4 h-4 text-white/50 group-hover:text-black group-hover:translate-x-0.5 transition-all duration-300",strokeWidth:2})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 h-[0.5px] bg-white/10"}),s.jsx("span",{className:"text-xs text-white/30",children:"or"}),s.jsx("div",{className:"flex-1 h-[0.5px] bg-white/10"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(Ml,{to:"/portal/login",className:"group flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl text-sm transition-all duration-300 w-full border border-border hover:border-border hover:bg-white/5",children:s.jsx("span",{className:"text-white/40 group-hover:text-white/60 transition-colors duration-300",style:{fontFamily:"'Inter', sans-serif",fontWeight:400},children:"Client Portal"})}),s.jsx(Ml,{to:"/setter-portal/login",className:"group flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl text-sm transition-all duration-300 w-full border border-border hover:border-border hover:bg-white/5",children:s.jsx("span",{className:"text-white/40 group-hover:text-white/60 transition-colors duration-300",style:{fontFamily:"'Inter', sans-serif",fontWeight:400},children:"Setter Portal"})})]})]})]})})})}const qN=Lf("inline-flex items-center justify-center gap-1.5 whitespace-nowrap rounded-xl text-[13px] font-semibold tracking-[0.02em] ring-offset-background transition-colors focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-white text-black border border-border hover:bg-white/90 font-bold",destructive:"bg-red-600 text-white hover:bg-red-700 border border-border",outline:"border border-border bg-transparent text-white/60 hover:text-white hover:bg-white/5 font-medium tracking-[0.02em]",secondary:"bg-[#151618] border border-border text-white hover:bg-[#1b1f21]",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-8 px-3.5",sm:"h-8 px-3.5",lg:"h-8 px-3.5",icon:"h-10 w-10 rounded-full"}},defaultVariants:{variant:"default",size:"default"}}),ze=h.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?IV:"button";return s.jsx(o,{className:Pe(qN({variant:t,size:r,className:e})),ref:i,...a})});ze.displayName="Button";const rg=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:Pe("w-full caption-bottom text-sm",e),...t})}));rg.displayName="Table";const ng=h.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:Pe("[&_tr]:border-b-[0.5px]",e),...t}));ng.displayName="TableHeader";const ag=h.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:Pe("[&_tr:last-child]:border-0",e),...t}));ag.displayName="TableBody";const cne=h.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:Pe("border-t-[0.5px] bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));cne.displayName="TableFooter";const bo=h.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:Pe("border-b-[0.5px] transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));bo.displayName="TableRow";const dn=h.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:Pe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));dn.displayName="TableHead";const fn=h.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:Pe("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));fn.displayName="TableCell";const une=h.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:Pe("mt-4 text-sm text-muted-foreground",e),...t}));une.displayName="TableCaption";function UL(){const{user:e,profile:t}=Kt(),[r,n]=h.useState([]),[a,i]=h.useState(!0),o=h.useCallback(async()=>{if(!e){n([]),i(!1);return}i(!0);let d=z.from("filter_runs").select("*").order("created_at",{ascending:!1});t!=null&&t.current_workspace_id?d=d.eq("workspace_id",t.current_workspace_id):d=d.eq("user_id",e.id).is("workspace_id",null);const{data:f,error:m}=await d;if(m){console.error("Error fetching runs:",m),i(!1);return}const p=f.map(v=>({id:v.id,name:v.name,timestamp:new Date(v.created_at),totalProfiles:v.total_profiles,matchingProfiles:v.matching_profiles,includeKeywords:v.include_keywords||[],excludeKeywords:v.exclude_keywords||[],filteredData:[],originalHeaders:v.original_headers||[],promptId:v.prompt_id,promptSnapshot:v.prompt_snapshot,generateOpeners:v.generate_openers}));n(p),i(!1)},[e,t==null?void 0:t.current_workspace_id]);return h.useEffect(()=>{o()},[o]),{runs:r,loading:a,createRun:async d=>{if(!e)return{error:new Error("Not authenticated"),run:null};const{data:f,error:m}=await z.from("filter_runs").insert({user_id:e.id,workspace_id:(t==null?void 0:t.current_workspace_id)||null,name:d.name,total_profiles:d.totalProfiles,matching_profiles:d.matchingProfiles,include_keywords:d.includeKeywords,exclude_keywords:d.excludeKeywords,original_headers:d.originalHeaders,prompt_id:d.promptId||null,prompt_snapshot:d.promptSnapshot||null,generate_openers:d.generateOpeners}).select().single();if(m||!f)return{error:m,run:null};const p=100,v=d.filteredData.map((b,y)=>({run_id:f.id,row_index:y,row_data:b}));for(let b=0;b<v.length;b+=p){const y=v.slice(b,b+p),{error:w}=await z.from("run_data").insert(y);w&&console.error("Error inserting run data:",w)}const g={...d,id:f.id,timestamp:new Date(f.created_at)};return n(b=>[g,...b]),{error:null,run:g}},deleteRun:async d=>{const{error:f}=await z.from("filter_runs").delete().eq("id",d);return f||n(m=>m.filter(p=>p.id!==d)),{error:f}},getRunWithData:async d=>{const{data:f,error:m}=await z.from("filter_runs").select("*").eq("id",d).single();if(m||!f)return null;const{data:p,error:v}=await z.from("run_data").select("*").eq("run_id",d).order("row_index",{ascending:!0});if(v)return null;const g=f,b=p;return{id:g.id,name:g.name,timestamp:new Date(g.created_at),totalProfiles:g.total_profiles,matchingProfiles:g.matching_profiles,includeKeywords:g.include_keywords||[],excludeKeywords:g.exclude_keywords||[],filteredData:b.map(y=>y.row_data),originalHeaders:g.original_headers||[],promptId:g.prompt_id,promptSnapshot:g.prompt_snapshot,generateOpeners:g.generate_openers}},refreshRuns:o}}var qL={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((r,n)=>{e.exports=n()})(zh,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},a,i=!n.document&&!!n.postMessage,o=n.IS_PAPA_WORKER||!1,l={},c=0,u={};function d(j){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(N){var A=S(N);A.chunkSize=parseInt(A.chunkSize),N.step||N.chunk||(A.chunkSize=null),this._handle=new g(A),(this._handle.streamer=this)._config=A}).call(this,j),this.parseChunk=function(N,A){var P=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<P){let L=this._config.newline;L||(T=this._config.quoteChar||'"',L=this._handle.guessLineEndings(N,T)),N=[...N.split(L).slice(P)].join(L)}this.isFirstChunk&&C(this._config.beforeFirstChunk)&&(T=this._config.beforeFirstChunk(N))!==void 0&&(N=T),this.isFirstChunk=!1,this._halted=!1;var P=this._partialLine+N,T=(this._partialLine="",this._handle.parse(P,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(N=T.meta.cursor,P=(this._finished||(this._partialLine=P.substring(N-this._baseIndex),this._baseIndex=N),T&&T.data&&(this._rowCount+=T.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)n.postMessage({results:T,workerId:u.WORKER_ID,finished:P});else if(C(this._config.chunk)&&!A){if(this._config.chunk(T,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=T=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(T.data),this._completeResults.errors=this._completeResults.errors.concat(T.errors),this._completeResults.meta=T.meta),this._completed||!P||!C(this._config.complete)||T&&T.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),P||T&&T.meta.paused||this._nextChunk(),T}this._halted=!0},this._sendError=function(N){C(this._config.error)?this._config.error(N):o&&this._config.error&&n.postMessage({workerId:u.WORKER_ID,error:N,finished:!1})}}function f(j){var N;(j=j||{}).chunkSize||(j.chunkSize=u.RemoteChunkSize),d.call(this,j),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(A){this._input=A,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(N=new XMLHttpRequest,this._config.withCredentials&&(N.withCredentials=this._config.withCredentials),i||(N.onload=k(this._chunkLoaded,this),N.onerror=k(this._chunkError,this)),N.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var A,P=this._config.downloadRequestHeaders;for(A in P)N.setRequestHeader(A,P[A])}var T;this._config.chunkSize&&(T=this._start+this._config.chunkSize-1,N.setRequestHeader("Range","bytes="+this._start+"-"+T));try{N.send(this._config.downloadRequestBody)}catch(L){this._chunkError(L.message)}i&&N.status===0&&this._chunkError()}},this._chunkLoaded=function(){N.readyState===4&&(N.status<200||400<=N.status?this._chunkError():(this._start+=this._config.chunkSize||N.responseText.length,this._finished=!this._config.chunkSize||this._start>=(A=>(A=A.getResponseHeader("Content-Range"))!==null?parseInt(A.substring(A.lastIndexOf("/")+1)):-1)(N),this.parseChunk(N.responseText)))},this._chunkError=function(A){A=N.statusText||A,this._sendError(new Error(A))}}function m(j){(j=j||{}).chunkSize||(j.chunkSize=u.LocalChunkSize),d.call(this,j);var N,A,P=typeof FileReader<"u";this.stream=function(T){this._input=T,A=T.slice||T.webkitSlice||T.mozSlice,P?((N=new FileReader).onload=k(this._chunkLoaded,this),N.onerror=k(this._chunkError,this)):N=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var T=this._input,L=(this._config.chunkSize&&(L=Math.min(this._start+this._config.chunkSize,this._input.size),T=A.call(T,this._start,L)),N.readAsText(T,this._config.encoding));P||this._chunkLoaded({target:{result:L}})},this._chunkLoaded=function(T){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(T.target.result)},this._chunkError=function(){this._sendError(N.error)}}function p(j){var N;d.call(this,j=j||{}),this.stream=function(A){return N=A,this._nextChunk()},this._nextChunk=function(){var A,P;if(!this._finished)return A=this._config.chunkSize,N=A?(P=N.substring(0,A),N.substring(A)):(P=N,""),this._finished=!N,this.parseChunk(P)}}function v(j){d.call(this,j=j||{});var N=[],A=!0,P=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(T){this._input=T,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){P&&N.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),N.length?this.parseChunk(N.shift()):A=!0},this._streamData=k(function(T){try{N.push(typeof T=="string"?T:T.toString(this._config.encoding)),A&&(A=!1,this._checkIsFinished(),this.parseChunk(N.shift()))}catch(L){this._streamError(L)}},this),this._streamError=k(function(T){this._streamCleanUp(),this._sendError(T)},this),this._streamEnd=k(function(){this._streamCleanUp(),P=!0,this._streamData("")},this),this._streamCleanUp=k(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(j){var N,A,P,T,L=Math.pow(2,53),U=-L,D=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,H=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,B=this,M=0,$=0,re=!1,ie=!1,q=[],K={data:[],errors:[],meta:{}};function ne(ye){return j.skipEmptyLines==="greedy"?ye.join("").trim()==="":ye.length===1&&ye[0].length===0}function ae(){if(K&&P&&(pe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),P=!1),j.skipEmptyLines&&(K.data=K.data.filter(function(Q){return!ne(Q)})),_e()){let Q=function(te,Ne){C(j.transformHeader)&&(te=j.transformHeader(te,Ne)),q.push(te)};if(K)if(Array.isArray(K.data[0])){for(var ye=0;_e()&&ye<K.data.length;ye++)K.data[ye].forEach(Q);K.data.splice(0,1)}else K.data.forEach(Q)}function ce(Q,te){for(var Ne=j.header?{}:[],je=0;je<Q.length;je++){var J=je,oe=Q[je],oe=((Ce,R)=>(Y=>(j.dynamicTypingFunction&&j.dynamicTyping[Y]===void 0&&(j.dynamicTyping[Y]=j.dynamicTypingFunction(Y)),(j.dynamicTyping[Y]||j.dynamicTyping)===!0))(Ce)?R==="true"||R==="TRUE"||R!=="false"&&R!=="FALSE"&&((Y=>{if(D.test(Y)&&(Y=parseFloat(Y),U<Y&&Y<L))return 1})(R)?parseFloat(R):H.test(R)?new Date(R):R===""?null:R):R)(J=j.header?je>=q.length?"__parsed_extra":q[je]:J,oe=j.transform?j.transform(oe,J):oe);J==="__parsed_extra"?(Ne[J]=Ne[J]||[],Ne[J].push(oe)):Ne[J]=oe}return j.header&&(je>q.length?pe("FieldMismatch","TooManyFields","Too many fields: expected "+q.length+" fields but parsed "+je,$+te):je<q.length&&pe("FieldMismatch","TooFewFields","Too few fields: expected "+q.length+" fields but parsed "+je,$+te)),Ne}var me;K&&(j.header||j.dynamicTyping||j.transform)&&(me=1,!K.data.length||Array.isArray(K.data[0])?(K.data=K.data.map(ce),me=K.data.length):K.data=ce(K.data,0),j.header&&K.meta&&(K.meta.fields=q),$+=me)}function _e(){return j.header&&q.length===0}function pe(ye,ce,me,Q){ye={type:ye,code:ce,message:me},Q!==void 0&&(ye.row=Q),K.errors.push(ye)}C(j.step)&&(T=j.step,j.step=function(ye){K=ye,_e()?ae():(ae(),K.data.length!==0&&(M+=ye.data.length,j.preview&&M>j.preview?A.abort():(K.data=K.data[0],T(K,B))))}),this.parse=function(ye,ce,me){var Q=j.quoteChar||'"',Q=(j.newline||(j.newline=this.guessLineEndings(ye,Q)),P=!1,j.delimiter?C(j.delimiter)&&(j.delimiter=j.delimiter(ye),K.meta.delimiter=j.delimiter):((Q=((te,Ne,je,J,oe)=>{var Ce,R,Y,Se;oe=oe||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var Re=0;Re<oe.length;Re++){for(var de,G=oe[Re],ue=0,he=0,Z=0,ge=(Y=void 0,new y({comments:J,delimiter:G,newline:Ne,preview:10}).parse(te)),Ie=0;Ie<ge.data.length;Ie++)je&&ne(ge.data[Ie])?Z++:(de=ge.data[Ie].length,he+=de,Y===void 0?Y=de:0<de&&(ue+=Math.abs(de-Y),Y=de));0<ge.data.length&&(he/=ge.data.length-Z),(R===void 0||ue<=R)&&(Se===void 0||Se<he)&&1.99<he&&(R=ue,Ce=G,Se=he)}return{successful:!!(j.delimiter=Ce),bestDelimiter:Ce}})(ye,j.newline,j.skipEmptyLines,j.comments,j.delimitersToGuess)).successful?j.delimiter=Q.bestDelimiter:(P=!0,j.delimiter=u.DefaultDelimiter),K.meta.delimiter=j.delimiter),S(j));return j.preview&&j.header&&Q.preview++,N=ye,A=new y(Q),K=A.parse(N,ce,me),ae(),re?{meta:{paused:!0}}:K||{meta:{paused:!1}}},this.paused=function(){return re},this.pause=function(){re=!0,A.abort(),N=C(j.chunk)?"":N.substring(A.getCharIndex())},this.resume=function(){B.streamer._halted?(re=!1,B.streamer.parseChunk(N,!0)):setTimeout(B.resume,3)},this.aborted=function(){return ie},this.abort=function(){ie=!0,A.abort(),K.meta.aborted=!0,C(j.complete)&&j.complete(K),N=""},this.guessLineEndings=function(te,Q){te=te.substring(0,1048576);var Q=new RegExp(b(Q)+"([^]*?)"+b(Q),"gm"),me=(te=te.replace(Q,"")).split("\r"),Q=te.split(`
`),te=1<Q.length&&Q[0].length<me[0].length;if(me.length===1||te)return`
`;for(var Ne=0,je=0;je<me.length;je++)me[je][0]===`
`&&Ne++;return Ne>=me.length/2?`\r
`:"\r"}}function b(j){return j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(j){var N=(j=j||{}).delimiter,A=j.newline,P=j.comments,T=j.step,L=j.preview,U=j.fastMode,D=null,H=!1,B=j.quoteChar==null?'"':j.quoteChar,M=B;if(j.escapeChar!==void 0&&(M=j.escapeChar),(typeof N!="string"||-1<u.BAD_DELIMITERS.indexOf(N))&&(N=","),P===N)throw new Error("Comment character same as delimiter");P===!0?P="#":(typeof P!="string"||-1<u.BAD_DELIMITERS.indexOf(P))&&(P=!1),A!==`
`&&A!=="\r"&&A!==`\r
`&&(A=`
`);var $=0,re=!1;this.parse=function(ie,q,K){if(typeof ie!="string")throw new Error("Input must be a string");var ne=ie.length,ae=N.length,_e=A.length,pe=P.length,ye=C(T),ce=[],me=[],Q=[],te=$=0;if(!ie)return ue();if(U||U!==!1&&ie.indexOf(B)===-1){for(var Ne=ie.split(A),je=0;je<Ne.length;je++){if(Q=Ne[je],$+=Q.length,je!==Ne.length-1)$+=A.length;else if(K)return ue();if(!P||Q.substring(0,pe)!==P){if(ye){if(ce=[],Se(Q.split(N)),he(),re)return ue()}else Se(Q.split(N));if(L&&L<=je)return ce=ce.slice(0,L),ue(!0)}}return ue()}for(var J=ie.indexOf(N,$),oe=ie.indexOf(A,$),Ce=new RegExp(b(M)+b(B),"g"),R=ie.indexOf(B,$);;)if(ie[$]===B)for(R=$,$++;;){if((R=ie.indexOf(B,R+1))===-1)return K||me.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ce.length,index:$}),de();if(R===ne-1)return de(ie.substring($,R).replace(Ce,B));if(B===M&&ie[R+1]===M)R++;else if(B===M||R===0||ie[R-1]!==M){J!==-1&&J<R+1&&(J=ie.indexOf(N,R+1));var Y=Re((oe=oe!==-1&&oe<R+1?ie.indexOf(A,R+1):oe)===-1?J:Math.min(J,oe));if(ie.substr(R+1+Y,ae)===N){Q.push(ie.substring($,R).replace(Ce,B)),ie[$=R+1+Y+ae]!==B&&(R=ie.indexOf(B,$)),J=ie.indexOf(N,$),oe=ie.indexOf(A,$);break}if(Y=Re(oe),ie.substring(R+1+Y,R+1+Y+_e)===A){if(Q.push(ie.substring($,R).replace(Ce,B)),G(R+1+Y+_e),J=ie.indexOf(N,$),R=ie.indexOf(B,$),ye&&(he(),re))return ue();if(L&&ce.length>=L)return ue(!0);break}me.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ce.length,index:$}),R++}}else if(P&&Q.length===0&&ie.substring($,$+pe)===P){if(oe===-1)return ue();$=oe+_e,oe=ie.indexOf(A,$),J=ie.indexOf(N,$)}else if(J!==-1&&(J<oe||oe===-1))Q.push(ie.substring($,J)),$=J+ae,J=ie.indexOf(N,$);else{if(oe===-1)break;if(Q.push(ie.substring($,oe)),G(oe+_e),ye&&(he(),re))return ue();if(L&&ce.length>=L)return ue(!0)}return de();function Se(Z){ce.push(Z),te=$}function Re(Z){var ge=0;return ge=Z!==-1&&(Z=ie.substring(R+1,Z))&&Z.trim()===""?Z.length:ge}function de(Z){return K||(Z===void 0&&(Z=ie.substring($)),Q.push(Z),$=ne,Se(Q),ye&&he()),ue()}function G(Z){$=Z,Se(Q),Q=[],oe=ie.indexOf(A,$)}function ue(Z){if(j.header&&!q&&ce.length&&!H){var ge=ce[0],Ie=Object.create(null),Ee=new Set(ge);let We=!1;for(let Oe=0;Oe<ge.length;Oe++){let Fe=ge[Oe];if(Ie[Fe=C(j.transformHeader)?j.transformHeader(Fe,Oe):Fe]){let rt,nt=Ie[Fe];for(;rt=Fe+"_"+nt,nt++,Ee.has(rt););Ee.add(rt),ge[Oe]=rt,Ie[Fe]++,We=!0,(D=D===null?{}:D)[rt]=Fe}else Ie[Fe]=1,ge[Oe]=Fe;Ee.add(Fe)}We&&console.warn("Duplicate headers found and renamed."),H=!0}return{data:ce,errors:me,meta:{delimiter:N,linebreak:A,aborted:re,truncated:!!Z,cursor:te+(q||0),renamedHeaders:D}}}function he(){T(ue()),ce=[],me=[]}},this.abort=function(){re=!0},this.getCharIndex=function(){return $}}function w(j){var N=j.data,A=l[N.workerId],P=!1;if(N.error)A.userError(N.error,N.file);else if(N.results&&N.results.data){var T={abort:function(){P=!0,x(N.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:_,resume:_};if(C(A.userStep)){for(var L=0;L<N.results.data.length&&(A.userStep({data:N.results.data[L],errors:N.results.errors,meta:N.results.meta},T),!P);L++);delete N.results}else C(A.userChunk)&&(A.userChunk(N.results,T,N.file),delete N.results)}N.finished&&!P&&x(N.workerId,N.results)}function x(j,N){var A=l[j];C(A.userComplete)&&A.userComplete(N),A.terminate(),delete l[j]}function _(){throw new Error("Not implemented.")}function S(j){if(typeof j!="object"||j===null)return j;var N,A=Array.isArray(j)?[]:{};for(N in j)A[N]=S(j[N]);return A}function k(j,N){return function(){j.apply(N,arguments)}}function C(j){return typeof j=="function"}return u.parse=function(j,N){var A=(N=N||{}).dynamicTyping||!1;if(C(A)&&(N.dynamicTypingFunction=A,A={}),N.dynamicTyping=A,N.transform=!!C(N.transform)&&N.transform,!N.worker||!u.WORKERS_SUPPORTED)return A=null,u.NODE_STREAM_INPUT,typeof j=="string"?(j=(P=>P.charCodeAt(0)!==65279?P:P.slice(1))(j),A=new(N.download?f:p)(N)):j.readable===!0&&C(j.read)&&C(j.on)?A=new v(N):(n.File&&j instanceof File||j instanceof Object)&&(A=new m(N)),A.stream(j);(A=(()=>{var P;return!!u.WORKERS_SUPPORTED&&(P=(()=>{var T=n.URL||n.webkitURL||null,L=r.toString();return u.BLOB_URL||(u.BLOB_URL=T.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",L,")();"],{type:"text/javascript"})))})(),(P=new n.Worker(P)).onmessage=w,P.id=c++,l[P.id]=P)})()).userStep=N.step,A.userChunk=N.chunk,A.userComplete=N.complete,A.userError=N.error,N.step=C(N.step),N.chunk=C(N.chunk),N.complete=C(N.complete),N.error=C(N.error),delete N.worker,A.postMessage({input:j,config:N,workerId:A.id})},u.unparse=function(j,N){var A=!1,P=!0,T=",",L=`\r
`,U='"',D=U+U,H=!1,B=null,M=!1,$=((()=>{if(typeof N=="object"){if(typeof N.delimiter!="string"||u.BAD_DELIMITERS.filter(function(q){return N.delimiter.indexOf(q)!==-1}).length||(T=N.delimiter),typeof N.quotes!="boolean"&&typeof N.quotes!="function"&&!Array.isArray(N.quotes)||(A=N.quotes),typeof N.skipEmptyLines!="boolean"&&typeof N.skipEmptyLines!="string"||(H=N.skipEmptyLines),typeof N.newline=="string"&&(L=N.newline),typeof N.quoteChar=="string"&&(U=N.quoteChar),typeof N.header=="boolean"&&(P=N.header),Array.isArray(N.columns)){if(N.columns.length===0)throw new Error("Option columns is empty");B=N.columns}N.escapeChar!==void 0&&(D=N.escapeChar+U),N.escapeFormulae instanceof RegExp?M=N.escapeFormulae:typeof N.escapeFormulae=="boolean"&&N.escapeFormulae&&(M=/^[=+\-@\t\r].*$/)}})(),new RegExp(b(U),"g"));if(typeof j=="string"&&(j=JSON.parse(j)),Array.isArray(j)){if(!j.length||Array.isArray(j[0]))return re(null,j,H);if(typeof j[0]=="object")return re(B||Object.keys(j[0]),j,H)}else if(typeof j=="object")return typeof j.data=="string"&&(j.data=JSON.parse(j.data)),Array.isArray(j.data)&&(j.fields||(j.fields=j.meta&&j.meta.fields||B),j.fields||(j.fields=Array.isArray(j.data[0])?j.fields:typeof j.data[0]=="object"?Object.keys(j.data[0]):[]),Array.isArray(j.data[0])||typeof j.data[0]=="object"||(j.data=[j.data])),re(j.fields||[],j.data||[],H);throw new Error("Unable to serialize unrecognized input");function re(q,K,ne){var ae="",_e=(typeof q=="string"&&(q=JSON.parse(q)),typeof K=="string"&&(K=JSON.parse(K)),Array.isArray(q)&&0<q.length),pe=!Array.isArray(K[0]);if(_e&&P){for(var ye=0;ye<q.length;ye++)0<ye&&(ae+=T),ae+=ie(q[ye],ye);0<K.length&&(ae+=L)}for(var ce=0;ce<K.length;ce++){var me=(_e?q:K[ce]).length,Q=!1,te=_e?Object.keys(K[ce]).length===0:K[ce].length===0;if(ne&&!_e&&(Q=ne==="greedy"?K[ce].join("").trim()==="":K[ce].length===1&&K[ce][0].length===0),ne==="greedy"&&_e){for(var Ne=[],je=0;je<me;je++){var J=pe?q[je]:je;Ne.push(K[ce][J])}Q=Ne.join("").trim()===""}if(!Q){for(var oe=0;oe<me;oe++){0<oe&&!te&&(ae+=T);var Ce=_e&&pe?q[oe]:oe;ae+=ie(K[ce][Ce],oe)}ce<K.length-1&&(!ne||0<me&&!te)&&(ae+=L)}}return ae}function ie(q,K){var ne,ae;return q==null?"":q.constructor===Date?JSON.stringify(q).slice(1,25):(ae=!1,M&&typeof q=="string"&&M.test(q)&&(q="'"+q,ae=!0),ne=q.toString().replace($,D),(ae=ae||A===!0||typeof A=="function"&&A(q,K)||Array.isArray(A)&&A[K]||((_e,pe)=>{for(var ye=0;ye<pe.length;ye++)if(-1<_e.indexOf(pe[ye]))return!0;return!1})(ne,u.BAD_DELIMITERS)||-1<ne.indexOf(T)||ne.charAt(0)===" "||ne.charAt(ne.length-1)===" ")?U+ne+U:ne)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!i&&!!n.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=y,u.ParserHandle=g,u.NetworkStreamer=f,u.FileStreamer=m,u.StringStreamer=p,u.ReadableStreamStreamer=v,n.jQuery&&((a=n.jQuery).fn.parse=function(j){var N=j.config||{},A=[];return this.each(function(L){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var U=0;U<this.files.length;U++)A.push({file:this.files[U],inputElem:this,instanceConfig:a.extend({},N)})}),P(),this;function P(){if(A.length===0)C(j.complete)&&j.complete();else{var L,U,D,H,B=A[0];if(C(j.before)){var M=j.before(B.file,B.inputElem);if(typeof M=="object"){if(M.action==="abort")return L="AbortError",U=B.file,D=B.inputElem,H=M.reason,void(C(j.error)&&j.error({name:L},U,D,H));if(M.action==="skip")return void T();typeof M.config=="object"&&(B.instanceConfig=a.extend(B.instanceConfig,M.config))}else if(M==="skip")return void T()}var $=B.instanceConfig.complete;B.instanceConfig.complete=function(re){C($)&&$(re,B.file,B.inputElem),T()},u.parse(B.file,B.instanceConfig)}}function T(){A.splice(0,1),P()}}),o&&(n.onmessage=function(j){j=j.data,u.WORKER_ID===void 0&&j&&(u.WORKER_ID=j.workerId),typeof j.input=="string"?n.postMessage({workerId:u.WORKER_ID,results:u.parse(j.input,j.config),finished:!0}):(n.File&&j.input instanceof File||j.input instanceof Object)&&(j=u.parse(j.input,j.config))&&n.postMessage({workerId:u.WORKER_ID,results:j,finished:!0})}),(f.prototype=Object.create(d.prototype)).constructor=f,(m.prototype=Object.create(d.prototype)).constructor=m,(p.prototype=Object.create(p.prototype)).constructor=p,(v.prototype=Object.create(d.prototype)).constructor=v,u})})(qL);var dne=qL.exports;const zL=dr(dne),fne=["username","fullname","name","bio","category","businesscategory","title","website"];function hne(e){return new Promise((t,r)=>{zL.parse(e,{header:!0,skipEmptyLines:!0,complete:n=>{const a=n.meta.fields||[];t({data:n.data,headers:a})},error:n=>r(n)})})}function mne(e,t){const r=t.map(a=>a.toLowerCase()),n=fne.filter(a=>r.includes(a));return n.length===0?Object.values(e).filter(a=>typeof a=="string").join(" ").toLowerCase():n.map(a=>{const i=t.find(o=>o.toLowerCase()===a);return i&&e[i]||""}).join(" ").toLowerCase()}function ST(e,t){return e.includes(t.toLowerCase())}function pne(e,t,r,n){const a=new Map,i=new Map,o=new Set;return{filtered:e.filter((c,u)=>{const d=mne(c,t),f=t.find(v=>v.toLowerCase()==="username");if(f){const v=(c[f]||"").toLowerCase();if(v&&o.has(v))return!1;v&&o.add(v)}const m=n.filter(v=>ST(d,v));if(m.length>0)return i.set(u,m),!1;if(r.length===0)return a.set(u,[]),!0;const p=r.filter(v=>ST(d,v));return p.length>0?(a.set(u,p),!0):!1}),matchedIncludes:a,matchedExcludes:i}}const gne=["id","profilepicurl","profilepicture","profilepic","avatar","avatarurl","openerError","matchedincludekeywords","matchedexcludekeywords"];function vne(e,t,r,n){const a={...e},i=t.find(o=>o.toLowerCase()==="username");return i&&e[i]&&(a.instagramUrl=`https://instagram.com/${e[i]}`),a.matchedIncludeKeywords=r.join(", "),a.matchedExcludeKeywords=n.join(", "),a}function WL(e){return e.filter(t=>!gne.includes(t.toLowerCase()))}function yne(e,t){const r={},n=WL(t);for(const a of n)e[a]!==void 0&&(r[a]=e[a]);return e.instagramUrl&&(r.instagramUrl=e.instagramUrl),r.opener=e.opener??"",r}function xne(e,t){const n=[...WL(t),"instagramUrl","opener"],a=e.map(i=>yne(i,t));return zL.unparse(a,{columns:n})}function bne(e,t){const r=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(r),a=document.createElement("a");a.href=n,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)}const HL="/assets/ACQ_new_logo-hxE1qkE6.png",wne=["id","profilepicurl","profilepicture","profilepic","avatar","avatarurl","matchedIncludeKeywords","matchedExcludeKeywords","openerError"];function _ne(){const{runId:e}=db(),t=Xt(),{user:r,loading:n}=Kt(),{portalRole:a,loading:i}=Qi(),{getRunWithData:o}=UL(),[l,c]=h.useState(null),[u,d]=h.useState(!0);h.useEffect(()=>{if(!(n||i)){if(!r){t("/auth");return}if(a==="client"){t("/portal/meetings",{replace:!0});return}e&&o(e).then(v=>{c(v),d(!1)})}},[e,r,n,i,a,t,o]);const f=()=>{if(!l)return;const v=xne(l.filteredData,l.originalHeaders);bne(v,`${l.name.toLowerCase().replace(/\s/g,"-")}.csv`)},m=()=>!l||l.filteredData.length===0?[]:Object.keys(l.filteredData[0]).filter(g=>!wne.includes(g.toLowerCase()));if(n||i||u)return s.jsx("div",{className:"min-h-screen bg-background",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsx($e,{className:"h-8 w-60 rounded-xl bg-white/[0.08]"}),s.jsx($e,{className:"h-9 w-32 rounded-xl bg-white/[0.08]"})]}),s.jsx($e,{className:"h-6 w-64 rounded-xl bg-white/[0.10]"}),s.jsx($e,{className:"h-4 w-80 rounded-xl bg-white/[0.06] mt-2"}),s.jsx("div",{className:"mt-8 space-y-2",children:Array.from({length:10}).map((v,g)=>s.jsx("div",{className:"border border-white/10 rounded-2xl p-4 bg-black",children:s.jsxs("div",{className:"flex items-center justify-between gap-6",children:[s.jsx($e,{className:"h-4 w-44 rounded-xl bg-white/[0.08]"}),s.jsx($e,{className:"h-4 w-64 rounded-xl bg-white/[0.06]"}),s.jsx($e,{className:"h-4 w-40 rounded-xl bg-white/[0.06]"})]})},g))})]})});if(!l)return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-muted-foreground mb-4",children:"Run not found"}),s.jsx(ze,{variant:"outline",onClick:()=>t("/"),children:"Go back"})]})});const p=m();return s.jsx("div",{className:"min-h-screen bg-background",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[s.jsxs("header",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>t("/"),className:"h-8 w-8 p-0",children:s.jsx(ho,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h1",{className:"tracking-tight font-sans text-lg font-normal",children:"FILTERLEAD"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"by"}),s.jsx("img",{src:HL,alt:"ACQ",className:"h-4"})]})]}),s.jsxs(ze,{variant:"outline",size:"sm",onClick:f,className:"gap-2",children:[s.jsx(lN,{className:"w-4 h-4"}),"Download CSV"]})]}),s.jsxs("div",{className:"mb-6 space-y-1",children:[s.jsx("h2",{className:"text-xl font-medium",children:l.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.matchingProfiles," matching from ",l.totalProfiles," total profiles"]}),l.includeKeywords.length>0&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Include: ",l.includeKeywords.join(", ")]}),l.excludeKeywords.length>0&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Exclude: ",l.excludeKeywords.join(", ")]}),l.generateOpeners&&s.jsx("p",{className:"text-xs text-muted-foreground",children:" Openers generated"})]}),s.jsx("div",{className:"border border-border rounded-lg overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(rg,{children:[s.jsx(ng,{children:s.jsxs(bo,{className:"bg-muted/50",children:[s.jsx(dn,{className:"w-12 text-center",children:"#"}),p.map(v=>s.jsx(dn,{className:"min-w-[120px]",children:v},v))]})}),s.jsx(ag,{children:l.filteredData.map((v,g)=>s.jsxs(bo,{className:"hover:bg-muted/30",children:[s.jsx(fn,{className:"text-center text-muted-foreground text-xs",children:g+1}),p.map(b=>s.jsx(fn,{className:"text-sm max-w-[300px] truncate",children:v[b]||"-"},b))]},g))})]})})}),l.filteredData.length===0&&s.jsx("div",{className:"text-center py-12 text-muted-foreground text-sm",children:"No data in this run"})]})})}var Sne=Array.isArray,ka=Sne,jne=typeof zh=="object"&&zh&&zh.Object===Object&&zh,VL=jne,kne=VL,Nne=typeof self=="object"&&self&&self.Object===Object&&self,Cne=kne||Nne||Function("return this")(),As=Cne,Ene=As,Ane=Ene.Symbol,ig=Ane,jT=ig,KL=Object.prototype,Pne=KL.hasOwnProperty,Tne=KL.toString,Nh=jT?jT.toStringTag:void 0;function One(e){var t=Pne.call(e,Nh),r=e[Nh];try{e[Nh]=void 0;var n=!0}catch{}var a=Tne.call(e);return n&&(t?e[Nh]=r:delete e[Nh]),a}var Ine=One,Mne=Object.prototype,Rne=Mne.toString;function $ne(e){return Rne.call(e)}var Dne=$ne,kT=ig,Lne=Ine,Fne=Dne,Bne="[object Null]",Une="[object Undefined]",NT=kT?kT.toStringTag:void 0;function qne(e){return e==null?e===void 0?Une:Bne:NT&&NT in Object(e)?Lne(e):Fne(e)}var No=qne;function zne(e){return e!=null&&typeof e=="object"}var Co=zne,Wne=No,Hne=Co,Vne="[object Symbol]";function Kne(e){return typeof e=="symbol"||Hne(e)&&Wne(e)==Vne}var Gf=Kne,Gne=ka,Yne=Gf,Xne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qne=/^\w*$/;function Jne(e,t){if(Gne(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Yne(e)?!0:Qne.test(e)||!Xne.test(e)||t!=null&&e in Object(t)}var zN=Jne;function Zne(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Bl=Zne;const Yf=dr(Bl);var eae=No,tae=Bl,rae="[object AsyncFunction]",nae="[object Function]",aae="[object GeneratorFunction]",iae="[object Proxy]";function sae(e){if(!tae(e))return!1;var t=eae(e);return t==nae||t==aae||t==rae||t==iae}var WN=sae;const Tt=dr(WN);var oae=As,lae=oae["__core-js_shared__"],cae=lae,R1=cae,CT=function(){var e=/[^.]+$/.exec(R1&&R1.keys&&R1.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function uae(e){return!!CT&&CT in e}var dae=uae,fae=Function.prototype,hae=fae.toString;function mae(e){if(e!=null){try{return hae.call(e)}catch{}try{return e+""}catch{}}return""}var GL=mae,pae=WN,gae=dae,vae=Bl,yae=GL,xae=/[\\^$.*+?()[\]{}|]/g,bae=/^\[object .+?Constructor\]$/,wae=Function.prototype,_ae=Object.prototype,Sae=wae.toString,jae=_ae.hasOwnProperty,kae=RegExp("^"+Sae.call(jae).replace(xae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Nae(e){if(!vae(e)||gae(e))return!1;var t=pae(e)?kae:bae;return t.test(yae(e))}var Cae=Nae;function Eae(e,t){return e==null?void 0:e[t]}var Aae=Eae,Pae=Cae,Tae=Aae;function Oae(e,t){var r=Tae(e,t);return Pae(r)?r:void 0}var cu=Oae,Iae=cu,Mae=Iae(Object,"create"),pb=Mae,ET=pb;function Rae(){this.__data__=ET?ET(null):{},this.size=0}var $ae=Rae;function Dae(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Lae=Dae,Fae=pb,Bae="__lodash_hash_undefined__",Uae=Object.prototype,qae=Uae.hasOwnProperty;function zae(e){var t=this.__data__;if(Fae){var r=t[e];return r===Bae?void 0:r}return qae.call(t,e)?t[e]:void 0}var Wae=zae,Hae=pb,Vae=Object.prototype,Kae=Vae.hasOwnProperty;function Gae(e){var t=this.__data__;return Hae?t[e]!==void 0:Kae.call(t,e)}var Yae=Gae,Xae=pb,Qae="__lodash_hash_undefined__";function Jae(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Xae&&t===void 0?Qae:t,this}var Zae=Jae,eie=$ae,tie=Lae,rie=Wae,nie=Yae,aie=Zae;function Xf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Xf.prototype.clear=eie;Xf.prototype.delete=tie;Xf.prototype.get=rie;Xf.prototype.has=nie;Xf.prototype.set=aie;var iie=Xf;function sie(){this.__data__=[],this.size=0}var oie=sie;function lie(e,t){return e===t||e!==e&&t!==t}var HN=lie,cie=HN;function uie(e,t){for(var r=e.length;r--;)if(cie(e[r][0],t))return r;return-1}var gb=uie,die=gb,fie=Array.prototype,hie=fie.splice;function mie(e){var t=this.__data__,r=die(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():hie.call(t,r,1),--this.size,!0}var pie=mie,gie=gb;function vie(e){var t=this.__data__,r=gie(t,e);return r<0?void 0:t[r][1]}var yie=vie,xie=gb;function bie(e){return xie(this.__data__,e)>-1}var wie=bie,_ie=gb;function Sie(e,t){var r=this.__data__,n=_ie(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var jie=Sie,kie=oie,Nie=pie,Cie=yie,Eie=wie,Aie=jie;function Qf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Qf.prototype.clear=kie;Qf.prototype.delete=Nie;Qf.prototype.get=Cie;Qf.prototype.has=Eie;Qf.prototype.set=Aie;var vb=Qf,Pie=cu,Tie=As,Oie=Pie(Tie,"Map"),VN=Oie,AT=iie,Iie=vb,Mie=VN;function Rie(){this.size=0,this.__data__={hash:new AT,map:new(Mie||Iie),string:new AT}}var $ie=Rie;function Die(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Lie=Die,Fie=Lie;function Bie(e,t){var r=e.__data__;return Fie(t)?r[typeof t=="string"?"string":"hash"]:r.map}var yb=Bie,Uie=yb;function qie(e){var t=Uie(this,e).delete(e);return this.size-=t?1:0,t}var zie=qie,Wie=yb;function Hie(e){return Wie(this,e).get(e)}var Vie=Hie,Kie=yb;function Gie(e){return Kie(this,e).has(e)}var Yie=Gie,Xie=yb;function Qie(e,t){var r=Xie(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Jie=Qie,Zie=$ie,ese=zie,tse=Vie,rse=Yie,nse=Jie;function Jf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Jf.prototype.clear=Zie;Jf.prototype.delete=ese;Jf.prototype.get=tse;Jf.prototype.has=rse;Jf.prototype.set=nse;var KN=Jf,YL=KN,ase="Expected a function";function GN(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(ase);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(GN.Cache||YL),r}GN.Cache=YL;var XL=GN;const ise=dr(XL);var sse=XL,ose=500;function lse(e){var t=sse(e,function(n){return r.size===ose&&r.clear(),n}),r=t.cache;return t}var cse=lse,use=cse,dse=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fse=/\\(\\)?/g,hse=use(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(dse,function(r,n,a,i){t.push(a?i.replace(fse,"$1"):n||r)}),t}),mse=hse;function pse(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var YN=pse,PT=ig,gse=YN,vse=ka,yse=Gf,xse=1/0,TT=PT?PT.prototype:void 0,OT=TT?TT.toString:void 0;function QL(e){if(typeof e=="string")return e;if(vse(e))return gse(e,QL)+"";if(yse(e))return OT?OT.call(e):"";var t=e+"";return t=="0"&&1/e==-xse?"-0":t}var bse=QL,wse=bse;function _se(e){return e==null?"":wse(e)}var JL=_se,Sse=ka,jse=zN,kse=mse,Nse=JL;function Cse(e,t){return Sse(e)?e:jse(e,t)?[e]:kse(Nse(e))}var ZL=Cse,Ese=Gf,Ase=1/0;function Pse(e){if(typeof e=="string"||Ese(e))return e;var t=e+"";return t=="0"&&1/e==-Ase?"-0":t}var xb=Pse,Tse=ZL,Ose=xb;function Ise(e,t){t=Tse(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Ose(t[r++])];return r&&r==n?e:void 0}var XN=Ise,Mse=XN;function Rse(e,t,r){var n=e==null?void 0:Mse(e,t);return n===void 0?r:n}var e6=Rse;const za=dr(e6);function $se(e){return e==null}var Dse=$se;const zt=dr(Dse);var Lse=No,Fse=ka,Bse=Co,Use="[object String]";function qse(e){return typeof e=="string"||!Fse(e)&&Bse(e)&&Lse(e)==Use}var zse=qse;const Gc=dr(zse);var t6={exports:{}},yr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QN=Symbol.for("react.element"),JN=Symbol.for("react.portal"),bb=Symbol.for("react.fragment"),wb=Symbol.for("react.strict_mode"),_b=Symbol.for("react.profiler"),Sb=Symbol.for("react.provider"),jb=Symbol.for("react.context"),Wse=Symbol.for("react.server_context"),kb=Symbol.for("react.forward_ref"),Nb=Symbol.for("react.suspense"),Cb=Symbol.for("react.suspense_list"),Eb=Symbol.for("react.memo"),Ab=Symbol.for("react.lazy"),Hse=Symbol.for("react.offscreen"),r6;r6=Symbol.for("react.module.reference");function _i(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case QN:switch(e=e.type,e){case bb:case _b:case wb:case Nb:case Cb:return e;default:switch(e=e&&e.$$typeof,e){case Wse:case jb:case kb:case Ab:case Eb:case Sb:return e;default:return t}}case JN:return t}}}yr.ContextConsumer=jb;yr.ContextProvider=Sb;yr.Element=QN;yr.ForwardRef=kb;yr.Fragment=bb;yr.Lazy=Ab;yr.Memo=Eb;yr.Portal=JN;yr.Profiler=_b;yr.StrictMode=wb;yr.Suspense=Nb;yr.SuspenseList=Cb;yr.isAsyncMode=function(){return!1};yr.isConcurrentMode=function(){return!1};yr.isContextConsumer=function(e){return _i(e)===jb};yr.isContextProvider=function(e){return _i(e)===Sb};yr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===QN};yr.isForwardRef=function(e){return _i(e)===kb};yr.isFragment=function(e){return _i(e)===bb};yr.isLazy=function(e){return _i(e)===Ab};yr.isMemo=function(e){return _i(e)===Eb};yr.isPortal=function(e){return _i(e)===JN};yr.isProfiler=function(e){return _i(e)===_b};yr.isStrictMode=function(e){return _i(e)===wb};yr.isSuspense=function(e){return _i(e)===Nb};yr.isSuspenseList=function(e){return _i(e)===Cb};yr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===bb||e===_b||e===wb||e===Nb||e===Cb||e===Hse||typeof e=="object"&&e!==null&&(e.$$typeof===Ab||e.$$typeof===Eb||e.$$typeof===Sb||e.$$typeof===jb||e.$$typeof===kb||e.$$typeof===r6||e.getModuleId!==void 0)};yr.typeOf=_i;t6.exports=yr;var Vse=t6.exports,Kse=No,Gse=Co,Yse="[object Number]";function Xse(e){return typeof e=="number"||Gse(e)&&Kse(e)==Yse}var n6=Xse;const Qse=dr(n6);var Jse=n6;function Zse(e){return Jse(e)&&e!=+e}var eoe=Zse;const Zf=dr(eoe);var ia=function(t){return t===0?0:t>0?1:-1},_c=function(t){return Gc(t)&&t.indexOf("%")===t.length-1},Ye=function(t){return Qse(t)&&!Zf(t)},toe=function(t){return zt(t)},Sn=function(t){return Ye(t)||Gc(t)},roe=0,eh=function(t){var r=++roe;return"".concat(t||"").concat(r)},sa=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ye(t)&&!Gc(t))return n;var i;if(_c(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Zf(i)&&(i=n),a&&i>r&&(i=r),i},al=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},noe=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},pa=function(t,r){return Ye(t)&&Ye(r)?function(n){return t+n*(r-t)}:function(){return r}};function i0(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):za(n,t))===r})}var aoe=function(t,r){return Ye(t)&&Ye(r)?t-r:Gc(t)&&Gc(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function _d(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function c2(e){"@babel/helpers - typeof";return c2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c2(e)}var ioe=["viewBox","children"],soe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],IT=["points","pathLength"],$1={svg:ioe,polygon:IT,polyline:IT},ZN=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],s0=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(h.isValidElement(t)&&(n=t.props),!Yf(n))return null;var a={};return Object.keys(n).forEach(function(i){ZN.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},ooe=function(t,r,n){return function(a){return t(r,n,a),null}},Yc=function(t,r,n){if(!Yf(t)||c2(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];ZN.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=ooe(o,r,n))}),a},loe=["children"],coe=["children"];function MT(e,t){if(e==null)return{};var r=uoe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function uoe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function u2(e){"@babel/helpers - typeof";return u2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u2(e)}var RT={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ao=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},$T=null,D1=null,eC=function e(t){if(t===$T&&Array.isArray(D1))return D1;var r=[];return h.Children.forEach(t,function(n){zt(n)||(Vse.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),D1=r,$T=t,r};function hi(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return ao(a)}):n=[ao(t)],eC(e).forEach(function(a){var i=za(a,"type.displayName")||za(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function Oa(e,t){var r=hi(e,t);return r&&r[0]}var DT=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!Ye(n)||n<=0||!Ye(a)||a<=0)},doe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],foe=function(t){return t&&t.type&&Gc(t.type)&&doe.indexOf(t.type)>=0},hoe=function(t){return t&&u2(t)==="object"&&"clipDot"in t},moe=function(t,r,n,a){var i,o=(i=$1==null?void 0:$1[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Tt(t)&&(a&&o.includes(r)||soe.includes(r))||n&&ZN.includes(r)},xt=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(h.isValidElement(t)&&(a=t.props),!Yf(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;moe((l=a)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=a[o])}),i},d2=function e(t,r){if(t===r)return!0;var n=h.Children.count(t);if(n!==h.Children.count(r))return!1;if(n===0)return!0;if(n===1)return LT(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!LT(i,o))return!1}return!0},LT=function(t,r){if(zt(t)&&zt(r))return!0;if(!zt(t)&&!zt(r)){var n=t.props||{},a=n.children,i=MT(n,loe),o=r.props||{},l=o.children,c=MT(o,coe);return a&&l?_d(i,c)&&d2(a,l):!a&&!l?_d(i,c):!1}return!1},FT=function(t,r){var n=[],a={};return eC(t).forEach(function(i,o){if(foe(i))n.push(i);else if(i){var l=ao(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(i,l,o);n.push(f),a[l]=!0}}}),n},poe=function(t){var r=t&&t.type;return r&&RT[r]?RT[r]:null},goe=function(t,r){return eC(r).indexOf(t)},voe=["children","width","height","viewBox","className","style","title","desc"];function f2(){return f2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f2.apply(this,arguments)}function yoe(e,t){if(e==null)return{};var r=xoe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function xoe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function h2(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=yoe(e,voe),d=a||{width:r,height:n,x:0,y:0},f=qt("recharts-surface",i);return V.createElement("svg",f2({},xt(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),V.createElement("title",null,l),V.createElement("desc",null,c),t)}var boe=["children","className"];function m2(){return m2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m2.apply(this,arguments)}function woe(e,t){if(e==null)return{};var r=_oe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _oe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var tr=V.forwardRef(function(e,t){var r=e.children,n=e.className,a=woe(e,boe),i=qt("recharts-layer",n);return V.createElement("g",m2({className:i},xt(a,!0),{ref:t}),r)}),zi=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function Soe(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var joe=Soe,koe=joe;function Noe(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:koe(e,t,r)}var Coe=Noe,Eoe="\\ud800-\\udfff",Aoe="\\u0300-\\u036f",Poe="\\ufe20-\\ufe2f",Toe="\\u20d0-\\u20ff",Ooe=Aoe+Poe+Toe,Ioe="\\ufe0e\\ufe0f",Moe="\\u200d",Roe=RegExp("["+Moe+Eoe+Ooe+Ioe+"]");function $oe(e){return Roe.test(e)}var a6=$oe;function Doe(e){return e.split("")}var Loe=Doe,i6="\\ud800-\\udfff",Foe="\\u0300-\\u036f",Boe="\\ufe20-\\ufe2f",Uoe="\\u20d0-\\u20ff",qoe=Foe+Boe+Uoe,zoe="\\ufe0e\\ufe0f",Woe="["+i6+"]",p2="["+qoe+"]",g2="\\ud83c[\\udffb-\\udfff]",Hoe="(?:"+p2+"|"+g2+")",s6="[^"+i6+"]",o6="(?:\\ud83c[\\udde6-\\uddff]){2}",l6="[\\ud800-\\udbff][\\udc00-\\udfff]",Voe="\\u200d",c6=Hoe+"?",u6="["+zoe+"]?",Koe="(?:"+Voe+"(?:"+[s6,o6,l6].join("|")+")"+u6+c6+")*",Goe=u6+c6+Koe,Yoe="(?:"+[s6+p2+"?",p2,o6,l6,Woe].join("|")+")",Xoe=RegExp(g2+"(?="+g2+")|"+Yoe+Goe,"g");function Qoe(e){return e.match(Xoe)||[]}var Joe=Qoe,Zoe=Loe,ele=a6,tle=Joe;function rle(e){return ele(e)?tle(e):Zoe(e)}var nle=rle,ale=Coe,ile=a6,sle=nle,ole=JL;function lle(e){return function(t){t=ole(t);var r=ile(t)?sle(t):void 0,n=r?r[0]:t.charAt(0),a=r?ale(r,1).join(""):t.slice(1);return n[e]()+a}}var cle=lle,ule=cle,dle=ule("toUpperCase"),fle=dle;const Pb=dr(fle);function kr(e){return function(){return e}}const d6=Math.cos,o0=Math.sin,Ji=Math.sqrt,l0=Math.PI,Tb=2*l0,v2=Math.PI,y2=2*v2,lc=1e-6,hle=y2-lc;function f6(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function mle(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return f6;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class ple{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?f6:mle(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,f=l-r,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>lc)if(!(Math.abs(f*c-u*d)>lc)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,v=a-l,g=c*c+u*u,b=p*p+v*v,y=Math.sqrt(g),w=Math.sqrt(m),x=i*Math.tan((v2-Math.acos((g+m-b)/(2*y*w)))/2),_=x/w,S=x/y;Math.abs(_-1)>lc&&this._append`L${t+_*d},${r+_*f}`,this._append`A${i},${i},0,0,${+(f*p>d*v)},${this._x1=t+S*c},${this._y1=r+S*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^o,m=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>lc||Math.abs(this._y1-d)>lc)&&this._append`L${u},${d}`,n&&(m<0&&(m=m%y2+y2),m>hle?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:m>lc&&this._append`A${n},${n},0,${+(m>=v2)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function tC(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new ple(t)}function rC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function h6(e){this._context=e}h6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ob(e){return new h6(e)}function m6(e){return e[0]}function p6(e){return e[1]}function g6(e,t){var r=kr(!0),n=null,a=Ob,i=null,o=tC(l);e=typeof e=="function"?e:e===void 0?m6:kr(e),t=typeof t=="function"?t:t===void 0?p6:kr(t);function l(c){var u,d=(c=rC(c)).length,f,m=!1,p;for(n==null&&(i=a(p=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(f,u,c),+t(f,u,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:kr(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:kr(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:kr(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function _v(e,t,r){var n=null,a=kr(!0),i=null,o=Ob,l=null,c=tC(u);e=typeof e=="function"?e:e===void 0?m6:kr(+e),t=typeof t=="function"?t:kr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?p6:kr(+r);function u(f){var m,p,v,g=(f=rC(f)).length,b,y=!1,w,x=new Array(g),_=new Array(g);for(i==null&&(l=o(w=c())),m=0;m<=g;++m){if(!(m<g&&a(b=f[m],m,f))===y)if(y=!y)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=m-1;v>=p;--v)l.point(x[v],_[v]);l.lineEnd(),l.areaEnd()}y&&(x[m]=+e(b,m,f),_[m]=+t(b,m,f),l.point(n?+n(b,m,f):x[m],r?+r(b,m,f):_[m]))}if(w)return l=null,w+""||null}function d(){return g6().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:kr(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:kr(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:kr(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:kr(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:kr(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:kr(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:kr(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class v6{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function gle(e){return new v6(e,!0)}function vle(e){return new v6(e,!1)}const nC={draw(e,t){const r=Ji(t/l0);e.moveTo(r,0),e.arc(0,0,r,0,Tb)}},yle={draw(e,t){const r=Ji(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},y6=Ji(1/3),xle=y6*2,ble={draw(e,t){const r=Ji(t/xle),n=r*y6;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},wle={draw(e,t){const r=Ji(t),n=-r/2;e.rect(n,n,r,r)}},_le=.8908130915292852,x6=o0(l0/10)/o0(7*l0/10),Sle=o0(Tb/10)*x6,jle=-d6(Tb/10)*x6,kle={draw(e,t){const r=Ji(t*_le),n=Sle*r,a=jle*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=Tb*i/5,l=d6(o),c=o0(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},L1=Ji(3),Nle={draw(e,t){const r=-Ji(t/(L1*3));e.moveTo(0,r*2),e.lineTo(-L1*r,-r),e.lineTo(L1*r,-r),e.closePath()}},Za=-.5,ei=Ji(3)/2,x2=1/Ji(12),Cle=(x2/2+1)*3,Ele={draw(e,t){const r=Ji(t/Cle),n=r/2,a=r*x2,i=n,o=r*x2+r,l=-i,c=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Za*n-ei*a,ei*n+Za*a),e.lineTo(Za*i-ei*o,ei*i+Za*o),e.lineTo(Za*l-ei*c,ei*l+Za*c),e.lineTo(Za*n+ei*a,Za*a-ei*n),e.lineTo(Za*i+ei*o,Za*o-ei*i),e.lineTo(Za*l+ei*c,Za*c-ei*l),e.closePath()}};function Ale(e,t){let r=null,n=tC(a);e=typeof e=="function"?e:kr(e||nC),t=typeof t=="function"?t:kr(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:kr(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:kr(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function c0(){}function u0(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function b6(e){this._context=e}b6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:u0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:u0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ple(e){return new b6(e)}function w6(e){this._context=e}w6.prototype={areaStart:c0,areaEnd:c0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:u0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Tle(e){return new w6(e)}function _6(e){this._context=e}_6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:u0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ole(e){return new _6(e)}function S6(e){this._context=e}S6.prototype={areaStart:c0,areaEnd:c0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Ile(e){return new S6(e)}function BT(e){return e<0?-1:1}function UT(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(BT(i)+BT(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function qT(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function F1(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,o-l*r,i,o)}function d0(e){this._context=e}d0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:F1(this,this._t0,qT(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,F1(this,qT(this,r=UT(this,e,t)),r);break;default:F1(this,this._t0,r=UT(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function j6(e){this._context=new k6(e)}(j6.prototype=Object.create(d0.prototype)).point=function(e,t){d0.prototype.point.call(this,t,e)};function k6(e){this._context=e}k6.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function Mle(e){return new d0(e)}function Rle(e){return new j6(e)}function N6(e){this._context=e}N6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=zT(e),a=zT(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function zT(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function $le(e){return new N6(e)}function Ib(e,t){this._context=e,this._t=t}Ib.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Dle(e){return new Ib(e,.5)}function Lle(e){return new Ib(e,0)}function Fle(e){return new Ib(e,1)}function Zd(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function b2(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Ble(e,t){return e[t]}function Ule(e){const t=[];return t.key=e,t}function qle(){var e=kr([]),t=b2,r=Zd,n=Ble;function a(i){var o=Array.from(e.apply(this,arguments),Ule),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=rC(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:kr(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:kr(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?b2:typeof i=="function"?i:kr(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Zd,a):r},a}function zle(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}Zd(e,t)}}function Wle(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Zd(e,t)}}function Hle(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,m=d[n-1][1]||0,p=(f-m)/2,v=0;v<l;++v){var g=e[t[v]],b=g[n][1]||0,y=g[n-1][1]||0;p+=b-y}c+=f,u+=p*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Zd(e,t)}}function ep(e){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(e)}var Vle=["type","size","sizeType"];function w2(){return w2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w2.apply(this,arguments)}function WT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function HT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WT(Object(r),!0).forEach(function(n){Kle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kle(e,t,r){return t=Gle(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gle(e){var t=Yle(e,"string");return ep(t)=="symbol"?t:t+""}function Yle(e,t){if(ep(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xle(e,t){if(e==null)return{};var r=Qle(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qle(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var C6={symbolCircle:nC,symbolCross:yle,symbolDiamond:ble,symbolSquare:wle,symbolStar:kle,symbolTriangle:Nle,symbolWye:Ele},Jle=Math.PI/180,Zle=function(t){var r="symbol".concat(Pb(t));return C6[r]||nC},ece=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*Jle;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},tce=function(t,r){C6["symbol".concat(Pb(t))]=r},aC=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=Xle(t,Vle),u=HT(HT({},c),{},{type:n,size:i,sizeType:l}),d=function(){var b=Zle(n),y=Ale().type(b).size(ece(i,l,n));return y()},f=u.className,m=u.cx,p=u.cy,v=xt(u,!0);return m===+m&&p===+p&&i===+i?V.createElement("path",w2({},v,{className:qt("recharts-symbols",f),transform:"translate(".concat(m,", ").concat(p,")"),d:d()})):null};aC.registerSymbol=tce;function ef(e){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(e)}function _2(){return _2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_2.apply(this,arguments)}function VT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rce(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VT(Object(r),!0).forEach(function(n){tp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ace(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A6(n.key),n)}}function ice(e,t,r){return t&&ace(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sce(e,t,r){return t=f0(t),oce(e,E6()?Reflect.construct(t,r||[],f0(e).constructor):t.apply(e,r))}function oce(e,t){if(t&&(ef(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lce(e)}function lce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E6=function(){return!!e})()}function f0(e){return f0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},f0(e)}function cce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S2(e,t)}function S2(e,t){return S2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},S2(e,t)}function tp(e,t,r){return t=A6(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A6(e){var t=uce(e,"string");return ef(t)=="symbol"?t:t+""}function uce(e,t){if(ef(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ti=32,iC=function(e){function t(){return nce(this,t),sce(this,t,arguments)}return cce(t,e),ice(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=ti/2,o=ti/6,l=ti/3,c=n.inactive?a:n.color;if(n.type==="plainline")return V.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:ti,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return V.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(ti,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return V.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ti/8,"h").concat(ti,"v").concat(ti*3/4,"h").concat(-ti,"z"),className:"recharts-legend-icon"});if(V.isValidElement(n.legendIcon)){var u=rce({},n);return delete u.legendIcon,V.cloneElement(n.legendIcon,u)}return V.createElement(aC,{fill:c,cx:i,cy:i,size:ti,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:ti,height:ti},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,v){var g=p.formatter||c,b=qt(tp(tp({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",p.inactive));if(p.type==="none")return null;var y=Tt(p.value)?null:p.value;zi(!Tt(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=p.inactive?u:p.color;return V.createElement("li",_2({className:b,style:f,key:"legend-item-".concat(v)},Yc(n.props,p,v)),V.createElement(h2,{width:o,height:o,viewBox:d,style:m},n.renderIcon(p)),V.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},g?g(y,p,v):y))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return V.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(h.PureComponent);tp(iC,"displayName","Legend");tp(iC,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var dce=vb;function fce(){this.__data__=new dce,this.size=0}var hce=fce;function mce(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var pce=mce;function gce(e){return this.__data__.get(e)}var vce=gce;function yce(e){return this.__data__.has(e)}var xce=yce,bce=vb,wce=VN,_ce=KN,Sce=200;function jce(e,t){var r=this.__data__;if(r instanceof bce){var n=r.__data__;if(!wce||n.length<Sce-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new _ce(n)}return r.set(e,t),this.size=r.size,this}var kce=jce,Nce=vb,Cce=hce,Ece=pce,Ace=vce,Pce=xce,Tce=kce;function th(e){var t=this.__data__=new Nce(e);this.size=t.size}th.prototype.clear=Cce;th.prototype.delete=Ece;th.prototype.get=Ace;th.prototype.has=Pce;th.prototype.set=Tce;var P6=th,Oce="__lodash_hash_undefined__";function Ice(e){return this.__data__.set(e,Oce),this}var Mce=Ice;function Rce(e){return this.__data__.has(e)}var $ce=Rce,Dce=KN,Lce=Mce,Fce=$ce;function h0(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Dce;++t<r;)this.add(e[t])}h0.prototype.add=h0.prototype.push=Lce;h0.prototype.has=Fce;var T6=h0;function Bce(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var O6=Bce;function Uce(e,t){return e.has(t)}var I6=Uce,qce=T6,zce=O6,Wce=I6,Hce=1,Vce=2;function Kce(e,t,r,n,a,i){var o=r&Hce,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,m=!0,p=r&Vce?new qce:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var v=e[f],g=t[f];if(n)var b=o?n(g,v,f,t,e,i):n(v,g,f,e,t,i);if(b!==void 0){if(b)continue;m=!1;break}if(p){if(!zce(t,function(y,w){if(!Wce(p,w)&&(v===y||a(v,y,r,n,i)))return p.push(w)})){m=!1;break}}else if(!(v===g||a(v,g,r,n,i))){m=!1;break}}return i.delete(e),i.delete(t),m}var M6=Kce,Gce=As,Yce=Gce.Uint8Array,Xce=Yce;function Qce(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var Jce=Qce;function Zce(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var sC=Zce,KT=ig,GT=Xce,eue=HN,tue=M6,rue=Jce,nue=sC,aue=1,iue=2,sue="[object Boolean]",oue="[object Date]",lue="[object Error]",cue="[object Map]",uue="[object Number]",due="[object RegExp]",fue="[object Set]",hue="[object String]",mue="[object Symbol]",pue="[object ArrayBuffer]",gue="[object DataView]",YT=KT?KT.prototype:void 0,B1=YT?YT.valueOf:void 0;function vue(e,t,r,n,a,i,o){switch(r){case gue:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case pue:return!(e.byteLength!=t.byteLength||!i(new GT(e),new GT(t)));case sue:case oue:case uue:return eue(+e,+t);case lue:return e.name==t.name&&e.message==t.message;case due:case hue:return e==t+"";case cue:var l=rue;case fue:var c=n&aue;if(l||(l=nue),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=iue,o.set(e,t);var d=tue(l(e),l(t),n,a,i,o);return o.delete(e),d;case mue:if(B1)return B1.call(e)==B1.call(t)}return!1}var yue=vue;function xue(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var R6=xue,bue=R6,wue=ka;function _ue(e,t,r){var n=t(e);return wue(e)?n:bue(n,r(e))}var Sue=_ue;function jue(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var kue=jue;function Nue(){return[]}var Cue=Nue,Eue=kue,Aue=Cue,Pue=Object.prototype,Tue=Pue.propertyIsEnumerable,XT=Object.getOwnPropertySymbols,Oue=XT?function(e){return e==null?[]:(e=Object(e),Eue(XT(e),function(t){return Tue.call(e,t)}))}:Aue,Iue=Oue;function Mue(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Rue=Mue,$ue=No,Due=Co,Lue="[object Arguments]";function Fue(e){return Due(e)&&$ue(e)==Lue}var Bue=Fue,QT=Bue,Uue=Co,$6=Object.prototype,que=$6.hasOwnProperty,zue=$6.propertyIsEnumerable,Wue=QT(function(){return arguments}())?QT:function(e){return Uue(e)&&que.call(e,"callee")&&!zue.call(e,"callee")},oC=Wue,m0={exports:{}};function Hue(){return!1}var Vue=Hue;m0.exports;(function(e,t){var r=As,n=Vue,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(m0,m0.exports);var D6=m0.exports,Kue=9007199254740991,Gue=/^(?:0|[1-9]\d*)$/;function Yue(e,t){var r=typeof e;return t=t??Kue,!!t&&(r=="number"||r!="symbol"&&Gue.test(e))&&e>-1&&e%1==0&&e<t}var lC=Yue,Xue=9007199254740991;function Que(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Xue}var cC=Que,Jue=No,Zue=cC,ede=Co,tde="[object Arguments]",rde="[object Array]",nde="[object Boolean]",ade="[object Date]",ide="[object Error]",sde="[object Function]",ode="[object Map]",lde="[object Number]",cde="[object Object]",ude="[object RegExp]",dde="[object Set]",fde="[object String]",hde="[object WeakMap]",mde="[object ArrayBuffer]",pde="[object DataView]",gde="[object Float32Array]",vde="[object Float64Array]",yde="[object Int8Array]",xde="[object Int16Array]",bde="[object Int32Array]",wde="[object Uint8Array]",_de="[object Uint8ClampedArray]",Sde="[object Uint16Array]",jde="[object Uint32Array]",Ir={};Ir[gde]=Ir[vde]=Ir[yde]=Ir[xde]=Ir[bde]=Ir[wde]=Ir[_de]=Ir[Sde]=Ir[jde]=!0;Ir[tde]=Ir[rde]=Ir[mde]=Ir[nde]=Ir[pde]=Ir[ade]=Ir[ide]=Ir[sde]=Ir[ode]=Ir[lde]=Ir[cde]=Ir[ude]=Ir[dde]=Ir[fde]=Ir[hde]=!1;function kde(e){return ede(e)&&Zue(e.length)&&!!Ir[Jue(e)]}var Nde=kde;function Cde(e){return function(t){return e(t)}}var L6=Cde,p0={exports:{}};p0.exports;(function(e,t){var r=VL,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(p0,p0.exports);var Ede=p0.exports,Ade=Nde,Pde=L6,JT=Ede,ZT=JT&&JT.isTypedArray,Tde=ZT?Pde(ZT):Ade,F6=Tde,Ode=Rue,Ide=oC,Mde=ka,Rde=D6,$de=lC,Dde=F6,Lde=Object.prototype,Fde=Lde.hasOwnProperty;function Bde(e,t){var r=Mde(e),n=!r&&Ide(e),a=!r&&!n&&Rde(e),i=!r&&!n&&!a&&Dde(e),o=r||n||a||i,l=o?Ode(e.length,String):[],c=l.length;for(var u in e)(t||Fde.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||$de(u,c)))&&l.push(u);return l}var Ude=Bde,qde=Object.prototype;function zde(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||qde;return e===r}var Wde=zde;function Hde(e,t){return function(r){return e(t(r))}}var B6=Hde,Vde=B6,Kde=Vde(Object.keys,Object),Gde=Kde,Yde=Wde,Xde=Gde,Qde=Object.prototype,Jde=Qde.hasOwnProperty;function Zde(e){if(!Yde(e))return Xde(e);var t=[];for(var r in Object(e))Jde.call(e,r)&&r!="constructor"&&t.push(r);return t}var efe=Zde,tfe=WN,rfe=cC;function nfe(e){return e!=null&&rfe(e.length)&&!tfe(e)}var sg=nfe,afe=Ude,ife=efe,sfe=sg;function ofe(e){return sfe(e)?afe(e):ife(e)}var Mb=ofe,lfe=Sue,cfe=Iue,ufe=Mb;function dfe(e){return lfe(e,ufe,cfe)}var ffe=dfe,eO=ffe,hfe=1,mfe=Object.prototype,pfe=mfe.hasOwnProperty;function gfe(e,t,r,n,a,i){var o=r&hfe,l=eO(e),c=l.length,u=eO(t),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var m=l[f];if(!(o?m in t:pfe.call(t,m)))return!1}var p=i.get(e),v=i.get(t);if(p&&v)return p==t&&v==e;var g=!0;i.set(e,t),i.set(t,e);for(var b=o;++f<c;){m=l[f];var y=e[m],w=t[m];if(n)var x=o?n(w,y,m,t,e,i):n(y,w,m,e,t,i);if(!(x===void 0?y===w||a(y,w,r,n,i):x)){g=!1;break}b||(b=m=="constructor")}if(g&&!b){var _=e.constructor,S=t.constructor;_!=S&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof S=="function"&&S instanceof S)&&(g=!1)}return i.delete(e),i.delete(t),g}var vfe=gfe,yfe=cu,xfe=As,bfe=yfe(xfe,"DataView"),wfe=bfe,_fe=cu,Sfe=As,jfe=_fe(Sfe,"Promise"),kfe=jfe,Nfe=cu,Cfe=As,Efe=Nfe(Cfe,"Set"),U6=Efe,Afe=cu,Pfe=As,Tfe=Afe(Pfe,"WeakMap"),Ofe=Tfe,j2=wfe,k2=VN,N2=kfe,C2=U6,E2=Ofe,q6=No,rh=GL,tO="[object Map]",Ife="[object Object]",rO="[object Promise]",nO="[object Set]",aO="[object WeakMap]",iO="[object DataView]",Mfe=rh(j2),Rfe=rh(k2),$fe=rh(N2),Dfe=rh(C2),Lfe=rh(E2),cc=q6;(j2&&cc(new j2(new ArrayBuffer(1)))!=iO||k2&&cc(new k2)!=tO||N2&&cc(N2.resolve())!=rO||C2&&cc(new C2)!=nO||E2&&cc(new E2)!=aO)&&(cc=function(e){var t=q6(e),r=t==Ife?e.constructor:void 0,n=r?rh(r):"";if(n)switch(n){case Mfe:return iO;case Rfe:return tO;case $fe:return rO;case Dfe:return nO;case Lfe:return aO}return t});var Ffe=cc,U1=P6,Bfe=M6,Ufe=yue,qfe=vfe,sO=Ffe,oO=ka,lO=D6,zfe=F6,Wfe=1,cO="[object Arguments]",uO="[object Array]",Sv="[object Object]",Hfe=Object.prototype,dO=Hfe.hasOwnProperty;function Vfe(e,t,r,n,a,i){var o=oO(e),l=oO(t),c=o?uO:sO(e),u=l?uO:sO(t);c=c==cO?Sv:c,u=u==cO?Sv:u;var d=c==Sv,f=u==Sv,m=c==u;if(m&&lO(e)){if(!lO(t))return!1;o=!0,d=!1}if(m&&!d)return i||(i=new U1),o||zfe(e)?Bfe(e,t,r,n,a,i):Ufe(e,t,c,r,n,a,i);if(!(r&Wfe)){var p=d&&dO.call(e,"__wrapped__"),v=f&&dO.call(t,"__wrapped__");if(p||v){var g=p?e.value():e,b=v?t.value():t;return i||(i=new U1),a(g,b,r,n,i)}}return m?(i||(i=new U1),qfe(e,t,r,n,a,i)):!1}var Kfe=Vfe,Gfe=Kfe,fO=Co;function z6(e,t,r,n,a){return e===t?!0:e==null||t==null||!fO(e)&&!fO(t)?e!==e&&t!==t:Gfe(e,t,r,n,z6,a)}var uC=z6,Yfe=P6,Xfe=uC,Qfe=1,Jfe=2;function Zfe(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new Yfe;if(n)var m=n(u,d,c,e,t,f);if(!(m===void 0?Xfe(d,u,Qfe|Jfe,n,f):m))return!1}}return!0}var ehe=Zfe,the=Bl;function rhe(e){return e===e&&!the(e)}var W6=rhe,nhe=W6,ahe=Mb;function ihe(e){for(var t=ahe(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,nhe(a)]}return t}var she=ihe;function ohe(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var H6=ohe,lhe=ehe,che=she,uhe=H6;function dhe(e){var t=che(e);return t.length==1&&t[0][2]?uhe(t[0][0],t[0][1]):function(r){return r===e||lhe(r,e,t)}}var fhe=dhe;function hhe(e,t){return e!=null&&t in Object(e)}var mhe=hhe,phe=ZL,ghe=oC,vhe=ka,yhe=lC,xhe=cC,bhe=xb;function whe(e,t,r){t=phe(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=bhe(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&xhe(a)&&yhe(o,a)&&(vhe(e)||ghe(e)))}var _he=whe,She=mhe,jhe=_he;function khe(e,t){return e!=null&&jhe(e,t,She)}var Nhe=khe,Che=uC,Ehe=e6,Ahe=Nhe,Phe=zN,The=W6,Ohe=H6,Ihe=xb,Mhe=1,Rhe=2;function $he(e,t){return Phe(e)&&The(t)?Ohe(Ihe(e),t):function(r){var n=Ehe(r,e);return n===void 0&&n===t?Ahe(r,e):Che(t,n,Mhe|Rhe)}}var Dhe=$he;function Lhe(e){return e}var nh=Lhe;function Fhe(e){return function(t){return t==null?void 0:t[e]}}var Bhe=Fhe,Uhe=XN;function qhe(e){return function(t){return Uhe(t,e)}}var zhe=qhe,Whe=Bhe,Hhe=zhe,Vhe=zN,Khe=xb;function Ghe(e){return Vhe(e)?Whe(Khe(e)):Hhe(e)}var Yhe=Ghe,Xhe=fhe,Qhe=Dhe,Jhe=nh,Zhe=ka,eme=Yhe;function tme(e){return typeof e=="function"?e:e==null?Jhe:typeof e=="object"?Zhe(e)?Qhe(e[0],e[1]):Xhe(e):eme(e)}var Ps=tme;function rme(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var V6=rme;function nme(e){return e!==e}var ame=nme;function ime(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var sme=ime,ome=V6,lme=ame,cme=sme;function ume(e,t,r){return t===t?cme(e,t,r):ome(e,lme,r)}var dme=ume,fme=dme;function hme(e,t){var r=e==null?0:e.length;return!!r&&fme(e,t,0)>-1}var mme=hme;function pme(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var gme=pme;function vme(){}var yme=vme,q1=U6,xme=yme,bme=sC,wme=1/0,_me=q1&&1/bme(new q1([,-0]))[1]==wme?function(e){return new q1(e)}:xme,Sme=_me,jme=T6,kme=mme,Nme=gme,Cme=I6,Eme=Sme,Ame=sC,Pme=200;function Tme(e,t,r){var n=-1,a=kme,i=e.length,o=!0,l=[],c=l;if(r)o=!1,a=Nme;else if(i>=Pme){var u=t?null:Eme(e);if(u)return Ame(u);o=!1,a=Cme,c=new jme}else c=t?[]:l;e:for(;++n<i;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var m=c.length;m--;)if(c[m]===f)continue e;t&&c.push(f),l.push(d)}else a(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var Ome=Tme,Ime=Ps,Mme=Ome;function Rme(e,t){return e&&e.length?Mme(e,Ime(t)):[]}var $me=Rme;const hO=dr($me);function K6(e,t,r){return t===!0?hO(e,r):Tt(t)?hO(e,t):e}function tf(e){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tf(e)}var Dme=["ref"];function mO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mO(Object(r),!0).forEach(function(n){Rb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y6(n.key),n)}}function Fme(e,t,r){return t&&pO(e.prototype,t),r&&pO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bme(e,t,r){return t=g0(t),Ume(e,G6()?Reflect.construct(t,r||[],g0(e).constructor):t.apply(e,r))}function Ume(e,t){if(t&&(tf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qme(e)}function qme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G6=function(){return!!e})()}function g0(e){return g0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},g0(e)}function zme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A2(e,t)}function A2(e,t){return A2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},A2(e,t)}function Rb(e,t,r){return t=Y6(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y6(e){var t=Wme(e,"string");return tf(t)=="symbol"?t:t+""}function Wme(e,t){if(tf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hme(e,t){if(e==null)return{};var r=Vme(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Vme(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Kme(e){return e.value}function Gme(e,t){if(V.isValidElement(e))return V.cloneElement(e,t);if(typeof e=="function")return V.createElement(e,t);t.ref;var r=Hme(t,Dme);return V.createElement(iC,r)}var gO=1,Sd=function(e){function t(){var r;Lme(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Bme(this,t,[].concat(a)),Rb(r,"lastBoundingBox",{width:-1,height:-1}),r}return zme(t,e),Fme(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>gO||Math.abs(a.height-this.lastBoundingBox.height)>gO)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Bs({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,m;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();m={top:((d||0)-v.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Bs(Bs({},f),m)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=Bs(Bs({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return V.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){n.wrapperNode=p}},Gme(i,Bs(Bs({},this.props),{},{payload:K6(d,u,Kme)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Bs(Bs({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&Ye(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(h.PureComponent);Rb(Sd,"displayName","Legend");Rb(Sd,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var vO=ig,Yme=oC,Xme=ka,yO=vO?vO.isConcatSpreadable:void 0;function Qme(e){return Xme(e)||Yme(e)||!!(yO&&e&&e[yO])}var Jme=Qme,Zme=R6,epe=Jme;function X6(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=epe),a||(a=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?X6(l,t-1,r,n,a):Zme(a,l):n||(a[a.length]=l)}return a}var Q6=X6;function tpe(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var rpe=tpe,npe=rpe,ape=npe(),ipe=ape,spe=ipe,ope=Mb;function lpe(e,t){return e&&spe(e,t,ope)}var J6=lpe,cpe=sg;function upe(e,t){return function(r,n){if(r==null)return r;if(!cpe(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var dpe=upe,fpe=J6,hpe=dpe,mpe=hpe(fpe),dC=mpe,ppe=dC,gpe=sg;function vpe(e,t){var r=-1,n=gpe(e)?Array(e.length):[];return ppe(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var Z6=vpe;function ype(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var xpe=ype,xO=Gf;function bpe(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=xO(e),o=t!==void 0,l=t===null,c=t===t,u=xO(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||l&&r&&a||!o&&a||!c)return-1}return 0}var wpe=bpe,_pe=wpe;function Spe(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,l=r.length;++n<o;){var c=_pe(a[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var jpe=Spe,z1=YN,kpe=XN,Npe=Ps,Cpe=Z6,Epe=xpe,Ape=L6,Ppe=jpe,Tpe=nh,Ope=ka;function Ipe(e,t,r){t.length?t=z1(t,function(i){return Ope(i)?function(o){return kpe(o,i.length===1?i[0]:i)}:i}):t=[Tpe];var n=-1;t=z1(t,Ape(Npe));var a=Cpe(e,function(i,o,l){var c=z1(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return Epe(a,function(i,o){return Ppe(i,o,r)})}var Mpe=Ipe;function Rpe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var $pe=Rpe,Dpe=$pe,bO=Math.max;function Lpe(e,t,r){return t=bO(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=bO(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(o),Dpe(e,this,l)}}var Fpe=Lpe;function Bpe(e){return function(){return e}}var Upe=Bpe,qpe=cu,zpe=function(){try{var e=qpe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),e8=zpe,Wpe=Upe,wO=e8,Hpe=nh,Vpe=wO?function(e,t){return wO(e,"toString",{configurable:!0,enumerable:!1,value:Wpe(t),writable:!0})}:Hpe,Kpe=Vpe,Gpe=800,Ype=16,Xpe=Date.now;function Qpe(e){var t=0,r=0;return function(){var n=Xpe(),a=Ype-(n-r);if(r=n,a>0){if(++t>=Gpe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Jpe=Qpe,Zpe=Kpe,ege=Jpe,tge=ege(Zpe),rge=tge,nge=nh,age=Fpe,ige=rge;function sge(e,t){return ige(age(e,t,nge),e+"")}var oge=sge,lge=HN,cge=sg,uge=lC,dge=Bl;function fge(e,t,r){if(!dge(r))return!1;var n=typeof t;return(n=="number"?cge(r)&&uge(t,r.length):n=="string"&&t in r)?lge(r[t],e):!1}var $b=fge,hge=Q6,mge=Mpe,pge=oge,_O=$b,gge=pge(function(e,t){if(e==null)return[];var r=t.length;return r>1&&_O(e,t[0],t[1])?t=[]:r>2&&_O(t[0],t[1],t[2])&&(t=[t[0]]),mge(e,hge(t,1),[])}),vge=gge;const fC=dr(vge);function rp(e){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rp(e)}function P2(){return P2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P2.apply(this,arguments)}function yge(e,t){return _ge(e)||wge(e,t)||bge(e,t)||xge()}function xge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bge(e,t){if(e){if(typeof e=="string")return SO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SO(e,t)}}function SO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wge(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function _ge(e){if(Array.isArray(e))return e}function jO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function W1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jO(Object(r),!0).forEach(function(n){Sge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sge(e,t,r){return t=jge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jge(e){var t=kge(e,"string");return rp(t)=="symbol"?t:t+""}function kge(e,t){if(rp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nge(e){return Array.isArray(e)&&Sn(e[0])&&Sn(e[1])?e.join(" ~ "):e}var Cge=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,m=t.itemSorter,p=t.wrapperClassName,v=t.labelClassName,g=t.label,b=t.labelFormatter,y=t.accessibilityLayer,w=y===void 0?!1:y,x=function(){if(d&&d.length){var T={padding:0,margin:0},L=(m?fC(d,m):d).map(function(U,D){if(U.type==="none")return null;var H=W1({display:"block",paddingTop:4,paddingBottom:4,color:U.color||"#000"},l),B=U.formatter||f||Nge,M=U.value,$=U.name,re=M,ie=$;if(B&&re!=null&&ie!=null){var q=B(M,$,U,D,d);if(Array.isArray(q)){var K=yge(q,2);re=K[0],ie=K[1]}else re=q}return V.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:H},Sn(ie)?V.createElement("span",{className:"recharts-tooltip-item-name"},ie):null,Sn(ie)?V.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,V.createElement("span",{className:"recharts-tooltip-item-value"},re),V.createElement("span",{className:"recharts-tooltip-item-unit"},U.unit||""))});return V.createElement("ul",{className:"recharts-tooltip-item-list",style:T},L)}return null},_=W1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),S=W1({margin:0},u),k=!zt(g),C=k?g:"",j=qt("recharts-default-tooltip",p),N=qt("recharts-tooltip-label",v);k&&b&&d!==void 0&&d!==null&&(C=b(g,d));var A=w?{role:"status","aria-live":"assertive"}:{};return V.createElement("div",P2({className:j,style:_},A),V.createElement("p",{className:N,style:S},V.isValidElement(C)?C:"".concat(C)),x())};function np(e){"@babel/helpers - typeof";return np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},np(e)}function jv(e,t,r){return t=Ege(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ege(e){var t=Age(e,"string");return np(t)=="symbol"?t:t+""}function Age(e,t){if(np(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ch="recharts-tooltip-wrapper",Pge={visibility:"hidden"};function Tge(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return qt(Ch,jv(jv(jv(jv({},"".concat(Ch,"-right"),Ye(r)&&t&&Ye(t.x)&&r>=t.x),"".concat(Ch,"-left"),Ye(r)&&t&&Ye(t.x)&&r<t.x),"".concat(Ch,"-bottom"),Ye(n)&&t&&Ye(t.y)&&n>=t.y),"".concat(Ch,"-top"),Ye(n)&&t&&Ye(t.y)&&n<t.y))}function kO(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&Ye(i[n]))return i[n];var d=r[n]-l-a,f=r[n]+a;if(t[n])return o[n]?d:f;if(o[n]){var m=d,p=c[n];return m<p?Math.max(f,c[n]):Math.max(d,c[n])}var v=f+l,g=c[n]+u;return v>g?Math.max(d,c[n]):Math.max(f,c[n])}function Oge(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Ige(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=kO({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=kO({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=Oge({translateX:d,translateY:f,useTranslate3d:l})):u=Pge,{cssProperties:u,cssClasses:Tge({translateX:d,translateY:f,coordinate:r})}}function rf(e){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(e)}function NO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function CO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NO(Object(r),!0).forEach(function(n){O2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r8(n.key),n)}}function $ge(e,t,r){return t&&Rge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dge(e,t,r){return t=v0(t),Lge(e,t8()?Reflect.construct(t,r||[],v0(e).constructor):t.apply(e,r))}function Lge(e,t){if(t&&(rf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fge(e)}function Fge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t8=function(){return!!e})()}function v0(e){return v0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v0(e)}function Bge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T2(e,t)}function T2(e,t){return T2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},T2(e,t)}function O2(e,t,r){return t=r8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r8(e){var t=Uge(e,"string");return rf(t)=="symbol"?t:t+""}function Uge(e,t){if(rf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EO=1,qge=function(e){function t(){var r;Mge(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Dge(this,t,[].concat(a)),O2(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),O2(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return Bge(t,e),$ge(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>EO||Math.abs(n.height-this.state.lastBoundingBox.height)>EO)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,m=a.isAnimationActive,p=a.offset,v=a.position,g=a.reverseDirection,b=a.useTranslate3d,y=a.viewBox,w=a.wrapperStyle,x=Ige({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:p,position:v,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:y}),_=x.cssClasses,S=x.cssProperties,k=CO(CO({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},w);return V.createElement("div",{tabIndex:-1,className:_,style:k,ref:function(j){n.wrapperNode=j}},u)}}])}(h.PureComponent),zge=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ys={isSsr:zge(),get:function(t){return ys[t]},set:function(t,r){if(typeof t=="string")ys[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(a){ys[a]=t[a]})}}};function nf(e){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(e)}function AO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AO(Object(r),!0).forEach(function(n){hC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a8(n.key),n)}}function Vge(e,t,r){return t&&Hge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kge(e,t,r){return t=y0(t),Gge(e,n8()?Reflect.construct(t,r||[],y0(e).constructor):t.apply(e,r))}function Gge(e,t){if(t&&(nf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yge(e)}function Yge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n8=function(){return!!e})()}function y0(e){return y0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},y0(e)}function Xge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I2(e,t)}function I2(e,t){return I2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},I2(e,t)}function hC(e,t,r){return t=a8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a8(e){var t=Qge(e,"string");return nf(t)=="symbol"?t:t+""}function Qge(e,t){if(nf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jge(e){return e.dataKey}function Zge(e,t){return V.isValidElement(e)?V.cloneElement(e,t):typeof e=="function"?V.createElement(e,t):V.createElement(Cge,t)}var Ma=function(e){function t(){return Wge(this,t),Kge(this,t,arguments)}return Xge(t,e),Vge(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,m=a.isAnimationActive,p=a.offset,v=a.payload,g=a.payloadUniqBy,b=a.position,y=a.reverseDirection,w=a.useTranslate3d,x=a.viewBox,_=a.wrapperStyle,S=v??[];f&&S.length&&(S=K6(v.filter(function(C){return C.value!=null&&(C.hide!==!0||n.props.includeHidden)}),g,Jge));var k=S.length>0;return V.createElement(qge,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:d,hasPayload:k,offset:p,position:b,reverseDirection:y,useTranslate3d:w,viewBox:x,wrapperStyle:_},Zge(u,PO(PO({},this.props),{},{payload:S})))}}])}(h.PureComponent);hC(Ma,"displayName","Tooltip");hC(Ma,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ys.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var eve=As,tve=function(){return eve.Date.now()},rve=tve,nve=/\s/;function ave(e){for(var t=e.length;t--&&nve.test(e.charAt(t)););return t}var ive=ave,sve=ive,ove=/^\s+/;function lve(e){return e&&e.slice(0,sve(e)+1).replace(ove,"")}var cve=lve,uve=cve,TO=Bl,dve=Gf,OO=NaN,fve=/^[-+]0x[0-9a-f]+$/i,hve=/^0b[01]+$/i,mve=/^0o[0-7]+$/i,pve=parseInt;function gve(e){if(typeof e=="number")return e;if(dve(e))return OO;if(TO(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=TO(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=uve(e);var r=hve.test(e);return r||mve.test(e)?pve(e.slice(2),r?2:8):fve.test(e)?OO:+e}var i8=gve,vve=Bl,H1=rve,IO=i8,yve="Expected a function",xve=Math.max,bve=Math.min;function wve(e,t,r){var n,a,i,o,l,c,u=0,d=!1,f=!1,m=!0;if(typeof e!="function")throw new TypeError(yve);t=IO(t)||0,vve(r)&&(d=!!r.leading,f="maxWait"in r,i=f?xve(IO(r.maxWait)||0,t):i,m="trailing"in r?!!r.trailing:m);function p(k){var C=n,j=a;return n=a=void 0,u=k,o=e.apply(j,C),o}function v(k){return u=k,l=setTimeout(y,t),d?p(k):o}function g(k){var C=k-c,j=k-u,N=t-C;return f?bve(N,i-j):N}function b(k){var C=k-c,j=k-u;return c===void 0||C>=t||C<0||f&&j>=i}function y(){var k=H1();if(b(k))return w(k);l=setTimeout(y,g(k))}function w(k){return l=void 0,m&&n?p(k):(n=a=void 0,o)}function x(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function _(){return l===void 0?o:w(H1())}function S(){var k=H1(),C=b(k);if(n=arguments,a=this,c=k,C){if(l===void 0)return v(c);if(f)return clearTimeout(l),l=setTimeout(y,t),p(c)}return l===void 0&&(l=setTimeout(y,t)),o}return S.cancel=x,S.flush=_,S}var _ve=wve,Sve=_ve,jve=Bl,kve="Expected a function";function Nve(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(kve);return jve(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),Sve(e,t,{leading:n,maxWait:t,trailing:a})}var Cve=Nve;const s8=dr(Cve);function ap(e){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ap(e)}function MO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MO(Object(r),!0).forEach(function(n){Eve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eve(e,t,r){return t=Ave(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ave(e){var t=Pve(e,"string");return ap(t)=="symbol"?t:t+""}function Pve(e,t){if(ap(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tve(e,t){return Rve(e)||Mve(e,t)||Ive(e,t)||Ove()}function Ove(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ive(e,t){if(e){if(typeof e=="string")return RO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RO(e,t)}}function RO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mve(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Rve(e){if(Array.isArray(e))return e}var yy=h.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,m=e.maxHeight,p=e.children,v=e.debounce,g=v===void 0?0:v,b=e.id,y=e.className,w=e.onResize,x=e.style,_=x===void 0?{}:x,S=h.useRef(null),k=h.useRef();k.current=w,h.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var C=h.useState({containerWidth:a.width,containerHeight:a.height}),j=Tve(C,2),N=j[0],A=j[1],P=h.useCallback(function(L,U){A(function(D){var H=Math.round(L),B=Math.round(U);return D.containerWidth===H&&D.containerHeight===B?D:{containerWidth:H,containerHeight:B}})},[]);h.useEffect(function(){var L=function($){var re,ie=$[0].contentRect,q=ie.width,K=ie.height;P(q,K),(re=k.current)===null||re===void 0||re.call(k,q,K)};g>0&&(L=s8(L,g,{trailing:!0,leading:!1}));var U=new ResizeObserver(L),D=S.current.getBoundingClientRect(),H=D.width,B=D.height;return P(H,B),U.observe(S.current),function(){U.disconnect()}},[P,g]);var T=h.useMemo(function(){var L=N.containerWidth,U=N.containerHeight;if(L<0||U<0)return null;zi(_c(o)||_c(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),zi(!r||r>0,"The aspect(%s) must be greater than zero.",r);var D=_c(o)?L:o,H=_c(c)?U:c;r&&r>0&&(D?H=D/r:H&&(D=H*r),m&&H>m&&(H=m)),zi(D>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,H,o,c,d,f,r);var B=!Array.isArray(p)&&ao(p.type).endsWith("Chart");return V.Children.map(p,function(M){return V.isValidElement(M)?h.cloneElement(M,kv({width:D,height:H},B?{style:kv({height:"100%",width:"100%",maxHeight:H,maxWidth:D},M.props.style)}:{})):M})},[r,p,c,m,f,d,N,o]);return V.createElement("div",{id:b?"".concat(b):void 0,className:qt("recharts-responsive-container",y),style:kv(kv({},_),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:m}),ref:S},T)}),Db=function(t){return null};Db.displayName="Cell";function ip(e){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ip(e)}function $O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function M2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$O(Object(r),!0).forEach(function(n){$ve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$O(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $ve(e,t,r){return t=Dve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dve(e){var t=Lve(e,"string");return ip(t)=="symbol"?t:t+""}function Lve(e,t){if(ip(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Au={widthCache:{},cacheCount:0},Fve=2e3,Bve={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},DO="recharts_measurement_span";function Uve(e){var t=M2({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var mm=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ys.isSsr)return{width:0,height:0};var n=Uve(r),a=JSON.stringify({text:t,copyStyle:n});if(Au.widthCache[a])return Au.widthCache[a];try{var i=document.getElementById(DO);i||(i=document.createElement("span"),i.setAttribute("id",DO),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=M2(M2({},Bve),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Au.widthCache[a]=c,++Au.cacheCount>Fve&&(Au.cacheCount=0,Au.widthCache={}),c}catch{return{width:0,height:0}}},qve=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function sp(e){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sp(e)}function x0(e,t){return Vve(e)||Hve(e,t)||Wve(e,t)||zve()}function zve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wve(e,t){if(e){if(typeof e=="string")return LO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LO(e,t)}}function LO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Hve(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Vve(e){if(Array.isArray(e))return e}function Kve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yve(n.key),n)}}function Gve(e,t,r){return t&&FO(e.prototype,t),r&&FO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yve(e){var t=Xve(e,"string");return sp(t)=="symbol"?t:t+""}function Xve(e,t){if(sp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var BO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,UO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Qve=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Jve=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,o8={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Zve=Object.keys(o8),od="NaN";function eye(e,t){return e*o8[t]}var Nv=function(){function e(t,r){Kve(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Qve.test(r)&&(this.num=NaN,this.unit=""),Zve.includes(r)&&(this.num=eye(t,r),this.unit="px")}return Gve(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Jve.exec(r))!==null&&n!==void 0?n:[],i=x0(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function l8(e){if(e.includes(od))return od;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=BO.exec(t))!==null&&r!==void 0?r:[],a=x0(n,4),i=a[1],o=a[2],l=a[3],c=Nv.parse(i??""),u=Nv.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return od;t=t.replace(BO,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,m=(f=UO.exec(t))!==null&&f!==void 0?f:[],p=x0(m,4),v=p[1],g=p[2],b=p[3],y=Nv.parse(v??""),w=Nv.parse(b??""),x=g==="+"?y.add(w):y.subtract(w);if(x.isNaN())return od;t=t.replace(UO,x.toString())}return t}var qO=/\(([^()]*)\)/;function tye(e){for(var t=e;t.includes("(");){var r=qO.exec(t),n=x0(r,2),a=n[1];t=t.replace(qO,l8(a))}return t}function rye(e){var t=e.replace(/\s+/g,"");return t=tye(t),t=l8(t),t}function nye(e){try{return rye(e)}catch{return od}}function V1(e){var t=nye(e.slice(5,-1));return t===od?"":t}var aye=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],iye=["dx","dy","angle","className","breakAll"];function R2(){return R2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R2.apply(this,arguments)}function zO(e,t){if(e==null)return{};var r=sye(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function sye(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function WO(e,t){return uye(e)||cye(e,t)||lye(e,t)||oye()}function oye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lye(e,t){if(e){if(typeof e=="string")return HO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HO(e,t)}}function HO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function uye(e){if(Array.isArray(e))return e}var c8=/[ \f\n\r\t\v\u2028\u2029]+/,u8=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];zt(r)||(n?i=r.toString().split(""):i=r.toString().split(c8));var o=i.map(function(c){return{word:c,width:mm(c,a).width}}),l=n?0:mm("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},dye=function(t,r,n,a,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=Ye(o),f=l,m=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce(function(H,B){var M=B.word,$=B.width,re=H[H.length-1];if(re&&(a==null||i||re.width+$+n<Number(a)))re.words.push(M),re.width+=$+n;else{var ie={words:[M],width:$};H.push(ie)}return H},[])},p=m(r),v=function(D){return D.reduce(function(H,B){return H.width>B.width?H:B})};if(!d)return p;for(var g="",b=function(D){var H=f.slice(0,D),B=u8({breakAll:u,style:c,children:H+g}).wordsWithComputedWidth,M=m(B),$=M.length>o||v(M).width>Number(a);return[$,M]},y=0,w=f.length-1,x=0,_;y<=w&&x<=f.length-1;){var S=Math.floor((y+w)/2),k=S-1,C=b(k),j=WO(C,2),N=j[0],A=j[1],P=b(S),T=WO(P,1),L=T[0];if(!N&&!L&&(y=S+1),N&&L&&(w=S-1),!N&&L){_=A;break}x++}return _||p},VO=function(t){var r=zt(t)?[]:t.toString().split(c8);return[{words:r}]},fye=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!ys.isSsr){var c,u,d=u8({breakAll:o,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,m=d.spaceWidth;c=f,u=m}else return VO(a);return dye({breakAll:o,children:a,maxLines:l,style:i},c,u,r,n)}return VO(a)},KO="#808080",Xc=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,m=t.textAnchor,p=m===void 0?"start":m,v=t.verticalAnchor,g=v===void 0?"end":v,b=t.fill,y=b===void 0?KO:b,w=zO(t,aye),x=h.useMemo(function(){return fye({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:f,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,f,w.style,w.width]),_=w.dx,S=w.dy,k=w.angle,C=w.className,j=w.breakAll,N=zO(w,iye);if(!Sn(n)||!Sn(i))return null;var A=n+(Ye(_)?_:0),P=i+(Ye(S)?S:0),T;switch(g){case"start":T=V1("calc(".concat(u,")"));break;case"middle":T=V1("calc(".concat((x.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:T=V1("calc(".concat(x.length-1," * -").concat(l,")"));break}var L=[];if(f){var U=x[0].width,D=w.width;L.push("scale(".concat((Ye(D)?D/U:1)/U,")"))}return k&&L.push("rotate(".concat(k,", ").concat(A,", ").concat(P,")")),L.length&&(N.transform=L.join(" ")),V.createElement("text",R2({},xt(N,!0),{x:A,y:P,className:qt("recharts-text",C),textAnchor:p,fill:y.includes("url")?KO:y}),x.map(function(H,B){var M=H.words.join(j?"":" ");return V.createElement("tspan",{x:A,dy:B===0?T:l,key:"".concat(M,"-").concat(B)},M)}))};function Nl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function hye(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function mC(e){let t,r,n;e.length!==2?(t=Nl,r=(l,c)=>Nl(e(l),c),n=(l,c)=>e(l)-c):(t=e===Nl||e===hye?e:mye,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:i}}function mye(){return 0}function d8(e){return e===null?NaN:+e}function*pye(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const gye=mC(Nl),og=gye.right;mC(d8).center;class GO extends Map{constructor(t,r=xye){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(YO(this,t))}has(t){return super.has(YO(this,t))}set(t,r){return super.set(vye(this,t),r)}delete(t){return super.delete(yye(this,t))}}function YO({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function vye({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function yye({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function xye(e){return e!==null&&typeof e=="object"?e.valueOf():e}function bye(e=Nl){if(e===Nl)return f8;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function f8(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const wye=Math.sqrt(50),_ye=Math.sqrt(10),Sye=Math.sqrt(2);function b0(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=wye?10:i>=_ye?5:i>=Sye?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?b0(e,t,r*2):[l,c,u]}function $2(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?b0(t,e,r):b0(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function D2(e,t,r){return t=+t,e=+e,r=+r,b0(e,t,r)[2]}function L2(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?D2(t,e,r):D2(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function XO(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function QO(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function h8(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?f8:bye(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/c+m)),v=Math.min(n,Math.floor(t+(c-u)*f/c+m));h8(e,t,p,v,a)}const i=e[t];let o=r,l=n;for(Eh(e,r,t),a(e[n],i)>0&&Eh(e,r,n);o<l;){for(Eh(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?Eh(e,r,l):(++l,Eh(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Eh(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function jye(e,t,r){if(e=Float64Array.from(pye(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return QO(e);if(t>=1)return XO(e);var n,a=(n-1)*t,i=Math.floor(a),o=XO(h8(e,i).subarray(0,i+1)),l=QO(e.subarray(i+1));return o+(l-o)*(a-i)}}function kye(e,t,r=d8){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function Nye(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function Si(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Eo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const F2=Symbol("implicit");function pC(){var e=new GO,t=[],r=[],n=F2;function a(i){let o=e.get(i);if(o===void 0){if(n!==F2)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new GO;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return pC(t,r).unknown(n)},Si.apply(a,arguments),a}function op(){var e=pC().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var m=t().length,p=a<n,v=p?a:n,g=p?n:a;i=(g-v)/Math.max(1,m-c+u*2),l&&(i=Math.floor(i)),v+=(g-v-i*(m-c))*d,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var b=Nye(m).map(function(y){return v+i*y});return r(p?b.reverse():b)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([n,a]=m,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(m){return[n,a]=m,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,f()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),f()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),f()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,f()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},e.copy=function(){return op(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Si.apply(f(),arguments)}function m8(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return m8(t())},e}function pm(){return m8(op.apply(null,arguments).paddingInner(1))}function gC(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function p8(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function lg(){}var lp=.7,w0=1/lp,jd="\\s*([+-]?\\d+)\\s*",cp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cye=/^#([0-9a-f]{3,8})$/,Eye=new RegExp(`^rgb\\(${jd},${jd},${jd}\\)$`),Aye=new RegExp(`^rgb\\(${xs},${xs},${xs}\\)$`),Pye=new RegExp(`^rgba\\(${jd},${jd},${jd},${cp}\\)$`),Tye=new RegExp(`^rgba\\(${xs},${xs},${xs},${cp}\\)$`),Oye=new RegExp(`^hsl\\(${cp},${xs},${xs}\\)$`),Iye=new RegExp(`^hsla\\(${cp},${xs},${xs},${cp}\\)$`),JO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gC(lg,up,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ZO,formatHex:ZO,formatHex8:Mye,formatHsl:Rye,formatRgb:e5,toString:e5});function ZO(){return this.rgb().formatHex()}function Mye(){return this.rgb().formatHex8()}function Rye(){return g8(this).formatHsl()}function e5(){return this.rgb().formatRgb()}function up(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Cye.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?t5(t):r===3?new xa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Cv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Cv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Eye.exec(e))?new xa(t[1],t[2],t[3],1):(t=Aye.exec(e))?new xa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Pye.exec(e))?Cv(t[1],t[2],t[3],t[4]):(t=Tye.exec(e))?Cv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Oye.exec(e))?a5(t[1],t[2]/100,t[3]/100,1):(t=Iye.exec(e))?a5(t[1],t[2]/100,t[3]/100,t[4]):JO.hasOwnProperty(e)?t5(JO[e]):e==="transparent"?new xa(NaN,NaN,NaN,0):null}function t5(e){return new xa(e>>16&255,e>>8&255,e&255,1)}function Cv(e,t,r,n){return n<=0&&(e=t=r=NaN),new xa(e,t,r,n)}function $ye(e){return e instanceof lg||(e=up(e)),e?(e=e.rgb(),new xa(e.r,e.g,e.b,e.opacity)):new xa}function B2(e,t,r,n){return arguments.length===1?$ye(e):new xa(e,t,r,n??1)}function xa(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}gC(xa,B2,p8(lg,{brighter(e){return e=e==null?w0:Math.pow(w0,e),new xa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?lp:Math.pow(lp,e),new xa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new xa(Rc(this.r),Rc(this.g),Rc(this.b),_0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:r5,formatHex:r5,formatHex8:Dye,formatRgb:n5,toString:n5}));function r5(){return`#${Sc(this.r)}${Sc(this.g)}${Sc(this.b)}`}function Dye(){return`#${Sc(this.r)}${Sc(this.g)}${Sc(this.b)}${Sc((isNaN(this.opacity)?1:this.opacity)*255)}`}function n5(){const e=_0(this.opacity);return`${e===1?"rgb(":"rgba("}${Rc(this.r)}, ${Rc(this.g)}, ${Rc(this.b)}${e===1?")":`, ${e})`}`}function _0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Rc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Sc(e){return e=Rc(e),(e<16?"0":"")+e.toString(16)}function a5(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Fi(e,t,r,n)}function g8(e){if(e instanceof Fi)return new Fi(e.h,e.s,e.l,e.opacity);if(e instanceof lg||(e=up(e)),!e)return new Fi;if(e instanceof Fi)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new Fi(o,l,c,e.opacity)}function Lye(e,t,r,n){return arguments.length===1?g8(e):new Fi(e,t,r,n??1)}function Fi(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}gC(Fi,Lye,p8(lg,{brighter(e){return e=e==null?w0:Math.pow(w0,e),new Fi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?lp:Math.pow(lp,e),new Fi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new xa(K1(e>=240?e-240:e+120,a,n),K1(e,a,n),K1(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Fi(i5(this.h),Ev(this.s),Ev(this.l),_0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_0(this.opacity);return`${e===1?"hsl(":"hsla("}${i5(this.h)}, ${Ev(this.s)*100}%, ${Ev(this.l)*100}%${e===1?")":`, ${e})`}`}}));function i5(e){return e=(e||0)%360,e<0?e+360:e}function Ev(e){return Math.max(0,Math.min(1,e||0))}function K1(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const vC=e=>()=>e;function Fye(e,t){return function(r){return e+r*t}}function Bye(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Uye(e){return(e=+e)==1?v8:function(t,r){return r-t?Bye(t,r,e):vC(isNaN(t)?r:t)}}function v8(e,t){var r=t-e;return r?Fye(e,r):vC(isNaN(e)?t:e)}const s5=function e(t){var r=Uye(t);function n(a,i){var o=r((a=B2(a)).r,(i=B2(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=v8(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function qye(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function zye(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Wye(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=ah(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function Hye(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function S0(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Vye(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=ah(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var U2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,G1=new RegExp(U2.source,"g");function Kye(e){return function(){return e}}function Gye(e){return function(t){return e(t)+""}}function Yye(e,t){var r=U2.lastIndex=G1.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=U2.exec(e))&&(a=G1.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:S0(n,a)})),r=G1.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?Gye(c[0].x):Kye(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function ah(e,t){var r=typeof t,n;return t==null||r==="boolean"?vC(t):(r==="number"?S0:r==="string"?(n=up(t))?(t=n,s5):Yye:t instanceof up?s5:t instanceof Date?Hye:zye(t)?qye:Array.isArray(t)?Wye:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Vye:S0)(e,t)}function yC(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Xye(e,t){t===void 0&&(t=e,e=ah);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function Qye(e){return function(){return e}}function j0(e){return+e}var o5=[0,1];function oa(e){return e}function q2(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Qye(isNaN(t)?NaN:.5)}function Jye(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Zye(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=q2(a,n),i=r(o,i)):(n=q2(n,a),i=r(i,o)),function(l){return i(n(l))}}function e0e(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=q2(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=og(e,l,1,n)-1;return i[c](a[c](l))}}function cg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Lb(){var e=o5,t=o5,r=ah,n,a,i,o=oa,l,c,u;function d(){var m=Math.min(e.length,t.length);return o!==oa&&(o=Jye(e[0],e[m-1])),l=m>2?e0e:Zye,c=u=null,f}function f(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(n),t,r)))(n(o(m)))}return f.invert=function(m){return o(a((u||(u=l(t,e.map(n),S0)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,j0),d()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),r=yC,d()},f.clamp=function(m){return arguments.length?(o=m?!0:oa,d()):o!==oa},f.interpolate=function(m){return arguments.length?(r=m,d()):r},f.unknown=function(m){return arguments.length?(i=m,f):i},function(m,p){return n=m,a=p,d()}}function xC(){return Lb()(oa,oa)}function t0e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function k0(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function af(e){return e=k0(Math.abs(e)),e?e[1]:NaN}function r0e(e,t){return function(r,n){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function n0e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var a0e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dp(e){if(!(t=a0e.exec(e)))throw new Error("invalid format: "+e);var t;return new bC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}dp.prototype=bC.prototype;function bC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}bC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function i0e(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var y8;function s0e(e,t){var r=k0(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(y8=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+k0(e,Math.max(0,t+i-1))[0]}function l5(e,t){var r=k0(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const c5={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:t0e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>l5(e*100,t),r:l5,s:s0e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function u5(e){return e}var d5=Array.prototype.map,f5=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function o0e(e){var t=e.grouping===void 0||e.thousands===void 0?u5:r0e(d5.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?u5:n0e(d5.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=dp(f);var m=f.fill,p=f.align,v=f.sign,g=f.symbol,b=f.zero,y=f.width,w=f.comma,x=f.precision,_=f.trim,S=f.type;S==="n"?(w=!0,S="g"):c5[S]||(x===void 0&&(x=12),_=!0,S="g"),(b||m==="0"&&p==="=")&&(b=!0,m="0",p="=");var k=g==="$"?r:g==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",C=g==="$"?n:/[%p]/.test(S)?o:"",j=c5[S],N=/[defgprs%]/.test(S);x=x===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function A(P){var T=k,L=C,U,D,H;if(S==="c")L=j(P)+L,P="";else{P=+P;var B=P<0||1/P<0;if(P=isNaN(P)?c:j(Math.abs(P),x),_&&(P=i0e(P)),B&&+P==0&&v!=="+"&&(B=!1),T=(B?v==="("?v:l:v==="-"||v==="("?"":v)+T,L=(S==="s"?f5[8+y8/3]:"")+L+(B&&v==="("?")":""),N){for(U=-1,D=P.length;++U<D;)if(H=P.charCodeAt(U),48>H||H>57){L=(H===46?a+P.slice(U+1):P.slice(U))+L,P=P.slice(0,U);break}}}w&&!b&&(P=t(P,1/0));var M=T.length+P.length+L.length,$=M<y?new Array(y-M+1).join(m):"";switch(w&&b&&(P=t($+P,$.length?y-L.length:1/0),$=""),p){case"<":P=T+P+L+$;break;case"=":P=T+$+P+L;break;case"^":P=$.slice(0,M=$.length>>1)+T+P+L+$.slice(M);break;default:P=$+T+P+L;break}return i(P)}return A.toString=function(){return f+""},A}function d(f,m){var p=u((f=dp(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(af(m)/3)))*3,g=Math.pow(10,-v),b=f5[8+v/3];return function(y){return p(g*y)+b}}return{format:u,formatPrefix:d}}var Av,wC,x8;l0e({thousands:",",grouping:[3],currency:["$",""]});function l0e(e){return Av=o0e(e),wC=Av.format,x8=Av.formatPrefix,Av}function c0e(e){return Math.max(0,-af(Math.abs(e)))}function u0e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(af(t)/3)))*3-af(Math.abs(e)))}function d0e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,af(t)-af(e))+1}function b8(e,t,r,n){var a=L2(e,t,r),i;switch(n=dp(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=u0e(a,o))&&(n.precision=i),x8(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=d0e(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=c0e(a))&&(n.precision=i-(n.type==="%")*2);break}}return wC(n)}function Ul(e){var t=e.domain;return e.ticks=function(r){var n=t();return $2(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return b8(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=D2(o,l,r),u===c)return n[a]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function N0(){var e=xC();return e.copy=function(){return cg(e,N0())},Si.apply(e,arguments),Ul(e)}function w8(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,j0),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return w8(e).unknown(t)},e=arguments.length?Array.from(e,j0):[0,1],Ul(r)}function _8(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function h5(e){return Math.log(e)}function m5(e){return Math.exp(e)}function f0e(e){return-Math.log(-e)}function h0e(e){return-Math.exp(-e)}function m0e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function p0e(e){return e===10?m0e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function g0e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function p5(e){return(t,r)=>-e(-t,r)}function _C(e){const t=e(h5,m5),r=t.domain;let n=10,a,i;function o(){return a=g0e(n),i=p0e(n),r()[0]<0?(a=p5(a),i=p5(i),e(f0e,h0e)):e(h5,m5),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let m=a(u),p=a(d),v,g;const b=l==null?10:+l;let y=[];if(!(n%1)&&p-m<b){if(m=Math.floor(m),p=Math.ceil(p),u>0){for(;m<=p;++m)for(v=1;v<n;++v)if(g=m<0?v/i(-m):v*i(m),!(g<u)){if(g>d)break;y.push(g)}}else for(;m<=p;++m)for(v=n-1;v>=1;--v)if(g=m>0?v/i(-m):v*i(m),!(g<u)){if(g>d)break;y.push(g)}y.length*2<b&&(y=$2(u,d,b))}else y=$2(m,p,Math.min(p-m,b)).map(i);return f?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=dp(c)).precision==null&&(c.trim=!0),c=wC(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(_8(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function S8(){const e=_C(Lb()).domain([1,10]);return e.copy=()=>cg(e,S8()).base(e.base()),Si.apply(e,arguments),e}function g5(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function v5(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function SC(e){var t=1,r=e(g5(t),v5(t));return r.constant=function(n){return arguments.length?e(g5(t=+n),v5(t)):t},Ul(r)}function j8(){var e=SC(Lb());return e.copy=function(){return cg(e,j8()).constant(e.constant())},Si.apply(e,arguments)}function y5(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function v0e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function y0e(e){return e<0?-e*e:e*e}function jC(e){var t=e(oa,oa),r=1;function n(){return r===1?e(oa,oa):r===.5?e(v0e,y0e):e(y5(r),y5(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Ul(t)}function kC(){var e=jC(Lb());return e.copy=function(){return cg(e,kC()).exponent(e.exponent())},Si.apply(e,arguments),e}function x0e(){return kC.apply(null,arguments).exponent(.5)}function x5(e){return Math.sign(e)*e*e}function b0e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function k8(){var e=xC(),t=[0,1],r=!1,n;function a(i){var o=b0e(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(x5(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,j0)).map(x5)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return k8(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Si.apply(a,arguments),Ul(a)}function N8(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=kye(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[og(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Nl),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return N8().domain(e).range(t).unknown(n)},Si.apply(i,arguments)}function C8(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[og(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return C8().domain([e,t]).range(a).unknown(i)},Si.apply(Ul(o),arguments)}function E8(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[og(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return E8().domain(e).range(t).unknown(r)},Si.apply(a,arguments)}const Y1=new Date,X1=new Date;function kn(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>kn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(Y1.setTime(+i),X1.setTime(+o),e(Y1),e(X1),Math.floor(r(Y1,X1))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const C0=kn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);C0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?kn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):C0);C0.range;const Zs=1e3,ui=Zs*60,eo=ui*60,wo=eo*24,NC=wo*7,b5=wo*30,Q1=wo*365,jc=kn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Zs)},(e,t)=>(t-e)/Zs,e=>e.getUTCSeconds());jc.range;const CC=kn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zs)},(e,t)=>{e.setTime(+e+t*ui)},(e,t)=>(t-e)/ui,e=>e.getMinutes());CC.range;const EC=kn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ui)},(e,t)=>(t-e)/ui,e=>e.getUTCMinutes());EC.range;const AC=kn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zs-e.getMinutes()*ui)},(e,t)=>{e.setTime(+e+t*eo)},(e,t)=>(t-e)/eo,e=>e.getHours());AC.range;const PC=kn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*eo)},(e,t)=>(t-e)/eo,e=>e.getUTCHours());PC.range;const ug=kn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ui)/wo,e=>e.getDate()-1);ug.range;const Fb=kn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wo,e=>e.getUTCDate()-1);Fb.range;const A8=kn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wo,e=>Math.floor(e/wo));A8.range;function uu(e){return kn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ui)/NC)}const Bb=uu(0),E0=uu(1),w0e=uu(2),_0e=uu(3),sf=uu(4),S0e=uu(5),j0e=uu(6);Bb.range;E0.range;w0e.range;_0e.range;sf.range;S0e.range;j0e.range;function du(e){return kn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/NC)}const Ub=du(0),A0=du(1),k0e=du(2),N0e=du(3),of=du(4),C0e=du(5),E0e=du(6);Ub.range;A0.range;k0e.range;N0e.range;of.range;C0e.range;E0e.range;const TC=kn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());TC.range;const OC=kn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());OC.range;const _o=kn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());_o.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:kn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});_o.range;const So=kn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());So.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:kn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});So.range;function P8(e,t,r,n,a,i){const o=[[jc,1,Zs],[jc,5,5*Zs],[jc,15,15*Zs],[jc,30,30*Zs],[i,1,ui],[i,5,5*ui],[i,15,15*ui],[i,30,30*ui],[a,1,eo],[a,3,3*eo],[a,6,6*eo],[a,12,12*eo],[n,1,wo],[n,2,2*wo],[r,1,NC],[t,1,b5],[t,3,3*b5],[e,1,Q1]];function l(u,d,f){const m=d<u;m&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),v=p?p.range(u,+d+1):[];return m?v.reverse():v}function c(u,d,f){const m=Math.abs(d-u)/f,p=mC(([,,b])=>b).right(o,m);if(p===o.length)return e.every(L2(u/Q1,d/Q1,f));if(p===0)return C0.every(Math.max(L2(u,d,f),1));const[v,g]=o[m/o[p-1][2]<o[p][2]/m?p-1:p];return v.every(g)}return[l,c]}const[A0e,P0e]=P8(So,OC,Ub,A8,PC,EC),[T0e,O0e]=P8(_o,TC,Bb,ug,AC,CC);function J1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Z1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ah(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function I0e(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Ph(a),d=Th(a),f=Ph(i),m=Th(i),p=Ph(o),v=Th(o),g=Ph(l),b=Th(l),y=Ph(c),w=Th(c),x={a:B,A:M,b:$,B:re,c:null,d:N5,e:N5,f:rxe,g:fxe,G:mxe,H:Z0e,I:exe,j:txe,L:T8,m:nxe,M:axe,p:ie,q,Q:A5,s:P5,S:ixe,u:sxe,U:oxe,V:lxe,w:cxe,W:uxe,x:null,X:null,y:dxe,Y:hxe,Z:pxe,"%":E5},_={a:K,A:ne,b:ae,B:_e,c:null,d:C5,e:C5,f:xxe,g:Axe,G:Txe,H:gxe,I:vxe,j:yxe,L:I8,m:bxe,M:wxe,p:pe,q:ye,Q:A5,s:P5,S:_xe,u:Sxe,U:jxe,V:kxe,w:Nxe,W:Cxe,x:null,X:null,y:Exe,Y:Pxe,Z:Oxe,"%":E5},S={a:A,A:P,b:T,B:L,c:U,d:j5,e:j5,f:Y0e,g:S5,G:_5,H:k5,I:k5,j:H0e,L:G0e,m:W0e,M:V0e,p:N,q:z0e,Q:Q0e,s:J0e,S:K0e,u:L0e,U:F0e,V:B0e,w:D0e,W:U0e,x:D,X:H,y:S5,Y:_5,Z:q0e,"%":X0e};x.x=k(r,x),x.X=k(n,x),x.c=k(t,x),_.x=k(r,_),_.X=k(n,_),_.c=k(t,_);function k(ce,me){return function(Q){var te=[],Ne=-1,je=0,J=ce.length,oe,Ce,R;for(Q instanceof Date||(Q=new Date(+Q));++Ne<J;)ce.charCodeAt(Ne)===37&&(te.push(ce.slice(je,Ne)),(Ce=w5[oe=ce.charAt(++Ne)])!=null?oe=ce.charAt(++Ne):Ce=oe==="e"?" ":"0",(R=me[oe])&&(oe=R(Q,Ce)),te.push(oe),je=Ne+1);return te.push(ce.slice(je,Ne)),te.join("")}}function C(ce,me){return function(Q){var te=Ah(1900,void 0,1),Ne=j(te,ce,Q+="",0),je,J;if(Ne!=Q.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(me&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(je=Z1(Ah(te.y,0,1)),J=je.getUTCDay(),je=J>4||J===0?A0.ceil(je):A0(je),je=Fb.offset(je,(te.V-1)*7),te.y=je.getUTCFullYear(),te.m=je.getUTCMonth(),te.d=je.getUTCDate()+(te.w+6)%7):(je=J1(Ah(te.y,0,1)),J=je.getDay(),je=J>4||J===0?E0.ceil(je):E0(je),je=ug.offset(je,(te.V-1)*7),te.y=je.getFullYear(),te.m=je.getMonth(),te.d=je.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),J="Z"in te?Z1(Ah(te.y,0,1)).getUTCDay():J1(Ah(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(J+5)%7:te.w+te.U*7-(J+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,Z1(te)):J1(te)}}function j(ce,me,Q,te){for(var Ne=0,je=me.length,J=Q.length,oe,Ce;Ne<je;){if(te>=J)return-1;if(oe=me.charCodeAt(Ne++),oe===37){if(oe=me.charAt(Ne++),Ce=S[oe in w5?me.charAt(Ne++):oe],!Ce||(te=Ce(ce,Q,te))<0)return-1}else if(oe!=Q.charCodeAt(te++))return-1}return te}function N(ce,me,Q){var te=u.exec(me.slice(Q));return te?(ce.p=d.get(te[0].toLowerCase()),Q+te[0].length):-1}function A(ce,me,Q){var te=p.exec(me.slice(Q));return te?(ce.w=v.get(te[0].toLowerCase()),Q+te[0].length):-1}function P(ce,me,Q){var te=f.exec(me.slice(Q));return te?(ce.w=m.get(te[0].toLowerCase()),Q+te[0].length):-1}function T(ce,me,Q){var te=y.exec(me.slice(Q));return te?(ce.m=w.get(te[0].toLowerCase()),Q+te[0].length):-1}function L(ce,me,Q){var te=g.exec(me.slice(Q));return te?(ce.m=b.get(te[0].toLowerCase()),Q+te[0].length):-1}function U(ce,me,Q){return j(ce,t,me,Q)}function D(ce,me,Q){return j(ce,r,me,Q)}function H(ce,me,Q){return j(ce,n,me,Q)}function B(ce){return o[ce.getDay()]}function M(ce){return i[ce.getDay()]}function $(ce){return c[ce.getMonth()]}function re(ce){return l[ce.getMonth()]}function ie(ce){return a[+(ce.getHours()>=12)]}function q(ce){return 1+~~(ce.getMonth()/3)}function K(ce){return o[ce.getUTCDay()]}function ne(ce){return i[ce.getUTCDay()]}function ae(ce){return c[ce.getUTCMonth()]}function _e(ce){return l[ce.getUTCMonth()]}function pe(ce){return a[+(ce.getUTCHours()>=12)]}function ye(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var me=k(ce+="",x);return me.toString=function(){return ce},me},parse:function(ce){var me=C(ce+="",!1);return me.toString=function(){return ce},me},utcFormat:function(ce){var me=k(ce+="",_);return me.toString=function(){return ce},me},utcParse:function(ce){var me=C(ce+="",!0);return me.toString=function(){return ce},me}}}var w5={"-":"",_:" ",0:"0"},In=/^\s*\d+/,M0e=/^%/,R0e=/[\\^$*+?|[\]().{}]/g;function cr(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function $0e(e){return e.replace(R0e,"\\$&")}function Ph(e){return new RegExp("^(?:"+e.map($0e).join("|")+")","i")}function Th(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function D0e(e,t,r){var n=In.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function L0e(e,t,r){var n=In.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function F0e(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function B0e(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function U0e(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function _5(e,t,r){var n=In.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function S5(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function q0e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function z0e(e,t,r){var n=In.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function W0e(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function j5(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function H0e(e,t,r){var n=In.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function k5(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function V0e(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function K0e(e,t,r){var n=In.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function G0e(e,t,r){var n=In.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Y0e(e,t,r){var n=In.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function X0e(e,t,r){var n=M0e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Q0e(e,t,r){var n=In.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function J0e(e,t,r){var n=In.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function N5(e,t){return cr(e.getDate(),t,2)}function Z0e(e,t){return cr(e.getHours(),t,2)}function exe(e,t){return cr(e.getHours()%12||12,t,2)}function txe(e,t){return cr(1+ug.count(_o(e),e),t,3)}function T8(e,t){return cr(e.getMilliseconds(),t,3)}function rxe(e,t){return T8(e,t)+"000"}function nxe(e,t){return cr(e.getMonth()+1,t,2)}function axe(e,t){return cr(e.getMinutes(),t,2)}function ixe(e,t){return cr(e.getSeconds(),t,2)}function sxe(e){var t=e.getDay();return t===0?7:t}function oxe(e,t){return cr(Bb.count(_o(e)-1,e),t,2)}function O8(e){var t=e.getDay();return t>=4||t===0?sf(e):sf.ceil(e)}function lxe(e,t){return e=O8(e),cr(sf.count(_o(e),e)+(_o(e).getDay()===4),t,2)}function cxe(e){return e.getDay()}function uxe(e,t){return cr(E0.count(_o(e)-1,e),t,2)}function dxe(e,t){return cr(e.getFullYear()%100,t,2)}function fxe(e,t){return e=O8(e),cr(e.getFullYear()%100,t,2)}function hxe(e,t){return cr(e.getFullYear()%1e4,t,4)}function mxe(e,t){var r=e.getDay();return e=r>=4||r===0?sf(e):sf.ceil(e),cr(e.getFullYear()%1e4,t,4)}function pxe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+cr(t/60|0,"0",2)+cr(t%60,"0",2)}function C5(e,t){return cr(e.getUTCDate(),t,2)}function gxe(e,t){return cr(e.getUTCHours(),t,2)}function vxe(e,t){return cr(e.getUTCHours()%12||12,t,2)}function yxe(e,t){return cr(1+Fb.count(So(e),e),t,3)}function I8(e,t){return cr(e.getUTCMilliseconds(),t,3)}function xxe(e,t){return I8(e,t)+"000"}function bxe(e,t){return cr(e.getUTCMonth()+1,t,2)}function wxe(e,t){return cr(e.getUTCMinutes(),t,2)}function _xe(e,t){return cr(e.getUTCSeconds(),t,2)}function Sxe(e){var t=e.getUTCDay();return t===0?7:t}function jxe(e,t){return cr(Ub.count(So(e)-1,e),t,2)}function M8(e){var t=e.getUTCDay();return t>=4||t===0?of(e):of.ceil(e)}function kxe(e,t){return e=M8(e),cr(of.count(So(e),e)+(So(e).getUTCDay()===4),t,2)}function Nxe(e){return e.getUTCDay()}function Cxe(e,t){return cr(A0.count(So(e)-1,e),t,2)}function Exe(e,t){return cr(e.getUTCFullYear()%100,t,2)}function Axe(e,t){return e=M8(e),cr(e.getUTCFullYear()%100,t,2)}function Pxe(e,t){return cr(e.getUTCFullYear()%1e4,t,4)}function Txe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?of(e):of.ceil(e),cr(e.getUTCFullYear()%1e4,t,4)}function Oxe(){return"+0000"}function E5(){return"%"}function A5(e){return+e}function P5(e){return Math.floor(+e/1e3)}var Pu,R8,$8;Ixe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ixe(e){return Pu=I0e(e),R8=Pu.format,Pu.parse,$8=Pu.utcFormat,Pu.utcParse,Pu}function Mxe(e){return new Date(e)}function Rxe(e){return e instanceof Date?+e:+new Date(+e)}function IC(e,t,r,n,a,i,o,l,c,u){var d=xC(),f=d.invert,m=d.domain,p=u(".%L"),v=u(":%S"),g=u("%I:%M"),b=u("%I %p"),y=u("%a %d"),w=u("%b %d"),x=u("%B"),_=u("%Y");function S(k){return(c(k)<k?p:l(k)<k?v:o(k)<k?g:i(k)<k?b:n(k)<k?a(k)<k?y:w:r(k)<k?x:_)(k)}return d.invert=function(k){return new Date(f(k))},d.domain=function(k){return arguments.length?m(Array.from(k,Rxe)):m().map(Mxe)},d.ticks=function(k){var C=m();return e(C[0],C[C.length-1],k??10)},d.tickFormat=function(k,C){return C==null?S:u(C)},d.nice=function(k){var C=m();return(!k||typeof k.range!="function")&&(k=t(C[0],C[C.length-1],k??10)),k?m(_8(C,k)):d},d.copy=function(){return cg(d,IC(e,t,r,n,a,i,o,l,c,u))},d}function $xe(){return Si.apply(IC(T0e,O0e,_o,TC,Bb,ug,AC,CC,jc,R8).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Dxe(){return Si.apply(IC(A0e,P0e,So,OC,Ub,Fb,PC,EC,jc,$8).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function qb(){var e=0,t=1,r,n,a,i,o=oa,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(m){var p,v;return arguments.length?([p,v]=m,o=f(p,v),u):[o(0),o(1)]}}return u.range=d(ah),u.rangeRound=d(yC),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function ql(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function D8(){var e=Ul(qb()(oa));return e.copy=function(){return ql(e,D8())},Eo.apply(e,arguments)}function L8(){var e=_C(qb()).domain([1,10]);return e.copy=function(){return ql(e,L8()).base(e.base())},Eo.apply(e,arguments)}function F8(){var e=SC(qb());return e.copy=function(){return ql(e,F8()).constant(e.constant())},Eo.apply(e,arguments)}function MC(){var e=jC(qb());return e.copy=function(){return ql(e,MC()).exponent(e.exponent())},Eo.apply(e,arguments)}function Lxe(){return MC.apply(null,arguments).exponent(.5)}function B8(){var e=[],t=oa;function r(n){if(n!=null&&!isNaN(n=+n))return t((og(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Nl),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>jye(e,i/n))},r.copy=function(){return B8(t).domain(e)},Eo.apply(r,arguments)}function zb(){var e=0,t=.5,r=1,n=1,a,i,o,l,c,u=oa,d,f=!1,m;function p(g){return isNaN(g=+g)?m:(g=.5+((g=+d(g))-i)*(n*g<n*i?l:c),u(f?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,r]=g,a=d(e=+e),i=d(t=+t),o=d(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,p):[e,t,r]},p.clamp=function(g){return arguments.length?(f=!!g,p):f},p.interpolator=function(g){return arguments.length?(u=g,p):u};function v(g){return function(b){var y,w,x;return arguments.length?([y,w,x]=b,u=Xye(g,[y,w,x]),p):[u(0),u(.5),u(1)]}}return p.range=v(ah),p.rangeRound=v(yC),p.unknown=function(g){return arguments.length?(m=g,p):m},function(g){return d=g,a=g(e),i=g(t),o=g(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,p}}function U8(){var e=Ul(zb()(oa));return e.copy=function(){return ql(e,U8())},Eo.apply(e,arguments)}function q8(){var e=_C(zb()).domain([.1,1,10]);return e.copy=function(){return ql(e,q8()).base(e.base())},Eo.apply(e,arguments)}function z8(){var e=SC(zb());return e.copy=function(){return ql(e,z8()).constant(e.constant())},Eo.apply(e,arguments)}function RC(){var e=jC(zb());return e.copy=function(){return ql(e,RC()).exponent(e.exponent())},Eo.apply(e,arguments)}function Fxe(){return RC.apply(null,arguments).exponent(.5)}const T5=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:op,scaleDiverging:U8,scaleDivergingLog:q8,scaleDivergingPow:RC,scaleDivergingSqrt:Fxe,scaleDivergingSymlog:z8,scaleIdentity:w8,scaleImplicit:F2,scaleLinear:N0,scaleLog:S8,scaleOrdinal:pC,scalePoint:pm,scalePow:kC,scaleQuantile:N8,scaleQuantize:C8,scaleRadial:k8,scaleSequential:D8,scaleSequentialLog:L8,scaleSequentialPow:MC,scaleSequentialQuantile:B8,scaleSequentialSqrt:Lxe,scaleSequentialSymlog:F8,scaleSqrt:x0e,scaleSymlog:j8,scaleThreshold:E8,scaleTime:$xe,scaleUtc:Dxe,tickFormat:b8},Symbol.toStringTag,{value:"Module"}));var Bxe=Gf;function Uxe(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(l===void 0?o===o&&!Bxe(o):r(o,l)))var l=o,c=i}return c}var Wb=Uxe;function qxe(e,t){return e>t}var W8=qxe,zxe=Wb,Wxe=W8,Hxe=nh;function Vxe(e){return e&&e.length?zxe(e,Hxe,Wxe):void 0}var Kxe=Vxe;const pl=dr(Kxe);function Gxe(e,t){return e<t}var H8=Gxe,Yxe=Wb,Xxe=H8,Qxe=nh;function Jxe(e){return e&&e.length?Yxe(e,Qxe,Xxe):void 0}var Zxe=Jxe;const Hb=dr(Zxe);var ebe=YN,tbe=Ps,rbe=Z6,nbe=ka;function abe(e,t){var r=nbe(e)?ebe:rbe;return r(e,tbe(t))}var ibe=abe,sbe=Q6,obe=ibe;function lbe(e,t){return sbe(obe(e,t),1)}var cbe=lbe;const ube=dr(cbe);var dbe=uC;function fbe(e,t){return dbe(e,t)}var hbe=fbe;const lf=dr(hbe);var ih=1e9,mbe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},DC,Lr=!0,vi="[DecimalError] ",$c=vi+"Invalid argument: ",$C=vi+"Exponent out of range: ",sh=Math.floor,uc=Math.pow,pbe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Fa,An=1e7,Mr=7,V8=9007199254740991,P0=sh(V8/Mr),st={};st.absoluteValue=st.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};st.comparedTo=st.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};st.decimalPlaces=st.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Mr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};st.dividedBy=st.div=function(e){return io(this,new this.constructor(e))};st.dividedToIntegerBy=st.idiv=function(e){var t=this,r=t.constructor;return _r(io(t,new r(e),0,1),r.precision)};st.equals=st.eq=function(e){return!this.cmp(e)};st.exponent=function(){return mn(this)};st.greaterThan=st.gt=function(e){return this.cmp(e)>0};st.greaterThanOrEqualTo=st.gte=function(e){return this.cmp(e)>=0};st.isInteger=st.isint=function(){return this.e>this.d.length-2};st.isNegative=st.isneg=function(){return this.s<0};st.isPositive=st.ispos=function(){return this.s>0};st.isZero=function(){return this.s===0};st.lessThan=st.lt=function(e){return this.cmp(e)<0};st.lessThanOrEqualTo=st.lte=function(e){return this.cmp(e)<1};st.logarithm=st.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Fa))throw Error(vi+"NaN");if(r.s<1)throw Error(vi+(r.s?"NaN":"-Infinity"));return r.eq(Fa)?new n(0):(Lr=!1,t=io(fp(r,i),fp(e,i),i),Lr=!0,_r(t,a))};st.minus=st.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Y8(t,e):K8(t,(e.s=-e.s,e))};st.modulo=st.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(vi+"NaN");return r.s?(Lr=!1,t=io(r,e,0,1).times(e),Lr=!0,r.minus(t)):_r(new n(r),a)};st.naturalExponential=st.exp=function(){return G8(this)};st.naturalLogarithm=st.ln=function(){return fp(this)};st.negated=st.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};st.plus=st.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?K8(t,e):Y8(t,(e.s=-e.s,e))};st.precision=st.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error($c+e);if(t=mn(a)+1,n=a.d.length-1,r=n*Mr+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};st.squareRoot=st.sqrt=function(){var e,t,r,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(vi+"NaN")}for(e=mn(l),Lr=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=ds(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=sh((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(io(l,i,o+2)).times(.5),ds(i.d).slice(0,o)===(t=ds(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(_r(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Lr=!0,_r(n,r)};st.times=st.mul=function(e){var t,r,n,a,i,o,l,c,u,d=this,f=d.constructor,m=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=m.length,u=p.length,c<u&&(i=m,m=p,p=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+p[n]*m[a-n-1]+t,i[a--]=l%An|0,t=l/An|0;i[a]=(i[a]+t)%An|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Lr?_r(e,f.precision):e};st.toDecimalPlaces=st.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ks(e,0,ih),t===void 0?t=n.rounding:ks(t,0,8),_r(r,e+mn(r)+1,t))};st.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Qc(n,!0):(ks(e,0,ih),t===void 0?t=a.rounding:ks(t,0,8),n=_r(new a(n),e+1,t),r=Qc(n,!0,e+1)),r};st.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Qc(a):(ks(e,0,ih),t===void 0?t=i.rounding:ks(t,0,8),n=_r(new i(a),e+mn(a)+1,t),r=Qc(n.abs(),!1,e+mn(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};st.toInteger=st.toint=function(){var e=this,t=e.constructor;return _r(new t(e),mn(e)+1,t.rounding)};st.toNumber=function(){return+this};st.toPower=st.pow=function(e){var t,r,n,a,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Fa);if(l=new c(l),!l.s){if(e.s<1)throw Error(vi+"Infinity");return l}if(l.eq(Fa))return l;if(n=c.precision,e.eq(Fa))return _r(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=V8){for(a=new c(Fa),t=Math.ceil(n/Mr+4),Lr=!1;r%2&&(a=a.times(l),I5(a.d,t)),r=sh(r/2),r!==0;)l=l.times(l),I5(l.d,t);return Lr=!0,e.s<0?new c(Fa).div(a):_r(a,n)}}else if(i<0)throw Error(vi+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Lr=!1,a=e.times(fp(l,n+u)),Lr=!0,a=G8(a),a.s=i,a};st.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=mn(a),n=Qc(a,r<=i.toExpNeg||r>=i.toExpPos)):(ks(e,1,ih),t===void 0?t=i.rounding:ks(t,0,8),a=_r(new i(a),e,t),r=mn(a),n=Qc(a,e<=r||r<=i.toExpNeg,e)),n};st.toSignificantDigits=st.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ks(e,1,ih),t===void 0?t=n.rounding:ks(t,0,8)),_r(new n(r),e,t)};st.toString=st.valueOf=st.val=st.toJSON=st[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=mn(e),r=e.constructor;return Qc(e,t<=r.toExpNeg||t>=r.toExpPos)};function K8(e,t){var r,n,a,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Lr?_r(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/Mr),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/An|0,c[i]%=An;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Lr?_r(t,f):t}function ks(e,t,r){if(e!==~~e||e<t||e>r)throw Error($c+e)}function ds(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Mr-n.length,r&&(i+=el(r)),i+=n;o=e[t],n=o+"",r=Mr-n.length,r&&(i+=el(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var io=function(){function e(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%An|0,o=i/An|0;return o&&n.unshift(o),n}function t(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*An+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,u,d,f,m,p,v,g,b,y,w,x,_,S,k,C,j,N=n.constructor,A=n.s==a.s?1:-1,P=n.d,T=a.d;if(!n.s)return new N(n);if(!a.s)throw Error(vi+"Division by zero");for(c=n.e-a.e,C=T.length,S=P.length,p=new N(A),v=p.d=[],u=0;T[u]==(P[u]||0);)++u;if(T[u]>(P[u]||0)&&--c,i==null?w=i=N.precision:o?w=i+(mn(n)-mn(a))+1:w=i,w<0)return new N(0);if(w=w/Mr+2|0,u=0,C==1)for(d=0,T=T[0],w++;(u<S||d)&&w--;u++)x=d*An+(P[u]||0),v[u]=x/T|0,d=x%T|0;else{for(d=An/(T[0]+1)|0,d>1&&(T=e(T,d),P=e(P,d),C=T.length,S=P.length),_=C,g=P.slice(0,C),b=g.length;b<C;)g[b++]=0;j=T.slice(),j.unshift(0),k=T[0],T[1]>=An/2&&++k;do d=0,l=t(T,g,C,b),l<0?(y=g[0],C!=b&&(y=y*An+(g[1]||0)),d=y/k|0,d>1?(d>=An&&(d=An-1),f=e(T,d),m=f.length,b=g.length,l=t(f,g,m,b),l==1&&(d--,r(f,C<m?j:T,m))):(d==0&&(l=d=1),f=T.slice()),m=f.length,m<b&&f.unshift(0),r(g,f,b),l==-1&&(b=g.length,l=t(T,g,C,b),l<1&&(d++,r(g,C<b?j:T,b))),b=g.length):l===0&&(d++,g=[0]),v[u++]=d,l&&g[0]?g[b++]=P[_]||0:(g=[P[_]],b=1);while((_++<S||g[0]!==void 0)&&w--)}return v[0]||v.shift(),p.e=c,_r(p,o?i+mn(p)+1:i)}}();function G8(e,t){var r,n,a,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(mn(e)>16)throw Error($C+mn(e));if(!e.s)return new d(Fa);for(t==null?(Lr=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(uc(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new d(Fa),d.precision=l;;){if(a=_r(a.times(e),l),r=r.times(++c),o=i.plus(io(a,r,l)),ds(o.d).slice(0,l)===ds(i.d).slice(0,l)){for(;u--;)i=_r(i.times(i),l);return d.precision=f,t==null?(Lr=!0,_r(i,f)):i}i=o}}function mn(e){for(var t=e.e*Mr,r=e.d[0];r>=10;r/=10)t++;return t}function e_(e,t,r){if(t>e.LN10.sd())throw Lr=!0,r&&(e.precision=r),Error(vi+"LN10 precision limit exceeded");return _r(new e(e.LN10),t)}function el(e){for(var t="";e--;)t+="0";return t}function fp(e,t){var r,n,a,i,o,l,c,u,d,f=1,m=10,p=e,v=p.d,g=p.constructor,b=g.precision;if(p.s<1)throw Error(vi+(p.s?"NaN":"-Infinity"));if(p.eq(Fa))return new g(0);if(t==null?(Lr=!1,u=b):u=t,p.eq(10))return t==null&&(Lr=!0),e_(g,u);if(u+=m,g.precision=u,r=ds(v),n=r.charAt(0),i=mn(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=ds(p.d),n=r.charAt(0),f++;i=mn(p),n>1?(p=new g("0."+r),i++):p=new g(n+"."+r.slice(1))}else return c=e_(g,u+2,b).times(i+""),p=fp(new g(n+"."+r.slice(1)),u-m).plus(c),g.precision=b,t==null?(Lr=!0,_r(p,b)):p;for(l=o=p=io(p.minus(Fa),p.plus(Fa),u),d=_r(p.times(p),u),a=3;;){if(o=_r(o.times(d),u),c=l.plus(io(o,new g(a),u)),ds(c.d).slice(0,u)===ds(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(e_(g,u+2,b).times(i+""))),l=io(l,new g(f),u),g.precision=b,t==null?(Lr=!0,_r(l,b)):l;l=c,a+=2}}function O5(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=sh(r/Mr),e.d=[],n=(r+1)%Mr,r<0&&(n+=Mr),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Mr;n<a;)e.d.push(+t.slice(n,n+=Mr));t=t.slice(n),n=Mr-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Lr&&(e.e>P0||e.e<-P0))throw Error($C+r)}else e.s=0,e.e=0,e.d=[0];return e}function _r(e,t,r){var n,a,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Mr,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Mr),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=Mr,a=n-Mr+o}if(r!==void 0&&(i=uc(10,o-a-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/uc(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=mn(e),f.length=1,t=t-i-1,f[0]=uc(10,(Mr-t%Mr)%Mr),e.e=sh(-t/Mr)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=uc(10,Mr-n),f[d]=a>0?(u/uc(10,o-a)%uc(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==An&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=An)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(Lr&&(e.e>P0||e.e<-P0))throw Error($C+mn(e));return e}function Y8(e,t){var r,n,a,i,o,l,c,u,d,f,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),Lr?_r(t,p):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(p/Mr),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=An-1;--c[i],c[a]+=An}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Lr?_r(t,p):t):new m(0)}function Qc(e,t,r){var n,a=mn(e),i=ds(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+el(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+el(-a-1)+i,r&&(n=r-o)>0&&(i+=el(n))):a>=o?(i+=el(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+el(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=el(n))),e.s<0?"-"+i:i}function I5(e,t){if(e.length>t)return e.length=t,!0}function X8(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error($c+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return O5(o,i.toString())}else if(typeof i!="string")throw Error($c+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,pbe.test(i))O5(o,i);else throw Error($c+i)}if(a.prototype=st,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=X8,a.config=a.set=gbe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function gbe(e){if(!e||typeof e!="object")throw Error(vi+"Object expected");var t,r,n,a=["precision",1,ih,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(sh(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error($c+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error($c+r+": "+n);return this}var DC=X8(mbe);Fa=new DC(1);const br=DC;function vbe(e){return wbe(e)||bbe(e)||xbe(e)||ybe()}function ybe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xbe(e,t){if(e){if(typeof e=="string")return z2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z2(e,t)}}function bbe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function wbe(e){if(Array.isArray(e))return z2(e)}function z2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _be=function(t){return t},Q8={"@@functional/placeholder":!0},J8=function(t){return t===Q8},M5=function(t){return function r(){return arguments.length===0||arguments.length===1&&J8(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},Sbe=function e(t,r){return t===1?r:M5(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==Q8}).length;return o>=t?r.apply(void 0,a):e(t-o,M5(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return J8(f)?c.shift():f});return r.apply(void 0,vbe(d).concat(c))}))})},Vb=function(t){return Sbe(t.length,t)},W2=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},jbe=Vb(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),kbe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return _be;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},H2=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},Z8=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function Nbe(e){var t;return e===0?t=1:t=Math.floor(new br(e).abs().log(10).toNumber())+1,t}function Cbe(e,t,r){for(var n=new br(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var Ebe=Vb(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),Abe=Vb(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),Pbe=Vb(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const Kb={rangeStep:Cbe,getDigitCount:Nbe,interpolateNumber:Ebe,uninterpolateNumber:Abe,uninterpolateTruncation:Pbe};function V2(e){return Ibe(e)||Obe(e)||eF(e)||Tbe()}function Tbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Obe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Ibe(e){if(Array.isArray(e))return K2(e)}function hp(e,t){return $be(e)||Rbe(e,t)||eF(e,t)||Mbe()}function Mbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eF(e,t){if(e){if(typeof e=="string")return K2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K2(e,t)}}function K2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rbe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function $be(e){if(Array.isArray(e))return e}function tF(e){var t=hp(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function rF(e,t,r){if(e.lte(0))return new br(0);var n=Kb.getDigitCount(e.toNumber()),a=new br(10).pow(n),i=e.div(a),o=n!==1?.05:.1,l=new br(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?c:new br(Math.ceil(c))}function Dbe(e,t,r){var n=1,a=new br(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new br(10).pow(Kb.getDigitCount(e)-1),a=new br(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new br(Math.floor(e)))}else e===0?a=new br(Math.floor((t-1)/2)):r||(a=new br(Math.floor(e)));var o=Math.floor((t-1)/2),l=kbe(jbe(function(c){return a.add(new br(c-o).mul(n)).toNumber()}),W2);return l(0,t)}function nF(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new br(0),tickMin:new br(0),tickMax:new br(0)};var i=rF(new br(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new br(0):(o=new br(e).add(t).div(2),o=o.sub(new br(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new br(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?nF(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new br(l).mul(i)),tickMax:o.add(new br(c).mul(i))})}function Lbe(e){var t=hp(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=tF([r,n]),c=hp(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(V2(W2(0,a-1).map(function(){return 1/0}))):[].concat(V2(W2(0,a-1).map(function(){return-1/0})),[d]);return r>n?H2(f):f}if(u===d)return Dbe(u,a,i);var m=nF(u,d,o,i),p=m.step,v=m.tickMin,g=m.tickMax,b=Kb.rangeStep(v,g.add(new br(.1).mul(p)),p);return r>n?H2(b):b}function Fbe(e,t){var r=hp(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=tF([n,a]),l=hp(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=rF(new br(u).sub(c).div(d-1),i,0),m=[].concat(V2(Kb.rangeStep(new br(c),new br(u).sub(new br(.99).mul(f)),f)),[u]);return n>a?H2(m):m}var Bbe=Z8(Lbe),Ube=Z8(Fbe),qbe="Invariant failed";function Jc(e,t){throw new Error(qbe)}var zbe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function cf(e){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cf(e)}function T0(){return T0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T0.apply(this,arguments)}function Wbe(e,t){return Gbe(e)||Kbe(e,t)||Vbe(e,t)||Hbe()}function Hbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vbe(e,t){if(e){if(typeof e=="string")return R5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R5(e,t)}}function R5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Kbe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Gbe(e){if(Array.isArray(e))return e}function Ybe(e,t){if(e==null)return{};var r=Xbe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Xbe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Qbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jbe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sF(n.key),n)}}function Zbe(e,t,r){return t&&Jbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ewe(e,t,r){return t=O0(t),twe(e,aF()?Reflect.construct(t,r||[],O0(e).constructor):t.apply(e,r))}function twe(e,t){if(t&&(cf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rwe(e)}function rwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aF=function(){return!!e})()}function O0(e){return O0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},O0(e)}function nwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G2(e,t)}function G2(e,t){return G2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},G2(e,t)}function iF(e,t,r){return t=sF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sF(e){var t=awe(e,"string");return cf(t)=="symbol"?t:t+""}function awe(e,t){if(cf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gb=function(e){function t(){return Qbe(this,t),ewe(this,t,arguments)}return nwe(t,e),Zbe(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,m=Ybe(n,zbe),p=xt(m,!1);this.props.direction==="x"&&d.type!=="number"&&Jc();var v=c.map(function(g){var b=u(g,l),y=b.x,w=b.y,x=b.value,_=b.errorVal;if(!_)return null;var S=[],k,C;if(Array.isArray(_)){var j=Wbe(_,2);k=j[0],C=j[1]}else k=C=_;if(i==="vertical"){var N=d.scale,A=w+a,P=A+o,T=A-o,L=N(x-k),U=N(x+C);S.push({x1:U,y1:P,x2:U,y2:T}),S.push({x1:L,y1:A,x2:U,y2:A}),S.push({x1:L,y1:P,x2:L,y2:T})}else if(i==="horizontal"){var D=f.scale,H=y+a,B=H-o,M=H+o,$=D(x-k),re=D(x+C);S.push({x1:B,y1:re,x2:M,y2:re}),S.push({x1:H,y1:$,x2:H,y2:re}),S.push({x1:B,y1:$,x2:M,y2:$})}return V.createElement(tr,T0({className:"recharts-errorBar",key:"bar-".concat(S.map(function(ie){return"".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))},p),S.map(function(ie){return V.createElement("line",T0({},ie,{key:"line-".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))}))});return V.createElement(tr,{className:"recharts-errorBars"},v)}}])}(V.Component);iF(Gb,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});iF(Gb,"displayName","ErrorBar");function mp(e){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mp(e)}function $5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ec(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$5(Object(r),!0).forEach(function(n){iwe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iwe(e,t,r){return t=swe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function swe(e){var t=owe(e,"string");return mp(t)=="symbol"?t:t+""}function owe(e,t){if(mp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oF=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=Oa(r,Sd);if(!o)return null;var l=Sd.defaultProps,c=l!==void 0?ec(ec({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var m=f.item,p=f.props,v=p.sectors||p.data||[];return d.concat(v.map(function(g){return{type:o.props.iconType||m.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(n||[]).map(function(d){var f=d.item,m=f.type.defaultProps,p=m!==void 0?ec(ec({},m),f.props):{},v=p.dataKey,g=p.name,b=p.legendType,y=p.hide;return{inactive:y,dataKey:v,type:c.iconType||b||"square",color:LC(f),value:g||v,payload:p}}),ec(ec(ec({},c),Sd.getWithHeight(o,a)),{},{payload:u,item:o})};function pp(e){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pp(e)}function D5(e){return dwe(e)||uwe(e)||cwe(e)||lwe()}function lwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cwe(e,t){if(e){if(typeof e=="string")return Y2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y2(e,t)}}function uwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dwe(e){if(Array.isArray(e))return Y2(e)}function Y2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L5(Object(r),!0).forEach(function(n){kd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kd(e,t,r){return t=fwe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fwe(e){var t=hwe(e,"string");return pp(t)=="symbol"?t:t+""}function hwe(e,t){if(pp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wn(e,t,r){return zt(e)||zt(t)?r:Sn(t)?za(e,t,r):Tt(t)?t(e):r}function gm(e,t,r,n){var a=ube(e,function(l){return wn(l,t)});if(r==="number"){var i=a.filter(function(l){return Ye(l)||parseFloat(l)});return i.length?[Hb(i),pl(i)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!zt(l)}):a;return o.map(function(l){return Sn(l)||l instanceof Date?l:""})}var mwe=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,m=u>=l-1?a[0].coordinate:a[u+1].coordinate,p=void 0;if(ia(f-d)!==ia(m-f)){var v=[];if(ia(m-f)===ia(c[1]-c[0])){p=m;var g=f+c[1]-c[0];v[0]=Math.min(g,(g+d)/2),v[1]=Math.max(g,(g+d)/2)}else{p=d;var b=m+c[1]-c[0];v[0]=Math.min(f,(b+f)/2),v[1]=Math.max(f,(b+f)/2)}var y=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(t>y[0]&&t<=y[1]||t>=v[0]&&t<=v[1]){o=a[u].index;break}}else{var w=Math.min(d,m),x=Math.max(d,m);if(t>(w+f)/2&&t<=(x+f)/2){o=a[u].index;break}}}else for(var _=0;_<l;_++)if(_===0&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_===l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2){o=n[_].index;break}return o},LC=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Zr(Zr({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},pwe=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),m=0,p=f.length;m<p;m++){var v=d[f[m]],g=v.items,b=v.cateAxisId,y=g.filter(function(C){return ao(C.type).indexOf("Bar")>=0});if(y&&y.length){var w=y[0].type.defaultProps,x=w!==void 0?Zr(Zr({},w),y[0].props):y[0].props,_=x.barSize,S=x[b];o[S]||(o[S]=[]);var k=zt(_)?r:_;o[S].push({item:y[0],stackList:y.slice(1),barSize:zt(k)?void 0:sa(k,n,0)})}}return o},gwe=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=sa(r,a,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var m=!1,p=a/c,v=o.reduce(function(_,S){return _+S.barSize||0},0);v+=(c-1)*u,v>=a&&(v-=(c-1)*u,u=0),v>=a&&p>0&&(m=!0,p*=.9,v=c*p);var g=(a-v)/2>>0,b={offset:g-u,size:0};d=o.reduce(function(_,S){var k={item:S.item,position:{offset:b.offset+b.size+u,size:m?p:S.barSize}},C=[].concat(D5(_),[k]);return b=C[C.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(j){C.push({item:j,position:b})}),C},f)}else{var y=sa(n,a,0,!0);a-2*y-(c-1)*u<=0&&(u=0);var w=(a-2*y-(c-1)*u)/c;w>1&&(w>>=0);var x=l===+l?Math.min(w,l):w;d=o.reduce(function(_,S,k){var C=[].concat(D5(_),[{item:S.item,position:{offset:y+(w+u)*k+(w-x)/2,size:x}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(j){C.push({item:j,position:C[C.length-1].position})}),C},f)}return d},vwe=function(t,r,n,a){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=oF({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,m=d.height,p=u.align,v=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&v==="middle")&&p!=="center"&&Ye(t[p]))return Zr(Zr({},t),{},kd({},p,t[p]+(f||0)));if((g==="horizontal"||g==="vertical"&&p==="center")&&v!=="middle"&&Ye(t[v]))return Zr(Zr({},t),{},kd({},v,t[v]+(m||0)))}return t},ywe=function(t,r,n){return zt(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},lF=function(t,r,n,a,i){var o=r.props.children,l=hi(o,Gb).filter(function(u){return ywe(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=wn(d,n);if(zt(f))return u;var m=Array.isArray(f)?[Hb(f),pl(f)]:[f,f],p=c.reduce(function(v,g){var b=wn(d,g,0),y=m[0]-Math.abs(Array.isArray(b)?b[0]:b),w=m[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(y,v[0]),Math.max(w,v[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},xwe=function(t,r,n,a,i){var o=r.map(function(l){return lF(t,l,n,i,a)}).filter(function(l){return!zt(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},cF=function(t,r,n,a,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&lF(t,c,u,a)||gm(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},uF=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},dF=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},to=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?ia(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var m=i?i.indexOf(f):f;return{coordinate:a(m)+u,value:f,offset:u}});return d.filter(function(f){return!Zf(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,m){return{coordinate:a(f)+u,value:f,index:m,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,m){return{coordinate:a(f)+u,value:i?i[f]:f,index:m,offset:u}})},t_=new WeakMap,Pv=function(t,r){if(typeof r!="function")return t;t_.has(t)||t_.set(t,new WeakMap);var n=t_.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},fF=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:op(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:N0(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:pm(),realScaleType:"point"}:i==="category"?{scale:op(),realScaleType:"band"}:{scale:N0(),realScaleType:"linear"};if(Gc(a)){var c="scale".concat(Pb(a));return{scale:(T5[c]||pm)(),realScaleType:T5[c]?c:"point"}}return Tt(a)?{scale:a}:{scale:pm(),realScaleType:"point"}},F5=1e-4,hF=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-F5,o=Math.max(a[0],a[1])+F5,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},bwe=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},wwe=function(t,r){if(!r||r.length!==2||!Ye(r[0])||!Ye(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!Ye(t[0])||t[0]<n)&&(i[0]=n),(!Ye(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},_we=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,l=0;l<r;++l){var c=Zf(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},Swe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var l=Zf(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},jwe={sign:_we,expand:zle,none:Zd,silhouette:Wle,wiggle:Hle,positive:Swe},kwe=function(t,r,n){var a=r.map(function(l){return l.props.dataKey}),i=jwe[n],o=qle().keys(a).value(function(l,c){return+wn(l,c,0)}).order(b2).offset(i);return o(t)},Nwe=function(t,r,n,a,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,m){var p,v=(p=m.type)!==null&&p!==void 0&&p.defaultProps?Zr(Zr({},m.type.defaultProps),m.props):m.props,g=v.stackId,b=v.hide;if(b)return f;var y=v[n],w=f[y]||{hasStack:!1,stackGroups:{}};if(Sn(g)){var x=w.stackGroups[g]||{numericAxisId:n,cateAxisId:a,items:[]};x.items.push(m),w.hasStack=!0,w.stackGroups[g]=x}else w.stackGroups[eh("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[m]};return Zr(Zr({},f),{},kd({},y,w))},c),d={};return Object.keys(u).reduce(function(f,m){var p=u[m];if(p.hasStack){var v={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(g,b){var y=p.stackGroups[b];return Zr(Zr({},g),{},kd({},b,{numericAxisId:n,cateAxisId:a,items:y.items,stackedData:kwe(t,y.items,i)}))},v)}return Zr(Zr({},f),{},kd({},m,p))},d)},mF=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=Bbe(u,i,l);return t.domain([Hb(d),pl(d)]),{niceTicks:d}}if(i&&a==="number"){var f=t.domain(),m=Ube(f,i,l);return{niceTicks:m}}return null};function B5(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!zt(a[t.dataKey])){var l=i0(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=wn(a,zt(o)?t.dataKey:o);return zt(c)?null:t.scale(c)}var U5=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=wn(o,r.dataKey,r.domain[l]);return zt(c)?null:r.scale(c)-i/2+a},Cwe=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},Ewe=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Zr(Zr({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(Sn(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},Awe=function(t){return t.reduce(function(r,n){return[Hb(n.concat([r[0]]).filter(Ye)),pl(n.concat([r[1]]).filter(Ye))]},[1/0,-1/0])},pF=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var f=Awe(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},q5=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,z5=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,X2=function(t,r,n){if(Tt(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(Ye(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(q5.test(t[0])){var i=+q5.exec(t[0])[1];a[0]=r[0]-i}else Tt(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(Ye(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(z5.test(t[1])){var o=+z5.exec(t[1])[1];a[1]=r[1]+o}else Tt(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},I0=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=fC(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},W5=function(t,r,n){return!t||!t.length||lf(t,za(n,"type.defaultProps.domain"))?r:t},gF=function(t,r){var n=t.type.defaultProps?Zr(Zr({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Zr(Zr({},xt(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:LC(t),value:wn(r,a),type:c,payload:r,chartType:u,hide:d})};function gp(e){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gp(e)}function H5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ks(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H5(Object(r),!0).forEach(function(n){vF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vF(e,t,r){return t=Pwe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pwe(e){var t=Twe(e,"string");return gp(t)=="symbol"?t:t+""}function Twe(e,t){if(gp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Owe(e,t){return $we(e)||Rwe(e,t)||Mwe(e,t)||Iwe()}function Iwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mwe(e,t){if(e){if(typeof e=="string")return V5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V5(e,t)}}function V5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rwe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function $we(e){if(Array.isArray(e))return e}var M0=Math.PI/180,Dwe=function(t){return t*180/Math.PI},Cr=function(t,r,n,a){return{x:t+Math.cos(-M0*a)*n,y:r+Math.sin(-M0*a)*n}},yF=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Lwe=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=sa(t.cx,o,o/2),f=sa(t.cy,l,l/2),m=yF(o,l,n),p=sa(t.innerRadius,m,0),v=sa(t.outerRadius,m,m*.8),g=Object.keys(r);return g.reduce(function(b,y){var w=r[y],x=w.domain,_=w.reversed,S;if(zt(w.range))a==="angleAxis"?S=[c,u]:a==="radiusAxis"&&(S=[p,v]),_&&(S=[S[1],S[0]]);else{S=w.range;var k=S,C=Owe(k,2);c=C[0],u=C[1]}var j=fF(w,i),N=j.realScaleType,A=j.scale;A.domain(x).range(S),hF(A);var P=mF(A,Ks(Ks({},w),{},{realScaleType:N})),T=Ks(Ks(Ks({},w),P),{},{range:S,radius:v,realScaleType:N,scale:A,cx:d,cy:f,innerRadius:p,outerRadius:v,startAngle:c,endAngle:u});return Ks(Ks({},b),{},vF({},y,T))},{})},Fwe=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},Bwe=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,l=Fwe({x:n,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:Dwe(u),angleInRadian:u}},Uwe=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},qwe=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},K5=function(t,r){var n=t.x,a=t.y,i=Bwe({x:n,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=Uwe(r),f=d.startAngle,m=d.endAngle,p=l,v;if(f<=m){for(;p>m;)p-=360;for(;p<f;)p+=360;v=p>=f&&p<=m}else{for(;p>f;)p-=360;for(;p<m;)p+=360;v=p>=m&&p<=f}return v?Ks(Ks({},r),{},{radius:o,angle:qwe(p,r)}):null},xF=function(t){return!h.isValidElement(t)&&!Tt(t)&&typeof t!="boolean"?t.className:""};function vp(e){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vp(e)}var zwe=["offset"];function Wwe(e){return Gwe(e)||Kwe(e)||Vwe(e)||Hwe()}function Hwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vwe(e,t){if(e){if(typeof e=="string")return Q2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q2(e,t)}}function Kwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gwe(e){if(Array.isArray(e))return Q2(e)}function Q2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ywe(e,t){if(e==null)return{};var r=Xwe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Xwe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function G5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G5(Object(r),!0).forEach(function(n){Qwe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qwe(e,t,r){return t=Jwe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jwe(e){var t=Zwe(e,"string");return vp(t)=="symbol"?t:t+""}function Zwe(e,t){if(vp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yp(){return yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yp.apply(this,arguments)}var e1e=function(t){var r=t.value,n=t.formatter,a=zt(t.children)?r:t.children;return Tt(n)?n(a):a},t1e=function(t,r){var n=ia(r-t),a=Math.min(Math.abs(r-t),360);return n*a},r1e=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,m=c.outerRadius,p=c.startAngle,v=c.endAngle,g=c.clockWise,b=(f+m)/2,y=t1e(p,v),w=y>=0?1:-1,x,_;a==="insideStart"?(x=p+w*o,_=g):a==="insideEnd"?(x=v-w*o,_=!g):a==="end"&&(x=v+w*o,_=g),_=y<=0?_:!_;var S=Cr(u,d,b,x),k=Cr(u,d,b,x+(_?1:-1)*359),C="M".concat(S.x,",").concat(S.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(_?0:1,`,
    `).concat(k.x,",").concat(k.y),j=zt(t.id)?eh("recharts-radial-line-"):t.id;return V.createElement("text",yp({},n,{dominantBaseline:"central",className:qt("recharts-radial-bar-label",l)}),V.createElement("defs",null,V.createElement("path",{id:j,d:C})),V.createElement("textPath",{xlinkHref:"#".concat(j)},r))},n1e=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,m=(d+f)/2;if(a==="outside"){var p=Cr(o,l,u+n,m),v=p.x,g=p.y;return{x:v,y:g,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var b=(c+u)/2,y=Cr(o,l,b,m),w=y.x,x=y.y;return{x:w,y:x,textAnchor:"middle",verticalAnchor:"middle"}},a1e=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,m=f*a,p=f>0?"end":"start",v=f>0?"start":"end",g=u>=0?1:-1,b=g*a,y=g>0?"end":"start",w=g>0?"start":"end";if(i==="top"){var x={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:p};return vn(vn({},x),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var _={x:l+u/2,y:c+d+m,textAnchor:"middle",verticalAnchor:v};return vn(vn({},_),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var S={x:l-b,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return vn(vn({},S),n?{width:Math.max(S.x-n.x,0),height:d}:{})}if(i==="right"){var k={x:l+u+b,y:c+d/2,textAnchor:w,verticalAnchor:"middle"};return vn(vn({},k),n?{width:Math.max(n.x+n.width-k.x,0),height:d}:{})}var C=n?{width:u,height:d}:{};return i==="insideLeft"?vn({x:l+b,y:c+d/2,textAnchor:w,verticalAnchor:"middle"},C):i==="insideRight"?vn({x:l+u-b,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},C):i==="insideTop"?vn({x:l+u/2,y:c+m,textAnchor:"middle",verticalAnchor:v},C):i==="insideBottom"?vn({x:l+u/2,y:c+d-m,textAnchor:"middle",verticalAnchor:p},C):i==="insideTopLeft"?vn({x:l+b,y:c+m,textAnchor:w,verticalAnchor:v},C):i==="insideTopRight"?vn({x:l+u-b,y:c+m,textAnchor:y,verticalAnchor:v},C):i==="insideBottomLeft"?vn({x:l+b,y:c+d-m,textAnchor:w,verticalAnchor:p},C):i==="insideBottomRight"?vn({x:l+u-b,y:c+d-m,textAnchor:y,verticalAnchor:p},C):Yf(i)&&(Ye(i.x)||_c(i.x))&&(Ye(i.y)||_c(i.y))?vn({x:l+sa(i.x,u),y:c+sa(i.y,d),textAnchor:"end",verticalAnchor:"end"},C):vn({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},C)},i1e=function(t){return"cx"in t&&Ye(t.cx)};function Tn(e){var t=e.offset,r=t===void 0?5:t,n=Ywe(e,zwe),a=vn({offset:r},n),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,m=a.textBreakAll;if(!i||zt(l)&&zt(c)&&!h.isValidElement(u)&&!Tt(u))return null;if(h.isValidElement(u))return h.cloneElement(u,a);var p;if(Tt(u)){if(p=h.createElement(u,a),h.isValidElement(p))return p}else p=e1e(a);var v=i1e(i),g=xt(a,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return r1e(a,p,g);var b=v?n1e(a):a1e(a);return V.createElement(Xc,yp({className:qt("recharts-label",f)},g,b,{breakAll:m}),p)}Tn.displayName="Label";var bF=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,m=t.y,p=t.top,v=t.left,g=t.width,b=t.height,y=t.clockWise,w=t.labelViewBox;if(w)return w;if(Ye(g)&&Ye(b)){if(Ye(f)&&Ye(m))return{x:f,y:m,width:g,height:b};if(Ye(p)&&Ye(v))return{x:p,y:v,width:g,height:b}}return Ye(f)&&Ye(m)?{x:f,y:m,width:0,height:0}:Ye(r)&&Ye(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:y}:t.viewBox?t.viewBox:{}},s1e=function(t,r){return t?t===!0?V.createElement(Tn,{key:"label-implicit",viewBox:r}):Sn(t)?V.createElement(Tn,{key:"label-implicit",viewBox:r,value:t}):h.isValidElement(t)?t.type===Tn?h.cloneElement(t,{key:"label-implicit",viewBox:r}):V.createElement(Tn,{key:"label-implicit",content:t,viewBox:r}):Tt(t)?V.createElement(Tn,{key:"label-implicit",content:t,viewBox:r}):Yf(t)?V.createElement(Tn,yp({viewBox:r},t,{key:"label-implicit"})):null:null},o1e=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=bF(t),o=hi(a,Tn).map(function(c,u){return h.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=s1e(t.label,r||i);return[l].concat(Wwe(o))};Tn.parseViewBox=bF;Tn.renderCallByParent=o1e;function l1e(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var c1e=l1e;const u1e=dr(c1e);function xp(e){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xp(e)}var d1e=["valueAccessor"],f1e=["data","dataKey","clockWise","id","textBreakAll"];function h1e(e){return v1e(e)||g1e(e)||p1e(e)||m1e()}function m1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p1e(e,t){if(e){if(typeof e=="string")return J2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J2(e,t)}}function g1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function v1e(e){if(Array.isArray(e))return J2(e)}function J2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R0(){return R0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R0.apply(this,arguments)}function Y5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function X5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y5(Object(r),!0).forEach(function(n){y1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y1e(e,t,r){return t=x1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x1e(e){var t=b1e(e,"string");return xp(t)=="symbol"?t:t+""}function b1e(e,t){if(xp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q5(e,t){if(e==null)return{};var r=w1e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function w1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var _1e=function(t){return Array.isArray(t.value)?u1e(t.value):t.value};function so(e){var t=e.valueAccessor,r=t===void 0?_1e:t,n=Q5(e,d1e),a=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=Q5(n,f1e);return!a||!a.length?null:V.createElement(tr,{className:"recharts-label-list"},a.map(function(d,f){var m=zt(i)?r(d,f):wn(d&&d.payload,i),p=zt(l)?{}:{id:"".concat(l,"-").concat(f)};return V.createElement(Tn,R0({},xt(d,!0),u,p,{parentViewBox:d.parentViewBox,value:m,textBreakAll:c,viewBox:Tn.parseViewBox(zt(o)?d:X5(X5({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}so.displayName="LabelList";function S1e(e,t){return e?e===!0?V.createElement(so,{key:"labelList-implicit",data:t}):V.isValidElement(e)||Tt(e)?V.createElement(so,{key:"labelList-implicit",data:t,content:e}):Yf(e)?V.createElement(so,R0({data:t},e,{key:"labelList-implicit"})):null:null}function j1e(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=hi(n,so).map(function(o,l){return h.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=S1e(e.label,t);return[i].concat(h1e(a))}so.renderCallByParent=j1e;function bp(e){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bp(e)}function Z2(){return Z2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z2.apply(this,arguments)}function J5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Z5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J5(Object(r),!0).forEach(function(n){k1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k1e(e,t,r){return t=N1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N1e(e){var t=C1e(e,"string");return bp(t)=="symbol"?t:t+""}function C1e(e,t){if(bp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E1e=function(t,r){var n=ia(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},Tv=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/M0,m=u?i:i+o*f,p=Cr(r,n,d,m),v=Cr(r,n,a,m),g=u?i-o*f:i,b=Cr(r,n,d*Math.cos(f*M0),g);return{center:p,circleTangency:v,lineTangency:b,theta:f}},wF=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=E1e(o,l),u=o+c,d=Cr(r,n,i,o),f=Cr(r,n,i,u),m="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var p=Cr(r,n,a,o),v=Cr(r,n,a,u);m+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else m+="L ".concat(r,",").concat(n," Z");return m},A1e=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=ia(d-u),m=Tv({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),p=m.circleTangency,v=m.lineTangency,g=m.theta,b=Tv({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),y=b.circleTangency,w=b.lineTangency,x=b.theta,_=c?Math.abs(u-d):Math.abs(u-d)-g-x;if(_<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):wF({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var S="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(a>0){var k=Tv({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),C=k.circleTangency,j=k.lineTangency,N=k.theta,A=Tv({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),P=A.circleTangency,T=A.lineTangency,L=A.theta,U=c?Math.abs(u-d):Math.abs(u-d)-N-L;if(U<0&&o===0)return"".concat(S,"L").concat(r,",").concat(n,"Z");S+="L".concat(T.x,",").concat(T.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(U>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(j.x,",").concat(j.y,"Z")}else S+="L".concat(r,",").concat(n,"Z");return S},P1e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},_F=function(t){var r=Z5(Z5({},P1e),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,m=r.className;if(o<i||d===f)return null;var p=qt("recharts-sector",m),v=o-i,g=sa(l,v,0,!0),b;return g>0&&Math.abs(d-f)<360?b=A1e({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):b=wF({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:f}),V.createElement("path",Z2({},xt(r,!0),{className:p,d:b,role:"img"}))};function wp(e){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wp(e)}function ej(){return ej=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ej.apply(this,arguments)}function eI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eI(Object(r),!0).forEach(function(n){T1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T1e(e,t,r){return t=O1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O1e(e){var t=I1e(e,"string");return wp(t)=="symbol"?t:t+""}function I1e(e,t){if(wp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rI={curveBasisClosed:Tle,curveBasisOpen:Ole,curveBasis:Ple,curveBumpX:gle,curveBumpY:vle,curveLinearClosed:Ile,curveLinear:Ob,curveMonotoneX:Mle,curveMonotoneY:Rle,curveNatural:$le,curveStep:Dle,curveStepAfter:Fle,curveStepBefore:Lle},Ov=function(t){return t.x===+t.x&&t.y===+t.y},Oh=function(t){return t.x},Ih=function(t){return t.y},M1e=function(t,r){if(Tt(t))return t;var n="curve".concat(Pb(t));return(n==="curveMonotone"||n==="curveBump")&&r?rI["".concat(n).concat(r==="vertical"?"Y":"X")]:rI[n]||Ob},R1e=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=M1e(n,l),f=u?i.filter(function(g){return Ov(g)}):i,m;if(Array.isArray(o)){var p=u?o.filter(function(g){return Ov(g)}):o,v=f.map(function(g,b){return tI(tI({},g),{},{base:p[b]})});return l==="vertical"?m=_v().y(Ih).x1(Oh).x0(function(g){return g.base.x}):m=_v().x(Oh).y1(Ih).y0(function(g){return g.base.y}),m.defined(Ov).curve(d),m(v)}return l==="vertical"&&Ye(o)?m=_v().y(Ih).x1(Oh).x0(o):Ye(o)?m=_v().x(Oh).y1(Ih).y0(o):m=g6().x(Oh).y(Ih),m.defined(Ov).curve(d),m(f)},Nd=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?R1e(t):a;return h.createElement("path",ej({},xt(t,!1),s0(t),{className:qt("recharts-curve",r),d:o,ref:i}))},SF={exports:{}},$1e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",D1e=$1e,L1e=D1e;function jF(){}function kF(){}kF.resetWarningCache=jF;var F1e=function(){function e(n,a,i,o,l,c){if(c!==L1e){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:kF,resetWarningCache:jF};return r.PropTypes=r,r};SF.exports=F1e();var B1e=SF.exports;const hr=dr(B1e);var U1e=Object.getOwnPropertyNames,q1e=Object.getOwnPropertySymbols,z1e=Object.prototype.hasOwnProperty;function nI(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function Iv(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var i=a.cache,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);var c=e(r,n,a);return i.delete(r),i.delete(n),c}}function aI(e){return U1e(e).concat(q1e(e))}var W1e=Object.hasOwn||function(e,t){return z1e.call(e,t)};function fu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var H1e="__v",V1e="__o",K1e="_owner",iI=Object.getOwnPropertyDescriptor,sI=Object.keys;function G1e(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function Y1e(e,t){return fu(e.getTime(),t.getTime())}function X1e(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Q1e(e,t){return e===t}function oI(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(a[f]){f++;continue}var m=o.value,p=l.value;if(r.equals(m[0],p[0],c,f,e,t,r)&&r.equals(m[1],p[1],m[0],p[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}var J1e=fu;function Z1e(e,t,r){var n=sI(e),a=n.length;if(sI(t).length!==a)return!1;for(;a-- >0;)if(!NF(e,t,r,n[a]))return!1;return!0}function Mh(e,t,r){var n=aI(e),a=n.length;if(aI(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=n[a],!NF(e,t,r,i)||(o=iI(e,i),l=iI(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function e_e(e,t){return fu(e.valueOf(),t.valueOf())}function t_e(e,t){return e.source===t.source&&e.flags===t.flags}function lI(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function r_e(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function n_e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function NF(e,t,r,n){return(n===K1e||n===V1e||n===H1e)&&(e.$$typeof||t.$$typeof)?!0:W1e(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var a_e="[object Arguments]",i_e="[object Boolean]",s_e="[object Date]",o_e="[object Error]",l_e="[object Map]",c_e="[object Number]",u_e="[object Object]",d_e="[object RegExp]",f_e="[object Set]",h_e="[object String]",m_e="[object URL]",p_e=Array.isArray,cI=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,uI=Object.assign,g_e=Object.prototype.toString.call.bind(Object.prototype.toString);function v_e(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,m=e.areUrlsEqual;return function(v,g,b){if(v===g)return!0;if(v==null||g==null)return!1;var y=typeof v;if(y!==typeof g)return!1;if(y!=="object")return y==="number"?o(v,g,b):y==="function"?a(v,g,b):!1;var w=v.constructor;if(w!==g.constructor)return!1;if(w===Object)return l(v,g,b);if(p_e(v))return t(v,g,b);if(cI!=null&&cI(v))return f(v,g,b);if(w===Date)return r(v,g,b);if(w===RegExp)return u(v,g,b);if(w===Map)return i(v,g,b);if(w===Set)return d(v,g,b);var x=g_e(v);return x===s_e?r(v,g,b):x===d_e?u(v,g,b):x===l_e?i(v,g,b):x===f_e?d(v,g,b):x===u_e?typeof v.then!="function"&&typeof g.then!="function"&&l(v,g,b):x===m_e?m(v,g,b):x===o_e?n(v,g,b):x===a_e?l(v,g,b):x===i_e||x===c_e||x===h_e?c(v,g,b):!1}}function y_e(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?Mh:G1e,areDatesEqual:Y1e,areErrorsEqual:X1e,areFunctionsEqual:Q1e,areMapsEqual:n?nI(oI,Mh):oI,areNumbersEqual:J1e,areObjectsEqual:n?Mh:Z1e,arePrimitiveWrappersEqual:e_e,areRegExpsEqual:t_e,areSetsEqual:n?nI(lI,Mh):lI,areTypedArraysEqual:n?Mh:r_e,areUrlsEqual:n_e};if(r&&(a=uI({},a,r(a))),t){var i=Iv(a.areArraysEqual),o=Iv(a.areMapsEqual),l=Iv(a.areObjectsEqual),c=Iv(a.areSetsEqual);a=uI({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function x_e(e){return function(t,r,n,a,i,o,l){return e(t,r,l)}}function b_e(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(c,u){var d=n(),f=d.cache,m=f===void 0?t?new WeakMap:void 0:f,p=d.meta;return r(c,u,{cache:m,equals:a,meta:p,strict:i})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return r(c,u,o)}}var w_e=zl();zl({strict:!0});zl({circular:!0});zl({circular:!0,strict:!0});zl({createInternalComparator:function(){return fu}});zl({strict:!0,createInternalComparator:function(){return fu}});zl({circular:!0,createInternalComparator:function(){return fu}});zl({circular:!0,createInternalComparator:function(){return fu},strict:!0});function zl(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=y_e(e),c=v_e(l),u=n?n(c):x_e(c);return b_e({circular:r,comparator:c,createState:a,equals:u,strict:o})}function __e(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function dI(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):__e(a)};requestAnimationFrame(n)}function tj(e){"@babel/helpers - typeof";return tj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tj(e)}function S_e(e){return C_e(e)||N_e(e)||k_e(e)||j_e()}function j_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k_e(e,t){if(e){if(typeof e=="string")return fI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fI(e,t)}}function fI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function N_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function C_e(e){if(Array.isArray(e))return e}function E_e(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=S_e(o),c=l[0],u=l.slice(1);if(typeof c=="number"){dI(a.bind(null,u),c);return}a(c),dI(a.bind(null,u));return}tj(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function _p(e){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_p(e)}function hI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hI(Object(r),!0).forEach(function(n){CF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CF(e,t,r){return t=A_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A_e(e){var t=P_e(e,"string");return _p(t)==="symbol"?t:String(t)}function P_e(e,t){if(_p(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_p(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var T_e=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},O_e=function(t){return t},I_e=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},vm=function(t,r){return Object.keys(r).reduce(function(n,a){return mI(mI({},n),{},CF({},a,t(a,r[a])))},{})},pI=function(t,r,n){return t.map(function(a){return"".concat(I_e(a)," ").concat(r,"ms ").concat(n)}).join(",")};function M_e(e,t){return D_e(e)||$_e(e,t)||EF(e,t)||R_e()}function R_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function D_e(e){if(Array.isArray(e))return e}function L_e(e){return U_e(e)||B_e(e)||EF(e)||F_e()}function F_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EF(e,t){if(e){if(typeof e=="string")return rj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rj(e,t)}}function B_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function U_e(e){if(Array.isArray(e))return rj(e)}function rj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $0=1e-4,AF=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},PF=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},gI=function(t,r){return function(n){var a=AF(t,r);return PF(a,n)}},q_e=function(t,r){return function(n){var a=AF(t,r),i=[].concat(L_e(a.map(function(o,l){return o*l}).slice(1)),[0]);return PF(i,n)}},vI=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),d=M_e(u,4);a=d[0],i=d[1],o=d[2],l=d[3]}}}var f=gI(a,o),m=gI(i,l),p=q_e(a,o),v=function(y){return y>1?1:y<0?0:y},g=function(y){for(var w=y>1?1:y,x=w,_=0;_<8;++_){var S=f(x)-w,k=p(x);if(Math.abs(S-w)<$0||k<$0)return m(x);x=v(x-S/k)}return m(x)};return g.isStepper=!1,g},z_e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,f,m){var p=-(d-f)*n,v=m*i,g=m+(p-v)*l/1e3,b=m*l/1e3+d;return Math.abs(b-f)<$0&&Math.abs(g)<$0?[f,0]:[b,g]};return c.isStepper=!0,c.dt=l,c},W_e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return vI(a);case"spring":return z_e();default:if(a.split("(")[0]==="cubic-bezier")return vI(a)}return typeof a=="function"?a:null};function Sp(e){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sp(e)}function yI(e){return K_e(e)||V_e(e)||TF(e)||H_e()}function H_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function K_e(e){if(Array.isArray(e))return aj(e)}function xI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xI(Object(r),!0).forEach(function(n){nj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nj(e,t,r){return t=G_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G_e(e){var t=Y_e(e,"string");return Sp(t)==="symbol"?t:String(t)}function Y_e(e,t){if(Sp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Sp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X_e(e,t){return Z_e(e)||J_e(e,t)||TF(e,t)||Q_e()}function Q_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TF(e,t){if(e){if(typeof e=="string")return aj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aj(e,t)}}function aj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function J_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Z_e(e){if(Array.isArray(e))return e}var D0=function(t,r,n){return t+(r-t)*n},ij=function(t){var r=t.from,n=t.to;return r!==n},eSe=function e(t,r,n){var a=vm(function(i,o){if(ij(o)){var l=t(o.from,o.to,o.velocity),c=X_e(l,2),u=c[0],d=c[1];return Fn(Fn({},o),{},{from:u,velocity:d})}return o},r);return n<1?vm(function(i,o){return ij(o)?Fn(Fn({},o),{},{velocity:D0(o.velocity,a[i].velocity,n),from:D0(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const tSe=function(e,t,r,n,a){var i=T_e(e,t),o=i.reduce(function(b,y){return Fn(Fn({},b),{},nj({},y,[e[y],t[y]]))},{}),l=i.reduce(function(b,y){return Fn(Fn({},b),{},nj({},y,{from:e[y],velocity:0,to:t[y]}))},{}),c=-1,u,d,f=function(){return null},m=function(){return vm(function(y,w){return w.from},l)},p=function(){return!Object.values(l).filter(ij).length},v=function(y){u||(u=y);var w=y-u,x=w/r.dt;l=eSe(r,l,x),a(Fn(Fn(Fn({},e),t),m())),u=y,p()||(c=requestAnimationFrame(f))},g=function(y){d||(d=y);var w=(y-d)/n,x=vm(function(S,k){return D0.apply(void 0,yI(k).concat([r(w)]))},o);if(a(Fn(Fn(Fn({},e),t),x)),w<1)c=requestAnimationFrame(f);else{var _=vm(function(S,k){return D0.apply(void 0,yI(k).concat([r(1)]))},o);a(Fn(Fn(Fn({},e),t),_))}};return f=r.isStepper?v:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function uf(e){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uf(e)}var rSe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function nSe(e,t){if(e==null)return{};var r=aSe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aSe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function r_(e){return lSe(e)||oSe(e)||sSe(e)||iSe()}function iSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sSe(e,t){if(e){if(typeof e=="string")return sj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sj(e,t)}}function oSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lSe(e){if(Array.isArray(e))return sj(e)}function sj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ci(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bI(Object(r),!0).forEach(function(n){Yh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yh(e,t,r){return t=OF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uSe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OF(n.key),n)}}function dSe(e,t,r){return t&&uSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function OF(e){var t=fSe(e,"string");return uf(t)==="symbol"?t:String(t)}function fSe(e,t){if(uf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(uf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oj(e,t)}function oj(e,t){return oj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},oj(e,t)}function mSe(e){var t=pSe();return function(){var n=L0(e),a;if(t){var i=L0(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return lj(this,a)}}function lj(e,t){if(t&&(uf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cj(e)}function cj(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pSe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L0(e){return L0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},L0(e)}var Ns=function(e){hSe(r,e);var t=mSe(r);function r(n,a){var i;cSe(this,r),i=t.call(this,n,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,m=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(cj(i)),i.changeStyle=i.changeStyle.bind(cj(i)),!l||p<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:d}),lj(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof m=="function")return i.state={style:u},lj(i);i.state={style:c?Yh({},c,u):u}}else i.state={style:{}};return i}return dSe(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,m=this.state.style;if(l){if(!o){var p={style:c?Yh({},c,d):d};this.state&&m&&(c&&m[c]!==d||!c&&m!==d)&&this.setState(p);return}if(!(w_e(a.to,d)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=v||u?f:a.to;if(this.state&&m){var b={style:c?Yh({},c,g):g};(c&&m[c]!==g||!c&&m!==g)&&this.setState(b)}this.runAnimation(Ci(Ci({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,m=a.onAnimationStart,p=tSe(o,l,W_e(u),c,this.changeStyle),v=function(){i.stopJSAnimation=p()};this.manager.start([m,d,v,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,f=u.duration,m=f===void 0?0:f,p=function(g,b,y){if(y===0)return g;var w=b.duration,x=b.easing,_=x===void 0?"ease":x,S=b.style,k=b.properties,C=b.onAnimationEnd,j=y>0?o[y-1]:b,N=k||Object.keys(S);if(typeof _=="function"||_==="spring")return[].concat(r_(g),[i.runJSAnimation.bind(i,{from:j.style,to:S,duration:w,easing:_}),w]);var A=pI(N,w,_),P=Ci(Ci(Ci({},j.style),S),{},{transition:A});return[].concat(r_(g),[P,w,C]).filter(O_e)};return this.manager.start([c].concat(r_(o.reduce(p,[d,Math.max(m,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=E_e());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,m=a.steps,p=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(a);return}if(m.length>1){this.runStepAnimation(a);return}var g=l?Yh({},l,c):c,b=pI(Object.keys(g),o,u);v.start([d,i,Ci(Ci({},g),{},{transition:b}),o,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=nSe(a,rSe),u=h.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var f=function(p){var v=p.props,g=v.style,b=g===void 0?{}:g,y=v.className,w=h.cloneElement(p,Ci(Ci({},c),{},{style:Ci(Ci({},b),d),className:y}));return w};return u===1?f(h.Children.only(i)):V.createElement("div",null,h.Children.map(i,function(m){return f(m)}))}}]),r}(h.PureComponent);Ns.displayName="Animate";Ns.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ns.propTypes={from:hr.oneOfType([hr.object,hr.string]),to:hr.oneOfType([hr.object,hr.string]),attributeName:hr.string,duration:hr.number,begin:hr.number,easing:hr.oneOfType([hr.string,hr.func]),steps:hr.arrayOf(hr.shape({duration:hr.number.isRequired,style:hr.object.isRequired,easing:hr.oneOfType([hr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),hr.func]),properties:hr.arrayOf("string"),onAnimationEnd:hr.func})),children:hr.oneOfType([hr.node,hr.func]),isActive:hr.bool,canBegin:hr.bool,onAnimationEnd:hr.func,shouldReAnimate:hr.bool,onAnimationStart:hr.func,onAnimationReStart:hr.func};function jp(e){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jp(e)}function F0(){return F0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F0.apply(this,arguments)}function gSe(e,t){return bSe(e)||xSe(e,t)||ySe(e,t)||vSe()}function vSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ySe(e,t){if(e){if(typeof e=="string")return wI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wI(e,t)}}function wI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function bSe(e){if(Array.isArray(e))return e}function _I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function SI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_I(Object(r),!0).forEach(function(n){wSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_I(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wSe(e,t,r){return t=_Se(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Se(e){var t=SSe(e,"string");return jp(t)=="symbol"?t:t+""}function SSe(e,t){if(jp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jI=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],m=0,p=4;m<p;m++)f[m]=i[m]>o?o:i[m];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-l*f[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var v=Math.min(o,i);d="M ".concat(t,",").concat(r+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+c*v,",").concat(r,`
            L `).concat(t+n-c*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*v,`
            L `).concat(t+n,",").concat(r+a-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+n-c*v,",").concat(r+a,`
            L `).concat(t+c*v,",").concat(r+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t,",").concat(r+a-l*v," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},jSe=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(o,o+c),m=Math.max(o,o+c);return n>=u&&n<=d&&a>=f&&a<=m}return!1},kSe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},FC=function(t){var r=SI(SI({},kSe),t),n=h.useRef(),a=h.useState(-1),i=gSe(a,2),o=i[0],l=i[1];h.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&l(_)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,m=r.radius,p=r.className,v=r.animationEasing,g=r.animationDuration,b=r.animationBegin,y=r.isAnimationActive,w=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var x=qt("recharts-rectangle",p);return w?V.createElement(Ns,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:g,animationEasing:v,isActive:w},function(_){var S=_.width,k=_.height,C=_.x,j=_.y;return V.createElement(Ns,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:g,isActive:y,easing:v},V.createElement("path",F0({},xt(r,!0),{className:x,d:jI(C,j,S,k,m),ref:n})))}):V.createElement("path",F0({},xt(r,!0),{className:x,d:jI(c,u,d,f,m)}))},NSe=["points","className","baseLinePoints","connectNulls"];function ld(){return ld=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ld.apply(this,arguments)}function CSe(e,t){if(e==null)return{};var r=ESe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ESe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function kI(e){return OSe(e)||TSe(e)||PSe(e)||ASe()}function ASe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PSe(e,t){if(e){if(typeof e=="string")return uj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uj(e,t)}}function TSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function OSe(e){if(Array.isArray(e))return uj(e)}function uj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var NI=function(t){return t&&t.x===+t.x&&t.y===+t.y},ISe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){NI(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),NI(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},ym=function(t,r){var n=ISe(t);r&&(n=[n.reduce(function(i,o){return[].concat(kI(i),kI(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},MSe=function(t,r,n){var a=ym(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(ym(r.reverse(),n).slice(1))},RSe=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,o=CSe(t,NSe);if(!r||!r.length)return null;var l=qt("recharts-polygon",n);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=MSe(r,a,i);return V.createElement("g",{className:l},V.createElement("path",ld({},xt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?V.createElement("path",ld({},xt(o,!0),{fill:"none",d:ym(r,i)})):null,c?V.createElement("path",ld({},xt(o,!0),{fill:"none",d:ym(a,i)})):null)}var d=ym(r,i);return V.createElement("path",ld({},xt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function dj(){return dj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dj.apply(this,arguments)}var Yb=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=qt("recharts-dot",i);return r===+r&&n===+n&&a===+a?h.createElement("circle",dj({},xt(t,!1),s0(t),{className:o,cx:r,cy:n,r:a})):null};function kp(e){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kp(e)}var $Se=["x","y","top","left","width","height","className"];function fj(){return fj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fj.apply(this,arguments)}function CI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function DSe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CI(Object(r),!0).forEach(function(n){LSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LSe(e,t,r){return t=FSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FSe(e){var t=BSe(e,"string");return kp(t)=="symbol"?t:t+""}function BSe(e,t){if(kp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function USe(e,t){if(e==null)return{};var r=qSe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qSe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var zSe=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},WSe=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,m=t.height,p=m===void 0?0:m,v=t.className,g=USe(t,$Se),b=DSe({x:n,y:i,top:l,left:u,width:f,height:p},g);return!Ye(n)||!Ye(i)||!Ye(f)||!Ye(p)||!Ye(l)||!Ye(u)?null:V.createElement("path",fj({},xt(b,!0),{className:qt("recharts-cross",v),d:zSe(n,i,f,p,l,u)}))},HSe=Wb,VSe=W8,KSe=Ps;function GSe(e,t){return e&&e.length?HSe(e,KSe(t),VSe):void 0}var YSe=GSe;const XSe=dr(YSe);var QSe=Wb,JSe=Ps,ZSe=H8;function e2e(e,t){return e&&e.length?QSe(e,JSe(t),ZSe):void 0}var t2e=e2e;const r2e=dr(t2e);var n2e=["cx","cy","angle","ticks","axisLine"],a2e=["ticks","tick","angle","tickFormatter","stroke"];function df(e){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},df(e)}function xm(){return xm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xm.apply(this,arguments)}function EI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EI(Object(r),!0).forEach(function(n){Xb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AI(e,t){if(e==null)return{};var r=i2e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function i2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function s2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MF(n.key),n)}}function o2e(e,t,r){return t&&PI(e.prototype,t),r&&PI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l2e(e,t,r){return t=B0(t),c2e(e,IF()?Reflect.construct(t,r||[],B0(e).constructor):t.apply(e,r))}function c2e(e,t){if(t&&(df(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u2e(e)}function u2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IF=function(){return!!e})()}function B0(e){return B0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},B0(e)}function d2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hj(e,t)}function hj(e,t){return hj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},hj(e,t)}function Xb(e,t,r){return t=MF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MF(e){var t=f2e(e,"string");return df(t)=="symbol"?t:t+""}function f2e(e,t){if(df(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qb=function(e){function t(){return s2e(this,t),l2e(this,t,arguments)}return d2e(t,e),o2e(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Cr(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=XSe(l,function(d){return d.coordinate||0}),u=r2e(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=AI(n,n2e),d=l.reduce(function(v,g){return[Math.min(v[0],g.coordinate),Math.max(v[1],g.coordinate)]},[1/0,-1/0]),f=Cr(a,i,d[0],o),m=Cr(a,i,d[1],o),p=tc(tc(tc({},xt(u,!1)),{},{fill:"none"},xt(c,!1)),{},{x1:f.x,y1:f.y,x2:m.x,y2:m.y});return V.createElement("line",xm({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=AI(a,a2e),f=this.getTickTextAnchor(),m=xt(d,!1),p=xt(o,!1),v=i.map(function(g,b){var y=n.getTickValueCoord(g),w=tc(tc(tc(tc({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(y.x,", ").concat(y.y,")")},m),{},{stroke:"none",fill:u},p),{},{index:b},y),{},{payload:g});return V.createElement(tr,xm({className:qt("recharts-polar-radius-axis-tick",xF(o)),key:"tick-".concat(g.coordinate)},Yc(n.props,g,b)),t.renderTickItem(o,w,c?c(g.value,b):g.value))});return V.createElement(tr,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:V.createElement(tr,{className:qt("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),Tn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return V.isValidElement(n)?o=V.cloneElement(n,a):Tt(n)?o=n(a):o=V.createElement(Xc,xm({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(h.PureComponent);Xb(Qb,"displayName","PolarRadiusAxis");Xb(Qb,"axisType","radiusAxis");Xb(Qb,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ff(e){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ff(e)}function pc(){return pc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pc.apply(this,arguments)}function TI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TI(Object(r),!0).forEach(function(n){Jb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$F(n.key),n)}}function m2e(e,t,r){return t&&OI(e.prototype,t),r&&OI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function p2e(e,t,r){return t=U0(t),g2e(e,RF()?Reflect.construct(t,r||[],U0(e).constructor):t.apply(e,r))}function g2e(e,t){if(t&&(ff(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v2e(e)}function v2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RF=function(){return!!e})()}function U0(e){return U0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},U0(e)}function y2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mj(e,t)}function mj(e,t){return mj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},mj(e,t)}function Jb(e,t,r){return t=$F(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $F(e){var t=x2e(e,"string");return ff(t)=="symbol"?t:t+""}function x2e(e,t){if(ff(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var b2e=Math.PI/180,II=1e-5,Zb=function(e){function t(){return h2e(this,t),p2e(this,t,arguments)}return y2e(t,e),m2e(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=Cr(i,o,l,n.coordinate),m=Cr(i,o,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*b2e),o;return i>II?o=a==="outer"?"start":"end":i<-II?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=rc(rc({},xt(this.props,!1)),{},{fill:"none"},xt(l,!1));if(c==="circle")return V.createElement(Yb,pc({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:o}));var d=this.props.ticks,f=d.map(function(m){return Cr(a,i,o,m.coordinate)});return V.createElement(RSe,pc({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=xt(this.props,!1),f=xt(o,!1),m=rc(rc({},d),{},{fill:"none"},xt(l,!1)),p=i.map(function(v,g){var b=n.getTickLineCoord(v),y=n.getTickTextAnchor(v),w=rc(rc(rc({textAnchor:y},d),{},{stroke:"none",fill:u},f),{},{index:g,payload:v,x:b.x2,y:b.y2});return V.createElement(tr,pc({className:qt("recharts-polar-angle-axis-tick",xF(o)),key:"tick-".concat(v.coordinate)},Yc(n.props,v,g)),l&&V.createElement("line",pc({className:"recharts-polar-angle-axis-tick-line"},m,b)),o&&t.renderTickItem(o,w,c?c(v.value,g):v.value))});return V.createElement(tr,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:V.createElement(tr,{className:qt("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return V.isValidElement(n)?o=V.cloneElement(n,a):Tt(n)?o=n(a):o=V.createElement(Xc,pc({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(h.PureComponent);Jb(Zb,"displayName","PolarAngleAxis");Jb(Zb,"axisType","angleAxis");Jb(Zb,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var w2e=B6,_2e=w2e(Object.getPrototypeOf,Object),S2e=_2e,j2e=No,k2e=S2e,N2e=Co,C2e="[object Object]",E2e=Function.prototype,A2e=Object.prototype,DF=E2e.toString,P2e=A2e.hasOwnProperty,T2e=DF.call(Object);function O2e(e){if(!N2e(e)||j2e(e)!=C2e)return!1;var t=k2e(e);if(t===null)return!0;var r=P2e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&DF.call(r)==T2e}var I2e=O2e;const M2e=dr(I2e);var R2e=No,$2e=Co,D2e="[object Boolean]";function L2e(e){return e===!0||e===!1||$2e(e)&&R2e(e)==D2e}var F2e=L2e;const B2e=dr(F2e);function Np(e){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Np(e)}function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q0.apply(this,arguments)}function U2e(e,t){return H2e(e)||W2e(e,t)||z2e(e,t)||q2e()}function q2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z2e(e,t){if(e){if(typeof e=="string")return MI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MI(e,t)}}function MI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function W2e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function H2e(e){if(Array.isArray(e))return e}function RI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $I(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RI(Object(r),!0).forEach(function(n){V2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V2e(e,t,r){return t=K2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K2e(e){var t=G2e(e,"string");return Np(t)=="symbol"?t:t+""}function G2e(e,t){if(Np(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DI=function(t,r,n,a,i){var o=n-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},Y2e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},X2e=function(t){var r=$I($I({},Y2e),t),n=h.useRef(),a=h.useState(-1),i=U2e(a,2),o=i[0],l=i[1];h.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var x=n.current.getTotalLength();x&&l(x)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,m=r.height,p=r.className,v=r.animationEasing,g=r.animationDuration,b=r.animationBegin,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||m!==+m||d===0&&f===0||m===0)return null;var w=qt("recharts-trapezoid",p);return y?V.createElement(Ns,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:m,x:c,y:u},duration:g,animationEasing:v,isActive:y},function(x){var _=x.upperWidth,S=x.lowerWidth,k=x.height,C=x.x,j=x.y;return V.createElement(Ns,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:g,easing:v},V.createElement("path",q0({},xt(r,!0),{className:w,d:DI(C,j,_,S,k),ref:n})))}):V.createElement("g",null,V.createElement("path",q0({},xt(r,!0),{className:w,d:DI(c,u,d,f,m)})))},Q2e=["option","shapeType","propTransformer","activeClassName","isActive"];function Cp(e){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}function J2e(e,t){if(e==null)return{};var r=Z2e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Z2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function LI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function z0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LI(Object(r),!0).forEach(function(n){eje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eje(e,t,r){return t=tje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tje(e){var t=rje(e,"string");return Cp(t)=="symbol"?t:t+""}function rje(e,t){if(Cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nje(e,t){return z0(z0({},t),e)}function aje(e,t){return e==="symbols"}function FI(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return V.createElement(FC,r);case"trapezoid":return V.createElement(X2e,r);case"sector":return V.createElement(_F,r);case"symbols":if(aje(t))return V.createElement(aC,r);break;default:return null}}function ije(e){return h.isValidElement(e)?e.props:e}function LF(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?nje:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=J2e(e,Q2e),u;if(h.isValidElement(t))u=h.cloneElement(t,z0(z0({},c),ije(t)));else if(Tt(t))u=t(c);else if(M2e(t)&&!B2e(t)){var d=a(t,c);u=V.createElement(FI,{shapeType:r,elementProps:d})}else{var f=c;u=V.createElement(FI,{shapeType:r,elementProps:f})}return l?V.createElement(tr,{className:o},u):u}function ew(e,t){return t!=null&&"trapezoids"in e.props}function tw(e,t){return t!=null&&"sectors"in e.props}function Ep(e,t){return t!=null&&"points"in e.props}function sje(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function oje(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function lje(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function cje(e,t){var r;return ew(e,t)?r=sje:tw(e,t)?r=oje:Ep(e,t)&&(r=lje),r}function uje(e,t){var r;return ew(e,t)?r="trapezoids":tw(e,t)?r="sectors":Ep(e,t)&&(r="points"),r}function dje(e,t){if(ew(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(tw(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Ep(e,t)?t.payload:{}}function fje(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=uje(r,t),i=dje(r,t),o=n.filter(function(c,u){var d=lf(i,c),f=r.props[a].filter(function(v){var g=cje(r,t);return g(v,t)}),m=r.props[a].indexOf(f[f.length-1]),p=u===m;return d&&p}),l=n.indexOf(o[o.length-1]);return l}var xy;function hf(e){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hf(e)}function cd(){return cd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cd.apply(this,arguments)}function BI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BI(Object(r),!0).forEach(function(n){li(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BF(n.key),n)}}function mje(e,t,r){return t&&UI(e.prototype,t),r&&UI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pje(e,t,r){return t=W0(t),gje(e,FF()?Reflect.construct(t,r||[],W0(e).constructor):t.apply(e,r))}function gje(e,t){if(t&&(hf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vje(e)}function vje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FF=function(){return!!e})()}function W0(e){return W0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},W0(e)}function yje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pj(e,t)}function pj(e,t){return pj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},pj(e,t)}function li(e,t,r){return t=BF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BF(e){var t=xje(e,"string");return hf(t)=="symbol"?t:t+""}function xje(e,t){if(hf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ao=function(e){function t(r){var n;return hje(this,t),n=pje(this,t,[r]),li(n,"pieRef",null),li(n,"sectorRefs",[]),li(n,"id",eh("recharts-pie-")),li(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Tt(a)&&a()}),li(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Tt(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return yje(t,e),mje(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=xt(this.props,!1),f=xt(o,!1),m=xt(l,!1),p=o&&o.offsetRadius||20,v=n.map(function(g,b){var y=(g.startAngle+g.endAngle)/2,w=Cr(g.cx,g.cy,g.outerRadius+p,y),x=jr(jr(jr(jr({},d),g),{},{stroke:"none"},f),{},{index:b,textAnchor:t.getTextAnchor(w.x,g.cx)},w),_=jr(jr(jr(jr({},d),g),{},{fill:"none",stroke:g.fill},m),{},{index:b,points:[Cr(g.cx,g.cy,g.outerRadius,y),w]}),S=c;return zt(c)&&zt(u)?S="value":zt(c)&&(S=u),V.createElement(tr,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(b)},l&&t.renderLabelLineItem(l,_,"line"),t.renderLabelItem(o,x,wn(g,S)))});return V.createElement(tr,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(d),m=c&&a.hasActiveIndex()?c:null,p=f?o:m,v=jr(jr({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return V.createElement(tr,cd({ref:function(b){b&&!a.sectorRefs.includes(b)&&a.sectorRefs.push(b)},tabIndex:-1,className:"recharts-pie-sector"},Yc(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),V.createElement(LF,cd({option:p,isActive:f,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,m=f.prevSectors,p=f.prevIsAnimationActive;return V.createElement(Ns,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var g=v.t,b=[],y=i&&i[0],w=y.startAngle;return i.forEach(function(x,_){var S=m&&m[_],k=_>0?za(x,"paddingAngle",0):0;if(S){var C=pa(S.endAngle-S.startAngle,x.endAngle-x.startAngle),j=jr(jr({},x),{},{startAngle:w+k,endAngle:w+C(g)+k});b.push(j),w=j.endAngle}else{var N=x.endAngle,A=x.startAngle,P=pa(0,N-A),T=P(g),L=jr(jr({},x),{},{startAngle:w+k,endAngle:w+T+k});b.push(L),w=L.endAngle}}),V.createElement(tr,null,n.renderSectorsStatically(b))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!lf(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,m=a.outerRadius,p=a.isAnimationActive,v=this.state.isAnimationFinished;if(i||!o||!o.length||!Ye(u)||!Ye(d)||!Ye(f)||!Ye(m))return null;var g=qt("recharts-pie",l);return V.createElement(tr,{tabIndex:this.props.rootTabIndex,className:g,ref:function(y){n.pieRef=y}},this.renderSectors(),c&&this.renderLabels(o),Tn.renderCallByParent(this.props,null,!1),(!p||v)&&so.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(V.isValidElement(n))return V.cloneElement(n,a);if(Tt(n))return n(a);var o=qt("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return V.createElement(Nd,cd({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,i){if(V.isValidElement(n))return V.cloneElement(n,a);var o=i;if(Tt(n)&&(o=n(a),V.isValidElement(o)))return o;var l=qt("recharts-pie-label-text",typeof n!="boolean"&&!Tt(n)?n.className:"");return V.createElement(Xc,cd({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(h.PureComponent);xy=Ao;li(Ao,"displayName","Pie");li(Ao,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!ys.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});li(Ao,"parseDeltaAngle",function(e,t){var r=ia(t-e),n=Math.min(Math.abs(t-e),360);return r*n});li(Ao,"getRealPieData",function(e){var t=e.data,r=e.children,n=xt(e,!1),a=hi(r,Db);return t&&t.length?t.map(function(i,o){return jr(jr(jr({payload:i},n),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return jr(jr({},n),i.props)}):[]});li(Ao,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,o=yF(a,i),l=n+sa(e.cx,a,a/2),c=r+sa(e.cy,i,i/2),u=sa(e.innerRadius,o,0),d=sa(e.outerRadius,o,o*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});li(Ao,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?jr(jr({},t.type.defaultProps),t.props):t.props,a=xy.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,m=n.tooltipType,p=Math.abs(n.minAngle),v=xy.parseCoordinateOfPie(n,r),g=xy.parseDeltaAngle(o,l),b=Math.abs(g),y=u;zt(u)&&zt(f)?(zi(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):zt(u)&&(zi(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=f);var w=a.filter(function(j){return wn(j,y,0)!==0}).length,x=(b>=360?w:w-1)*c,_=b-w*p-x,S=a.reduce(function(j,N){var A=wn(N,y,0);return j+(Ye(A)?A:0)},0),k;if(S>0){var C;k=a.map(function(j,N){var A=wn(j,y,0),P=wn(j,d,N),T=(Ye(A)?A:0)/S,L;N?L=C.endAngle+ia(g)*c*(A!==0?1:0):L=o;var U=L+ia(g)*((A!==0?p:0)+T*_),D=(L+U)/2,H=(v.innerRadius+v.outerRadius)/2,B=[{name:P,value:A,payload:j,dataKey:y,type:m}],M=Cr(v.cx,v.cy,H,D);return C=jr(jr(jr({percent:T,cornerRadius:i,name:P,tooltipPayload:B,midAngle:D,middleRadius:H,tooltipPosition:M},j),v),{},{value:wn(j,y),startAngle:L,endAngle:U,payload:j,paddingAngle:ia(g)*c}),C})}return jr(jr({},v),{},{sectors:k,data:a})});var bje=Math.ceil,wje=Math.max;function _je(e,t,r,n){for(var a=-1,i=wje(bje((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var Sje=_je,jje=i8,qI=1/0,kje=17976931348623157e292;function Nje(e){if(!e)return e===0?e:0;if(e=jje(e),e===qI||e===-qI){var t=e<0?-1:1;return t*kje}return e===e?e:0}var UF=Nje,Cje=Sje,Eje=$b,n_=UF;function Aje(e){return function(t,r,n){return n&&typeof n!="number"&&Eje(t,r,n)&&(r=n=void 0),t=n_(t),r===void 0?(r=t,t=0):r=n_(r),n=n===void 0?t<r?1:-1:n_(n),Cje(t,r,n,e)}}var Pje=Aje,Tje=Pje,Oje=Tje(),Ije=Oje;const H0=dr(Ije);function Ap(e){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(e)}function zI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function WI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zI(Object(r),!0).forEach(function(n){qF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qF(e,t,r){return t=Mje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mje(e){var t=Rje(e,"string");return Ap(t)=="symbol"?t:t+""}function Rje(e,t){if(Ap(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $je=["Webkit","Moz","O","ms"],Dje=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=$je.reduce(function(i,o){return WI(WI({},i),{},qF({},o+n,r))},{});return a[t]=r,a};function mf(e){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mf(e)}function V0(){return V0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V0.apply(this,arguments)}function HI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function a_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HI(Object(r),!0).forEach(function(n){Pa(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WF(n.key),n)}}function Fje(e,t,r){return t&&VI(e.prototype,t),r&&VI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bje(e,t,r){return t=K0(t),Uje(e,zF()?Reflect.construct(t,r||[],K0(e).constructor):t.apply(e,r))}function Uje(e,t){if(t&&(mf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qje(e)}function qje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zF=function(){return!!e})()}function K0(e){return K0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},K0(e)}function zje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gj(e,t)}function gj(e,t){return gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},gj(e,t)}function Pa(e,t,r){return t=WF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WF(e){var t=Wje(e,"string");return mf(t)=="symbol"?t:t+""}function Wje(e,t){if(mf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hje=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=pm().domain(H0(0,c)).range([i,i+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},KI=function(t){return t.changedTouches&&!!t.changedTouches.length},pf=function(e){function t(r){var n;return Lje(this,t),n=Bje(this,t,[r]),Pa(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Pa(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Pa(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),Pa(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Pa(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Pa(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Pa(n,"handleSlideDragStart",function(a){var i=KI(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return zje(t,e),Fje(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,i),m=Math.max(a,i),p=t.getIndexInRange(o,f),v=t.getIndexInRange(o,m);return{startIndex:p-p%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=wn(i[n],l,n);return Tt(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,m=c.startIndex,p=c.endIndex,v=c.onChange,g=n.pageX-i;g>0?g=Math.min(g,u+d-f-l,u+d-f-o):g<0&&(g=Math.max(g,u-o,u-l));var b=this.getIndex({startX:o+g,endX:l+g});(b.startIndex!==m||b.endIndex!==p)&&v&&v(b),this.setState({startX:o+g,endX:l+g,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=KI(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,f=d.x,m=d.width,p=d.travellerWidth,v=d.onChange,g=d.gap,b=d.data,y={startX:this.state.startX,endX:this.state.endX},w=n.pageX-i;w>0?w=Math.min(w,f+m-p-u):w<0&&(w=Math.max(w,f-u)),y[o]=u+w;var x=this.getIndex(y),_=x.startIndex,S=x.endIndex,k=function(){var j=b.length-1;return o==="startX"&&(l>c?_%g===0:S%g===0)||l<c&&S===j||o==="endX"&&(l>c?S%g===0:_%g===0)||l>c&&S===j};this.setState(Pa(Pa({},o,u+w),"brushMoveStartX",n.pageX),function(){v&&k()&&v(x)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var m=f+n;if(!(m===-1||m>=l.length)){var p=l[m];a==="startX"&&p>=u||a==="endX"&&p<=c||this.setState(Pa({},a,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return V.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=h.Children.only(u);return f?V.cloneElement(f,{x:a,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,m=c.traveller,p=c.ariaLabel,v=c.data,g=c.startIndex,b=c.endIndex,y=Math.max(n,this.props.x),w=a_(a_({},xt(this.props,!1)),{},{x:y,y:u,width:d,height:f}),x=p||"Min value: ".concat((i=v[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=v[b])===null||o===void 0?void 0:o.name);return V.createElement(tr,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,w))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return V.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,m=d.endX,p=5,v={pointerEvents:"none",fill:u};return V.createElement(tr,{className:"recharts-brush-texts"},V.createElement(Xc,V0({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,m)-p,y:o+l/2},v),this.getTextOfTick(a)),V.createElement(Xc,V0({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,m)+c+p,y:o+l/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,m=this.state,p=m.startX,v=m.endX,g=m.isTextActive,b=m.isSlideMoving,y=m.isTravellerMoving,w=m.isTravellerFocused;if(!a||!a.length||!Ye(l)||!Ye(c)||!Ye(u)||!Ye(d)||u<=0||d<=0)return null;var x=qt("recharts-brush",i),_=V.Children.count(o)===1,S=Dje("userSelect","none");return V.createElement(tr,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(p,v),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(v,"endX"),(g||b||y||w||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return V.createElement(V.Fragment,null,V.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),V.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),V.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return V.isValidElement(n)?i=V.cloneElement(n,a):Tt(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return a_({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?Hje({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var m=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])}(h.PureComponent);Pa(pf,"displayName","Brush");Pa(pf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Vje=dC;function Kje(e,t){var r;return Vje(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var Gje=Kje,Yje=O6,Xje=Ps,Qje=Gje,Jje=ka,Zje=$b;function eke(e,t,r){var n=Jje(e)?Yje:Qje;return r&&Zje(e,t,r)&&(t=void 0),n(e,Xje(t))}var tke=eke;const rke=dr(tke);var bs=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},GI=e8;function nke(e,t,r){t=="__proto__"&&GI?GI(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var ake=nke,ike=ake,ske=J6,oke=Ps;function lke(e,t){var r={};return t=oke(t),ske(e,function(n,a,i){ike(r,a,t(n,a,i))}),r}var cke=lke;const uke=dr(cke);function dke(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var fke=dke,hke=dC;function mke(e,t){var r=!0;return hke(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var pke=mke,gke=fke,vke=pke,yke=Ps,xke=ka,bke=$b;function wke(e,t,r){var n=xke(e)?gke:vke;return r&&bke(e,t,r)&&(t=void 0),n(e,yke(t))}var _ke=wke;const HF=dr(_ke);var Ske=["x","y"];function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function vj(){return vj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vj.apply(this,arguments)}function YI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YI(Object(r),!0).forEach(function(n){jke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jke(e,t,r){return t=kke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kke(e){var t=Nke(e,"string");return Pp(t)=="symbol"?t:t+""}function Nke(e,t){if(Pp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cke(e,t){if(e==null)return{};var r=Eke(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Eke(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ake(e,t){var r=e.x,n=e.y,a=Cke(e,Ske),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),m=parseInt(f,10);return Rh(Rh(Rh(Rh(Rh({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function XI(e){return V.createElement(LF,vj({shapeType:"rectangle",propTransformer:Ake,activeClassName:"recharts-active-bar"},e))}var Pke=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=Ye(n)||toe(n);return i?t(n,a):(i||Jc(),r)}},Tke=["value","background"],VF;function gf(e){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gf(e)}function Oke(e,t){if(e==null)return{};var r=Ike(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ike(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function G0(){return G0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G0.apply(this,arguments)}function QI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QI(Object(r),!0).forEach(function(n){gl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GF(n.key),n)}}function Rke(e,t,r){return t&&JI(e.prototype,t),r&&JI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $ke(e,t,r){return t=Y0(t),Dke(e,KF()?Reflect.construct(t,r||[],Y0(e).constructor):t.apply(e,r))}function Dke(e,t){if(t&&(gf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lke(e)}function Lke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KF=function(){return!!e})()}function Y0(e){return Y0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Y0(e)}function Fke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yj(e,t)}function yj(e,t){return yj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},yj(e,t)}function gl(e,t,r){return t=GF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GF(e){var t=Bke(e,"string");return gf(t)=="symbol"?t:t+""}function Bke(e,t){if(gf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dg=function(e){function t(){var r;Mke(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=$ke(this,t,[].concat(a)),gl(r,"state",{isAnimationFinished:!1}),gl(r,"id",eh("recharts-bar-")),gl(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),gl(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Fke(t,e),Rke(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=xt(this.props,!1);return n&&n.map(function(f,m){var p=m===c,v=p?u:o,g=cn(cn(cn({},d),f),{},{isActive:p,option:v,index:m,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return V.createElement(tr,G0({className:"recharts-bar-rectangle"},Yc(a.props,f,m),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(m)}),V.createElement(XI,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,m=this.state.prevData;return V.createElement(Ns,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var v=p.t,g=i.map(function(b,y){var w=m&&m[y];if(w){var x=pa(w.x,b.x),_=pa(w.y,b.y),S=pa(w.width,b.width),k=pa(w.height,b.height);return cn(cn({},b),{},{x:x(v),y:_(v),width:S(v),height:k(v)})}if(o==="horizontal"){var C=pa(0,b.height),j=C(v);return cn(cn({},b),{},{y:b.y+b.height-j,height:j})}var N=pa(0,b.width),A=N(v);return cn(cn({},b),{},{width:A})});return V.createElement(tr,null,n.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!lf(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=xt(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,m=Oke(u,Tke);if(!f)return null;var p=cn(cn(cn(cn(cn({},m),{},{fill:"#eee"},f),c),Yc(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return V.createElement(XI,G0({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},p))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=hi(d,Gb);if(!f)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,p=function(b,y){var w=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:w,errorVal:wn(b,y)}},v={clipPath:n?"url(#clipPath-".concat(a,")"):null};return V.createElement(tr,v,f.map(function(g){return V.cloneElement(g,{key:"error-bar-".concat(a,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:m,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,m=n.height,p=n.isAnimationActive,v=n.background,g=n.id;if(a||!i||!i.length)return null;var b=this.state.isAnimationFinished,y=qt("recharts-bar",o),w=l&&l.allowDataOverflow,x=c&&c.allowDataOverflow,_=w||x,S=zt(g)?this.id:g;return V.createElement(tr,{className:y},w||x?V.createElement("defs",null,V.createElement("clipPath",{id:"clipPath-".concat(S)},V.createElement("rect",{x:w?u:u-f/2,y:x?d:d-m/2,width:w?f:f*2,height:x?m:m*2}))):null,V.createElement(tr,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(S,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,S),(!p||b)&&so.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(h.PureComponent);VF=dg;gl(dg,"displayName","Bar");gl(dg,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ys.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});gl(dg,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,m=e.offset,p=bwe(n,r);if(!p)return null;var v=t.layout,g=r.type.defaultProps,b=g!==void 0?cn(cn({},g),r.props):r.props,y=b.dataKey,w=b.children,x=b.minPointSize,_=v==="horizontal"?o:i,S=u?_.scale.domain():null,k=Cwe({numericAxis:_}),C=hi(w,Db),j=f.map(function(N,A){var P,T,L,U,D,H;u?P=wwe(u[d+A],S):(P=wn(N,y),Array.isArray(P)||(P=[k,P]));var B=Pke(x,VF.defaultProps.minPointSize)(P[1],A);if(v==="horizontal"){var M,$=[o.scale(P[0]),o.scale(P[1])],re=$[0],ie=$[1];T=U5({axis:i,ticks:l,bandSize:a,offset:p.offset,entry:N,index:A}),L=(M=ie??re)!==null&&M!==void 0?M:void 0,U=p.size;var q=re-ie;if(D=Number.isNaN(q)?0:q,H={x:T,y:o.y,width:U,height:o.height},Math.abs(B)>0&&Math.abs(D)<Math.abs(B)){var K=ia(D||B)*(Math.abs(B)-Math.abs(D));L-=K,D+=K}}else{var ne=[i.scale(P[0]),i.scale(P[1])],ae=ne[0],_e=ne[1];if(T=ae,L=U5({axis:o,ticks:c,bandSize:a,offset:p.offset,entry:N,index:A}),U=_e-ae,D=p.size,H={x:i.x,y:L,width:i.width,height:D},Math.abs(B)>0&&Math.abs(U)<Math.abs(B)){var pe=ia(U||B)*(Math.abs(B)-Math.abs(U));U+=pe}}return cn(cn(cn({},N),{},{x:T,y:L,width:U,height:D,value:u?P:P[1],payload:N,background:H},C&&C[A]&&C[A].props),{},{tooltipPayload:[gF(r,N)],tooltipPosition:{x:T+U/2,y:L+D/2}})});return cn({data:j,layout:v},m)});function Tp(e){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tp(e)}function Uke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YF(n.key),n)}}function qke(e,t,r){return t&&ZI(e.prototype,t),r&&ZI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function e4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e4(Object(r),!0).forEach(function(n){rw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rw(e,t,r){return t=YF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YF(e){var t=zke(e,"string");return Tp(t)=="symbol"?t:t+""}function zke(e,t){if(Tp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wke=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},m=!!Oa(u,dg);return d.reduce(function(p,v){var g=r[v],b=g.orientation,y=g.domain,w=g.padding,x=w===void 0?{}:w,_=g.mirror,S=g.reversed,k="".concat(b).concat(_?"Mirror":""),C,j,N,A,P;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var T=y[1]-y[0],L=1/0,U=g.categoricalDomain.sort(aoe);if(U.forEach(function(ne,ae){ae>0&&(L=Math.min((ne||0)-(U[ae-1]||0),L))}),Number.isFinite(L)){var D=L/T,H=g.layout==="vertical"?n.height:n.width;if(g.padding==="gap"&&(C=D*H/2),g.padding==="no-gap"){var B=sa(t.barCategoryGap,D*H),M=D*H/2;C=M-B-(M-B)/H*B}}}a==="xAxis"?j=[n.left+(x.left||0)+(C||0),n.left+n.width-(x.right||0)-(C||0)]:a==="yAxis"?j=c==="horizontal"?[n.top+n.height-(x.bottom||0),n.top+(x.top||0)]:[n.top+(x.top||0)+(C||0),n.top+n.height-(x.bottom||0)-(C||0)]:j=g.range,S&&(j=[j[1],j[0]]);var $=fF(g,i,m),re=$.scale,ie=$.realScaleType;re.domain(y).range(j),hF(re);var q=mF(re,Di(Di({},g),{},{realScaleType:ie}));a==="xAxis"?(P=b==="top"&&!_||b==="bottom"&&_,N=n.left,A=f[k]-P*g.height):a==="yAxis"&&(P=b==="left"&&!_||b==="right"&&_,N=f[k]-P*g.width,A=n.top);var K=Di(Di(Di({},g),q),{},{realScaleType:ie,x:N,y:A,scale:re,width:a==="xAxis"?n.width:g.width,height:a==="yAxis"?n.height:g.height});return K.bandSize=I0(K,q),!g.hide&&a==="xAxis"?f[k]+=(P?-1:1)*K.height:g.hide||(f[k]+=(P?-1:1)*K.width),Di(Di({},p),{},rw({},v,K))},{})},XF=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},Hke=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return XF({x:r,y:n},{x:a,y:i})},QF=function(){function e(t){Uke(this,e),this.scale=t}return qke(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();rw(QF,"EPS",1e-4);var BC=function(t){var r=Object.keys(t).reduce(function(n,a){return Di(Di({},n),{},rw({},a,QF.create(t[a])))},{});return Di(Di({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return uke(a,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return HF(a,function(i,o){return r[o].isInRange(i)})}})};function Vke(e){return(e%180+180)%180}var Kke=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Vke(a),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Gke=Ps,Yke=sg,Xke=Mb;function Qke(e){return function(t,r,n){var a=Object(t);if(!Yke(t)){var i=Gke(r);t=Xke(t),r=function(l){return i(a[l],l,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var Jke=Qke,Zke=UF;function eNe(e){var t=Zke(e),r=t%1;return t===t?r?t-r:t:0}var tNe=eNe,rNe=V6,nNe=Ps,aNe=tNe,iNe=Math.max;function sNe(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:aNe(r);return a<0&&(a=iNe(n+a,0)),rNe(e,nNe(t),a)}var oNe=sNe,lNe=Jke,cNe=oNe,uNe=lNe(cNe),dNe=uNe;const fNe=dr(dNe);var hNe=ise(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),UC=h.createContext(void 0),qC=h.createContext(void 0),JF=h.createContext(void 0),ZF=h.createContext({}),eB=h.createContext(void 0),tB=h.createContext(0),rB=h.createContext(0),t4=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=hNe(i);return V.createElement(UC.Provider,{value:n},V.createElement(qC.Provider,{value:a},V.createElement(ZF.Provider,{value:i},V.createElement(JF.Provider,{value:d},V.createElement(eB.Provider,{value:o},V.createElement(tB.Provider,{value:u},V.createElement(rB.Provider,{value:c},l)))))))},mNe=function(){return h.useContext(eB)},nB=function(t){var r=h.useContext(UC);r==null&&Jc();var n=r[t];return n==null&&Jc(),n},pNe=function(){var t=h.useContext(UC);return al(t)},gNe=function(){var t=h.useContext(qC),r=fNe(t,function(n){return HF(n.domain,Number.isFinite)});return r||al(t)},aB=function(t){var r=h.useContext(qC);r==null&&Jc();var n=r[t];return n==null&&Jc(),n},vNe=function(){var t=h.useContext(JF);return t},yNe=function(){return h.useContext(ZF)},zC=function(){return h.useContext(rB)},WC=function(){return h.useContext(tB)};function vf(e){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vf(e)}function xNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bNe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sB(n.key),n)}}function wNe(e,t,r){return t&&bNe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _Ne(e,t,r){return t=X0(t),SNe(e,iB()?Reflect.construct(t,r||[],X0(e).constructor):t.apply(e,r))}function SNe(e,t){if(t&&(vf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jNe(e)}function jNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iB=function(){return!!e})()}function X0(e){return X0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},X0(e)}function kNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xj(e,t)}function xj(e,t){return xj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},xj(e,t)}function r4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function n4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r4(Object(r),!0).forEach(function(n){HC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HC(e,t,r){return t=sB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sB(e){var t=NNe(e,"string");return vf(t)=="symbol"?t:t+""}function NNe(e,t){if(vf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CNe(e,t){return TNe(e)||PNe(e,t)||ANe(e,t)||ENe()}function ENe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ANe(e,t){if(e){if(typeof e=="string")return a4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a4(e,t)}}function a4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function PNe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function TNe(e){if(Array.isArray(e))return e}function bj(){return bj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bj.apply(this,arguments)}var ONe=function(t,r){var n;return V.isValidElement(t)?n=V.cloneElement(t,r):Tt(t)?n=t(r):n=V.createElement("line",bj({},r,{className:"recharts-reference-line-line"})),n},INe=function(t,r,n,a,i,o,l,c,u){var d=i.x,f=i.y,m=i.width,p=i.height;if(n){var v=u.y,g=t.y.apply(v,{position:o});if(bs(u,"discard")&&!t.y.isInRange(g))return null;var b=[{x:d+m,y:g},{x:d,y:g}];return c==="left"?b.reverse():b}if(r){var y=u.x,w=t.x.apply(y,{position:o});if(bs(u,"discard")&&!t.x.isInRange(w))return null;var x=[{x:w,y:f+p},{x:w,y:f}];return l==="top"?x.reverse():x}if(a){var _=u.segment,S=_.map(function(k){return t.apply(k,{position:o})});return bs(u,"discard")&&rke(S,function(k){return!t.isInRange(k)})?null:S}return null};function MNe(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=mNe(),d=nB(a),f=aB(i),m=vNe();if(!u||!m)return null;zi(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=BC({x:d.scale,y:f.scale}),v=Sn(t),g=Sn(r),b=n&&n.length===2,y=INe(p,v,g,b,m,e.position,d.orientation,f.orientation,e);if(!y)return null;var w=CNe(y,2),x=w[0],_=x.x,S=x.y,k=w[1],C=k.x,j=k.y,N=bs(e,"hidden")?"url(#".concat(u,")"):void 0,A=n4(n4({clipPath:N},xt(e,!0)),{},{x1:_,y1:S,x2:C,y2:j});return V.createElement(tr,{className:qt("recharts-reference-line",l)},ONe(o,A),Tn.renderCallByParent(e,Hke({x1:_,y1:S,x2:C,y2:j})))}var VC=function(e){function t(){return xNe(this,t),_Ne(this,t,arguments)}return kNe(t,e),wNe(t,[{key:"render",value:function(){return V.createElement(MNe,this.props)}}])}(V.Component);HC(VC,"displayName","ReferenceLine");HC(VC,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function wj(){return wj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wj.apply(this,arguments)}function yf(e){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yf(e)}function i4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function s4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i4(Object(r),!0).forEach(function(n){nw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lB(n.key),n)}}function DNe(e,t,r){return t&&$Ne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function LNe(e,t,r){return t=Q0(t),FNe(e,oB()?Reflect.construct(t,r||[],Q0(e).constructor):t.apply(e,r))}function FNe(e,t){if(t&&(yf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BNe(e)}function BNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oB=function(){return!!e})()}function Q0(e){return Q0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q0(e)}function UNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_j(e,t)}function _j(e,t){return _j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_j(e,t)}function nw(e,t,r){return t=lB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lB(e){var t=qNe(e,"string");return yf(t)=="symbol"?t:t+""}function qNe(e,t){if(yf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zNe=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=BC({x:a.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return bs(t,"discard")&&!o.isInRange(l)?null:l},aw=function(e){function t(){return RNe(this,t),LNe(this,t,arguments)}return UNe(t,e),DNe(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=Sn(a),d=Sn(i);if(zi(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=zNe(this.props);if(!f)return null;var m=f.x,p=f.y,v=this.props,g=v.shape,b=v.className,y=bs(this.props,"hidden")?"url(#".concat(c,")"):void 0,w=s4(s4({clipPath:y},xt(this.props,!0)),{},{cx:m,cy:p});return V.createElement(tr,{className:qt("recharts-reference-dot",b)},t.renderDot(g,w),Tn.renderCallByParent(this.props,{x:m-o,y:p-o,width:2*o,height:2*o}))}}])}(V.Component);nw(aw,"displayName","ReferenceDot");nw(aw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});nw(aw,"renderDot",function(e,t){var r;return V.isValidElement(e)?r=V.cloneElement(e,t):Tt(e)?r=e(t):r=V.createElement(Yb,wj({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function Sj(){return Sj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sj.apply(this,arguments)}function xf(e){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xf(e)}function o4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function l4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o4(Object(r),!0).forEach(function(n){iw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HNe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uB(n.key),n)}}function VNe(e,t,r){return t&&HNe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function KNe(e,t,r){return t=J0(t),GNe(e,cB()?Reflect.construct(t,r||[],J0(e).constructor):t.apply(e,r))}function GNe(e,t){if(t&&(xf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YNe(e)}function YNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cB=function(){return!!e})()}function J0(e){return J0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},J0(e)}function XNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jj(e,t)}function jj(e,t){return jj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},jj(e,t)}function iw(e,t,r){return t=uB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uB(e){var t=QNe(e,"string");return xf(t)=="symbol"?t:t+""}function QNe(e,t){if(xf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JNe=function(t,r,n,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var m=BC({x:d.scale,y:f.scale}),p={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:n?m.y.apply(c,{position:"start"}):m.y.rangeMin},v={x:r?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:a?m.y.apply(u,{position:"end"}):m.y.rangeMax};return bs(i,"discard")&&(!m.isInRange(p)||!m.isInRange(v))?null:XF(p,v)},sw=function(e){function t(){return WNe(this,t),KNe(this,t,arguments)}return XNe(t,e),VNe(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;zi(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Sn(a),m=Sn(i),p=Sn(o),v=Sn(l),g=this.props.shape;if(!f&&!m&&!p&&!v&&!g)return null;var b=JNe(f,m,p,v,this.props);if(!b&&!g)return null;var y=bs(this.props,"hidden")?"url(#".concat(d,")"):void 0;return V.createElement(tr,{className:qt("recharts-reference-area",c)},t.renderRect(g,l4(l4({clipPath:y},xt(this.props,!0)),b)),Tn.renderCallByParent(this.props,b))}}])}(V.Component);iw(sw,"displayName","ReferenceArea");iw(sw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});iw(sw,"renderRect",function(e,t){var r;return V.isValidElement(e)?r=V.cloneElement(e,t):Tt(e)?r=e(t):r=V.createElement(FC,Sj({},t,{className:"recharts-reference-area-rect"})),r});function dB(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function ZNe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Kke(n,r)}function eCe(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function Z0(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function tCe(e,t){return dB(e,t+1)}function rCe(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,f=function(){var v=n==null?void 0:n[c];if(v===void 0)return{v:dB(n,u)};var g=c,b,y=function(){return b===void 0&&(b=r(v,g)),b},w=v.coordinate,x=c===0||Z0(e,w,y,d,l);x||(c=0,d=o,u+=1),x&&(d=w+e*(y()/2+a),c+=u)},m;u<=i.length;)if(m=f(),m)return m.v;return[]}function Op(e){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Op(e)}function c4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c4(Object(r),!0).forEach(function(n){nCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nCe(e,t,r){return t=aCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aCe(e){var t=iCe(e,"string");return Op(t)=="symbol"?t:t+""}function iCe(e,t){if(Op(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sCe(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(m){var p=i[m],v,g=function(){return v===void 0&&(v=r(p,m)),v};if(m===o-1){var b=e*(p.coordinate+e*g()/2-c);i[m]=p=Qn(Qn({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else i[m]=p=Qn(Qn({},p),{},{tickCoord:p.coordinate});var y=Z0(e,p.tickCoord,g,l,c);y&&(c=p.tickCoord-e*(g()/2+a),i[m]=Qn(Qn({},p),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function oCe(e,t,r,n,a,i){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=n[l-1],f=r(d,l-1),m=e*(d.coordinate+e*f/2-u);o[l-1]=d=Qn(Qn({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var p=Z0(e,d.tickCoord,function(){return f},c,u);p&&(u=d.tickCoord-e*(f/2+a),o[l-1]=Qn(Qn({},d),{},{isShow:!0}))}for(var v=i?l-1:l,g=function(w){var x=o[w],_,S=function(){return _===void 0&&(_=r(x,w)),_};if(w===0){var k=e*(x.coordinate-e*S()/2-c);o[w]=x=Qn(Qn({},x),{},{tickCoord:k<0?x.coordinate-k*e:x.coordinate})}else o[w]=x=Qn(Qn({},x),{},{tickCoord:x.coordinate});var C=Z0(e,x.tickCoord,S,c,u);C&&(c=x.tickCoord+e*(S()/2+a),o[w]=Qn(Qn({},x),{},{isShow:!0}))},b=0;b<v;b++)g(b);return o}function KC(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(Ye(c)||ys.isSsr)return tCe(a,typeof c=="number"&&Ye(c)?c:0);var m=[],p=l==="top"||l==="bottom"?"width":"height",v=d&&p==="width"?mm(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=function(x,_){var S=Tt(u)?u(x.value,_):x.value;return p==="width"?ZNe(mm(S,{fontSize:t,letterSpacing:r}),v,f):mm(S,{fontSize:t,letterSpacing:r})[p]},b=a.length>=2?ia(a[1].coordinate-a[0].coordinate):1,y=eCe(i,b,p);return c==="equidistantPreserveStart"?rCe(b,y,g,a,o):(c==="preserveStart"||c==="preserveStartEnd"?m=oCe(b,y,g,a,o,c==="preserveStartEnd"):m=sCe(b,y,g,a,o),m.filter(function(w){return w.isShow}))}var lCe=["viewBox"],cCe=["viewBox"],uCe=["ticks"];function bf(e){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bf(e)}function ud(){return ud=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ud.apply(this,arguments)}function u4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u4(Object(r),!0).forEach(function(n){GC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i_(e,t){if(e==null)return{};var r=dCe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dCe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hB(n.key),n)}}function hCe(e,t,r){return t&&d4(e.prototype,t),r&&d4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mCe(e,t,r){return t=ex(t),pCe(e,fB()?Reflect.construct(t,r||[],ex(e).constructor):t.apply(e,r))}function pCe(e,t){if(t&&(bf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gCe(e)}function gCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fB=function(){return!!e})()}function ex(e){return ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ex(e)}function vCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kj(e,t)}function kj(e,t){return kj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},kj(e,t)}function GC(e,t,r){return t=hB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hB(e){var t=yCe(e,"string");return bf(t)=="symbol"?t:t+""}function yCe(e,t){if(bf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oh=function(e){function t(r){var n;return fCe(this,t),n=mCe(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return vCe(t,e),hCe(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=i_(n,lCe),l=this.props,c=l.viewBox,u=i_(l,cCe);return!_d(i,c)||!_d(o,u)||!_d(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,m=a.tickMargin,p,v,g,b,y,w,x=f?-1:1,_=n.tickSize||d,S=Ye(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=v=n.coordinate,b=o+ +!f*c,g=b-x*_,w=g-x*m,y=S;break;case"left":g=b=n.coordinate,v=i+ +!f*l,p=v-x*_,y=p-x*m,w=S;break;case"right":g=b=n.coordinate,v=i+ +f*l,p=v+x*_,y=p+x*m,w=S;break;default:p=v=n.coordinate,b=o+ +f*c,g=b+x*_,w=g+x*m,y=S;break}return{line:{x1:p,y1:g,x2:v,y2:b},tick:{x:y,y:w}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=gn(gn(gn({},xt(this.props,!1)),xt(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);f=gn(gn({},f),{},{x1:a,y1:i+m*l,x2:a+o,y2:i+m*l})}else{var p=+(c==="left"&&!u||c==="right"&&u);f=gn(gn({},f),{},{x1:a+p*o,y1:i,x2:a+p*o,y2:i+l})}return V.createElement("line",ud({},f,{className:qt("recharts-cartesian-axis-line",za(d,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,m=l.unit,p=KC(gn(gn({},this.props),{},{ticks:n}),a,i),v=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),b=xt(this.props,!1),y=xt(d,!1),w=gn(gn({},b),{},{fill:"none"},xt(c,!1)),x=p.map(function(_,S){var k=o.getTickLineCoord(_),C=k.line,j=k.tick,N=gn(gn(gn(gn({textAnchor:v,verticalAnchor:g},b),{},{stroke:"none",fill:u},y),j),{},{index:S,payload:_,visibleTicksCount:p.length,tickFormatter:f});return V.createElement(tr,ud({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},Yc(o.props,_,S)),c&&V.createElement("line",ud({},w,C,{className:qt("recharts-cartesian-axis-tick-line",za(c,"className"))})),d&&t.renderTickItem(d,N,"".concat(Tt(f)?f(_.value,S):_.value).concat(m||"")))});return V.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,m=f.ticks,p=i_(f,uCe),v=m;return Tt(c)&&(v=m&&m.length>0?c(this.props):c(p)),o<=0||l<=0||!v||!v.length?null:V.createElement(tr,{className:qt("recharts-cartesian-axis",u),ref:function(b){n.layerReference=b}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Tn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,l=qt(a.className,"recharts-cartesian-axis-tick-value");return V.isValidElement(n)?o=V.cloneElement(n,gn(gn({},a),{},{className:l})):Tt(n)?o=n(gn(gn({},a),{},{className:l})):o=V.createElement(Xc,ud({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(h.Component);GC(oh,"displayName","CartesianAxis");GC(oh,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var xCe=["x1","y1","x2","y2","key"],bCe=["offset"];function Zc(e){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zc(e)}function f4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f4(Object(r),!0).forEach(function(n){wCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wCe(e,t,r){return t=_Ce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Ce(e){var t=SCe(e,"string");return Zc(t)=="symbol"?t:t+""}function SCe(e,t){if(Zc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kc(){return kc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kc.apply(this,arguments)}function h4(e,t){if(e==null)return{};var r=jCe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jCe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var kCe=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return V.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function mB(e,t){var r;if(V.isValidElement(e))r=V.cloneElement(e,t);else if(Tt(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=h4(t,xCe),u=xt(c,!1);u.offset;var d=h4(u,bCe);r=V.createElement("line",kc({},d,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function NCe(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Zn(Zn({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return mB(a,u)});return V.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function CCe(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Zn(Zn({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return mB(a,u)});return V.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function ECe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(m){return Math.round(m+a-a)}).sort(function(m,p){return m-p});a!==d[0]&&d.unshift(0);var f=d.map(function(m,p){var v=!d[p+1],g=v?a+o-m:d[p+1]-m;if(g<=0)return null;var b=p%t.length;return V.createElement("rect",{key:"react-".concat(p),y:m,x:n,height:g,width:i,stroke:"none",fill:t[b],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function ACe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(m){return Math.round(m+i-i)}).sort(function(m,p){return m-p});i!==d[0]&&d.unshift(0);var f=d.map(function(m,p){var v=!d[p+1],g=v?i+l-m:d[p+1]-m;if(g<=0)return null;var b=p%n.length;return V.createElement("rect",{key:"react-".concat(p),x:m,y:o,width:g,height:c,stroke:"none",fill:n[b],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var PCe=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return dF(KC(Zn(Zn(Zn({},oh.defaultProps),n),{},{ticks:to(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},TCe=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return dF(KC(Zn(Zn(Zn({},oh.defaultProps),n),{},{ticks:to(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Tu={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function tx(e){var t,r,n,a,i,o,l=zC(),c=WC(),u=yNe(),d=Zn(Zn({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Tu.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Tu.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Tu.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Tu.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Tu.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Tu.verticalFill,x:Ye(e.x)?e.x:u.left,y:Ye(e.y)?e.y:u.top,width:Ye(e.width)?e.width:u.width,height:Ye(e.height)?e.height:u.height}),f=d.x,m=d.y,p=d.width,v=d.height,g=d.syncWithTicks,b=d.horizontalValues,y=d.verticalValues,w=pNe(),x=gNe();if(!Ye(p)||p<=0||!Ye(v)||v<=0||!Ye(f)||f!==+f||!Ye(m)||m!==+m)return null;var _=d.verticalCoordinatesGenerator||PCe,S=d.horizontalCoordinatesGenerator||TCe,k=d.horizontalPoints,C=d.verticalPoints;if((!k||!k.length)&&Tt(S)){var j=b&&b.length,N=S({yAxis:x?Zn(Zn({},x),{},{ticks:j?b:x.ticks}):void 0,width:l,height:c,offset:u},j?!0:g);zi(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Zc(N),"]")),Array.isArray(N)&&(k=N)}if((!C||!C.length)&&Tt(_)){var A=y&&y.length,P=_({xAxis:w?Zn(Zn({},w),{},{ticks:A?y:w.ticks}):void 0,width:l,height:c,offset:u},A?!0:g);zi(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Zc(P),"]")),Array.isArray(P)&&(C=P)}return V.createElement("g",{className:"recharts-cartesian-grid"},V.createElement(kCe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),V.createElement(NCe,kc({},d,{offset:u,horizontalPoints:k,xAxis:w,yAxis:x})),V.createElement(CCe,kc({},d,{offset:u,verticalPoints:C,xAxis:w,yAxis:x})),V.createElement(ECe,kc({},d,{horizontalPoints:k})),V.createElement(ACe,kc({},d,{verticalPoints:C})))}tx.displayName="CartesianGrid";var OCe=["layout","type","stroke","connectNulls","isRange","ref"],ICe=["key"],pB;function wf(e){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wf(e)}function gB(e,t){if(e==null)return{};var r=MCe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function MCe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Nc(){return Nc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nc.apply(this,arguments)}function m4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m4(Object(r),!0).forEach(function(n){fs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yB(n.key),n)}}function $Ce(e,t,r){return t&&p4(e.prototype,t),r&&p4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function DCe(e,t,r){return t=rx(t),LCe(e,vB()?Reflect.construct(t,r||[],rx(e).constructor):t.apply(e,r))}function LCe(e,t){if(t&&(wf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FCe(e)}function FCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vB=function(){return!!e})()}function rx(e){return rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rx(e)}function BCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nj(e,t)}function Nj(e,t){return Nj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Nj(e,t)}function fs(e,t,r){return t=yB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yB(e){var t=UCe(e,"string");return wf(t)=="symbol"?t:t+""}function UCe(e,t){if(wf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wi=function(e){function t(){var r;RCe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=DCe(this,t,[].concat(a)),fs(r,"state",{isAnimationFinished:!0}),fs(r,"id",eh("recharts-area-")),fs(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Tt(o)&&o()}),fs(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Tt(o)&&o()}),r}return BCe(t,e),$Ce(t,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,m=xt(this.props,!1),p=xt(u,!0),v=d.map(function(b,y){var w=Yo(Yo(Yo({key:"dot-".concat(y),r:3},m),p),{},{index:y,cx:b.x,cy:b.y,dataKey:f,value:b.value,payload:b.payload,points:d});return t.renderDotItem(u,w)}),g={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return V.createElement(tr,Nc({className:"recharts-area-dots"},g),v)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=n*Math.abs(c-u),f=pl(o.map(function(m){return m.y||0}));return Ye(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(pl(i.map(function(m){return m.y||0})),f)),Ye(f)?V.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=n*Math.abs(c-u),f=pl(o.map(function(m){return m.x||0}));return Ye(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(pl(i.map(function(m){return m.x||0})),f)),Ye(f)?V.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,f=l.connectNulls,m=l.isRange;l.ref;var p=gB(l,OCe);return V.createElement(tr,{clipPath:i?"url(#clipPath-".concat(o,")"):null},V.createElement(Nd,Nc({},xt(p,!0),{points:n,connectNulls:f,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&V.createElement(Nd,Nc({},xt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:n})),d!=="none"&&m&&V.createElement(Nd,Nc({},xt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,m=o.animationEasing,p=o.animationId,v=this.state,g=v.prevPoints,b=v.prevBaseLine;return V.createElement(Ns,{begin:d,duration:f,isActive:u,easing:m,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var w=y.t;if(g){var x=g.length/l.length,_=l.map(function(j,N){var A=Math.floor(N*x);if(g[A]){var P=g[A],T=pa(P.x,j.x),L=pa(P.y,j.y);return Yo(Yo({},j),{},{x:T(w),y:L(w)})}return j}),S;if(Ye(c)&&typeof c=="number"){var k=pa(b,c);S=k(w)}else if(zt(c)||Zf(c)){var C=pa(b,0);S=C(w)}else S=c.map(function(j,N){var A=Math.floor(N*x);if(b[A]){var P=b[A],T=pa(P.x,j.x),L=pa(P.y,j.y);return Yo(Yo({},j),{},{x:T(w),y:L(w)})}return j});return i.renderAreaStatically(_,S,n,a)}return V.createElement(tr,null,V.createElement("defs",null,V.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(w))),V.createElement(tr,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,m=u.totalLength;return c&&o&&o.length&&(!d&&m>0||!lf(d,o)||!lf(f,l))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,l,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.top,d=a.left,f=a.xAxis,m=a.yAxis,p=a.width,v=a.height,g=a.isAnimationActive,b=a.id;if(i||!l||!l.length)return null;var y=this.state.isAnimationFinished,w=l.length===1,x=qt("recharts-area",c),_=f&&f.allowDataOverflow,S=m&&m.allowDataOverflow,k=_||S,C=zt(b)?this.id:b,j=(n=xt(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},N=j.r,A=N===void 0?3:N,P=j.strokeWidth,T=P===void 0?2:P,L=hoe(o)?o:{},U=L.clipDot,D=U===void 0?!0:U,H=A*2+T;return V.createElement(tr,{className:x},_||S?V.createElement("defs",null,V.createElement("clipPath",{id:"clipPath-".concat(C)},V.createElement("rect",{x:_?d:d-p/2,y:S?u:u-v/2,width:_?p:p*2,height:S?v:v*2})),!D&&V.createElement("clipPath",{id:"clipPath-dots-".concat(C)},V.createElement("rect",{x:d-H/2,y:u-H/2,width:p+H,height:v+H}))):null,w?null:this.renderArea(k,C),(o||w)&&this.renderDots(k,D,C),(!g||y)&&so.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(h.PureComponent);pB=Wi;fs(Wi,"displayName","Area");fs(Wi,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!ys.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});fs(Wi,"getBaseValue",function(e,t,r,n){var a=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(Ye(l)&&typeof l=="number")return l;var c=a==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return l==="dataMin"?f:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});fs(Wi,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,m=e.offset,p=t.layout,v=u&&u.length,g=pB.getBaseValue(t,r,n,a),b=p==="horizontal",y=!1,w=f.map(function(_,S){var k;v?k=u[d+S]:(k=wn(_,c),Array.isArray(k)?y=!0:k=[g,k]);var C=k[1]==null||v&&wn(_,c)==null;return b?{x:B5({axis:n,ticks:i,bandSize:l,entry:_,index:S}),y:C?null:a.scale(k[1]),value:k,payload:_}:{x:C?null:n.scale(k[1]),y:B5({axis:a,ticks:o,bandSize:l,entry:_,index:S}),value:k,payload:_}}),x;return v||y?x=w.map(function(_){var S=Array.isArray(_.value)?_.value[0]:null;return b?{x:_.x,y:S!=null&&_.y!=null?a.scale(S):null}:{x:S!=null?n.scale(S):null,y:_.y}}):x=b?a.scale(g):n.scale(g),Yo({points:w,baseLine:x,layout:p,isRange:y},m)});fs(Wi,"renderDotItem",function(e,t){var r;if(V.isValidElement(e))r=V.cloneElement(e,t);else if(Tt(e))r=e(t);else{var n=qt("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=gB(t,ICe);r=V.createElement(Yb,Nc({},i,{key:a,className:n}))}return r});function _f(e){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_f(e)}function qCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zCe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wB(n.key),n)}}function WCe(e,t,r){return t&&zCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function HCe(e,t,r){return t=nx(t),VCe(e,xB()?Reflect.construct(t,r||[],nx(e).constructor):t.apply(e,r))}function VCe(e,t){if(t&&(_f(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KCe(e)}function KCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xB=function(){return!!e})()}function nx(e){return nx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nx(e)}function GCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cj(e,t)}function Cj(e,t){return Cj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Cj(e,t)}function bB(e,t,r){return t=wB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wB(e){var t=YCe(e,"string");return _f(t)=="symbol"?t:t+""}function YCe(e,t){if(_f(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ej(){return Ej=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ej.apply(this,arguments)}function XCe(e){var t=e.xAxisId,r=zC(),n=WC(),a=nB(t);return a==null?null:h.createElement(oh,Ej({},a,{className:qt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return to(o,!0)}}))}var Sf=function(e){function t(){return qCe(this,t),HCe(this,t,arguments)}return GCe(t,e),WCe(t,[{key:"render",value:function(){return h.createElement(XCe,this.props)}}])}(h.Component);bB(Sf,"displayName","XAxis");bB(Sf,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function jf(e){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jf(e)}function QCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JCe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jB(n.key),n)}}function ZCe(e,t,r){return t&&JCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function eEe(e,t,r){return t=ax(t),tEe(e,_B()?Reflect.construct(t,r||[],ax(e).constructor):t.apply(e,r))}function tEe(e,t){if(t&&(jf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rEe(e)}function rEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _B(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_B=function(){return!!e})()}function ax(e){return ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ax(e)}function nEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Aj(e,t)}function Aj(e,t){return Aj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Aj(e,t)}function SB(e,t,r){return t=jB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jB(e){var t=aEe(e,"string");return jf(t)=="symbol"?t:t+""}function aEe(e,t){if(jf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pj(){return Pj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pj.apply(this,arguments)}var iEe=function(t){var r=t.yAxisId,n=zC(),a=WC(),i=aB(r);return i==null?null:h.createElement(oh,Pj({},i,{className:qt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return to(l,!0)}}))},kf=function(e){function t(){return QCe(this,t),eEe(this,t,arguments)}return nEe(t,e),ZCe(t,[{key:"render",value:function(){return h.createElement(iEe,this.props)}}])}(h.Component);SB(kf,"displayName","YAxis");SB(kf,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function g4(e){return cEe(e)||lEe(e)||oEe(e)||sEe()}function sEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oEe(e,t){if(e){if(typeof e=="string")return Tj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tj(e,t)}}function lEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cEe(e){if(Array.isArray(e))return Tj(e)}function Tj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Oj=function(t,r,n,a,i){var o=hi(t,VC),l=hi(t,aw),c=[].concat(g4(o),g4(l)),u=hi(t,sw),d="".concat(a,"Id"),f=a[0],m=r;if(c.length&&(m=c.reduce(function(g,b){if(b.props[d]===n&&bs(b.props,"extendDomain")&&Ye(b.props[f])){var y=b.props[f];return[Math.min(g[0],y),Math.max(g[1],y)]}return g},m)),u.length){var p="".concat(f,"1"),v="".concat(f,"2");m=u.reduce(function(g,b){if(b.props[d]===n&&bs(b.props,"extendDomain")&&Ye(b.props[p])&&Ye(b.props[v])){var y=b.props[p],w=b.props[v];return[Math.min(g[0],y,w),Math.max(g[1],y,w)]}return g},m)}return i&&i.length&&(m=i.reduce(function(g,b){return Ye(b)?[Math.min(g[0],b),Math.max(g[1],b)]:g},m)),m},kB={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,f||c,m),v=r?r+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],p]:c._events[v].push(p):(c._events[v]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,p=f.length,v=new Array(p);m<p;m++)v[m]=f[m].fn;return v},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,m,p,v){var g=r?r+u:u;if(!this._events[g])return!1;var b=this._events[g],y=arguments.length,w,x;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,m),!0;case 5:return b.fn.call(b.context,d,f,m,p),!0;case 6:return b.fn.call(b.context,d,f,m,p,v),!0}for(x=1,w=new Array(y-1);x<y;x++)w[x-1]=arguments[x];b.fn.apply(b.context,w)}else{var _=b.length,S;for(x=0;x<_;x++)switch(b[x].once&&this.removeListener(u,b[x].fn,void 0,!0),y){case 1:b[x].fn.call(b[x].context);break;case 2:b[x].fn.call(b[x].context,d);break;case 3:b[x].fn.call(b[x].context,d,f);break;case 4:b[x].fn.call(b[x].context,d,f,m);break;default:if(!w)for(S=1,w=new Array(y-1);S<y;S++)w[S-1]=arguments[S];b[x].fn.apply(b[x].context,w)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,m){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return o(this,p),this;var v=this._events[p];if(v.fn)v.fn===d&&(!m||v.once)&&(!f||v.context===f)&&o(this,p);else{for(var g=0,b=[],y=v.length;g<y;g++)(v[g].fn!==d||m&&!v[g].once||f&&v[g].context!==f)&&b.push(v[g]);b.length?this._events[p]=b.length===1?b[0]:b:o(this,p)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(kB);var uEe=kB.exports;const dEe=dr(uEe);var s_=new dEe,o_="recharts.syncMouseEvents";function Ip(e){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(e)}function fEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hEe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NB(n.key),n)}}function mEe(e,t,r){return t&&hEe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function l_(e,t,r){return t=NB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NB(e){var t=pEe(e,"string");return Ip(t)=="symbol"?t:t+""}function pEe(e,t){if(Ip(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var gEe=function(){function e(){fEe(this,e),l_(this,"activeIndex",0),l_(this,"coordinateList",[]),l_(this,"layout","horizontal")}return mEe(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,m=r.mouseHandlerCallback,p=m===void 0?null:m;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,m=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:m})}}}])}();function vEe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&Ye(n)&&Ye(a))return!0}return!1}function yEe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function CB(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=Cr(t,r,n,a),l=Cr(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function xEe(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,m=Cr(l,c,u,f),p=Cr(l,c,d,f);n=m.x,a=m.y,i=p.x,o=p.y}else return CB(t);return[{x:n,y:a},{x:i,y:o}]}function Mp(e){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mp(e)}function v4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v4(Object(r),!0).forEach(function(n){bEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bEe(e,t,r){return t=wEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wEe(e){var t=_Ee(e,"string");return Mp(t)=="symbol"?t:t+""}function _Ee(e,t){if(Mp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SEe(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,m=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!i||!o||m!=="ScatterChart"&&a!=="axis")return null;var v,g=Nd;if(m==="ScatterChart")v=o,g=WSe;else if(m==="BarChart")v=yEe(f,o,c,d),g=FC;else if(f==="radial"){var b=CB(o),y=b.cx,w=b.cy,x=b.radius,_=b.startAngle,S=b.endAngle;v={cx:y,cy:w,startAngle:_,endAngle:S,innerRadius:x,outerRadius:x},g=_F}else v={points:xEe(f,o,c)},g=Nd;var k=Mv(Mv(Mv(Mv({stroke:"#ccc",pointerEvents:"none"},c),v),xt(p,!1)),{},{payload:l,payloadIndex:u,className:qt("recharts-tooltip-cursor",p.className)});return h.isValidElement(p)?h.cloneElement(p,k):h.createElement(g,k)}var jEe=["item"],kEe=["children","className","width","height","style","compact","title","desc"];function Nf(e){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nf(e)}function dd(){return dd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dd.apply(this,arguments)}function y4(e,t){return EEe(e)||CEe(e,t)||AB(e,t)||NEe()}function NEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CEe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function EEe(e){if(Array.isArray(e))return e}function x4(e,t){if(e==null)return{};var r=AEe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function AEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function PEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TEe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PB(n.key),n)}}function OEe(e,t,r){return t&&TEe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function IEe(e,t,r){return t=ix(t),MEe(e,EB()?Reflect.construct(t,r||[],ix(e).constructor):t.apply(e,r))}function MEe(e,t){if(t&&(Nf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return REe(e)}function REe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EB=function(){return!!e})()}function ix(e){return ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ix(e)}function $Ee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ij(e,t)}function Ij(e,t){return Ij=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ij(e,t)}function Cf(e){return FEe(e)||LEe(e)||AB(e)||DEe()}function DEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AB(e,t){if(e){if(typeof e=="string")return Mj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mj(e,t)}}function LEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FEe(e){if(Array.isArray(e))return Mj(e)}function Mj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b4(Object(r),!0).forEach(function(n){Ct(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ct(e,t,r){return t=PB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PB(e){var t=BEe(e,"string");return Nf(t)=="symbol"?t:t+""}function BEe(e,t){if(Nf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UEe={xAxis:["bottom","top"],yAxis:["left","right"]},qEe={width:"100%",height:"100%"},TB={x:0,y:0};function Rv(e){return e}var zEe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},WEe=function(t,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return Le(Le(Le({},a),Cr(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return Le(Le(Le({},a),Cr(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return TB},ow=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Cf(l),Cf(u)):l},[]);return o.length>0?o:t&&t.length&&Ye(a)&&Ye(i)?t.slice(a,i+1):[]};function OB(e){return e==="number"?[0,"auto"]:void 0}var Rj=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,l=ow(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var p=f===void 0?l:f;m=i0(p,o.dataKey,a)}else m=f&&f[n]||l[n];return m?[].concat(Cf(c),[gF(u,m)]):c},[])},w4=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=zEe(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=mwe(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,m=Rj(t,r,d,f),p=WEe(n,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:m,activeCoordinate:p}}return null},HEe=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,m=t.stackOffset,p=uF(d,i);return n.reduce(function(v,g){var b,y=g.type.defaultProps!==void 0?Le(Le({},g.type.defaultProps),g.props):g.props,w=y.type,x=y.dataKey,_=y.allowDataOverflow,S=y.allowDuplicatedCategory,k=y.scale,C=y.ticks,j=y.includeHidden,N=y[o];if(v[N])return v;var A=ow(t.data,{graphicalItems:a.filter(function(q){var K,ne=o in q.props?q.props[o]:(K=q.type.defaultProps)===null||K===void 0?void 0:K[o];return ne===N}),dataStartIndex:c,dataEndIndex:u}),P=A.length,T,L,U;vEe(y.domain,_,w)&&(T=X2(y.domain,null,_),p&&(w==="number"||k!=="auto")&&(U=gm(A,x,"category")));var D=OB(w);if(!T||T.length===0){var H,B=(H=y.domain)!==null&&H!==void 0?H:D;if(x){if(T=gm(A,x,w),w==="category"&&p){var M=noe(T);S&&M?(L=T,T=H0(0,P)):S||(T=W5(B,T,g).reduce(function(q,K){return q.indexOf(K)>=0?q:[].concat(Cf(q),[K])},[]))}else if(w==="category")S?T=T.filter(function(q){return q!==""&&!zt(q)}):T=W5(B,T,g).reduce(function(q,K){return q.indexOf(K)>=0||K===""||zt(K)?q:[].concat(Cf(q),[K])},[]);else if(w==="number"){var $=xwe(A,a.filter(function(q){var K,ne,ae=o in q.props?q.props[o]:(K=q.type.defaultProps)===null||K===void 0?void 0:K[o],_e="hide"in q.props?q.props.hide:(ne=q.type.defaultProps)===null||ne===void 0?void 0:ne.hide;return ae===N&&(j||!_e)}),x,i,d);$&&(T=$)}p&&(w==="number"||k!=="auto")&&(U=gm(A,x,"category"))}else p?T=H0(0,P):l&&l[N]&&l[N].hasStack&&w==="number"?T=m==="expand"?[0,1]:pF(l[N].stackGroups,c,u):T=cF(A,a.filter(function(q){var K=o in q.props?q.props[o]:q.type.defaultProps[o],ne="hide"in q.props?q.props.hide:q.type.defaultProps.hide;return K===N&&(j||!ne)}),w,d,!0);if(w==="number")T=Oj(f,T,N,i,C),B&&(T=X2(B,T,_));else if(w==="category"&&B){var re=B,ie=T.every(function(q){return re.indexOf(q)>=0});ie&&(T=re)}}return Le(Le({},v),{},Ct({},N,Le(Le({},y),{},{axisType:i,domain:T,categoricalDomain:U,duplicateDomain:L,originalDomain:(b=y.domain)!==null&&b!==void 0?b:D,isCategorical:p,layout:d})))},{})},VEe=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,m=ow(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),p=m.length,v=uF(d,i),g=-1;return n.reduce(function(b,y){var w=y.type.defaultProps!==void 0?Le(Le({},y.type.defaultProps),y.props):y.props,x=w[o],_=OB("number");if(!b[x]){g++;var S;return v?S=H0(0,p):l&&l[x]&&l[x].hasStack?(S=pF(l[x].stackGroups,c,u),S=Oj(f,S,x,i)):(S=X2(_,cF(m,n.filter(function(k){var C,j,N=o in k.props?k.props[o]:(C=k.type.defaultProps)===null||C===void 0?void 0:C[o],A="hide"in k.props?k.props.hide:(j=k.type.defaultProps)===null||j===void 0?void 0:j.hide;return N===x&&!A}),"number",d),a.defaultProps.allowDataOverflow),S=Oj(f,S,x,i)),Le(Le({},b),{},Ct({},x,Le(Le({axisType:i},a.defaultProps),{},{hide:!0,orientation:za(UEe,"".concat(i,".").concat(g%2),null),domain:S,originalDomain:_,isCategorical:v,layout:d})))}return b},{})},KEe=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),m=hi(d,i),p={};return m&&m.length?p=HEe(t,{axes:m,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(p=VEe(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),p},GEe=function(t){var r=al(t),n=to(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:fC(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:I0(r,n)}},_4=function(t){var r=t.children,n=t.defaultShowTooltip,a=Oa(r,pf),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},YEe=function(t){return!t||!t.length?!1:t.some(function(r){var n=ao(r&&r.type);return n&&n.indexOf("Bar")>=0})},S4=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},XEe=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,m=n.margin||{},p=Oa(f,pf),v=Oa(f,Sd),g=Object.keys(c).reduce(function(S,k){var C=c[k],j=C.orientation;return!C.mirror&&!C.hide?Le(Le({},S),{},Ct({},j,S[j]+C.width)):S},{left:m.left||0,right:m.right||0}),b=Object.keys(o).reduce(function(S,k){var C=o[k],j=C.orientation;return!C.mirror&&!C.hide?Le(Le({},S),{},Ct({},j,za(S,"".concat(j))+C.height)):S},{top:m.top||0,bottom:m.bottom||0}),y=Le(Le({},b),g),w=y.bottom;p&&(y.bottom+=p.props.height||pf.defaultProps.height),v&&r&&(y=vwe(y,a,n,r));var x=u-y.left-y.right,_=d-y.top-y.bottom;return Le(Le({brushBottom:w},y),{},{width:Math.max(x,0),height:Math.max(_,0)})},QEe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},IB=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,m=function(y,w){var x=w.graphicalItems,_=w.stackGroups,S=w.offset,k=w.updateId,C=w.dataStartIndex,j=w.dataEndIndex,N=y.barSize,A=y.layout,P=y.barGap,T=y.barCategoryGap,L=y.maxBarSize,U=S4(A),D=U.numericAxisName,H=U.cateAxisName,B=YEe(x),M=[];return x.forEach(function($,re){var ie=ow(y.data,{graphicalItems:[$],dataStartIndex:C,dataEndIndex:j}),q=$.type.defaultProps!==void 0?Le(Le({},$.type.defaultProps),$.props):$.props,K=q.dataKey,ne=q.maxBarSize,ae=q["".concat(D,"Id")],_e=q["".concat(H,"Id")],pe={},ye=c.reduce(function(Re,de){var G=w["".concat(de.axisType,"Map")],ue=q["".concat(de.axisType,"Id")];G&&G[ue]||de.axisType==="zAxis"||Jc();var he=G[ue];return Le(Le({},Re),{},Ct(Ct({},de.axisType,he),"".concat(de.axisType,"Ticks"),to(he)))},pe),ce=ye[H],me=ye["".concat(H,"Ticks")],Q=_&&_[ae]&&_[ae].hasStack&&Ewe($,_[ae].stackGroups),te=ao($.type).indexOf("Bar")>=0,Ne=I0(ce,me),je=[],J=B&&pwe({barSize:N,stackGroups:_,totalSize:QEe(ye,H)});if(te){var oe,Ce,R=zt(ne)?L:ne,Y=(oe=(Ce=I0(ce,me,!0))!==null&&Ce!==void 0?Ce:R)!==null&&oe!==void 0?oe:0;je=gwe({barGap:P,barCategoryGap:T,bandSize:Y!==Ne?Y:Ne,sizeList:J[_e],maxBarSize:R}),Y!==Ne&&(je=je.map(function(Re){return Le(Le({},Re),{},{position:Le(Le({},Re.position),{},{offset:Re.position.offset-Y/2})})}))}var Se=$&&$.type&&$.type.getComposedData;Se&&M.push({props:Le(Le({},Se(Le(Le({},ye),{},{displayedData:ie,props:y,dataKey:K,item:$,bandSize:Ne,barPosition:je,offset:S,stackedData:Q,layout:A,dataStartIndex:C,dataEndIndex:j}))),{},Ct(Ct(Ct({key:$.key||"item-".concat(re)},D,ye[D]),H,ye[H]),"animationId",k)),childIndex:goe($,y.children),item:$})}),M},p=function(y,w){var x=y.props,_=y.dataStartIndex,S=y.dataEndIndex,k=y.updateId;if(!DT({props:x}))return null;var C=x.children,j=x.layout,N=x.stackOffset,A=x.data,P=x.reverseStackOrder,T=S4(j),L=T.numericAxisName,U=T.cateAxisName,D=hi(C,n),H=Nwe(A,D,"".concat(L,"Id"),"".concat(U,"Id"),N,P),B=c.reduce(function(q,K){var ne="".concat(K.axisType,"Map");return Le(Le({},q),{},Ct({},ne,KEe(x,Le(Le({},K),{},{graphicalItems:D,stackGroups:K.axisType===L&&H,dataStartIndex:_,dataEndIndex:S}))))},{}),M=XEe(Le(Le({},B),{},{props:x,graphicalItems:D}),w==null?void 0:w.legendBBox);Object.keys(B).forEach(function(q){B[q]=d(x,B[q],M,q.replace("Map",""),r)});var $=B["".concat(U,"Map")],re=GEe($),ie=m(x,Le(Le({},B),{},{dataStartIndex:_,dataEndIndex:S,updateId:k,graphicalItems:D,stackGroups:H,offset:M}));return Le(Le({formattedGraphicalItems:ie,graphicalItems:D,offset:M,stackGroups:H},re),B)},v=function(b){function y(w){var x,_,S;return PEe(this,y),S=IEe(this,y,[w]),Ct(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ct(S,"accessibilityManager",new gEe),Ct(S,"handleLegendBBoxUpdate",function(k){if(k){var C=S.state,j=C.dataStartIndex,N=C.dataEndIndex,A=C.updateId;S.setState(Le({legendBBox:k},p({props:S.props,dataStartIndex:j,dataEndIndex:N,updateId:A},Le(Le({},S.state),{},{legendBBox:k}))))}}),Ct(S,"handleReceiveSyncEvent",function(k,C,j){if(S.props.syncId===k){if(j===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(C)}}),Ct(S,"handleBrushChange",function(k){var C=k.startIndex,j=k.endIndex;if(C!==S.state.dataStartIndex||j!==S.state.dataEndIndex){var N=S.state.updateId;S.setState(function(){return Le({dataStartIndex:C,dataEndIndex:j},p({props:S.props,dataStartIndex:C,dataEndIndex:j,updateId:N},S.state))}),S.triggerSyncEvent({dataStartIndex:C,dataEndIndex:j})}}),Ct(S,"handleMouseEnter",function(k){var C=S.getMouseInfo(k);if(C){var j=Le(Le({},C),{},{isTooltipActive:!0});S.setState(j),S.triggerSyncEvent(j);var N=S.props.onMouseEnter;Tt(N)&&N(j,k)}}),Ct(S,"triggeredAfterMouseMove",function(k){var C=S.getMouseInfo(k),j=C?Le(Le({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(j),S.triggerSyncEvent(j);var N=S.props.onMouseMove;Tt(N)&&N(j,k)}),Ct(S,"handleItemMouseEnter",function(k){S.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),Ct(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),Ct(S,"handleMouseMove",function(k){k.persist(),S.throttleTriggeredAfterMouseMove(k)}),Ct(S,"handleMouseLeave",function(k){S.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};S.setState(C),S.triggerSyncEvent(C);var j=S.props.onMouseLeave;Tt(j)&&j(C,k)}),Ct(S,"handleOuterEvent",function(k){var C=poe(k),j=za(S.props,"".concat(C));if(C&&Tt(j)){var N,A;/.*touch.*/i.test(C)?A=S.getMouseInfo(k.changedTouches[0]):A=S.getMouseInfo(k),j((N=A)!==null&&N!==void 0?N:{},k)}}),Ct(S,"handleClick",function(k){var C=S.getMouseInfo(k);if(C){var j=Le(Le({},C),{},{isTooltipActive:!0});S.setState(j),S.triggerSyncEvent(j);var N=S.props.onClick;Tt(N)&&N(j,k)}}),Ct(S,"handleMouseDown",function(k){var C=S.props.onMouseDown;if(Tt(C)){var j=S.getMouseInfo(k);C(j,k)}}),Ct(S,"handleMouseUp",function(k){var C=S.props.onMouseUp;if(Tt(C)){var j=S.getMouseInfo(k);C(j,k)}}),Ct(S,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),Ct(S,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&S.handleMouseDown(k.changedTouches[0])}),Ct(S,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&S.handleMouseUp(k.changedTouches[0])}),Ct(S,"handleDoubleClick",function(k){var C=S.props.onDoubleClick;if(Tt(C)){var j=S.getMouseInfo(k);C(j,k)}}),Ct(S,"handleContextMenu",function(k){var C=S.props.onContextMenu;if(Tt(C)){var j=S.getMouseInfo(k);C(j,k)}}),Ct(S,"triggerSyncEvent",function(k){S.props.syncId!==void 0&&s_.emit(o_,S.props.syncId,k,S.eventEmitterSymbol)}),Ct(S,"applySyncEvent",function(k){var C=S.props,j=C.layout,N=C.syncMethod,A=S.state.updateId,P=k.dataStartIndex,T=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)S.setState(Le({dataStartIndex:P,dataEndIndex:T},p({props:S.props,dataStartIndex:P,dataEndIndex:T,updateId:A},S.state)));else if(k.activeTooltipIndex!==void 0){var L=k.chartX,U=k.chartY,D=k.activeTooltipIndex,H=S.state,B=H.offset,M=H.tooltipTicks;if(!B)return;if(typeof N=="function")D=N(M,k);else if(N==="value"){D=-1;for(var $=0;$<M.length;$++)if(M[$].value===k.activeLabel){D=$;break}}var re=Le(Le({},B),{},{x:B.left,y:B.top}),ie=Math.min(L,re.x+re.width),q=Math.min(U,re.y+re.height),K=M[D]&&M[D].value,ne=Rj(S.state,S.props.data,D),ae=M[D]?{x:j==="horizontal"?M[D].coordinate:ie,y:j==="horizontal"?q:M[D].coordinate}:TB;S.setState(Le(Le({},k),{},{activeLabel:K,activeCoordinate:ae,activePayload:ne,activeTooltipIndex:D}))}else S.setState(k)}),Ct(S,"renderCursor",function(k){var C,j=S.state,N=j.isTooltipActive,A=j.activeCoordinate,P=j.activePayload,T=j.offset,L=j.activeTooltipIndex,U=j.tooltipAxisBandSize,D=S.getTooltipEventType(),H=(C=k.props.active)!==null&&C!==void 0?C:N,B=S.props.layout,M=k.key||"_recharts-cursor";return V.createElement(SEe,{key:M,activeCoordinate:A,activePayload:P,activeTooltipIndex:L,chartName:r,element:k,isActive:H,layout:B,offset:T,tooltipAxisBandSize:U,tooltipEventType:D})}),Ct(S,"renderPolarAxis",function(k,C,j){var N=za(k,"type.axisType"),A=za(S.state,"".concat(N,"Map")),P=k.type.defaultProps,T=P!==void 0?Le(Le({},P),k.props):k.props,L=A&&A[T["".concat(N,"Id")]];return h.cloneElement(k,Le(Le({},L),{},{className:qt(N,L.className),key:k.key||"".concat(C,"-").concat(j),ticks:to(L,!0)}))}),Ct(S,"renderPolarGrid",function(k){var C=k.props,j=C.radialLines,N=C.polarAngles,A=C.polarRadius,P=S.state,T=P.radiusAxisMap,L=P.angleAxisMap,U=al(T),D=al(L),H=D.cx,B=D.cy,M=D.innerRadius,$=D.outerRadius;return h.cloneElement(k,{polarAngles:Array.isArray(N)?N:to(D,!0).map(function(re){return re.coordinate}),polarRadius:Array.isArray(A)?A:to(U,!0).map(function(re){return re.coordinate}),cx:H,cy:B,innerRadius:M,outerRadius:$,key:k.key||"polar-grid",radialLines:j})}),Ct(S,"renderLegend",function(){var k=S.state.formattedGraphicalItems,C=S.props,j=C.children,N=C.width,A=C.height,P=S.props.margin||{},T=N-(P.left||0)-(P.right||0),L=oF({children:j,formattedGraphicalItems:k,legendWidth:T,legendContent:u});if(!L)return null;var U=L.item,D=x4(L,jEe);return h.cloneElement(U,Le(Le({},D),{},{chartWidth:N,chartHeight:A,margin:P,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),Ct(S,"renderTooltip",function(){var k,C=S.props,j=C.children,N=C.accessibilityLayer,A=Oa(j,Ma);if(!A)return null;var P=S.state,T=P.isTooltipActive,L=P.activeCoordinate,U=P.activePayload,D=P.activeLabel,H=P.offset,B=(k=A.props.active)!==null&&k!==void 0?k:T;return h.cloneElement(A,{viewBox:Le(Le({},H),{},{x:H.left,y:H.top}),active:B,label:D,payload:B?U:[],coordinate:L,accessibilityLayer:N})}),Ct(S,"renderBrush",function(k){var C=S.props,j=C.margin,N=C.data,A=S.state,P=A.offset,T=A.dataStartIndex,L=A.dataEndIndex,U=A.updateId;return h.cloneElement(k,{key:k.key||"_recharts-brush",onChange:Pv(S.handleBrushChange,k.props.onChange),data:N,x:Ye(k.props.x)?k.props.x:P.left,y:Ye(k.props.y)?k.props.y:P.top+P.height+P.brushBottom-(j.bottom||0),width:Ye(k.props.width)?k.props.width:P.width,startIndex:T,endIndex:L,updateId:"brush-".concat(U)})}),Ct(S,"renderReferenceElement",function(k,C,j){if(!k)return null;var N=S,A=N.clipPathId,P=S.state,T=P.xAxisMap,L=P.yAxisMap,U=P.offset,D=k.type.defaultProps||{},H=k.props,B=H.xAxisId,M=B===void 0?D.xAxisId:B,$=H.yAxisId,re=$===void 0?D.yAxisId:$;return h.cloneElement(k,{key:k.key||"".concat(C,"-").concat(j),xAxis:T[M],yAxis:L[re],viewBox:{x:U.left,y:U.top,width:U.width,height:U.height},clipPathId:A})}),Ct(S,"renderActivePoints",function(k){var C=k.item,j=k.activePoint,N=k.basePoint,A=k.childIndex,P=k.isRange,T=[],L=C.props.key,U=C.item.type.defaultProps!==void 0?Le(Le({},C.item.type.defaultProps),C.item.props):C.item.props,D=U.activeDot,H=U.dataKey,B=Le(Le({index:A,dataKey:H,cx:j.x,cy:j.y,r:4,fill:LC(C.item),strokeWidth:2,stroke:"#fff",payload:j.payload,value:j.value},xt(D,!1)),s0(D));return T.push(y.renderActiveDot(D,B,"".concat(L,"-activePoint-").concat(A))),N?T.push(y.renderActiveDot(D,Le(Le({},B),{},{cx:N.x,cy:N.y}),"".concat(L,"-basePoint-").concat(A))):P&&T.push(null),T}),Ct(S,"renderGraphicChild",function(k,C,j){var N=S.filterFormatItem(k,C,j);if(!N)return null;var A=S.getTooltipEventType(),P=S.state,T=P.isTooltipActive,L=P.tooltipAxis,U=P.activeTooltipIndex,D=P.activeLabel,H=S.props.children,B=Oa(H,Ma),M=N.props,$=M.points,re=M.isRange,ie=M.baseLine,q=N.item.type.defaultProps!==void 0?Le(Le({},N.item.type.defaultProps),N.item.props):N.item.props,K=q.activeDot,ne=q.hide,ae=q.activeBar,_e=q.activeShape,pe=!!(!ne&&T&&B&&(K||ae||_e)),ye={};A!=="axis"&&B&&B.props.trigger==="click"?ye={onClick:Pv(S.handleItemMouseEnter,k.props.onClick)}:A!=="axis"&&(ye={onMouseLeave:Pv(S.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:Pv(S.handleItemMouseEnter,k.props.onMouseEnter)});var ce=h.cloneElement(k,Le(Le({},N.props),ye));function me(de){return typeof L.dataKey=="function"?L.dataKey(de.payload):null}if(pe)if(U>=0){var Q,te;if(L.dataKey&&!L.allowDuplicatedCategory){var Ne=typeof L.dataKey=="function"?me:"payload.".concat(L.dataKey.toString());Q=i0($,Ne,D),te=re&&ie&&i0(ie,Ne,D)}else Q=$==null?void 0:$[U],te=re&&ie&&ie[U];if(_e||ae){var je=k.props.activeIndex!==void 0?k.props.activeIndex:U;return[h.cloneElement(k,Le(Le(Le({},N.props),ye),{},{activeIndex:je})),null,null]}if(!zt(Q))return[ce].concat(Cf(S.renderActivePoints({item:N,activePoint:Q,basePoint:te,childIndex:U,isRange:re})))}else{var J,oe=(J=S.getItemByXY(S.state.activeCoordinate))!==null&&J!==void 0?J:{graphicalItem:ce},Ce=oe.graphicalItem,R=Ce.item,Y=R===void 0?k:R,Se=Ce.childIndex,Re=Le(Le(Le({},N.props),ye),{},{activeIndex:Se});return[h.cloneElement(Y,Re),null,null]}return re?[ce,null,null]:[ce,null]}),Ct(S,"renderCustomized",function(k,C,j){return h.cloneElement(k,Le(Le({key:"recharts-customized-".concat(j)},S.props),S.state))}),Ct(S,"renderMap",{CartesianGrid:{handler:Rv,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:Rv},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:Rv},YAxis:{handler:Rv},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((x=w.id)!==null&&x!==void 0?x:eh("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=s8(S.triggeredAfterMouseMove,(_=w.throttleDelay)!==null&&_!==void 0?_:1e3/60),S.state={},S}return $Ee(y,b),OEe(y,[{key:"componentDidMount",value:function(){var x,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var x=this.props,_=x.children,S=x.data,k=x.height,C=x.layout,j=Oa(_,Ma);if(j){var N=j.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var A=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,P=Rj(this.state,S,N,A),T=this.state.tooltipTicks[N].coordinate,L=(this.state.offset.top+k)/2,U=C==="horizontal",D=U?{x:T,y:L}:{y:T,x:L},H=this.state.formattedGraphicalItems.find(function(M){var $=M.item;return $.type.name==="Scatter"});H&&(D=Le(Le({},D),H.props.points[N].tooltipPosition),P=H.props.points[N].tooltipPayload);var B={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:A,activePayload:P,activeCoordinate:D};this.setState(B),this.renderCursor(j),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(x,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==x.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==x.margin){var S,k;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(x){d2([Oa(x.children,Ma)],[Oa(this.props.children,Ma)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var x=Oa(this.props.children,Ma);if(x&&typeof x.props.shared=="boolean"){var _=x.props.shared?"axis":"item";return l.indexOf(_)>=0?_:i}return i}},{key:"getMouseInfo",value:function(x){if(!this.container)return null;var _=this.container,S=_.getBoundingClientRect(),k=qve(S),C={chartX:Math.round(x.pageX-k.left),chartY:Math.round(x.pageY-k.top)},j=S.width/_.offsetWidth||1,N=this.inRange(C.chartX,C.chartY,j);if(!N)return null;var A=this.state,P=A.xAxisMap,T=A.yAxisMap,L=this.getTooltipEventType(),U=w4(this.state,this.props.data,this.props.layout,N);if(L!=="axis"&&P&&T){var D=al(P).scale,H=al(T).scale,B=D&&D.invert?D.invert(C.chartX):null,M=H&&H.invert?H.invert(C.chartY):null;return Le(Le({},C),{},{xValue:B,yValue:M},U)}return U?Le(Le({},C),U):null}},{key:"inRange",value:function(x,_){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,C=x/S,j=_/S;if(k==="horizontal"||k==="vertical"){var N=this.state.offset,A=C>=N.left&&C<=N.left+N.width&&j>=N.top&&j<=N.top+N.height;return A?{x:C,y:j}:null}var P=this.state,T=P.angleAxisMap,L=P.radiusAxisMap;if(T&&L){var U=al(T);return K5({x:C,y:j},U)}return null}},{key:"parseEventsOfWrapper",value:function(){var x=this.props.children,_=this.getTooltipEventType(),S=Oa(x,Ma),k={};S&&_==="axis"&&(S.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=s0(this.props,this.handleOuterEvent);return Le(Le({},C),k)}},{key:"addListener",value:function(){s_.on(o_,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){s_.removeListener(o_,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(x,_,S){for(var k=this.state.formattedGraphicalItems,C=0,j=k.length;C<j;C++){var N=k[C];if(N.item===x||N.props.key===x.key||_===ao(N.item.type)&&S===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var x=this.clipPathId,_=this.state.offset,S=_.left,k=_.top,C=_.height,j=_.width;return V.createElement("defs",null,V.createElement("clipPath",{id:x},V.createElement("rect",{x:S,y:k,height:C,width:j})))}},{key:"getXScales",value:function(){var x=this.state.xAxisMap;return x?Object.entries(x).reduce(function(_,S){var k=y4(S,2),C=k[0],j=k[1];return Le(Le({},_),{},Ct({},C,j.scale))},{}):null}},{key:"getYScales",value:function(){var x=this.state.yAxisMap;return x?Object.entries(x).reduce(function(_,S){var k=y4(S,2),C=k[0],j=k[1];return Le(Le({},_),{},Ct({},C,j.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(x){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[x])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(x){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[x])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(x){var _=this.state,S=_.formattedGraphicalItems,k=_.activeItem;if(S&&S.length)for(var C=0,j=S.length;C<j;C++){var N=S[C],A=N.props,P=N.item,T=P.type.defaultProps!==void 0?Le(Le({},P.type.defaultProps),P.props):P.props,L=ao(P.type);if(L==="Bar"){var U=(A.data||[]).find(function(M){return jSe(x,M)});if(U)return{graphicalItem:N,payload:U}}else if(L==="RadialBar"){var D=(A.data||[]).find(function(M){return K5(x,M)});if(D)return{graphicalItem:N,payload:D}}else if(ew(N,k)||tw(N,k)||Ep(N,k)){var H=fje({graphicalItem:N,activeTooltipItem:k,itemData:T.data}),B=T.activeIndex===void 0?H:T.activeIndex;return{graphicalItem:Le(Le({},N),{},{childIndex:B}),payload:Ep(N,k)?T.data[H]:N.props.data[H]}}}return null}},{key:"render",value:function(){var x=this;if(!DT(this))return null;var _=this.props,S=_.children,k=_.className,C=_.width,j=_.height,N=_.style,A=_.compact,P=_.title,T=_.desc,L=x4(_,kEe),U=xt(L,!1);if(A)return V.createElement(t4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement(h2,dd({},U,{width:C,height:j,title:P,desc:T}),this.renderClipPath(),FT(S,this.renderMap)));if(this.props.accessibilityLayer){var D,H;U.tabIndex=(D=this.props.tabIndex)!==null&&D!==void 0?D:0,U.role=(H=this.props.role)!==null&&H!==void 0?H:"application",U.onKeyDown=function(M){x.accessibilityManager.keyboardEvent(M)},U.onFocus=function(){x.accessibilityManager.focus()}}var B=this.parseEventsOfWrapper();return V.createElement(t4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement("div",dd({className:qt("recharts-wrapper",k),style:Le({position:"relative",cursor:"default",width:C,height:j},N)},B,{ref:function($){x.container=$}}),V.createElement(h2,dd({},U,{width:C,height:j,title:P,desc:T,style:qEe}),this.renderClipPath(),FT(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(h.Component);Ct(v,"displayName",r),Ct(v,"defaultProps",Le({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Ct(v,"getDerivedStateFromProps",function(b,y){var w=b.dataKey,x=b.data,_=b.children,S=b.width,k=b.height,C=b.layout,j=b.stackOffset,N=b.margin,A=y.dataStartIndex,P=y.dataEndIndex;if(y.updateId===void 0){var T=_4(b);return Le(Le(Le({},T),{},{updateId:0},p(Le(Le({props:b},T),{},{updateId:0}),y)),{},{prevDataKey:w,prevData:x,prevWidth:S,prevHeight:k,prevLayout:C,prevStackOffset:j,prevMargin:N,prevChildren:_})}if(w!==y.prevDataKey||x!==y.prevData||S!==y.prevWidth||k!==y.prevHeight||C!==y.prevLayout||j!==y.prevStackOffset||!_d(N,y.prevMargin)){var L=_4(b),U={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},D=Le(Le({},w4(y,x,C)),{},{updateId:y.updateId+1}),H=Le(Le(Le({},L),U),D);return Le(Le(Le({},H),p(Le({props:b},H),y)),{},{prevDataKey:w,prevData:x,prevWidth:S,prevHeight:k,prevLayout:C,prevStackOffset:j,prevMargin:N,prevChildren:_})}if(!d2(_,y.prevChildren)){var B,M,$,re,ie=Oa(_,pf),q=ie&&(B=(M=ie.props)===null||M===void 0?void 0:M.startIndex)!==null&&B!==void 0?B:A,K=ie&&($=(re=ie.props)===null||re===void 0?void 0:re.endIndex)!==null&&$!==void 0?$:P,ne=q!==A||K!==P,ae=!zt(x),_e=ae&&!ne?y.updateId:y.updateId+1;return Le(Le({updateId:_e},p(Le(Le({props:b},y),{},{updateId:_e,dataStartIndex:q,dataEndIndex:K}),y)),{},{prevChildren:_,dataStartIndex:q,dataEndIndex:K})}return null}),Ct(v,"renderActiveDot",function(b,y,w){var x;return h.isValidElement(b)?x=h.cloneElement(b,y):Tt(b)?x=b(y):x=V.createElement(Yb,y),V.createElement(tr,{className:"recharts-active-dot",key:w},x)});var g=h.forwardRef(function(y,w){return V.createElement(v,dd({},y,{ref:w}))});return g.displayName=v.displayName,g},JEe=IB({chartName:"PieChart",GraphicalChild:Ao,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Zb},{axisType:"radiusAxis",AxisComp:Qb}],formatAxisMap:Lwe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),$j=IB({chartName:"AreaChart",GraphicalChild:Wi,axisComponents:[{axisType:"xAxis",AxisComp:Sf},{axisType:"yAxis",AxisComp:kf}],formatAxisMap:Wke}),ZEe=h.createContext(void 0);function lh(e){const t=h.useContext(ZEe);return e||t||"ltr"}var c_=0;function lw(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??j4()),document.body.insertAdjacentElement("beforeend",e[1]??j4()),c_++,()=>{c_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),c_--}},[])}function j4(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var u_="focusScope.autoFocusOnMount",d_="focusScope.autoFocusOnUnmount",k4={bubbles:!1,cancelable:!0},eAe="FocusScope",fg=h.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=h.useState(null),u=rn(a),d=rn(i),f=h.useRef(null),m=Ot(t,g=>c(g)),p=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(n){let g=function(x){if(p.paused||!l)return;const _=x.target;l.contains(_)?f.current=_:Xo(f.current,{select:!0})},b=function(x){if(p.paused||!l)return;const _=x.relatedTarget;_!==null&&(l.contains(_)||Xo(f.current,{select:!0}))},y=function(x){if(document.activeElement===document.body)for(const S of x)S.removedNodes.length>0&&Xo(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const w=new MutationObserver(y);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),w.disconnect()}}},[n,l,p.paused]),h.useEffect(()=>{if(l){C4.add(p);const g=document.activeElement;if(!l.contains(g)){const y=new CustomEvent(u_,k4);l.addEventListener(u_,u),l.dispatchEvent(y),y.defaultPrevented||(tAe(sAe(MB(l)),{select:!0}),document.activeElement===g&&Xo(l))}return()=>{l.removeEventListener(u_,u),setTimeout(()=>{const y=new CustomEvent(d_,k4);l.addEventListener(d_,d),l.dispatchEvent(y),y.defaultPrevented||Xo(g??document.body,{select:!0}),l.removeEventListener(d_,d),C4.remove(p)},0)}}},[l,u,d,p]);const v=h.useCallback(g=>{if(!r&&!n||p.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(b&&y){const w=g.currentTarget,[x,_]=rAe(w);x&&_?!g.shiftKey&&y===_?(g.preventDefault(),r&&Xo(x,{select:!0})):g.shiftKey&&y===x&&(g.preventDefault(),r&&Xo(_,{select:!0})):y===w&&g.preventDefault()}},[r,n,p.paused]);return s.jsx(ot.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});fg.displayName=eAe;function tAe(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Xo(n,{select:t}),document.activeElement!==r)return}function rAe(e){const t=MB(e),r=N4(t,e),n=N4(t.reverse(),e);return[r,n]}function MB(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function N4(e,t){for(const r of e)if(!nAe(r,{upTo:t}))return r}function nAe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function aAe(e){return e instanceof HTMLInputElement&&"select"in e}function Xo(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&aAe(e)&&t&&e.select()}}var C4=iAe();function iAe(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=E4(e,t),e.unshift(t)},remove(t){var r;e=E4(e,t),(r=e[0])==null||r.resume()}}}function E4(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function sAe(e){return e.filter(t=>t.tagName!=="A")}var f_="rovingFocusGroup.onEntryFocus",oAe={bubbles:!1,cancelable:!0},hg="RovingFocusGroup",[Dj,RB,lAe]=Gp(hg),[cAe,cw]=zn(hg,[lAe]),[uAe,dAe]=cAe(hg),$B=h.forwardRef((e,t)=>s.jsx(Dj.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Dj.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(fAe,{...e,ref:t})})}));$B.displayName=hg;var fAe=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,m=h.useRef(null),p=Ot(t,m),v=lh(i),[g,b]=_s({prop:o,defaultProp:l??null,onChange:c,caller:hg}),[y,w]=h.useState(!1),x=rn(u),_=RB(r),S=h.useRef(!1),[k,C]=h.useState(0);return h.useEffect(()=>{const j=m.current;if(j)return j.addEventListener(f_,x),()=>j.removeEventListener(f_,x)},[x]),s.jsx(uAe,{scope:r,orientation:n,dir:v,loop:a,currentTabStopId:g,onItemFocus:h.useCallback(j=>b(j),[b]),onItemShiftTab:h.useCallback(()=>w(!0),[]),onFocusableItemAdd:h.useCallback(()=>C(j=>j+1),[]),onFocusableItemRemove:h.useCallback(()=>C(j=>j-1),[]),children:s.jsx(ot.div,{tabIndex:y||k===0?-1:0,"data-orientation":n,...f,ref:p,style:{outline:"none",...e.style},onMouseDown:Ve(e.onMouseDown,()=>{S.current=!0}),onFocus:Ve(e.onFocus,j=>{const N=!S.current;if(j.target===j.currentTarget&&N&&!y){const A=new CustomEvent(f_,oAe);if(j.currentTarget.dispatchEvent(A),!A.defaultPrevented){const P=_().filter(H=>H.focusable),T=P.find(H=>H.active),L=P.find(H=>H.id===g),D=[T,L,...P].filter(Boolean).map(H=>H.ref.current);FB(D,d)}}S.current=!1}),onBlur:Ve(e.onBlur,()=>w(!1))})})}),DB="RovingFocusGroupItem",LB=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=qi(),u=i||c,d=dAe(DB,r),f=d.currentTabStopId===u,m=RB(r),{onFocusableItemAdd:p,onFocusableItemRemove:v,currentTabStopId:g}=d;return h.useEffect(()=>{if(n)return p(),()=>v()},[n,p,v]),s.jsx(Dj.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:s.jsx(ot.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:Ve(e.onMouseDown,b=>{n?d.onItemFocus(u):b.preventDefault()}),onFocus:Ve(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Ve(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const y=pAe(b,d.orientation,d.dir);if(y!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let x=m().filter(_=>_.focusable).map(_=>_.ref.current);if(y==="last")x.reverse();else if(y==="prev"||y==="next"){y==="prev"&&x.reverse();const _=x.indexOf(b.currentTarget);x=d.loop?gAe(x,_+1):x.slice(_+1)}setTimeout(()=>FB(x))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:g!=null}):o})})});LB.displayName=DB;var hAe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function mAe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function pAe(e,t,r){const n=mAe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return hAe[n]}function FB(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function gAe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var BB=$B,UB=LB,vAe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ou=new WeakMap,$v=new WeakMap,Dv={},h_=0,qB=function(e){return e&&(e.host||qB(e.parentNode))},yAe=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=qB(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},xAe=function(e,t,r,n){var a=yAe(t,Array.isArray(e)?e:[e]);Dv[r]||(Dv[r]=new WeakMap);var i=Dv[r],o=[],l=new Set,c=new Set(a),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};a.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))d(m);else try{var p=m.getAttribute(n),v=p!==null&&p!=="false",g=(Ou.get(m)||0)+1,b=(i.get(m)||0)+1;Ou.set(m,g),i.set(m,b),o.push(m),g===1&&v&&$v.set(m,!0),b===1&&m.setAttribute(r,"true"),v||m.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",m,y)}})};return d(t),l.clear(),h_++,function(){o.forEach(function(f){var m=Ou.get(f)-1,p=i.get(f)-1;Ou.set(f,m),i.set(f,p),m||($v.has(f)||f.removeAttribute(n),$v.delete(f)),p||f.removeAttribute(r)}),h_--,h_||(Ou=new WeakMap,Ou=new WeakMap,$v=new WeakMap,Dv={})}},uw=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=vAe(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),xAe(n,a,r,"aria-hidden")):function(){return null}},by="right-scroll-bar-position",wy="width-before-scroll-bar",bAe="with-scroll-bars-hidden",wAe="--removed-body-scroll-bar-size";function m_(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function _Ae(e,t){var r=h.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var SAe=typeof window<"u"?h.useLayoutEffect:h.useEffect,A4=new WeakMap;function jAe(e,t){var r=_Ae(null,function(n){return e.forEach(function(a){return m_(a,n)})});return SAe(function(){var n=A4.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||m_(l,null)}),i.forEach(function(l){a.has(l)||m_(l,o)})}A4.set(r,e)},[e]),r}function kAe(e){return e}function NAe(e,t){t===void 0&&(t=kAe);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return a}function CAe(e){e===void 0&&(e={});var t=NAe(null);return t.options=cs({async:!0,ssr:!1},e),t}var zB=function(e){var t=e.sideCar,r=Kf(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return h.createElement(n,cs({},r))};zB.isSideCarExport=!0;function EAe(e,t){return e.useMedium(t),zB}var WB=CAe(),p_=function(){},dw=h.forwardRef(function(e,t){var r=h.useRef(null),n=h.useState({onScrollCapture:p_,onWheelCapture:p_,onTouchMoveCapture:p_}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,m=e.sideCar,p=e.noRelative,v=e.noIsolation,g=e.inert,b=e.allowPinchZoom,y=e.as,w=y===void 0?"div":y,x=e.gapMode,_=Kf(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,k=jAe([r,t]),C=cs(cs({},_),a);return h.createElement(h.Fragment,null,d&&h.createElement(S,{sideCar:WB,removeScrollBar:u,shards:f,noRelative:p,noIsolation:v,inert:g,setCallbacks:i,allowPinchZoom:!!b,lockRef:r,gapMode:x}),o?h.cloneElement(h.Children.only(l),cs(cs({},C),{ref:k})):h.createElement(w,cs({},C,{className:c,ref:k}),l))});dw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};dw.classNames={fullWidth:wy,zeroRight:by};var AAe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function PAe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=AAe();return t&&e.setAttribute("nonce",t),e}function TAe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function OAe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var IAe=function(){var e=0,t=null;return{add:function(r){e==0&&(t=PAe())&&(TAe(t,r),OAe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},MAe=function(){var e=IAe();return function(t,r){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},HB=function(){var e=MAe(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},RAe={left:0,top:0,right:0,gap:0},g_=function(e){return parseInt(e||"",10)||0},$Ae=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[g_(r),g_(n),g_(a)]},DAe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return RAe;var t=$Ae(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},LAe=HB(),Cd="data-scroll-locked",FAe=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(bAe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Cd,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(by,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(wy,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(by," .").concat(by,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(wy," .").concat(wy,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Cd,`] {
    `).concat(wAe,": ").concat(l,`px;
  }
`)},P4=function(){var e=parseInt(document.body.getAttribute(Cd)||"0",10);return isFinite(e)?e:0},BAe=function(){h.useEffect(function(){return document.body.setAttribute(Cd,(P4()+1).toString()),function(){var e=P4()-1;e<=0?document.body.removeAttribute(Cd):document.body.setAttribute(Cd,e.toString())}},[])},UAe=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;BAe();var i=h.useMemo(function(){return DAe(a)},[a]);return h.createElement(LAe,{styles:FAe(i,!t,a,r?"":"!important")})},Lj=!1;if(typeof window<"u")try{var Lv=Object.defineProperty({},"passive",{get:function(){return Lj=!0,!0}});window.addEventListener("test",Lv,Lv),window.removeEventListener("test",Lv,Lv)}catch{Lj=!1}var Iu=Lj?{passive:!1}:!1,qAe=function(e){return e.tagName==="TEXTAREA"},VB=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!qAe(e)&&r[t]==="visible")},zAe=function(e){return VB(e,"overflowY")},WAe=function(e){return VB(e,"overflowX")},T4=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=KB(e,n);if(a){var i=GB(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},HAe=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},VAe=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},KB=function(e,t){return e==="v"?zAe(t):WAe(t)},GB=function(e,t){return e==="v"?HAe(t):VAe(t)},KAe=function(e,t){return e==="h"&&t==="rtl"?-1:1},GAe=function(e,t,r,n,a){var i=KAe(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),u=!1,d=o>0,f=0,m=0;do{if(!l)break;var p=GB(e,l),v=p[0],g=p[1],b=p[2],y=g-b-i*v;(v||y)&&KB(e,l)&&(f+=y,m+=v);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(f)<1||!a)||!d&&(Math.abs(m)<1||!a))&&(u=!0),u},Fv=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},O4=function(e){return[e.deltaX,e.deltaY]},I4=function(e){return e&&"current"in e?e.current:e},YAe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},XAe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},QAe=0,Mu=[];function JAe(e){var t=h.useRef([]),r=h.useRef([0,0]),n=h.useRef(),a=h.useState(QAe++)[0],i=h.useState(HB)[0],o=h.useRef(e);h.useEffect(function(){o.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=wee([e.lockRef.current],(e.shards||[]).map(I4),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=h.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var y=Fv(g),w=r.current,x="deltaX"in g?g.deltaX:w[0]-y[0],_="deltaY"in g?g.deltaY:w[1]-y[1],S,k=g.target,C=Math.abs(x)>Math.abs(_)?"h":"v";if("touches"in g&&C==="h"&&k.type==="range")return!1;var j=T4(C,k);if(!j)return!0;if(j?S=C:(S=C==="v"?"h":"v",j=T4(C,k)),!j)return!1;if(!n.current&&"changedTouches"in g&&(x||_)&&(n.current=S),!S)return!0;var N=n.current||S;return GAe(N,b,g,N==="h"?x:_,!0)},[]),c=h.useCallback(function(g){var b=g;if(!(!Mu.length||Mu[Mu.length-1]!==i)){var y="deltaY"in b?O4(b):Fv(b),w=t.current.filter(function(S){return S.name===b.type&&(S.target===b.target||b.target===S.shadowParent)&&YAe(S.delta,y)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var x=(o.current.shards||[]).map(I4).filter(Boolean).filter(function(S){return S.contains(b.target)}),_=x.length>0?l(b,x[0]):!o.current.noIsolation;_&&b.cancelable&&b.preventDefault()}}},[]),u=h.useCallback(function(g,b,y,w){var x={name:g,delta:b,target:y,should:w,shadowParent:ZAe(y)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(_){return _!==x})},1)},[]),d=h.useCallback(function(g){r.current=Fv(g),n.current=void 0},[]),f=h.useCallback(function(g){u(g.type,O4(g),g.target,l(g,e.lockRef.current))},[]),m=h.useCallback(function(g){u(g.type,Fv(g),g.target,l(g,e.lockRef.current))},[]);h.useEffect(function(){return Mu.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Iu),document.addEventListener("touchmove",c,Iu),document.addEventListener("touchstart",d,Iu),function(){Mu=Mu.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,Iu),document.removeEventListener("touchmove",c,Iu),document.removeEventListener("touchstart",d,Iu)}},[]);var p=e.removeScrollBar,v=e.inert;return h.createElement(h.Fragment,null,v?h.createElement(i,{styles:XAe(a)}):null,p?h.createElement(UAe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function ZAe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ePe=EAe(WB,JAe);var mg=h.forwardRef(function(e,t){return h.createElement(dw,cs({},e,{ref:t,sideCar:ePe}))});mg.classNames=dw.classNames;var Fj=["Enter"," "],tPe=["ArrowDown","PageUp","Home"],YB=["ArrowUp","PageDown","End"],rPe=[...tPe,...YB],nPe={ltr:[...Fj,"ArrowRight"],rtl:[...Fj,"ArrowLeft"]},aPe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},pg="Menu",[Rp,iPe,sPe]=Gp(pg),[hu,XB]=zn(pg,[sPe,Fl,cw]),fw=Fl(),QB=cw(),[oPe,mu]=hu(pg),[lPe,gg]=hu(pg),JB=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=e,l=fw(t),[c,u]=h.useState(null),d=h.useRef(!1),f=rn(i),m=lh(a);return h.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),s.jsx(SN,{...l,children:s.jsx(oPe,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:u,children:s.jsx(lPe,{scope:t,onClose:h.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:m,modal:o,children:n})})})};JB.displayName=pg;var cPe="MenuAnchor",YC=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=fw(r);return s.jsx(Jp,{...a,...n,ref:t})});YC.displayName=cPe;var XC="MenuPortal",[uPe,ZB]=hu(XC,{forceMount:void 0}),eU=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,i=mu(XC,t);return s.jsx(uPe,{scope:t,forceMount:r,children:s.jsx(Wn,{present:r||i.open,children:s.jsx(Df,{asChild:!0,container:a,children:n})})})};eU.displayName=XC;var mi="MenuContent",[dPe,QC]=hu(mi),tU=h.forwardRef((e,t)=>{const r=ZB(mi,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=mu(mi,e.__scopeMenu),o=gg(mi,e.__scopeMenu);return s.jsx(Rp.Provider,{scope:e.__scopeMenu,children:s.jsx(Wn,{present:n||i.open,children:s.jsx(Rp.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(fPe,{...a,ref:t}):s.jsx(hPe,{...a,ref:t})})})})}),fPe=h.forwardRef((e,t)=>{const r=mu(mi,e.__scopeMenu),n=h.useRef(null),a=Ot(t,n);return h.useEffect(()=>{const i=n.current;if(i)return uw(i)},[]),s.jsx(JC,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Ve(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),hPe=h.forwardRef((e,t)=>{const r=mu(mi,e.__scopeMenu);return s.jsx(JC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),mPe=Pl("MenuContent.ScrollLock"),JC=h.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:p,disableOutsideScroll:v,...g}=e,b=mu(mi,r),y=gg(mi,r),w=fw(r),x=QB(r),_=iPe(r),[S,k]=h.useState(null),C=h.useRef(null),j=Ot(t,C,b.onContentChange),N=h.useRef(0),A=h.useRef(""),P=h.useRef(0),T=h.useRef(null),L=h.useRef("right"),U=h.useRef(0),D=v?mg:h.Fragment,H=v?{as:mPe,allowPinchZoom:!0}:void 0,B=$=>{var pe,ye;const re=A.current+$,ie=_().filter(ce=>!ce.disabled),q=document.activeElement,K=(pe=ie.find(ce=>ce.ref.current===q))==null?void 0:pe.textValue,ne=ie.map(ce=>ce.textValue),ae=NPe(ne,re,K),_e=(ye=ie.find(ce=>ce.textValue===ae))==null?void 0:ye.ref.current;(function ce(me){A.current=me,window.clearTimeout(N.current),me!==""&&(N.current=window.setTimeout(()=>ce(""),1e3))})(re),_e&&setTimeout(()=>_e.focus())};h.useEffect(()=>()=>window.clearTimeout(N.current),[]),lw();const M=h.useCallback($=>{var ie,q;return L.current===((ie=T.current)==null?void 0:ie.side)&&EPe($,(q=T.current)==null?void 0:q.area)},[]);return s.jsx(dPe,{scope:r,searchRef:A,onItemEnter:h.useCallback($=>{M($)&&$.preventDefault()},[M]),onItemLeave:h.useCallback($=>{var re;M($)||((re=C.current)==null||re.focus(),k(null))},[M]),onTriggerLeave:h.useCallback($=>{M($)&&$.preventDefault()},[M]),pointerGraceTimerRef:P,onPointerGraceIntentChange:h.useCallback($=>{T.current=$},[]),children:s.jsx(D,{...H,children:s.jsx(fg,{asChild:!0,trapped:a,onMountAutoFocus:Ve(i,$=>{var re;$.preventDefault(),(re=C.current)==null||re.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(lu,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:p,children:s.jsx(BB,{asChild:!0,...x,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:S,onCurrentTabStopIdChange:k,onEntryFocus:Ve(c,$=>{y.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(ab,{role:"menu","aria-orientation":"vertical","data-state":vU(b.open),"data-radix-menu-content":"",dir:y.dir,...w,...g,ref:j,style:{outline:"none",...g.style},onKeyDown:Ve(g.onKeyDown,$=>{const ie=$.target.closest("[data-radix-menu-content]")===$.currentTarget,q=$.ctrlKey||$.altKey||$.metaKey,K=$.key.length===1;ie&&($.key==="Tab"&&$.preventDefault(),!q&&K&&B($.key));const ne=C.current;if($.target!==ne||!rPe.includes($.key))return;$.preventDefault();const _e=_().filter(pe=>!pe.disabled).map(pe=>pe.ref.current);YB.includes($.key)&&_e.reverse(),jPe(_e)}),onBlur:Ve(e.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(N.current),A.current="")}),onPointerMove:Ve(e.onPointerMove,$p($=>{const re=$.target,ie=U.current!==$.clientX;if($.currentTarget.contains(re)&&ie){const q=$.clientX>U.current?"right":"left";L.current=q,U.current=$.clientX}}))})})})})})})});tU.displayName=mi;var pPe="MenuGroup",ZC=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(ot.div,{role:"group",...n,ref:t})});ZC.displayName=pPe;var gPe="MenuLabel",rU=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(ot.div,{...n,ref:t})});rU.displayName=gPe;var sx="MenuItem",M4="menu.itemSelect",hw=h.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,i=h.useRef(null),o=gg(sx,e.__scopeMenu),l=QC(sx,e.__scopeMenu),c=Ot(t,i),u=h.useRef(!1),d=()=>{const f=i.current;if(!r&&f){const m=new CustomEvent(M4,{bubbles:!0,cancelable:!0});f.addEventListener(M4,p=>n==null?void 0:n(p),{once:!0}),Gk(f,m),m.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(nU,{...a,ref:c,disabled:r,onClick:Ve(e.onClick,d),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),u.current=!0},onPointerUp:Ve(e.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:Ve(e.onKeyDown,f=>{const m=l.searchRef.current!=="";r||m&&f.key===" "||Fj.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});hw.displayName=sx;var nU=h.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=e,o=QC(sx,r),l=QB(r),c=h.useRef(null),u=Ot(t,c),[d,f]=h.useState(!1),[m,p]=h.useState("");return h.useEffect(()=>{const v=c.current;v&&p((v.textContent??"").trim())},[i.children]),s.jsx(Rp.ItemSlot,{scope:r,disabled:n,textValue:a??m,children:s.jsx(UB,{asChild:!0,...l,focusable:!n,children:s.jsx(ot.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:Ve(e.onPointerMove,$p(v=>{n?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ve(e.onPointerLeave,$p(v=>o.onItemLeave(v))),onFocus:Ve(e.onFocus,()=>f(!0)),onBlur:Ve(e.onBlur,()=>f(!1))})})})}),vPe="MenuCheckboxItem",aU=h.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return s.jsx(cU,{scope:e.__scopeMenu,checked:r,children:s.jsx(hw,{role:"menuitemcheckbox","aria-checked":ox(r)?"mixed":r,...a,ref:t,"data-state":tE(r),onSelect:Ve(a.onSelect,()=>n==null?void 0:n(ox(r)?!0:!r),{checkForDefaultPrevented:!1})})})});aU.displayName=vPe;var iU="MenuRadioGroup",[yPe,xPe]=hu(iU,{value:void 0,onValueChange:()=>{}}),sU=h.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,i=rn(n);return s.jsx(yPe,{scope:e.__scopeMenu,value:r,onValueChange:i,children:s.jsx(ZC,{...a,ref:t})})});sU.displayName=iU;var oU="MenuRadioItem",lU=h.forwardRef((e,t)=>{const{value:r,...n}=e,a=xPe(oU,e.__scopeMenu),i=r===a.value;return s.jsx(cU,{scope:e.__scopeMenu,checked:i,children:s.jsx(hw,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":tE(i),onSelect:Ve(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});lU.displayName=oU;var eE="MenuItemIndicator",[cU,bPe]=hu(eE,{checked:!1}),uU=h.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,i=bPe(eE,r);return s.jsx(Wn,{present:n||ox(i.checked)||i.checked===!0,children:s.jsx(ot.span,{...a,ref:t,"data-state":tE(i.checked)})})});uU.displayName=eE;var wPe="MenuSeparator",dU=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(ot.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});dU.displayName=wPe;var _Pe="MenuArrow",fU=h.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=fw(r);return s.jsx(ib,{...a,...n,ref:t})});fU.displayName=_Pe;var SPe="MenuSub",[f3e,hU]=hu(SPe),Xh="MenuSubTrigger",mU=h.forwardRef((e,t)=>{const r=mu(Xh,e.__scopeMenu),n=gg(Xh,e.__scopeMenu),a=hU(Xh,e.__scopeMenu),i=QC(Xh,e.__scopeMenu),o=h.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=h.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return h.useEffect(()=>d,[d]),h.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),s.jsx(YC,{asChild:!0,...u,children:s.jsx(nU,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":vU(r.open),...e,ref:Rx(t,a.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Ve(e.onPointerMove,$p(f=>{i.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:Ve(e.onPointerLeave,$p(f=>{var p,v;d();const m=(p=r.content)==null?void 0:p.getBoundingClientRect();if(m){const g=(v=r.content)==null?void 0:v.dataset.side,b=g==="right",y=b?-5:5,w=m[b?"left":"right"],x=m[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+y,y:f.clientY},{x:w,y:m.top},{x,y:m.top},{x,y:m.bottom},{x:w,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ve(e.onKeyDown,f=>{var p;const m=i.searchRef.current!=="";e.disabled||m&&f.key===" "||nPe[n.dir].includes(f.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),f.preventDefault())})})})});mU.displayName=Xh;var pU="MenuSubContent",gU=h.forwardRef((e,t)=>{const r=ZB(mi,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=mu(mi,e.__scopeMenu),o=gg(mi,e.__scopeMenu),l=hU(pU,e.__scopeMenu),c=h.useRef(null),u=Ot(t,c);return s.jsx(Rp.Provider,{scope:e.__scopeMenu,children:s.jsx(Wn,{present:n||i.open,children:s.jsx(Rp.Slot,{scope:e.__scopeMenu,children:s.jsx(JC,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Ve(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ve(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Ve(e.onKeyDown,d=>{var p;const f=d.currentTarget.contains(d.target),m=aPe[o.dir].includes(d.key);f&&m&&(i.onOpenChange(!1),(p=l.trigger)==null||p.focus(),d.preventDefault())})})})})})});gU.displayName=pU;function vU(e){return e?"open":"closed"}function ox(e){return e==="indeterminate"}function tE(e){return ox(e)?"indeterminate":e?"checked":"unchecked"}function jPe(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function kPe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function NPe(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=kPe(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function CPe(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,m=c.y;d>n!=m>n&&r<(f-u)*(n-d)/(m-d)+u&&(a=!a)}return a}function EPe(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return CPe(r,t)}function $p(e){return t=>t.pointerType==="mouse"?e(t):void 0}var APe=JB,PPe=YC,TPe=eU,OPe=tU,IPe=ZC,MPe=rU,RPe=hw,$Pe=aU,DPe=sU,LPe=lU,FPe=uU,BPe=dU,UPe=fU,qPe=mU,zPe=gU,mw="DropdownMenu",[WPe,h3e]=zn(mw,[XB]),fa=XB(),[HPe,yU]=WPe(mw),xU=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=fa(t),u=h.useRef(null),[d,f]=_s({prop:a,defaultProp:i??!1,onChange:o,caller:mw});return s.jsx(HPe,{scope:t,triggerId:qi(),triggerRef:u,contentId:qi(),open:d,onOpenChange:f,onOpenToggle:h.useCallback(()=>f(m=>!m),[f]),modal:l,children:s.jsx(APe,{...c,open:d,onOpenChange:f,dir:n,modal:l,children:r})})};xU.displayName=mw;var bU="DropdownMenuTrigger",wU=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,i=yU(bU,r),o=fa(r);return s.jsx(PPe,{asChild:!0,...o,children:s.jsx(ot.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:Rx(t,i.triggerRef),onPointerDown:Ve(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Ve(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});wU.displayName=bU;var VPe="DropdownMenuPortal",_U=e=>{const{__scopeDropdownMenu:t,...r}=e,n=fa(t);return s.jsx(TPe,{...n,...r})};_U.displayName=VPe;var SU="DropdownMenuContent",jU=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=yU(SU,r),i=fa(r),o=h.useRef(!1);return s.jsx(OPe,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:Ve(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ve(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jU.displayName=SU;var KPe="DropdownMenuGroup",GPe=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=fa(r);return s.jsx(IPe,{...a,...n,ref:t})});GPe.displayName=KPe;var YPe="DropdownMenuLabel",kU=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=fa(r);return s.jsx(MPe,{...a,...n,ref:t})});kU.displayName=YPe;var XPe="DropdownMenuItem",NU=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=fa(r);return s.jsx(RPe,{...a,...n,ref:t})});NU.displayName=XPe;var QPe="DropdownMenuCheckboxItem",CU=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=fa(r);return s.jsx($Pe,{...a,...n,ref:t})});CU.displayName=QPe;var JPe="DropdownMenuRadioGroup",EU=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=fa(r);return s.jsx(DPe,{...a,...n,ref:t})});EU.displayName=JPe;var ZPe="DropdownMenuRadioItem",AU=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=fa(r);return s.jsx(LPe,{...a,...n,ref:t})});AU.displayName=ZPe;var eTe="DropdownMenuItemIndicator",PU=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=fa(r);return s.jsx(FPe,{...a,...n,ref:t})});PU.displayName=eTe;var tTe="DropdownMenuSeparator",TU=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=fa(r);return s.jsx(BPe,{...a,...n,ref:t})});TU.displayName=tTe;var rTe="DropdownMenuArrow",nTe=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=fa(r);return s.jsx(UPe,{...a,...n,ref:t})});nTe.displayName=rTe;var aTe="DropdownMenuSubTrigger",OU=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=fa(r);return s.jsx(qPe,{...a,...n,ref:t})});OU.displayName=aTe;var iTe="DropdownMenuSubContent",IU=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=fa(r);return s.jsx(zPe,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});IU.displayName=iTe;var sTe=xU,oTe=wU,lTe=_U,MU=jU,RU=kU,$U=NU,DU=CU,cTe=EU,LU=AU,FU=PU,BU=TU,UU=OU,qU=IU;const en=sTe,tn=oTe,Ra=cTe,uTe=h.forwardRef(({className:e,inset:t,children:r,...n},a)=>s.jsxs(UU,{ref:a,className:Pe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...n,children:[r,s.jsx(Gx,{className:"ml-auto h-4 w-4"})]}));uTe.displayName=UU.displayName;const dTe=h.forwardRef(({className:e,...t},r)=>s.jsx(qU,{ref:r,className:Pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));dTe.displayName=qU.displayName;const Hr=h.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(lTe,{children:s.jsxs(s.Fragment,{children:[s.jsx("div",{"aria-hidden":"true",className:"acq-popover-backdrop fixed inset-0 z-[60] bg-black/70 backdrop-blur-[2px]"}),s.jsx(MU,{ref:n,sideOffset:t,className:Pe("z-[70] min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})]})}));Hr.displayName=MU.displayName;const wr=h.forwardRef(({className:e,inset:t,...r},n)=>s.jsx($U,{ref:n,className:Pe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...r}));wr.displayName=$U.displayName;const fTe=h.forwardRef(({className:e,children:t,checked:r,...n},a)=>s.jsxs(DU,{ref:a,className:Pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(FU,{children:s.jsx(Ha,{className:"h-4 w-4"})})}),t]}));fTe.displayName=DU.displayName;const er=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(LU,{ref:n,className:Pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(FU,{children:s.jsx(Gd,{className:"h-2 w-2 fill-current"})})}),t]}));er.displayName=LU.displayName;const zU=h.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(RU,{ref:n,className:Pe("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));zU.displayName=RU.displayName;const di=h.forwardRef(({className:e,...t},r)=>s.jsx(BU,{ref:r,className:Pe("-mx-1 my-1 h-[0.5px] bg-muted",e),...t}));di.displayName=BU.displayName;function R4(e,t=.22){const r=String(e||"").trim();if(!r)return`rgba(255, 255, 255, ${t})`;if(/^#[0-9a-f]{3}$/i.test(r)){const n=r.slice(1).split("").map(l=>l+l).join(""),a=parseInt(n.slice(0,2),16),i=parseInt(n.slice(2,4),16),o=parseInt(n.slice(4,6),16);return`rgba(${a}, ${i}, ${o}, ${t})`}if(/^#[0-9a-f]{6}$/i.test(r)){const n=r.slice(1),a=parseInt(n.slice(0,2),16),i=parseInt(n.slice(2,4),16),o=parseInt(n.slice(4,6),16);return`rgba(${a}, ${i}, ${o}, ${t})`}return r}function vg(e){return e?{"--orb-tint":R4(e,.16),"--orb-glow":R4(e,.42)}:{"--orb-tint":"rgba(255,255,255,0.06)","--orb-glow":"rgba(255,255,255,0.18)"}}function hTe({icon:e,label:t,active:r,onClick:n,badgeCount:a=0}){const[i,o]=h.useState(!1),l=Math.max(0,Number(a)||0),c=l>9?"9+":String(l);return s.jsxs("button",{onClick:()=>{o(!1),n()},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),"data-sidebar-nav":"true",className:Pe("sidebar-nav-item group relative mx-auto flex h-12 w-12 items-center justify-center rounded-2xl transition-colors duration-150",r?"bg-[#1a1a1a]":"bg-transparent hover:bg-[#1a1a1a]"),"aria-label":t,children:[s.jsx(e,{className:"w-[20px] h-[20px] shrink-0 text-white",strokeWidth:1.5}),l>0?s.jsx("span",{className:"absolute right-[8px] top-[8px] min-w-[17px] h-[17px] rounded-full bg-[#2d5bff] px-[4px] text-[11px] font-medium text-white leading-[17px] text-center ring-[1.5px] ring-[#0a0a0a]",children:c}):null,s.jsx("div",{className:Pe("pointer-events-none absolute left-[calc(100%+10px)] top-1/2 z-50 -translate-y-1/2 whitespace-nowrap rounded-2xl bg-[#1a1a1a] px-4 py-2 text-[14px] font-normal text-white/95 shadow-[0_0_24px_rgba(0,0,0,0.17)] transition-all duration-180 ease-out",i?"opacity-100 translate-x-0":"opacity-0 -translate-x-1"),children:t}),s.jsx("span",{className:"sr-only",children:t})]})}function Dp({name:e,size:t="md",bgColor:r,imageUrl:n,mode:a="photo"}){const i=e.charAt(0).toUpperCase(),o={nav:"w-4 h-4 text-[10px]",sm:"w-8 h-8 text-sm",md:"w-10 h-10 text-base",lg:"w-16 h-16 text-2xl",xl:"w-24 h-24 text-4xl"},l=r||"#2A2A2A",c=a==="photo"&&n;return s.jsx("div",{className:Pe(o[t],"acq-orb flex items-center justify-center shrink-0 font-medium text-[#d5d9df]"),style:vg(l),children:c?s.jsx("img",{src:n||void 0,alt:e,className:"w-full h-full object-cover",loading:"lazy",decoding:"async"}):i})}function $4(){var M,$;const e=Xt(),t=Hn(),{user:r,profile:n,signOut:a}=Kt(),{userRole:i,workspace:o}=on(),{portalRole:l}=Qi(),c=typeof window<"u"&&window.sessionStorage.getItem("acq_signin_intent")==="setter",u=!!(r!=null&&r.id)&&yo(r.id),d=xo(r==null?void 0:r.user_metadata),f=c||u||d||i==="setter"||l==="setter",[m,p]=h.useState("#2A2A2A"),[v,g]=h.useState(!1),[b,y]=h.useState(!1),[w,x]=h.useState(!1),[_,S]=h.useState(0),k=(n==null?void 0:n.avatar_mode)||"photo",C=(n==null?void 0:n.avatar_url)||((M=r==null?void 0:r.user_metadata)==null?void 0:M.avatar_url)||null,j=(n==null?void 0:n.full_name)||(n==null?void 0:n.display_name)||(($=r==null?void 0:r.email)==null?void 0:$.split("@")[0])||"User",N=f?"/setter-portal/messages":"/profile";h.useEffect(()=>{n!=null&&n.avatar_color&&p(n.avatar_color)},[n==null?void 0:n.avatar_color]),h.useEffect(()=>{const re=String((o==null?void 0:o.id)||"").trim();if(!re){S(0);return}let ie=!1;const q=ae=>{if(!ae)return 0;const _e=Date.parse(String(ae));return Number.isFinite(_e)?_e:0},K=async()=>{try{let ae=z.from("instagram_threads").select("conversation_id,last_inbound_at,last_outbound_at,last_message_at,last_message_direction,shared_last_read_at,assigned_user_id,hidden_from_setters,shared_with_setters,lead_status").eq("workspace_id",re);f&&(ae=ae.eq("hidden_from_setters",!1).eq("shared_with_setters",!0));const _e=z.from("instagram_thread_reads").select("conversation_id,last_read_at").eq("workspace_id",re),[{data:pe,error:ye},{data:ce,error:me}]=await Promise.all([ae,_e]);if(ye)throw ye;if(me)throw me;if(ie)return;const Q=String((r==null?void 0:r.id)||""),te={};for(const J of Array.isArray(ce)?ce:[]){const oe=String((J==null?void 0:J.conversation_id)||"");if(!oe)continue;const Ce=q(J==null?void 0:J.last_read_at);Ce&&(te[oe]=Math.max(te[oe]||0,Ce))}const je=(Array.isArray(pe)?pe:[]).reduce((J,oe)=>{if(String((oe==null?void 0:oe.lead_status)||"open").toLowerCase()==="removed")return J;if(f){const ue=String((oe==null?void 0:oe.assigned_user_id)||"");if(ue&&Q&&ue!==Q)return J}const R=String((oe==null?void 0:oe.conversation_id)||"");if(!R)return J;const Y=q(oe==null?void 0:oe.last_message_at),Se=String((oe==null?void 0:oe.last_message_direction)||"").toLowerCase(),Re=Math.max(q(oe==null?void 0:oe.last_inbound_at),Se==="inbound"?Y:0);if(!Re)return J;const de=Math.max(q(oe==null?void 0:oe.last_outbound_at),Se==="outbound"?Y:0),G=Math.max(te[R]||0,q(oe==null?void 0:oe.shared_last_read_at),de);return Re>G?J+1:J},0);S(je)}catch{ie||S(0)}};K();const ne=window.setInterval(K,3e4);return()=>{ie=!0,window.clearInterval(ne)}},[o==null?void 0:o.id,f,r==null?void 0:r.id,t.pathname]);const A=[{icon:AY,label:"Dashboard",path:"/dashboard"},{icon:FS,label:"Inbox",path:"/messages"},{icon:Vc,label:"Clients",path:"/clients"},{icon:WY,label:"Content",path:"/content"}],P=[{icon:kP,label:"Leads",path:"/outreach"},{icon:NP,label:"Team",path:"/team"}],T="/setter-portal",L=[{icon:FS,label:"Inbox",path:`${T}/messages`},{icon:kP,label:"Leads",path:`${T}/outreach`},{icon:NP,label:"Setters",path:`${T}/setters`}],U=f?L:[...A,...P],D=re=>t.pathname===re||t.pathname.startsWith(re+"/"),H=re=>{if(re==="/analytics"){ee.info("Week analytics is coming soon.");return}e(re)},B=async()=>{await a(),e("/auth")};return s.jsxs("div",{className:"h-screen w-[86px] bg-[#0a0a0a] flex flex-col py-4 flex-shrink-0 overflow-visible",children:[s.jsx("div",{className:"mb-2 flex justify-center px-2",children:s.jsx("div",{className:"flex h-10 w-10 items-center justify-center",children:s.jsx("img",{src:"/Integrity%20logo.png",alt:"Integrity",className:"h-7 w-7 object-contain",loading:"eager",decoding:"async"})})}),s.jsxs("nav",{className:"flex-1 flex flex-col items-center justify-center gap-3 overflow-visible px-2",children:[U.map(re=>s.jsx(hTe,{icon:re.icon,label:re.label,active:D(re.path),onClick:()=>H(re.path),badgeCount:re.label==="Inbox"?_:0},re.path)),f?null:s.jsxs("button",{type:"button",onClick:()=>{y(!1),H(N)},onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),"data-sidebar-nav":"true",className:Pe("sidebar-nav-item group relative flex h-9 w-9 items-center justify-center rounded-2xl transition-colors duration-150",D("/profile")?"bg-[#1a1a1a]":"bg-transparent hover:bg-[#1a1a1a]"),"aria-label":"Profile",children:[s.jsx(Dp,{name:j,size:"sm",bgColor:m,imageUrl:C,mode:k}),s.jsx("div",{className:Pe("pointer-events-none absolute left-[calc(100%+10px)] top-1/2 z-50 -translate-y-1/2 whitespace-nowrap rounded-2xl bg-[#1a1a1a] px-4 py-2 text-[14px] font-normal text-white/95 shadow-[0_0_24px_rgba(0,0,0,0.17)] transition-all duration-180 ease-out",b?"opacity-100 translate-x-0":"opacity-0 -translate-x-1"),children:"Profile"})]})]}),s.jsx("div",{className:"mt-3 flex flex-col items-center gap-3 px-2",children:s.jsxs(en,{open:v,onOpenChange:g,children:[s.jsx(tn,{asChild:!0,children:s.jsxs("button",{type:"button",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),"data-sidebar-nav":"true",className:Pe("sidebar-nav-item group relative flex h-10 w-10 items-center justify-center rounded-2xl transition-colors duration-150",v?"bg-[#1a1a1a]":"bg-transparent hover:bg-[#1a1a1a]"),"aria-label":"Menu",children:[s.jsx(OY,{className:"w-[20px] h-[20px] text-white",strokeWidth:1.5}),s.jsx("div",{className:Pe("pointer-events-none absolute left-[calc(100%+10px)] top-1/2 z-50 -translate-y-1/2 whitespace-nowrap rounded-2xl bg-[#1a1a1a] px-4 py-2 text-[14px] font-normal text-white/95 shadow-[0_0_24px_rgba(0,0,0,0.17)] transition-all duration-180 ease-out",w&&!v?"opacity-100 translate-x-0":"opacity-0 -translate-x-1"),children:"Menu"})]})}),s.jsxs(Hr,{side:"right",align:"end",sideOffset:10,className:"w-48 bg-popover rounded-xl",children:[f?null:s.jsxs(wr,{onClick:()=>H("/settings"),className:"rounded-lg",children:[s.jsx(LY,{className:"w-4 h-4 mr-2"}),"Settings"]}),s.jsxs(wr,{onClick:()=>window.open("mailto:support@theacq.app","_blank"),className:"rounded-lg",children:[s.jsx(CY,{className:"w-4 h-4 mr-2"}),"Contact ACQ Team"]}),s.jsx(di,{}),s.jsxs(wr,{onClick:()=>window.open("/privacy","_blank"),className:"rounded-lg",children:[s.jsx(FY,{className:"w-4 h-4 mr-2"}),"Privacy Policy"]}),s.jsxs(wr,{onClick:()=>window.open("/terms","_blank"),className:"rounded-lg",children:[s.jsx(f3,{className:"w-4 h-4 mr-2"}),"Terms of Service"]}),s.jsx(di,{}),s.jsxs(wr,{onClick:B,className:"text-red-400 focus:text-red-400 rounded-lg hover:bg-red-500/20 data-[highlighted]:bg-red-500/20 data-[highlighted]:text-red-200",children:[s.jsx(Qx,{className:"w-4 h-4 mr-2"}),"Log out"]})]})]})})]})}class D4 extends h.Component{constructor(t){super(t),this.state={hasError:!1,message:""}}static getDerivedStateFromError(t){return{hasError:!0,message:(t==null?void 0:t.message)||"Unexpected rendering error"}}componentDidCatch(t,r){console.error("Dashboard render error:",t,r)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-6",children:s.jsxs("div",{className:"max-w-lg text-center space-y-3",children:[s.jsx("div",{className:"text-white/90 text-lg font-medium",children:"Page failed to load"}),s.jsx("div",{className:"text-sm text-white/55",children:this.state.message||"Unexpected rendering error"}),s.jsx("button",{type:"button",className:"h-10 px-4 rounded-xl border border-white/15 text-sm text-white/80 hover:text-white hover:bg-white/[0.03]",onClick:()=>window.location.reload(),children:"Reload"})]})}):this.props.children}}function Er({children:e,requireOwner:t=!1,fullWidth:r=!1,scrollable:n=!0}){const a=Xt(),i=Hn(),{user:o,loading:l}=Kt(),{workspace:c,userRole:u,loading:d}=on(),{portalRole:f,loading:m}=Qi(),p=typeof window<"u"&&window.sessionStorage.getItem("acq_signin_intent")==="setter",v=!!(o!=null&&o.id)&&yo(o.id),g=xo(o==null?void 0:o.user_metadata),b="relative flex-1 min-w-0 h-screen overflow-hidden pt-2 bg-[#080808]",y="h-full min-h-0 overflow-hidden bg-[#0e0e0e] rounded-tl-[16px] border-[0.5px] border-white/8 border-r-transparent border-b-transparent";return h.useEffect(()=>{if(l||m)return;const w=p||v||g||u==="setter"||f==="setter",x=i.pathname||"",_="/setter-portal/messages",S=["/setter-portal/messages","/setter-portal/outreach","/setter-portal/setters"],k=[{from:"/messages",to:"/setter-portal/messages"},{from:"/outreach",to:"/setter-portal/outreach"},{from:"/setters",to:"/setter-portal/setters"}];if(!o){a("/auth");return}if(f==="client"){a("/portal/meetings",{replace:!0});return}if(!d){if(t&&u!=="owner"){a(w?_:"/dashboard",{replace:!0});return}if(w){for(const{from:j,to:N}of k)if(x===j||x.startsWith(`${j}/`)){const A=x.slice(j.length);a(`${N}${A}`,{replace:!0});return}if(!S.some(j=>x===j||x.startsWith(`${j}/`))){a(_,{replace:!0});return}}}},[o,c,u,f,l,m,d,a,t,i.pathname,p,v,g]),l||d||m?s.jsx(D4,{children:s.jsxs("div",{className:"h-screen bg-background flex overflow-hidden",children:[s.jsx($4,{}),s.jsx("div",{className:b,children:s.jsx("div",{className:y,children:s.jsx("main",{className:`h-full bg-[#0e0e0e] ${n?"overflow-y-auto":"overflow-hidden"}`,children:s.jsx("div",{className:`${r?"w-full h-full":"max-w-6xl mx-auto pt-16"} h-full`,children:s.jsx("div",{className:"p-8",children:s.jsx(BL,{})})})})})})]})}):o?s.jsx(D4,{children:s.jsxs("div",{className:"h-screen bg-background flex overflow-hidden",children:[s.jsx($4,{}),s.jsx("div",{className:b,children:s.jsx("div",{className:y,children:s.jsx("main",{className:`h-full bg-[#0e0e0e] ${n?"overflow-y-auto":"overflow-hidden"}`,children:s.jsx("div",{className:`${r?"w-full h-full":"max-w-6xl mx-auto pt-16"} h-full`,children:e})})})})]})}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-6",children:s.jsxs("div",{className:"max-w-lg text-center space-y-3",children:[s.jsx("div",{className:"text-white/90 text-lg font-medium",children:"Session unavailable"}),s.jsx("div",{className:"text-sm text-white/55",children:"Your auth session is not ready. Please sign in again."}),s.jsx("button",{type:"button",className:"h-10 px-4 rounded-xl border border-white/15 text-sm text-white/80 hover:text-white hover:bg-white/[0.03]",onClick:()=>a("/auth"),children:"Go to Login"})]})})}async function mTe(){var t;for(let r=0;r<12;r+=1){const{data:n,error:a}=await z.auth.getSession();if(!a&&((t=n==null?void 0:n.session)!=null&&t.access_token))return String(n.session.access_token);r<11&&await new Promise(i=>setTimeout(i,50))}return null}function pTe(e){var n,a,i,o,l,c,u;if(!e||typeof e!="object")return"";const t=String((e==null?void 0:e.error)||(e==null?void 0:e.message)||"").trim();if(!t&&!Array.isArray(e==null?void 0:e.details))return"";const r=Array.isArray(e==null?void 0:e.details)?e.details:[];if(r.length>0){const d=r[0]||{},f=String(((a=(n=d==null?void 0:d.details)==null?void 0:n.error)==null?void 0:a.message)||((i=d==null?void 0:d.details)==null?void 0:i.message)||((l=(o=d==null?void 0:d.details)==null?void 0:o.error)==null?void 0:l.error_message)||((u=(c=d==null?void 0:d.details)==null?void 0:c.error)==null?void 0:u.error_user_msg)||"").trim();if(t&&f)return`${t}: ${f}`;if(f)return f}return t}async function gTe(e){if(!e)return{status:null,message:""};const t=Number(e.status||0)||null;try{const r=await e.clone().json(),n=pTe(r);if(n)return{status:t,message:n}}catch{}try{const r=String(await e.clone().text()).trim();if(r)return{status:t,message:r}}catch{}return{status:t,message:""}}async function WU(e){const t=String((e==null?void 0:e.message)||(e==null?void 0:e.details)||"").trim(),r=e==null?void 0:e.context,n=await gTe(r),a=String(n.message||"").trim(),i=n.status,o=`${t} ${a} ${String((e==null?void 0:e.hint)||"")}`.toLowerCase(),l=a||t||"Request failed";return o.includes("failed to send a request to the edge function")||o.includes("networkerror")||o.includes("typeerror: failed to fetch")?{kind:"network",status:i,message:l,rawMessage:t}:i===401||o.includes("unauthorized")||o.includes("invalid jwt")||o.includes("jwt expired")||o.includes("not authenticated")||o.includes("no active session")?{kind:"auth",status:i,message:l,rawMessage:t}:i===403||o.includes("forbidden")||o.includes("permission denied")||o.includes("not a workspace member")?{kind:"permission",status:i,message:l,rawMessage:t}:o.includes("invalid action")?{kind:"invalid_action",status:i,message:l,rawMessage:t}:i===404||o.includes("not found")||o.includes("backend not updated")||o.includes("missing action or workspaceid")||o.includes("non-2xx")?{kind:"capability",status:i,message:l,rawMessage:t}:i!=null&&i>=500?{kind:"server",status:i,message:l,rawMessage:t}:{kind:"unknown",status:i,message:l,rawMessage:t}}async function Ru(e,t,r){const n=await WU(e);return n.kind==="network"?`Cannot reach Edge function \`${r}\`. Check deployment and network, then retry.`:n.kind==="auth"?"Authentication failed for this request. Refresh the page and retry. If it still fails, sign out and sign back in.":n.kind==="permission"?"You do not have permission for this workspace action. Ask an owner to grant access.":n.kind==="invalid_action"?`This backend action is not available yet on \`${r}\`. Deploy the latest Edge functions.`:n.kind==="capability"?`Backend capability mismatch for \`${r}\`. Deploy/update backend, then retry.`:n.kind==="server"?`${t}: ${n.message}`:n.message||t}async function eu(e,t){var o,l;const r=async c=>await z.functions.invoke(e,{...t,...c?{headers:c}:{}}),n=t.headers&&Object.keys(t.headers).length>0?t.headers:void 0;let a=await r(n);if(!(a!=null&&a.error))return a;if((await WU(a.error)).kind==="auth"){if(await z.auth.refreshSession(),a=await r(n),!(a!=null&&a.error))return a;const c=await mTe();if(c){const u={...n||{},Authorization:`Bearer ${c}`},d=(l=(o=import.meta)==null?void 0:o.env)==null?void 0:l.VITE_SUPABASE_PUBLISHABLE_KEY;d&&!u.apikey&&(u.apikey=d);const f=await r(u);if(!(f!=null&&f.error))return f;a=f}if(n){const u=await r(void 0);return u!=null&&u.error,u}}return a}function Hu(e,t){return eu("inbox-ai",{body:e})}var pw="Dialog",[HU,VU]=zn(pw),[vTe,Zi]=HU(pw),KU=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=h.useRef(null),c=h.useRef(null),[u,d]=_s({prop:n,defaultProp:a??!1,onChange:i,caller:pw});return s.jsx(vTe,{scope:t,triggerRef:l,contentRef:c,contentId:qi(),titleId:qi(),descriptionId:qi(),open:u,onOpenChange:d,onOpenToggle:h.useCallback(()=>d(f=>!f),[d]),modal:o,children:r})};KU.displayName=pw;var GU="DialogTrigger",YU=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Zi(GU,r),i=Ot(t,a.triggerRef);return s.jsx(ot.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":aE(a.open),...n,ref:i,onClick:Ve(e.onClick,a.onOpenToggle)})});YU.displayName=GU;var rE="DialogPortal",[yTe,XU]=HU(rE,{forceMount:void 0}),QU=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=Zi(rE,t);return s.jsx(yTe,{scope:t,forceMount:r,children:h.Children.map(n,o=>s.jsx(Wn,{present:r||i.open,children:s.jsx(Df,{asChild:!0,container:a,children:o})}))})};QU.displayName=rE;var lx="DialogOverlay",JU=h.forwardRef((e,t)=>{const r=XU(lx,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Zi(lx,e.__scopeDialog);return i.modal?s.jsx(Wn,{present:n||i.open,children:s.jsx(bTe,{...a,ref:t})}):null});JU.displayName=lx;var xTe=Pl("DialogOverlay.RemoveScroll"),bTe=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Zi(lx,r);return s.jsx(mg,{as:xTe,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(ot.div,{"data-state":aE(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),tu="DialogContent",ZU=h.forwardRef((e,t)=>{const r=XU(tu,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Zi(tu,e.__scopeDialog);return s.jsx(Wn,{present:n||i.open,children:i.modal?s.jsx(wTe,{...a,ref:t}):s.jsx(_Te,{...a,ref:t})})});ZU.displayName=tu;var wTe=h.forwardRef((e,t)=>{const r=Zi(tu,e.__scopeDialog),n=h.useRef(null),a=Ot(t,r.contentRef,n);return h.useEffect(()=>{const i=n.current;if(i)return uw(i)},[]),s.jsx(e7,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ve(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ve(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Ve(e.onFocusOutside,i=>i.preventDefault())})}),_Te=h.forwardRef((e,t)=>{const r=Zi(tu,e.__scopeDialog),n=h.useRef(!1),a=h.useRef(!1);return s.jsx(e7,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),e7=h.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=Zi(tu,r),c=h.useRef(null),u=Ot(t,c);return lw(),s.jsxs(s.Fragment,{children:[s.jsx(fg,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(lu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":aE(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(jTe,{titleId:l.titleId}),s.jsx(NTe,{contentRef:c,descriptionId:l.descriptionId})]})]})}),nE="DialogTitle",t7=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Zi(nE,r);return s.jsx(ot.h2,{id:a.titleId,...n,ref:t})});t7.displayName=nE;var r7="DialogDescription",n7=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Zi(r7,r);return s.jsx(ot.p,{id:a.descriptionId,...n,ref:t})});n7.displayName=r7;var a7="DialogClose",i7=h.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Zi(a7,r);return s.jsx(ot.button,{type:"button",...n,ref:t,onClick:Ve(e.onClick,()=>a.onOpenChange(!1))})});i7.displayName=a7;function aE(e){return e?"open":"closed"}var s7="DialogTitleWarning",[STe,o7]=TV(s7,{contentName:tu,titleName:nE,docsSlug:"dialog"}),jTe=({titleId:e})=>{const t=o7(s7),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return h.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},kTe="DialogDescriptionWarning",NTe=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${o7(kTe).contentName}}.`;return h.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},iE=KU,l7=YU,sE=QU,yg=JU,xg=ZU,bg=t7,wg=n7,gw=i7,c7="AlertDialog",[CTe,m3e]=zn(c7,[VU]),Po=VU(),u7=e=>{const{__scopeAlertDialog:t,...r}=e,n=Po(t);return s.jsx(iE,{...n,...r,modal:!0})};u7.displayName=c7;var ETe="AlertDialogTrigger",ATe=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Po(r);return s.jsx(l7,{...a,...n,ref:t})});ATe.displayName=ETe;var PTe="AlertDialogPortal",d7=e=>{const{__scopeAlertDialog:t,...r}=e,n=Po(t);return s.jsx(sE,{...n,...r})};d7.displayName=PTe;var TTe="AlertDialogOverlay",f7=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Po(r);return s.jsx(yg,{...a,...n,ref:t})});f7.displayName=TTe;var Ed="AlertDialogContent",[OTe,ITe]=CTe(Ed),MTe=J$("AlertDialogContent"),h7=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=Po(r),o=h.useRef(null),l=Ot(t,o),c=h.useRef(null);return s.jsx(STe,{contentName:Ed,titleName:m7,docsSlug:"alert-dialog",children:s.jsx(OTe,{scope:r,cancelRef:c,children:s.jsxs(xg,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:Ve(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[s.jsx(MTe,{children:n}),s.jsx($Te,{contentRef:o})]})})})});h7.displayName=Ed;var m7="AlertDialogTitle",p7=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Po(r);return s.jsx(bg,{...a,...n,ref:t})});p7.displayName=m7;var g7="AlertDialogDescription",v7=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Po(r);return s.jsx(wg,{...a,...n,ref:t})});v7.displayName=g7;var RTe="AlertDialogAction",y7=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Po(r);return s.jsx(gw,{...a,...n,ref:t})});y7.displayName=RTe;var x7="AlertDialogCancel",b7=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=ITe(x7,r),i=Po(r),o=Ot(t,a);return s.jsx(gw,{...i,...n,ref:o})});b7.displayName=x7;var $Te=({contentRef:e})=>{const t=`\`${Ed}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ed}\` by passing a \`${g7}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ed}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return h.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},DTe=u7,LTe=d7,w7=f7,_7=h7,S7=y7,j7=b7,k7=p7,N7=v7;const Wl=DTe,FTe=LTe,C7=h.forwardRef(({className:e,...t},r)=>s.jsx(w7,{className:Pe("fixed inset-0 z-50 bg-black data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));C7.displayName=w7.displayName;const To=h.forwardRef(({className:e,...t},r)=>s.jsxs(FTe,{children:[s.jsx(C7,{}),s.jsx(_7,{ref:r,className:Pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-black p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-3xl text-white",e),...t})]}));To.displayName=_7.displayName;const Oo=({className:e,...t})=>s.jsx("div",{className:Pe("flex flex-col space-y-2 text-center sm:text-left",e),...t});Oo.displayName="AlertDialogHeader";const Io=({className:e,...t})=>s.jsx("div",{className:Pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Io.displayName="AlertDialogFooter";const Mo=h.forwardRef(({className:e,...t},r)=>s.jsx(k7,{ref:r,className:Pe("text-[16px] font-semibold leading-[1.2] tracking-[0.01em] text-white",e),...t}));Mo.displayName=k7.displayName;const Ro=h.forwardRef(({className:e,...t},r)=>s.jsx(N7,{ref:r,className:Pe("text-[15px] leading-[1.5] text-white/60",e),...t}));Ro.displayName=N7.displayName;const $o=h.forwardRef(({className:e,...t},r)=>s.jsx(S7,{ref:r,className:Pe(qN(),e),...t}));$o.displayName=S7.displayName;const Do=h.forwardRef(({className:e,...t},r)=>s.jsx(j7,{ref:r,className:Pe(qN({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Do.displayName=j7.displayName;const Gi=iE,E7=l7,BTe=sE,A7=h.forwardRef(({className:e,...t},r)=>s.jsx(yg,{ref:r,className:Pe("fixed inset-0 z-50 bg-black data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));A7.displayName=yg.displayName;const yi=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(BTe,{children:[s.jsx(A7,{}),s.jsxs(xg,{ref:n,className:Pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-black p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-3xl text-white",e),...r,children:[t,s.jsxs(gw,{className:"absolute right-4 top-4 p-1 text-white/60 hover:text-white focus:outline-none disabled:pointer-events-none",children:[s.jsx(Bf,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));yi.displayName=xg.displayName;const xi=({className:e,...t})=>s.jsx("div",{className:Pe("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});xi.displayName="DialogHeader";const ch=({className:e,...t})=>s.jsx("div",{className:Pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ch.displayName="DialogFooter";const bi=h.forwardRef(({className:e,...t},r)=>s.jsx(bg,{ref:r,className:Pe("text-[16px] font-semibold leading-[1.2] tracking-[0.01em] text-white",e),...t}));bi.displayName=bg.displayName;const Ef=h.forwardRef(({className:e,...t},r)=>s.jsx(wg,{ref:r,className:Pe("text-[15px] leading-[1.5] text-white/60",e),...t}));Ef.displayName=wg.displayName;const Lp=80,L4=["claude-sonnet-4-20250514","claude-3-7-sonnet-latest","claude-3-5-sonnet-latest"],v_=10,Bv=10,cx=[{id:"saturn",label:"Saturn 1.1",description:"Built for deeper strategy and high-accuracy reasoning on complex business decisions.",modelCandidates:L4},{id:"saturn-light",label:"Saturn Light",description:"A lighter profile for quicker drafts, iterations, and rapid day-to-day execution.",modelCandidates:L4}],P7="saturn";function UTe(e){const t=String(e||"").trim().toLowerCase();return cx.some(r=>r.id===t)?t:P7}function y_(e){return cx.find(t=>t.id===e)||cx[0]}function qTe(e){if(!Number.isFinite(e)||e<=0)return"0 Bytes";const t=["Bytes","KB","MB","GB"],r=Math.min(t.length-1,Math.floor(Math.log(e)/Math.log(1024))),n=e/1024**r;return`${n.toFixed(n>=10||r===0?0:1)} ${t[r]}`}function zTe(e){const t=String(e.type||"").toLowerCase();if(t.startsWith("text/")||t.includes("json")||t.includes("javascript")||t.includes("xml")||t.includes("csv"))return!0;const r=String(e.name||"").toLowerCase();return r.endsWith(".txt")||r.endsWith(".md")||r.endsWith(".json")||r.endsWith(".csv")||r.endsWith(".js")||r.endsWith(".ts")||r.endsWith(".tsx")||r.endsWith(".jsx")||r.endsWith(".html")||r.endsWith(".css")}function ux(e,t){return String(e||"").replace(/\s+/g," ").trim().slice(0,t)}function dx(e){return ux(e,68)||"New AI conversation"}function T7(e){return Array.isArray(e)?e.map(t=>{const r=t||{},n=String(r.kind||"").toLowerCase(),a=n==="image"||n==="snippet"?n:"file",i=String(r.id||crypto.randomUUID()),o=String(r.name||"").trim(),l=String(r.type||"").trim(),c=String(r.previewUrl||"").trim(),u=String(r.text||"").trim(),d=Number(r.size||0),f=Number.isFinite(d)&&d>0?d:void 0,m={id:i,kind:a};return o&&(m.name=o),l&&(m.type=l),f&&(m.size=f),c&&(m.previewUrl=c),u&&(m.text=u),m}).filter(t=>t.kind==="image"?!!t.previewUrl:t.kind==="snippet"?!!t.text:!!t.name):[]}function fx(e){const t=String(e||"").toLowerCase();return t==="like"||t==="dislike"?t:null}function WTe(e){return new Promise(t=>{const r=new FileReader;r.onload=()=>{const n=typeof r.result=="string"?r.result:"";t(n||null)},r.onerror=()=>t(null),r.readAsDataURL(e)})}function O7(e){const t=String(e||"").match(/^data:(image\/[a-z0-9.+-]+)(?:;[a-z0-9-]+=[^;,]+)*;base64,([A-Za-z0-9+/=]+)$/i);return t?{mediaType:String(t[1]||"").trim().toLowerCase(),base64:String(t[2]||"").trim()}:null}async function HTe(e,t=1400,r=.84){const n=O7(e);return!n||!n.mediaType.startsWith("image/")?e:new Promise(a=>{const i=new Image;i.onload=()=>{try{const o=Number(i.naturalWidth||i.width||0),l=Number(i.naturalHeight||i.height||0);if(!o||!l){a(e);return}const c=Math.min(1,t/Math.max(o,l)),u=Math.max(1,Math.round(o*c)),d=Math.max(1,Math.round(l*c)),f=document.createElement("canvas");f.width=u,f.height=d;const m=f.getContext("2d");if(!m){a(e);return}m.imageSmoothingEnabled=!0,m.imageSmoothingQuality="high",m.drawImage(i,0,0,u,d);const p=f.toDataURL("image/jpeg",r);a(p||e)}catch{a(e)}},i.onerror=()=>a(e),i.src=e})}async function VTe(e){const t=await WTe(e);return t?HTe(t,1400,.84):null}function Bj(e){const t=String(e||"").replace(/\r\n/g,`
`);return t?t.split(`
`).map(n=>{const a=n.match(/^\s{0,3}#{1,6}\s+(.*)$/);if(a)return a[1]||"";const i=n.match(/^\s*[-*+]\s+(.*)$/);return i?` ${i[1]||""}`:n}).join(`
`).replace(/```([\s\S]*?)```/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/\*\*(.*?)\*\*/g,"$1").replace(/__(.*?)__/g,"$1").replace(/(^|[^\S\n])\*([^*\n]+)\*(?=[^\S\n]|$)/g,"$1$2").replace(/(^|[^\S\n])_([^_\n]+)_(?=[^\S\n]|$)/g,"$1$2").replace(/\*\*/g,"").replace(/__/g,"").replace(/\n{3,}/g,`

`).trim():""}function KTe(e){const t=String(e||"").split(/\n{2,}/).map(n=>n.split(`
`).map(a=>a.replace(/\s+$/g,"")).filter(a=>a.trim().length>0)).filter(n=>n.length>0),r=(n,a)=>n.every(o=>/^\s+/.test(o.trim()))?s.jsx("div",{className:"space-y-3",children:n.map((o,l)=>s.jsxs("div",{className:"flex items-start gap-2 text-[15px] leading-[1.56] text-white/86",children:[s.jsx("span",{className:"mt-[1px] text-white/84",children:""}),s.jsx("span",{children:o.trim().replace(/^\s+/,"")})]},`${a}-bullet-${l}`))}):s.jsx("div",{className:"space-y-2.5",children:n.map((o,l)=>{const c=o.trim().match(/^\s+(.+)$/);return c?s.jsxs("div",{className:"flex items-start gap-2 text-[15px] leading-[1.56] text-white/86",children:[s.jsx("span",{className:"mt-[1px] text-white/84",children:""}),s.jsx("span",{children:c[1]})]},`${a}-mixed-bullet-${l}`):s.jsx("p",{className:"text-[15px] leading-[1.7] text-white/86",children:o.trim()},`${a}-paragraph-${l}`)})});return s.jsx("div",{className:"space-y-8",children:t.map((n,a)=>{const o=n[0].trim().match(/^(\d+)[\.\)]\s+(.+):$/);if(o&&o[2].length<=96){const l=n.slice(1);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-[18px] md:text-[19px] font-semibold leading-[1.28] text-white/94",children:[o[1],". ",o[2],":"]}),l.length>0?r(l,`assistant-block-${a}`):null]},`assistant-block-heading-${a}`)}return s.jsx("div",{children:r(n,`assistant-block-${a}`)},`assistant-block-${a}`)})})}function GTe(e,t){const r=[],n=e.filter(i=>i.extractedText).map(i=>`File: ${i.file.name}
${ux(i.extractedText,4e3)}`),a=e.filter(i=>!i.extractedText&&i.type.startsWith("image/")).map(i=>i.file.name).filter(Boolean);if(n.length>0&&r.push(`Attached file context:
${n.join(`

`)}`),a.length>0&&r.push(`Image attachments included: ${a.join(", ")}`),t.length>0){const i=t.map((o,l)=>`Snippet ${l+1}: ${ux(o.content,2e3)}`).join(`

`);r.push(`Pasted context:
${i}`)}return r.length===0?"":r.join(`

`).slice(0,12e3)}async function YTe(e,t){const r=await Promise.all(e.map(async a=>{if(a.type.startsWith("image/")){const o=await VTe(a.file);if(!o)return null;const l=O7(o);return{id:a.id,kind:"image",name:a.file.name,type:(l==null?void 0:l.mediaType)||a.type,size:a.file.size,previewUrl:o}}return{id:a.id,kind:"file",name:a.file.name,type:a.type,size:a.file.size}})),n=t.map(a=>({id:a.id,kind:"snippet",text:a.content}));return[...r.filter(a=>!!a),...n]}function XTe(e){if(!e)return[];try{const t=localStorage.getItem(e),r=t?JSON.parse(t):[];return(Array.isArray(r)?r:[]).map(n=>({id:String((n==null?void 0:n.id)||""),title:dx(String((n==null?void 0:n.title)||"")),createdAt:String((n==null?void 0:n.createdAt)||new Date().toISOString()),updatedAt:String((n==null?void 0:n.updatedAt)||(n==null?void 0:n.createdAt)||new Date().toISOString()),starred:!!(n!=null&&n.starred),messages:Array.isArray(n==null?void 0:n.messages)?n.messages.map(a=>({role:(a==null?void 0:a.role)==="assistant"?"assistant":"user",content:String((a==null?void 0:a.content)||"").trim(),id:String((a==null?void 0:a.id)||crypto.randomUUID()),apiContent:typeof(a==null?void 0:a.apiContent)=="string"?a.apiContent:void 0,attachments:T7(a==null?void 0:a.attachments),feedback:fx(a==null?void 0:a.feedback),createdAt:String((a==null?void 0:a.createdAt)||new Date().toISOString())})).map(a=>a.role==="assistant"?{...a,content:Bj(a.content)}:a).filter(a=>!!a.content):[]})).filter(n=>n.id).sort((n,a)=>+!!a.starred-+!!n.starred||new Date(a.updatedAt).getTime()-new Date(n.updatedAt).getTime()).slice(0,Lp)}catch{return[]}}function QTe(e,t){if(e)try{localStorage.setItem(e,JSON.stringify(t.slice(0,Lp)))}catch{}}function F4(e,t,r,n){var c;const a=new Date().toISOString(),i=e.findIndex(u=>u.id===t);if(i===-1){const u=((c=r.find(f=>f.role==="user"))==null?void 0:c.content)||n||"New AI conversation";return[{id:t,title:dx(u),createdAt:a,updatedAt:a,starred:!1,messages:r},...e].slice(0,Lp)}const o={...e[i],updatedAt:a,messages:r},l=e.slice();return l[i]=o,l.sort((u,d)=>+!!d.starred-+!!u.starred||new Date(d.updatedAt).getTime()-new Date(u.updatedAt).getTime()).slice(0,Lp)}function JTe(e){if(!e)return null;try{const t=JSON.parse(e),r=t==null?void 0:t.userMessage,n=String((r==null?void 0:r.id)||""),a=String((t==null?void 0:t.conversationId)||""),i=String((t==null?void 0:t.workspaceId)||"");if(!n||!a||!i)return null;const o={id:n,role:(r==null?void 0:r.role)==="assistant"?"assistant":"user",content:String((r==null?void 0:r.content)||"").trim(),apiContent:typeof(r==null?void 0:r.apiContent)=="string"?r.apiContent:void 0,attachments:T7(r==null?void 0:r.attachments),feedback:fx(r==null?void 0:r.feedback),createdAt:String((r==null?void 0:r.createdAt)||new Date().toISOString())};return o.content?{workspaceId:i,conversationId:a,userMessage:o,fallbackTitle:String((t==null?void 0:t.fallbackTitle)||o.content),createdAt:String((t==null?void 0:t.createdAt)||new Date().toISOString()),modelOptionId:UTe(t==null?void 0:t.modelOptionId)}:null}catch{return null}}function ZTe({file:e,onRemove:t}){const r=!!e.preview&&e.type.startsWith("image/");return s.jsxs("div",{className:"relative group flex-shrink-0 w-24 h-24 rounded-xl overflow-hidden border border-white/10 bg-[#141414]",children:[r?s.jsx("img",{src:e.preview||"",alt:e.file.name,className:"h-full w-full object-cover"}):s.jsxs("div",{className:"h-full w-full p-2.5 flex flex-col justify-between",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-6 h-6 rounded-md bg-white/[0.06] border border-white/10",children:s.jsx(Xx,{className:"h-3.5 w-3.5 text-white/70"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-white/50 truncate",title:e.file.name,children:e.file.name}),s.jsx("div",{className:"text-[10px] text-white/35",children:qTe(e.file.size)})]})]}),e.uploadStatus==="uploading"?s.jsx("div",{className:"absolute inset-0 bg-black/65 grid place-items-center",children:s.jsx(bn,{className:"h-4 w-4 text-white animate-spin"})}):null,e.uploadStatus==="complete"?s.jsx("div",{className:"absolute bottom-1.5 left-1.5 h-5 w-5 rounded-full bg-[#1f3b68] border border-[#2f5da6] grid place-items-center",children:s.jsx(Ha,{className:"h-3 w-3 text-[#a9c8ff]"})}):null,s.jsx("button",{type:"button",onClick:()=>t(e.id),className:"absolute top-1 right-1 h-5 w-5 rounded-full bg-black/70 border border-white/10 text-white/80 grid place-items-center opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Remove file",children:s.jsx(Bf,{className:"h-3 w-3"})})]})}function eOe({snippet:e,onRemove:t}){return s.jsxs("div",{className:"relative group flex-shrink-0 w-28 h-28 rounded-xl overflow-hidden border border-white/10 bg-[#141414] p-2.5",children:[s.jsx("div",{className:"text-[10px] leading-relaxed text-white/55 line-clamp-5 break-words whitespace-pre-wrap",children:e.content}),s.jsx("button",{type:"button",onClick:()=>t(e.id),className:"absolute top-1 right-1 h-5 w-5 rounded-full bg-black/70 border border-white/10 text-white/80 grid place-items-center opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Remove snippet",children:s.jsx(Bf,{className:"h-3 w-3"})}),s.jsx("div",{className:"absolute bottom-1.5 left-1.5 text-[9px] uppercase tracking-wide text-white/40",children:"Pasted"})]})}function I7({workspaceId:e,mode:t="dashboard"}){const r=Xt(),n=Hn(),[a,i]=h.useState(""),[o,l]=h.useState([]),[c,u]=h.useState([]),[d,f]=h.useState([]),[m,p]=h.useState([]),[v,g]=h.useState(""),[b,y]=h.useState(!1),[w,x]=h.useState(!1),[_,S]=h.useState(!1),[k,C]=h.useState(0),[j,N]=h.useState(0),[A,P]=h.useState(!1),[T,L]=h.useState(""),[U,D]=h.useState(0),[H,B]=h.useState(!1),[M,$]=h.useState(""),[re,ie]=h.useState(!1),[q,K]=h.useState(!1),[ne,ae]=h.useState(""),[_e,pe]=h.useState(""),[ye,ce]=h.useState(!1),[me,Q]=h.useState(""),[te,Ne]=h.useState(P7),[je,J]=h.useState(null),[oe,Ce]=h.useState(!1),R=h.useRef(null),Y=h.useRef(null),Se=h.useRef(null),Re=h.useRef(null),de=h.useRef(""),G=t==="chat-log",ue=e?`acq_dashboard_ai_logs:${e}`:"",he=e?`acq_dashboard_ai_pending_send:${e}`:"",Z=h.useMemo(()=>["Show me the hottest leads to follow up with first","Draft replies for inbound messages I have not answered yet","Give me today's highest-impact actions to improve response time"],[]),ge=h.useMemo(()=>{if(!G)return"";const we=new URLSearchParams(n.search);return String(we.get("chat")||"").trim()},[G,n.search]),Ie=h.useMemo(()=>{const we=m.find(qe=>qe.id===v);if(we)return we.title;if(d.length>0){const qe=d.find(at=>at.role==="user");if(qe!=null&&qe.content)return dx(qe.content)}return"New chat"},[m,v,d]),Ee=h.useMemo(()=>m.find(we=>we.id===v)||null,[m,v]),We=h.useMemo(()=>y_(te),[te]),Oe=h.useMemo(()=>y_(je||te),[je,te]),Fe=h.useMemo(()=>{const we=M.trim().toLowerCase();return m.filter(qe=>re&&!qe.starred?!1:!we||String(qe.title||"").toLowerCase().includes(we)?!0:(Array.isArray(qe.messages)?qe.messages:[]).some($t=>String(($t==null?void 0:$t.content)||"").toLowerCase().includes(we)))},[m,re,M]),rt=!!e&&(!!a.trim()||o.length>0||c.length>0)&&!b,nt="mx-auto w-full max-w-[700px] md:max-w-[770px] lg:max-w-[840px]",Gt="px-[22px] md:px-6";h.useEffect(()=>{const we=R.current;we&&(we.style.height="auto",we.style.height=`${Math.min(we.scrollHeight,220)}px`)},[a]),h.useEffect(()=>{if(G||Z.length===0)return;const we=`${Z[k]||""}...`;let qe=0;return!A&&j>=we.length?(qe=window.setTimeout(()=>P(!0),1200),()=>window.clearTimeout(qe)):A&&j<=0?(qe=window.setTimeout(()=>{P(!1),C(at=>(at+1)%Z.length)},260),()=>window.clearTimeout(qe)):(qe=window.setTimeout(()=>N(at=>at+(A?-1:1)),A?24:42),()=>window.clearTimeout(qe))},[G,Z,k,j,A]),h.useEffect(()=>{const we=Se.current;we&&(we.scrollTop=we.scrollHeight)},[d,b]),h.useEffect(()=>{if(!H||!G)return;const we=window.setTimeout(()=>{var qe;return(qe=Re.current)==null?void 0:qe.focus()},10);return()=>window.clearTimeout(we)},[H,G]),h.useEffect(()=>{if(!T||!G)return;const we=d.find(at=>at.id===T&&at.role==="assistant");if(!we){L(""),D(0);return}if(U>=we.content.length)return;const qe=window.setTimeout(()=>{D(at=>Math.min(at+2,we.content.length))},16);return()=>window.clearTimeout(qe)},[T,U,d,G]),h.useEffect(()=>{var at,$t,Pt;if(de.current="",!e||!ue){p([]),g(""),f([]),S(!0);return}const we=XTe(ue);p(we);const qe=G?ge||((at=we[0])==null?void 0:at.id)||crypto.randomUUID():(($t=we[0])==null?void 0:$t.id)||crypto.randomUUID();g(qe),f(((Pt=we.find(bt=>bt.id===qe))==null?void 0:Pt.messages)||[]),S(!0)},[e,ue,G,ge]),h.useEffect(()=>{QTe(ue,m)},[ue,m]),h.useEffect(()=>()=>{o.forEach(we=>{we.preview&&URL.revokeObjectURL(we.preview)})},[o]);const ht=h.useCallback(async we=>{const qe=Array.from(we);if(qe.length===0)return;const at=o.length,$t=o.filter(fr=>fr.type.startsWith("image/")).length,Pt=Math.max(0,v_-at);let bt=Math.max(0,Bv-$t);if(Pt<=0){ee.info(`You can attach up to ${v_} files.`);return}const xr=[];let Gr=0;for(const fr of qe){if(xr.length>=Pt)break;const Mt=fr.type.startsWith("image/");if(Mt&&bt<=0){Gr+=1;continue}xr.push(fr),Mt&&(bt-=1)}if(xr.length===0){Gr>0&&ee.info(`You can attach up to ${Bv} images.`);return}const Vn=Math.max(0,qe.length-xr.length-Gr);Gr>0?ee.info(`Only ${Bv} images are allowed per message.`):Vn>0&&ee.info(`Only ${v_} files are allowed per message.`);const ir=xr.map(fr=>{const Mt=fr.type.startsWith("image/");return{id:crypto.randomUUID(),file:fr,type:String(fr.type||"application/octet-stream"),preview:Mt?URL.createObjectURL(fr):null,uploadStatus:"uploading",extractedText:""}});l(fr=>[...fr,...ir]),await Promise.all(ir.map(async fr=>{let Mt="";if(zTe(fr.file))try{Mt=ux(await fr.file.text(),6e3)}catch{Mt=""}l(Qa=>Qa.map(Rs=>Rs.id===fr.id?{...Rs,uploadStatus:"complete",extractedText:Mt}:Rs))}))},[o]),dt=h.useCallback(we=>{l(qe=>{const at=qe.find($t=>$t.id===we);return at!=null&&at.preview&&URL.revokeObjectURL(at.preview),qe.filter($t=>$t.id!==we)})},[]),gt=h.useCallback(we=>{u(qe=>qe.filter(at=>at.id!==we))},[]),It=h.useCallback(()=>{i(""),l(we=>(we.forEach(qe=>{qe.preview&&URL.revokeObjectURL(qe.preview)}),[])),u([])},[]),Qt=h.useCallback((we,qe,at)=>{p($t=>F4($t,we,qe,at))},[]),Nn=h.useCallback(async(we,qe,at,$t)=>{if(!e)return;const Pt=y_($t);y(!0);try{const bt=qe.map(fr=>({role:fr.role,content:fr.apiContent||fr.content,attachments:fr.role==="user"?(fr.attachments||[]).filter(Mt=>Mt.kind==="image"&&Mt.previewUrl).slice(0,Bv).map(Mt=>({kind:"image",previewUrl:Mt.previewUrl,type:Mt.type||"image/jpeg",name:Mt.name||""})):[]}));let xr="",Gr=null;for(const fr of Pt.modelCandidates){const{data:Mt,error:Qa}=await eu("dashboard-ai-chat",{body:{workspaceId:e,modelId:fr,modelProfile:Pt.id,messages:bt}});if(Qa){Gr=Qa instanceof Error?Qa:new Error(String(Qa));continue}const Rs=Bj(String((Mt==null?void 0:Mt.reply)||"").trim()),Ag=!!(Mt!=null&&Mt.degraded);if(Mt!=null&&Mt.success&&!Ag&&Rs){xr=Rs;break}Gr=new Error(String((Mt==null?void 0:Mt.error)||Rs||"Failed to get assistant response"))}if(!xr)throw Gr||new Error("Failed to get assistant response");const Vn={id:crypto.randomUUID(),role:"assistant",content:xr,createdAt:new Date().toISOString()},ir=[...qe,Vn];f(ir),L(Vn.id),D(0),Qt(we,ir,at)}catch(bt){console.error("dashboard claude chat error:",bt);const xr=Bj("AI is temporarily unavailable. Your message was saved. Please try again in a few seconds."),Gr={id:crypto.randomUUID(),role:"assistant",content:xr,createdAt:new Date().toISOString()},Vn=[...qe,Gr];f(Vn),L(Gr.id),D(0),Qt(we,Vn,at),ee.error("AI unavailable. Please try again.")}finally{y(!1)}},[e,Qt]),Br=h.useCallback(we=>{const at=Array.from(we.clipboardData.items||[]).filter(Pt=>Pt.kind==="file").map(Pt=>Pt.getAsFile()).filter(Boolean);if(at.length>0){we.preventDefault(),ht(at);return}const $t=we.clipboardData.getData("text");$t&&$t.trim().length>320&&(we.preventDefault(),u(Pt=>[...Pt,{id:crypto.randomUUID(),content:$t.trim(),createdAt:new Date().toISOString()}]),a.trim()||i("Use the pasted context to help me."))},[ht,a]),nr=h.useCallback(async()=>{if(!e||!rt)return;const we=!G,qe=we?crypto.randomUUID():v||crypto.randomUUID();g(qe);const at=await YTe(o,c),$t=at.some(Mt=>Mt.kind==="image"),Pt=a.trim()||($t?"Please analyze the attached image(s).":"Analyze the attached context."),bt=GTe(o,c),xr=bt?`${Pt}

Additional context:
${bt}`:Pt,Gr=$t?`${xr}

When images are attached, analyze them visually and answer from what you see.`:xr,Vn={id:crypto.randomUUID(),role:"user",content:Pt,apiContent:Gr,attachments:at,createdAt:new Date().toISOString()},fr=[...we?[]:d,Vn];if(f(fr),Qt(qe,fr,Pt),It(),we){if(he){const Mt={workspaceId:String(e),conversationId:qe,userMessage:Vn,fallbackTitle:Pt,createdAt:new Date().toISOString(),modelOptionId:te};try{sessionStorage.setItem(he,JSON.stringify(Mt))}catch{}}r(`/dashboard/chat-log?chat=${encodeURIComponent(qe)}`);return}await Nn(qe,fr,Pt,te)},[e,rt,G,v,a,o,c,d,Qt,It,he,r,Nn,te]),nn=h.useCallback(we=>{const qe=m.find(at=>at.id===we);qe&&(g(we),f(qe.messages||[]),G&&r(`/dashboard/chat-log?chat=${encodeURIComponent(we)}`))},[m,G,r]),ct=h.useCallback(()=>{const we=crypto.randomUUID();It(),g(we),f([]),r(`/dashboard/chat-log?chat=${encodeURIComponent(we)}`)},[It,r]),xe=h.useCallback(we=>{we&&p(qe=>qe.map(at=>at.id===we?{...at,starred:!at.starred}:at).sort((at,$t)=>+!!$t.starred-+!!at.starred||new Date($t.updatedAt).getTime()-new Date(at.updatedAt).getTime()).slice(0,Lp))},[]),et=h.useCallback(we=>{if(!we)return;const qe=m.find(at=>at.id===we);ae(we),pe((qe==null?void 0:qe.title)||""),K(!0)},[m]),Wt=h.useCallback(()=>{if(!ne)return;const we=dx(String(_e||"").trim());we&&(p(qe=>qe.map(at=>at.id===ne?{...at,title:we,updatedAt:new Date().toISOString()}:at)),K(!1),ae(""),pe(""))},[ne,_e]),Jt=h.useCallback(we=>{K(we),we||(ae(""),pe(""))},[]),ur=h.useCallback(we=>{var at,$t;if(!we)return;const qe=m.filter(Pt=>Pt.id!==we);if(p(qe),v===we){const Pt=((at=qe[0])==null?void 0:at.id)||crypto.randomUUID();g(Pt),f((($t=qe.find(bt=>bt.id===Pt))==null?void 0:$t.messages)||[]),G&&r(`/dashboard/chat-log?chat=${encodeURIComponent(Pt)}`)}},[m,v,G,r]),mr=h.useCallback(we=>{we&&(Q(we),ce(!0))},[]),Ur=h.useCallback(()=>{me&&(ur(me),ce(!1),Q(""))},[me,ur]),ke=h.useCallback(()=>{B(we=>{const qe=!we;return qe||$(""),qe})},[]),Je=h.useCallback(()=>{ie(we=>!we)},[]);h.useEffect(()=>{if(!G||!e||!he||!_||b)return;const we=JTe(sessionStorage.getItem(he));if(!we)return;if(we.workspaceId!==String(e)){try{sessionStorage.removeItem(he)}catch{}return}if(we.conversationId!==v||de.current===we.userMessage.id)return;de.current=we.userMessage.id;try{sessionStorage.removeItem(he)}catch{}const qe=m.find(bt=>bt.id===we.conversationId),at=(qe==null?void 0:qe.messages)||[],Pt=at.some(bt=>bt.id===we.userMessage.id)?at:[...at,we.userMessage];f(Pt),Qt(we.conversationId,Pt,we.fallbackTitle||we.userMessage.content),Nn(we.conversationId,Pt,we.fallbackTitle||we.userMessage.content,we.modelOptionId||te)},[G,e,he,_,b,v,m,Qt,Nn,te]);const wt=h.useCallback(async we=>{const qe=String(we||"").trim();if(qe)try{await navigator.clipboard.writeText(qe),ee.success("Copied to clipboard")}catch{ee.error("Unable to copy")}},[]),_t=h.useCallback((we,qe)=>{we&&f(at=>{const $t=at.map(Pt=>{if(Pt.id!==we||Pt.role!=="assistant")return Pt;const bt=fx(Pt.feedback);return{...Pt,feedback:bt===qe?null:qe}});return v&&p(Pt=>F4(Pt,v,$t,Ie)),$t})},[v,Ie]),Os=we=>{we.preventDefault(),x(!0)},Is=we=>{we.preventDefault(),x(!1)},Ms=we=>{we.preventDefault(),x(!1),we.dataTransfer.files&&ht(we.dataTransfer.files)},pr=we=>{const qe=we==="dashboard",at=qe?"rounded-[32px]":"rounded-[24px]",$t=`${Z[k]||""}...`.slice(0,j),Pt=qe&&!a.trim()&&!!$t;return s.jsxs("div",{className:"relative group/composer cursor-text",onDragOver:Os,onDragLeave:Is,onDrop:Ms,children:[s.jsxs("div",{className:Pe("relative transform-gpu cursor-text",at,qe?"z-20 bg-[#121212] shadow-[0_0_52px_rgba(0,0,0,0.055),0_0_120px_rgba(0,0,0,0.028)]":"bg-[#1a1a1a] shadow-[0_0_22px_rgba(0,0,0,0.05),0_0_36px_rgba(0,0,0,0.024)]"),onClick:bt=>{var xr;bt.target.closest("button")||(xr=R.current)==null||xr.focus()},children:[s.jsx("div",{className:Pe("pointer-events-none absolute inset-0 border transition-[border-color,opacity] duration-200 ease-out",at,qe?"border-white/[0.03]":"border-white/[0.035]","opacity-45 group-hover/composer:opacity-55 group-focus-within/composer:opacity-55",qe?"group-hover/composer:border-white/[0.065] group-focus-within/composer:border-white/[0.065]":"group-hover/composer:border-white/[0.075] group-focus-within/composer:border-white/[0.075]")}),s.jsxs("div",{className:Pe(qe?"px-5 pb-4 pt-4 space-y-3":"px-4 pb-3.5 pt-3.5 space-y-2.5"),children:[o.length>0||c.length>0?s.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-1",children:[c.map(bt=>s.jsx(eOe,{snippet:bt,onRemove:gt},bt.id)),o.map(bt=>s.jsx(ZTe,{file:bt,onRemove:dt},bt.id))]}):null,s.jsx("div",{className:Pe("overflow-y-auto",qe?"min-h-[48px] max-h-[160px]":"min-h-[54px] max-h-[168px]"),children:s.jsxs("div",{className:"relative",children:[Pt?s.jsxs("div",{className:"pointer-events-none absolute inset-0 text-[15px] leading-relaxed text-[#9a9a9a]/55",children:[$t,s.jsx("span",{className:"ml-[1px] inline-block h-[1.05em] w-[1px] align-[-1px] bg-[#8c8c8c]/45 animate-pulse"})]}):null,s.jsx("textarea",{ref:R,value:a,onChange:bt=>i(bt.target.value),onPaste:Br,onKeyDown:bt=>{bt.key==="Enter"&&!bt.shiftKey&&(bt.preventDefault(),nr())},placeholder:G?d.length>0?"Reply...":"Message ACQ AI...":"",className:Pe("w-full bg-transparent border-0 outline-none resize-none text-white/90 placeholder:text-white/50",qe?"text-[15px] leading-relaxed":"text-[15px] leading-[1.5]"),rows:1})]})}),s.jsxs("div",{className:"flex items-center justify-between gap-3 pt-0.5",children:[s.jsx("button",{type:"button",onClick:()=>{var bt;return(bt=Y.current)==null?void 0:bt.click()},className:Pe("rounded-xl text-white/62 hover:text-white grid place-items-center transition-colors cursor-pointer",qe?"h-8 w-8":"h-[30px] w-[30px]"),"aria-label":"Attach files",title:"Attach files",children:s.jsx(IY,{className:Pe("text-white/90",qe?"h-[18px] w-[18px]":"h-[17px] w-[17px]"),strokeWidth:2.2})}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsxs(en,{open:oe,onOpenChange:bt=>{Ce(bt),bt||J(null)},children:[s.jsx(tn,{asChild:!0,children:s.jsxs("button",{type:"button",className:Pe("chat-model-font inline-flex items-center gap-1 rounded-lg px-2.5 text-white/66 transition-colors","hover:bg-black/45 hover:text-white/84 focus-visible:bg-black/45 focus-visible:text-white/84",oe?"bg-black/45 text-white/84":"",qe?"h-8 text-[14px]":"h-[30px] text-[13.5px]"),"aria-label":"Select AI model",title:"Select AI model",children:[s.jsx("span",{children:We.label}),s.jsx(Kd,{className:Pe("h-3.5 w-3.5 text-white/48 transition-transform",oe?"rotate-180":"")})]})}),s.jsxs(Hr,{align:"end",sideOffset:8,className:"w-[306px] rounded-2xl border border-white/12 bg-[#090909]/98 p-1.5 shadow-[0_14px_34px_rgba(0,0,0,0.18)] backdrop-blur-md",children:[s.jsx("div",{className:"space-y-1",children:cx.map(bt=>{const xr=bt.id===te;return s.jsxs("button",{type:"button",onMouseEnter:()=>J(bt.id),onFocus:()=>J(bt.id),onClick:()=>{Ne(bt.id),Ce(!1),J(null)},className:Pe("chat-model-font w-full h-9 rounded-xl px-2.5 text-left inline-flex items-center justify-between transition-colors",xr?"bg-white/[0.08] text-white":"text-white/74 hover:bg-black/48 hover:text-white"),children:[s.jsx("span",{className:"text-[13.5px]",children:bt.label}),xr?s.jsx(Ha,{className:"h-3.5 w-3.5 text-white/82"}):null]},bt.id)})}),s.jsxs("div",{className:"mt-1.5 rounded-xl border border-white/10 bg-black/48 px-3 py-2.5",children:[s.jsx("div",{className:"text-[12.5px] font-normal text-white/90",children:Oe.label}),s.jsx("p",{className:"mt-1 text-[12px] leading-relaxed text-white/66",children:Oe.description})]})]})]}),s.jsx("button",{type:"button",onClick:nr,disabled:!rt,className:Pe("rounded-xl grid place-items-center transition-colors cursor-pointer",qe?"h-8 w-8":"h-[30px] w-[30px]",rt?"bg-transparent text-white/72 hover:text-white":"bg-transparent text-white/10 cursor-not-allowed"),"aria-label":"Send message",title:"Send message",children:s.jsx(Zx,{className:"h-[18px] w-[18px]"})})]})]})]})]}),w?s.jsx("div",{className:Pe("pointer-events-none absolute inset-0 border-2 border-dashed border-[#2f5da6] bg-black/70 backdrop-blur-sm grid place-items-center",qe?"rounded-3xl":"rounded-2xl"),children:s.jsxs("div",{className:"inline-flex flex-col items-center gap-2 text-[#bcd3ff]",children:[s.jsx(yY,{className:"h-8 w-8"}),s.jsx("div",{className:"text-sm font-medium",children:"Drop files to attach"})]})}):null]})};return G?s.jsxs("div",{className:"h-full min-h-0 w-full bg-[#131313]",children:[s.jsxs("div",{className:"h-full min-h-0 grid grid-cols-1 lg:grid-cols-[280px_minmax(0,1fr)]",children:[s.jsxs("aside",{className:"min-h-0 border-r-[0.5px] border-white/10 bg-[#111111] flex flex-col",children:[s.jsx("div",{className:"px-4 pt-6 pb-4",children:s.jsxs(ze,{type:"button",variant:"ghost",onClick:()=>r("/dashboard"),className:"-ml-2 rounded-2xl text-white/78 hover:text-white","aria-label":"Back to dashboard",title:"Back to dashboard",children:[s.jsx(ho,{className:"h-4 w-4 mr-2"}),"Back"]})}),s.jsxs("div",{className:"chatlog-sidebar-light px-4 pt-1 pb-4 space-y-2",children:[s.jsx("button",{type:"button",onClick:ct,className:"w-full h-9 rounded-xl text-left text-[14px] font-normal text-white/78 hover:text-white hover:bg-white/[0.06] transition-colors",children:s.jsxs("span",{className:"inline-flex w-full items-center justify-start gap-2 pl-3",children:[s.jsx(zY,{className:"h-3.5 w-3.5 text-white/64"}),s.jsx("span",{className:"font-normal",children:"New chat"})]})}),s.jsx("button",{type:"button",onClick:ke,className:"w-full h-9 rounded-xl text-left text-[14px] font-normal text-white/78 hover:text-white hover:bg-white/[0.06] transition-colors",children:s.jsxs("span",{className:"inline-flex w-full items-center justify-start gap-2 pl-3",children:[s.jsx(Jx,{className:"h-3.5 w-3.5 text-white/64"}),s.jsx("span",{className:"font-normal",children:"Search chat"})]})}),s.jsx("button",{type:"button",onClick:Je,className:Pe("w-full h-9 rounded-xl text-left text-[14px] font-normal transition-colors",re?"bg-white/[0.09] text-white":"text-white/78 hover:text-white hover:bg-white/[0.06]"),children:s.jsxs("span",{className:"inline-flex w-full items-center justify-start gap-2 pl-3",children:[s.jsx(v1,{className:Pe("h-3.5 w-3.5",re?"text-[#f4c76f] fill-[#f4c76f]":"text-white/64")}),s.jsx("span",{className:"font-normal",children:"Starred"})]})}),H?s.jsx("div",{className:"pt-1",children:s.jsx("input",{ref:Re,value:M,onChange:we=>$(we.target.value),placeholder:"Search chats...",className:"w-full h-9 rounded-xl border border-white/10 bg-white/[0.02] px-3 text-[13px] text-white/85 placeholder:text-white/35 outline-none focus:border-white/20"})}):null]}),s.jsx("div",{className:"chatlog-sidebar-light px-4 pt-5 pb-3 text-[13px] font-normal text-white/22",children:s.jsx("span",{className:"inline-block pl-3",children:"Recents"})}),s.jsx("div",{className:"chatlog-sidebar-light flex-1 min-h-0 overflow-y-auto space-y-1 px-4 pb-5",children:Fe.length===0?s.jsx("div",{className:"px-3 py-3 text-sm font-normal text-white/45",children:m.length===0?"No previous conversations yet.":re?"No starred chats yet.":M.trim()?"No chats match your search.":"No previous conversations yet."}):Fe.map(we=>s.jsxs("div",{role:"button",tabIndex:0,onClick:()=>nn(we.id),onKeyDown:qe=>{(qe.key==="Enter"||qe.key===" ")&&(qe.preventDefault(),nn(we.id))},className:Pe("w-full text-left rounded-xl pl-0 pr-2 py-2 font-normal transition-colors flex items-center gap-2 cursor-pointer",v===we.id?"bg-white/10 text-white":"text-white/82 hover:bg-[#171717]"),children:[s.jsx("div",{className:"min-w-0 flex-1 text-[13px] font-normal leading-tight truncate text-white/78 pl-3",children:s.jsx("span",{className:"truncate block",children:we.title})}),s.jsx("button",{type:"button",onClick:qe=>{qe.stopPropagation(),xe(we.id)},className:"h-6 w-6 rounded-md inline-flex items-center justify-center hover:bg-white/[0.08] transition-colors","aria-label":we.starred?"Unstar chat":"Star chat",title:we.starred?"Unstar":"Star",children:s.jsx(v1,{className:Pe("h-3.5 w-3.5",we.starred?"text-[#f4c76f] fill-[#f4c76f]":"text-white/22")})})]},we.id))})]}),s.jsxs("section",{className:"min-h-0 flex flex-col bg-[#131313]",children:[s.jsxs("div",{className:"h-14 px-4 md:px-6 flex items-center gap-2",children:[s.jsx("div",{className:"truncate text-[14px] text-white/75",children:Ie}),s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsx("button",{type:"button",className:"h-7 w-7 rounded-md text-white/55 hover:text-white hover:bg-white/[0.05] transition-colors inline-flex items-center justify-center","aria-label":"Chat actions",title:"Chat actions",children:s.jsx(Kd,{className:"h-4 w-4"})})}),s.jsxs(Hr,{align:"start",className:"w-44 rounded-xl",children:[s.jsxs(wr,{onClick:()=>xe(v),children:[s.jsx(v1,{className:"h-4 w-4 mr-2"}),Ee!=null&&Ee.starred?"Unstar":"Star"]}),s.jsxs(wr,{onClick:()=>et(v),children:[s.jsx(MY,{className:"h-4 w-4 mr-2"}),"Rename"]}),s.jsxs(wr,{onClick:()=>mr(v),className:"text-red-400 focus:text-red-300",children:[s.jsx(Va,{className:"h-4 w-4 mr-2 text-red-400"}),"Delete"]})]})]})]}),s.jsxs("div",{className:"relative flex-1 min-h-0 bg-[#131313]",children:[s.jsx("div",{ref:Se,className:"h-full overflow-y-auto px-3 md:px-8 lg:px-12 pt-5 pb-[248px] md:pb-[264px] space-y-1",children:s.jsxs("div",{className:Pe(nt,Gt),children:[d.length===0?s.jsx("div",{className:"text-sm text-white/42 px-1 py-2",children:"Select a chat log or start a new chat."}):d.map((we,qe)=>{var Vn;const at=qe>0?(Vn=d[qe-1])==null?void 0:Vn.role:null,$t=T===we.id&&U<we.content.length,Pt=fx(we.feedback),bt=(we.attachments||[]).filter(ir=>ir.kind==="image"&&ir.previewUrl),xr=(we.attachments||[]).filter(ir=>ir.kind==="file"&&ir.name),Gr=(we.attachments||[]).filter(ir=>ir.kind==="snippet"&&ir.text);return s.jsx("div",{className:Pe("flex w-full",we.role==="user"?"justify-end":"justify-start",qe===0?"mt-0":at!==we.role?we.role==="user"?"mt-14":"mt-12":"mt-1.5"),children:we.role==="assistant"?s.jsxs("div",{className:"group/assistant max-w-[92%] md:max-w-[84%] py-0.5",children:[$t?s.jsxs("div",{className:"text-[15px] leading-[1.56] whitespace-pre-wrap text-white/86",children:[we.content.slice(0,U),s.jsx("span",{className:"ml-[1px] inline-block h-[1.05em] w-[1px] align-[-2px] bg-white/45 animate-pulse"})]}):s.jsx("div",{children:KTe(we.content)}),$t?null:s.jsxs("div",{className:"mt-4 flex items-center gap-1.5 opacity-0 pointer-events-none translate-y-0.5 transition-all duration-150 group-hover/assistant:opacity-100 group-hover/assistant:pointer-events-auto group-hover/assistant:translate-y-0",children:[s.jsx("button",{type:"button",onClick:()=>wt(we.content),className:"h-8 w-8 rounded-md inline-flex items-center justify-center text-white/72 hover:text-white hover:bg-white/[0.055] transition-colors","aria-label":"Copy message",title:"Copy",children:s.jsx(Yy,{className:"h-4 w-4"})}),s.jsx("button",{type:"button",onClick:()=>_t(we.id,"like"),className:Pe("h-8 w-8 rounded-md inline-flex items-center justify-center transition-colors",Pt==="like"?"text-white bg-white/[0.08]":"text-white/72 hover:text-white hover:bg-white/[0.055]"),"aria-label":"Like response",title:"Like",children:s.jsx(u3,{className:"h-4 w-4"})}),s.jsx("button",{type:"button",onClick:()=>_t(we.id,"dislike"),className:Pe("h-8 w-8 rounded-md inline-flex items-center justify-center transition-colors",Pt==="dislike"?"text-white bg-white/[0.08]":"text-white/72 hover:text-white hover:bg-white/[0.055]"),"aria-label":"Dislike response",title:"Dislike",children:s.jsx(UY,{className:"h-4 w-4"})})]})]}):s.jsxs("div",{className:"flex flex-col items-end gap-2.5 w-fit max-w-[68%] md:max-w-[60%] lg:max-w-[56%]",children:[bt.length>0?s.jsx("div",{className:Pe("grid gap-2",bt.length===1?"grid-cols-1":bt.length<=4?"grid-cols-2":"grid-cols-3"),children:bt.map(ir=>s.jsx("div",{className:"overflow-hidden rounded-[14px] border border-white/10 bg-black/35",children:s.jsx("img",{src:ir.previewUrl||"",alt:ir.name||"Attachment",className:"h-[92px] w-[92px] sm:h-[108px] sm:w-[108px] md:h-[124px] md:w-[124px] object-cover"})},ir.id))}):null,xr.length>0?s.jsx("div",{className:"flex flex-col items-end gap-2 w-full",children:xr.map(ir=>s.jsxs("div",{className:"inline-flex items-center gap-2 rounded-xl border border-white/10 bg-[#0f0f0f] px-3 py-2 text-[12px] text-white/78",children:[s.jsx(Xx,{className:"h-3.5 w-3.5 text-white/60"}),s.jsx("span",{className:"max-w-[180px] truncate",children:ir.name})]},ir.id))}):null,Gr.length>0?s.jsx("div",{className:"flex flex-col items-end gap-2 w-full",children:Gr.map(ir=>s.jsx("div",{className:"max-w-[320px] rounded-xl border border-white/10 bg-[#0f0f0f] px-3 py-2 text-[12px] leading-relaxed text-white/72 line-clamp-3",children:ir.text},ir.id))}):null,s.jsx("div",{className:"inline-flex items-center w-fit rounded-[20px] px-5 py-3 text-[15px] leading-[1.34] whitespace-pre-wrap break-words bg-[#0f0f0f] text-white",children:we.content})]})},we.id)}),b?s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"px-1 py-1 text-[13px] font-medium tracking-[0.01em]",children:s.jsx("span",{className:"acq-thinking-shimmer",children:"Thinking for a strong answer"})})}):null]})}),s.jsx("div",{className:"absolute inset-x-0 bottom-0 h-[156px] bg-[#131313] pointer-events-none z-10"}),s.jsx("div",{className:"absolute inset-x-0 bottom-9 md:bottom-10 px-3 md:px-8 lg:px-12 z-20",children:s.jsx("div",{className:nt,children:pr("chat-log")})})]})]})]}),s.jsx(Gi,{open:q,onOpenChange:Jt,children:s.jsxs(yi,{className:"max-w-sm rounded-2xl border border-white/10 bg-[#111111]",children:[s.jsx(xi,{children:s.jsx(bi,{children:"Rename chat"})}),s.jsx("input",{value:_e,onChange:we=>pe(we.target.value),onKeyDown:we=>{we.key==="Enter"&&(we.preventDefault(),Wt())},placeholder:"Enter chat name",className:"h-10 w-full rounded-xl border border-white/10 bg-white/[0.03] px-3 text-sm text-white/88 placeholder:text-white/35 outline-none focus:border-white/20"}),s.jsxs(ch,{className:"gap-2 sm:gap-2",children:[s.jsx("button",{type:"button",onClick:()=>Jt(!1),className:"h-9 px-4 rounded-xl border border-white/12 bg-transparent text-sm text-white/70 hover:text-white hover:bg-white/[0.03] transition-colors",children:"Cancel"}),s.jsx("button",{type:"button",onClick:Wt,disabled:!_e.trim(),className:"h-9 px-4 rounded-xl bg-white text-black text-sm font-medium hover:bg-white/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Save"})]})]})}),s.jsx(Wl,{open:ye,onOpenChange:we=>{ce(we),we||Q("")},children:s.jsxs(To,{className:"max-w-sm rounded-2xl border border-white/10 bg-[#111111]",children:[s.jsxs(Oo,{children:[s.jsx(Mo,{children:"Are you sure?"}),s.jsx(Ro,{children:"This will permanently delete this chat log."})]}),s.jsxs(Io,{children:[s.jsx(Do,{className:"rounded-xl border-white/12 bg-transparent text-white/70 hover:bg-white/[0.03] hover:text-white",children:"Cancel"}),s.jsx($o,{onClick:Ur,className:"rounded-xl border-0 bg-[#dc2626] text-white hover:bg-[#b91c1c]",children:"Delete"})]})]})}),s.jsx("input",{ref:Y,type:"file",multiple:!0,className:"hidden",onChange:we=>{we.target.files&&ht(we.target.files),we.target.value=""}})]}):s.jsxs("div",{className:"relative w-full max-w-[780px] mx-auto",children:[pr("dashboard"),s.jsx("div",{className:"mt-3 flex items-center justify-start",children:s.jsx("button",{type:"button",onClick:()=>r("/dashboard/chat-log"),className:"show-chat-log-font h-9 rounded-full bg-white/[0.026] px-4 text-[13px] text-white/68 backdrop-blur-lg transition-colors hover:bg-white/[0.045] hover:text-white/86",children:"Show chat log"})}),s.jsx("input",{ref:Y,type:"file",multiple:!0,className:"hidden",onChange:we=>{we.target.files&&ht(we.target.files),we.target.value=""}})]})}const B4={this_month:"This month",last_7_days:"Last 7 days",last_30_days:"Last 30 days"},M7=e=>String(e||"").trim().toLowerCase();function tOe(e){const t=M7(e);return t?t==="new lead"||t==="new"?"new_lead":t==="in contact"||t==="contacted"?"in_contact":t==="qualified"?"qualified":t==="unqualified"||t==="disqualified"?"unqualified":t==="call booked"||t==="booked call"||t==="call"?"call_booked":t==="won"||t==="closed won"?"won":t==="no show"||t==="noshow"?"no_show":null:null}const x_=(e,t)=>{const r=M7(e);return t==="hot"?r==="hot lead"||r==="hot":t==="warm"?r==="warm lead"||r==="warm":r==="cold lead"||r==="cold"};function rOe(e){const t=new Date(e);return t.setHours(0,0,0,0),t}function nOe(e,t=new Date){const r=rOe(t);if(e==="last_7_days"){const n=new Date(r);return n.setDate(n.getDate()-6),n}if(e==="last_30_days"){const n=new Date(r);return n.setDate(n.getDate()-29),n}return new Date(r.getFullYear(),r.getMonth(),1)}function aOe(e){return Number.isFinite(e)?`${Math.round(e)}%`:"0%"}function iOe(e){return!Number.isFinite(e)||e<=0?"":e<1?"< 1":e<10?e.toFixed(1):String(Math.round(e))}function Wo(e){return Number.isFinite(e)?e.toLocaleString():"0"}function sOe(e){const t=String(e||"").trim();return t?t.startsWith("@")?t:`@${t}`:""}function oOe(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function R7(e){if(!e)return"";const t=Date.now()-e.getTime();if(!Number.isFinite(t))return"";const r=Math.floor(t/1e3);if(r<0)return"";if(r<60)return`${Math.max(1,r)}s`;const n=Math.floor(r/60);if(n<60)return`${n}m`;const a=Math.floor(n/60);if(a<24)return`${a}h`;const i=Math.floor(a/24);if(i<7)return`${i}d`;const o=Math.floor(i/7);if(o<5)return`${o}w`;const l=Math.floor(i/30);if(l<12)return`${l}mo`;const c=Math.floor(i/365);return`${Math.max(1,c)}y`}function lOe(e){const t=R7(e);return t?t==="now"?"now":`${t} ago`:""}function cOe(e){const t=Math.max(0,Math.floor(e));if(!Number.isFinite(t))return"";if(t<60)return`${t}m`;const r=Math.floor(t/60);if(r<24)return`${r}h`;const n=Math.floor(r/24);if(n<7)return`${n}d`;const a=Math.floor(n/7);if(a<5)return`${a}w`;const i=Math.floor(n/30);if(i<12)return`${i}mo`;const o=Math.floor(n/365);return`${Math.max(1,o)}y`}function Uv(e){if(!e)return 0;const t=[e.last_inbound_at,e.last_message_at,e.created_at].filter(Boolean);for(const r of t){const n=new Date(r).getTime();if(Number.isFinite(n)&&n>0)return n}return 0}function qv({iconKey:e,thread:t,alert:r}){const n=String(e||"").trim().toLowerCase(),a=(t==null?void 0:t.temperature)||null,i=(t==null?void 0:t.phase)||null,o=String((t==null?void 0:t.lead_status)||"").toLowerCase(),l=i==="qualified"||o==="qualified"||n==="qualified";let c=0;if((a==="hot"||n==="hot")&&(c+=1e3),l&&(c+=700),(n==="call"||n==="reschedule")&&(c+=600),n==="no_show"&&(c+=520),r){c+=250;const u=Number(r.overdue_minutes||0);Number.isFinite(u)&&u>0&&(c+=Math.min(180,u/10))}return t!=null&&t.priority&&(c+=120),n==="follow_up"&&(c+=100),c}function uOe(e){const t=e.peer_username?sOe(e.peer_username):"",r=String(e.subtitle||"").trim();if(!t)return r;const n=new RegExp(`^(?:${oOe(t)}\\s*)+`,"i"),a=r.replace(n,"").trim();return a?`${t} ${a}`:t}async function dOe(e,t){const r=t.filter(Boolean);if(r.length===0)return[];const n=200,a=[];for(let i=0;i<r.length;i+=n){const o=r.slice(i,i+n),{data:l,error:c}=await z.from("instagram_conversation_tags").select("conversation_id, tag:instagram_tags(id,name,color,icon)").eq("workspace_id",e).in("conversation_id",o);if(c)throw c;a.push(...l||[])}return a}function fOe(e){for(const t of e){const r=tOe(t==null?void 0:t.name);if(r)return r}return"new_lead"}function hOe(e){for(const t of e){const r=(t==null?void 0:t.name)||"";if(x_(r,"hot"))return"hot";if(x_(r,"warm"))return"warm";if(x_(r,"cold"))return"cold"}return null}function mOe({replyRate:e,avgResponseMins:t,unqualifiedPercent:r}){return t>60?"Your response time is slipping. Aim for fast replies on new inbound today.":e<55?"Reply rate is low. Clear the newest inbound messages first, then follow up on warm leads.":r>35?"A lot of leads are getting disqualified. Tighten your qualification questions early.":"You're doing awesome! Keep it up."}function pOe(e=new Date){const t=e.getHours();return t>=5&&t<12?"Good morning":t>=12&&t<18?"Good afternoon":t>=18&&t<22?"Good evening":"Still awake"}function gOe(){var de;const e=Xt(),{user:t,profile:r}=Kt(),{workspace:n,members:a,userRole:i}=on(),[o,l]=h.useState("this_month"),[c,u]=h.useState(!0),[d,f]=h.useState(null),m=h.useRef(null),[p,v]=h.useState(0),[g,b]=h.useState(!1),y=h.useRef(null),[w,x]=h.useState([]),[_,S]=h.useState([]),[k,C]=h.useState([]),[j,N]=h.useState([]),[A,P]=h.useState(!1),[T,L]=h.useState(()=>Date.now()),U=h.useMemo(()=>nOe(o),[o]);h.useEffect(()=>{const G=window.setInterval(()=>{L(Date.now())},3e4);return()=>window.clearInterval(G)},[]),h.useEffect(()=>{var Z;const G=(Z=m.current)==null?void 0:Z.closest("main");if(!G)return;let ue=0;const he=()=>{cancelAnimationFrame(ue),ue=requestAnimationFrame(()=>{const ge=Number(G.scrollTop||0),Ie=Math.max(0,Math.min(1,ge/420));v(Ee=>Math.abs(Ee-Ie)<.01?Ee:Ie)})};return he(),G.addEventListener("scroll",he,{passive:!0}),()=>{cancelAnimationFrame(ue),G.removeEventListener("scroll",he)}},[]),h.useEffect(()=>{var Ie;const G=(Ie=m.current)==null?void 0:Ie.closest("main");if(!G)return;const ue=()=>{y.current!=null&&(window.clearTimeout(y.current),y.current=null)},he=()=>{ue(),b(!1),y.current=window.setTimeout(()=>{Number(G.scrollTop||0)<=8&&b(!0)},3e3)},Z=()=>{Number(G.scrollTop||0)>8&&b(!1),he()},ge=()=>{he()};return he(),G.addEventListener("scroll",Z,{passive:!0}),G.addEventListener("wheel",ge,{passive:!0}),G.addEventListener("touchstart",ge,{passive:!0}),G.addEventListener("touchmove",ge,{passive:!0}),G.addEventListener("pointerdown",ge,{passive:!0}),window.addEventListener("keydown",ge),()=>{ue(),G.removeEventListener("scroll",Z),G.removeEventListener("wheel",ge),G.removeEventListener("touchstart",ge),G.removeEventListener("touchmove",ge),G.removeEventListener("pointerdown",ge),window.removeEventListener("keydown",ge)}},[]),h.useEffect(()=>{if(!(n!=null&&n.id))return;let G=!1;return u(!0),f(null),(async()=>{try{const he=U.toISOString(),[{data:Z,error:ge},{data:Ie,error:Ee}]=await Promise.all([z.from("instagram_threads").select("conversation_id,created_at,last_message_at,last_inbound_at,last_outbound_at,peer_username,peer_name,peer_profile_picture_url,assigned_user_id,lead_status,priority,is_spam,hidden_from_setters").eq("workspace_id",n.id).or(`last_message_at.gte.${he},created_at.gte.${he}`),z.from("meetings").select("id,start_time,status,outcome_status").eq("workspace_id",n.id).not("google_event_id","is",null).not("meeting_link","is",null).gte("start_time",he)]);if(ge)throw ge;if(Ee)throw Ee;const We=(Z||[]).filter(dt=>!dt.is_spam).filter(dt=>!dt.hidden_from_setters).filter(dt=>String(dt.lead_status||"open")!=="removed"),Oe=We.map(dt=>String(dt.conversation_id)).filter(Boolean),Fe=await dOe(n.id,Oe),rt={};for(const dt of Fe){const gt=String((dt==null?void 0:dt.conversation_id)||"").trim();!gt||!(dt!=null&&dt.tag)||(rt[gt]||(rt[gt]=[]),rt[gt].push(dt.tag))}const nt=We.map(dt=>{const gt=String(dt.conversation_id),It=rt[gt]||[];return{...dt,phase:fOe(It),temperature:hOe(It)}}),{data:Gt,error:ht}=await z.from("instagram_alerts").select("id,conversation_id,alert_type,overdue_minutes,recommended_action,assigned_user_id,created_at").eq("workspace_id",n.id).eq("status","open").order("overdue_minutes",{ascending:!1}).order("created_at",{ascending:!1}).limit(6);if(ht)throw ht;if(!G){const dt=new Set(We.map(It=>String(It.conversation_id))),gt=(Array.isArray(Gt)?Gt:[]).filter(It=>dt.has(String((It==null?void 0:It.conversation_id)||"")));x(nt),S(gt),C(Array.isArray(Ie)?Ie:[])}}catch(he){console.error("Dashboard load error:",he),G||f((he==null?void 0:he.message)||"Failed to load dashboard")}finally{G||u(!1)}})(),()=>{G=!0}},[n==null?void 0:n.id,U]),h.useEffect(()=>{if(!(n!=null&&n.id)||i==="setter")return;let G=!1;return P(!0),(async()=>{try{const{data:he,error:Z}=await Hu({action:"dashboard-todos",workspaceId:n.id,sinceIso:U.toISOString()});if(Z)throw Z;if(!(he!=null&&he.success))throw new Error((he==null?void 0:he.error)||"Failed to load to-dos");const Ie=(Array.isArray(he==null?void 0:he.tasks)?he.tasks:[]).map(Ee=>({conversation_id:String((Ee==null?void 0:Ee.conversation_id)||(Ee==null?void 0:Ee.conversationId)||"").trim(),title:String((Ee==null?void 0:Ee.title)||"").trim(),subtitle:String((Ee==null?void 0:Ee.subtitle)||"").trim(),icon:String((Ee==null?void 0:Ee.icon)||"").trim(),peer_username:(Ee==null?void 0:Ee.peer_username)!=null?String(Ee.peer_username):null,peer_name:(Ee==null?void 0:Ee.peer_name)!=null?String(Ee.peer_name):null,peer_profile_picture_url:(Ee==null?void 0:Ee.peer_profile_picture_url)!=null?String(Ee.peer_profile_picture_url):null})).filter(Ee=>Ee.conversation_id&&Ee.title);G||N(Ie)}catch(he){console.warn("Dashboard todos error:",he)}finally{G||P(!1)}})(),()=>{G=!0}},[n==null?void 0:n.id,i,U]);const D=(r==null?void 0:r.full_name)||(r==null?void 0:r.display_name)||((de=t==null?void 0:t.email)==null?void 0:de.split("@")[0])||"User",H=(D||"").split(" ")[0]||D,B=h.useMemo(()=>pOe(new Date(T)),[T]),M=h.useMemo(()=>{const G={new_lead:0,in_contact:0,qualified:0,unqualified:0,call_booked:0,won:0,no_show:0};for(const ue of w)G[ue.phase]+=1;return G},[w]),$=w.length,re=h.useMemo(()=>w.filter(G=>String(G.lead_status||"").toLowerCase()==="qualified").length,[w]),ie=0,q=h.useMemo(()=>k.filter(G=>{const ue=String(G.status||"").toLowerCase(),he=String(G.outcome_status||"").toLowerCase();return ue!=="cancelled"&&he!=="cancelled"}).length,[k]),K=h.useMemo(()=>k.filter(G=>String(G.outcome_status||"").toLowerCase()==="completed").length,[k]),ne=0,ae=h.useMemo(()=>{const G=U.getTime();return w.filter(ue=>new Date(ue.created_at).getTime()>=G).length},[w,U]),_e=h.useMemo(()=>{const G=U.getTime();return w.filter(ue=>ue.last_inbound_at&&new Date(ue.last_inbound_at).getTime()>=G)},[w,U]),pe=h.useMemo(()=>_e.filter(G=>{if(!G.last_inbound_at||!G.last_outbound_at)return!1;const ue=new Date(G.last_inbound_at).getTime();return new Date(G.last_outbound_at).getTime()>=ue}),[_e]),ye=_e.length?pe.length/_e.length*100:0,ce=h.useMemo(()=>{const G=[];for(const ue of pe){if(!ue.last_inbound_at||!ue.last_outbound_at)continue;const he=new Date(ue.last_inbound_at).getTime(),ge=(new Date(ue.last_outbound_at).getTime()-he)/6e4;Number.isFinite(ge)&&ge>=0&&ge<=60*24*7&&G.push(ge)}return G.length?G.reduce((ue,he)=>ue+he,0)/G.length:0},[pe]),me=$?M.unqualified/$*100:0,Q=h.useMemo(()=>[{key:"conversations",label:"Conversations",value:$},{key:"qualified",label:"Qualified",value:re},{key:"links_sent",label:"Links sent",value:ie},{key:"booked_calls",label:"Booked calls",value:q},{key:"show_ups",label:"Show ups",value:K},{key:"closed",label:"Closed",value:ne}],[$,re,ie,q,K,ne]),te=h.useMemo(()=>Q.map(G=>({stage:G.label,value:G.value})),[Q]),Ne=h.useMemo(()=>{const G=Math.max(0,M.unqualified||0),ue=Math.max(0,$-G);return[{key:"unqualified",name:"Unqualified",value:G,color:"#ef4444"},{key:"other",name:"Other",value:ue,color:"#22c55e"}]},[M.unqualified,$]),je=h.useMemo(()=>[{w:"W1",earned:0,potential:0},{w:"W2",earned:0,potential:0},{w:"W3",earned:0,potential:0},{w:"W4",earned:0,potential:0}],[]),J=h.useMemo(()=>{const G=[],ue=new Map;for(const Oe of w)ue.set(String(Oe.conversation_id),Oe);const he=new Map;for(const Oe of _)he.set(String(Oe.conversation_id),Oe);for(const Oe of _){const Fe=w.find(gt=>String(gt.conversation_id)===String(Oe.conversation_id)),rt=Oe.alert_type==="no_show_followup"?"call":Oe.alert_type==="hot_lead_unreplied"?"hot":Oe.alert_type==="qualified_inactive"?"qualified":"follow_up",nt=Number(Oe.overdue_minutes||0),Gt=Number.isFinite(nt)&&nt>0?cOe(nt):"",ht=Oe.recommended_action||"Open the conversation and take action.",dt=Gt?`${ht} (overdue ${Gt})`:ht;G.push({conversation_id:Oe.conversation_id,title:yOe(Oe.alert_type),subtitle:dt,icon:rt,peer_username:(Fe==null?void 0:Fe.peer_username)??null,peer_name:(Fe==null?void 0:Fe.peer_name)??null,peer_profile_picture_url:(Fe==null?void 0:Fe.peer_profile_picture_url)??null})}const Z=w.filter(Oe=>!!Oe.last_inbound_at).filter(Oe=>{const Fe=Oe.last_inbound_at?new Date(Oe.last_inbound_at).getTime():0,rt=Oe.last_outbound_at?new Date(Oe.last_outbound_at).getTime():0;return Fe>rt}).sort((Oe,Fe)=>{const rt=Oe.last_inbound_at?new Date(Oe.last_inbound_at).getTime():0;return(Fe.last_inbound_at?new Date(Fe.last_inbound_at).getTime():0)-rt});for(const Oe of Z.slice(0,25)){const Fe=Oe.last_inbound_at?new Date(Oe.last_inbound_at):null,rt=lOe(Fe),nt=rt?`${rt}`:"recently",ht=Oe.temperature==="hot"?`messaged you ${nt}. Reply while it's hot.`:`sent a new message ${nt}. Keep momentum.`;G.push({conversation_id:String(Oe.conversation_id),title:Oe.temperature==="hot"?"Follow up hot lead":"Reply now",subtitle:ht,icon:Oe.temperature==="hot"?"hot":String(Oe.lead_status||"").toLowerCase()==="qualified"?"qualified":"follow_up",peer_username:Oe.peer_username??null,peer_name:Oe.peer_name??null,peer_profile_picture_url:Oe.peer_profile_picture_url??null})}const ge=Date.now(),Ie=w.filter(Oe=>String(Oe.lead_status||"").toLowerCase()==="qualified").filter(Oe=>{const Fe=Oe.last_message_at?new Date(Oe.last_message_at).getTime():new Date(Oe.created_at).getTime();return Number.isFinite(Fe)&&ge-Fe>24*60*60*1e3}).sort((Oe,Fe)=>{const rt=Oe.last_message_at?new Date(Oe.last_message_at).getTime():new Date(Oe.created_at).getTime(),nt=Fe.last_message_at?new Date(Fe.last_message_at).getTime():new Date(Fe.created_at).getTime();return rt-nt});for(const Oe of Ie.slice(0,25)){const Fe=Oe.last_message_at?new Date(Oe.last_message_at).getTime():new Date(Oe.created_at).getTime(),rt=Number.isFinite(Fe)&&Fe>0?new Date(Fe):null,nt=R7(rt)||"24h+";G.push({conversation_id:String(Oe.conversation_id),title:"Follow up qualified lead",subtitle:`has been quiet for ${nt}. Send a follow up.`,icon:"qualified",peer_username:Oe.peer_username??null,peer_name:Oe.peer_name??null,peer_profile_picture_url:Oe.peer_profile_picture_url??null})}const Ee=new Map,We=G.filter(Oe=>Oe.conversation_id&&Oe.title).slice().sort((Oe,Fe)=>{const rt=ue.get(String(Oe.conversation_id))||null,nt=ue.get(String(Fe.conversation_id))||null,Gt=he.get(String(Oe.conversation_id))||null,ht=he.get(String(Fe.conversation_id))||null,dt=qv({iconKey:Oe.icon,thread:rt,alert:Gt}),gt=qv({iconKey:Fe.icon,thread:nt,alert:ht});if(gt!==dt)return gt-dt;const It=Uv(rt);return Uv(nt)-It});for(const Oe of We){const Fe=String(Oe.conversation_id);if(!(!Fe||Ee.has(Fe))&&(Ee.set(Fe,Oe),Ee.size>=6))break}return Array.from(Ee.values())},[_,w]),oe=h.useMemo(()=>{const G=new Map(a.map(Z=>[Z.userId,Z])),ue={};for(const Z of w){const ge=Z.assigned_user_id||"";ge&&(ue[ge]||(ue[ge]={assigned:0,won:0}),ue[ge].assigned+=1,Z.phase==="won"&&(ue[ge].won+=1))}return Object.entries(ue).map(([Z,ge])=>({userId:Z,assigned:ge.assigned,won:ge.won,member:G.get(Z)||null})).sort((Z,ge)=>ge.won-Z.won||ge.assigned-Z.assigned).slice(0,3)},[w,a]),Ce=h.useMemo(()=>mOe({replyRate:ye,avgResponseMins:ce,unqualifiedPercent:me}),[ye,ce,me]),R=h.useMemo(()=>{const G=j.length?j:J,ue=new Map;for(const Z of w)ue.set(String(Z.conversation_id),Z);const he=new Map;for(const Z of _)he.set(String(Z.conversation_id),Z);return G.slice().sort((Z,ge)=>{const Ie=ue.get(String(Z.conversation_id))||null,Ee=ue.get(String(ge.conversation_id))||null,We=he.get(String(Z.conversation_id))||null,Oe=he.get(String(ge.conversation_id))||null,Fe=qv({iconKey:Z.icon,thread:Ie,alert:We}),rt=qv({iconKey:ge.icon,thread:Ee,alert:Oe});if(rt!==Fe)return rt-Fe;const nt=Uv(Ie);return Uv(Ee)-nt}).slice(0,6)},[j,J,w,_]);if(h.useEffect(()=>{i==="setter"&&e("/setter-portal/messages",{replace:!0})},[i,e]),i==="setter")return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsx("div",{className:"text-sm text-muted-foreground",children:"Redirecting..."})});const Y=Math.max(0,Math.min(1,(p-.06)/.94)),Se=Y,Re=(1-Y)*110;return s.jsx(Er,{children:s.jsxs("div",{ref:m,className:"p-8 pt-32 md:pt-36 pb-24",children:[s.jsx("div",{className:"mx-auto max-w-4xl text-center",children:s.jsx("h1",{className:"headline-domaine text-[52px] leading-[1.05] font-medium",children:B==="Still awake"?`Still awake, ${H}?`:`${B}, ${H}`})}),s.jsx("div",{className:"mt-10",children:s.jsx(I7,{workspaceId:(n==null?void 0:n.id)||null})}),s.jsxs("div",{className:Pe("mt-40 md:mt-48 flex flex-col items-center select-none pointer-events-none transition-all duration-500 ease-out",g&&p<=.08?"opacity-100 translate-y-0":"opacity-0 translate-y-2"),"aria-hidden":!0,children:[s.jsx(Kd,{className:"h-5 w-5 text-white/58 acq-scroll-hint-arrow"}),s.jsx("div",{className:"mt-1.5 text-[12px] font-normal tracking-[0.015em] text-white/45",children:"scroll to view dashboard"})]}),s.jsxs("div",{className:"mt-24 transition-[opacity,transform] duration-200 ease-out",style:{opacity:Se,transform:`translateY(${Re}px)`,visibility:Se<=.001?"hidden":"visible"},children:[s.jsx("div",{className:"flex items-center justify-end mb-8",children:s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsxs("button",{type:"button",className:"h-11 rounded-2xl bg-black border border-white/10 pl-4 pr-3 text-[15px] font-medium text-white/85 hover:bg-white/[0.03] transition-colors inline-flex items-center gap-2",children:[s.jsx(mo,{className:"h-4 w-4 text-white/55"}),s.jsx("span",{children:B4[o]}),s.jsx(Kd,{className:"h-4 w-4 text-white/40"})]})}),s.jsx(Hr,{align:"end",className:"rounded-2xl min-w-[220px]",children:s.jsx(Ra,{value:o,onValueChange:G=>l(G),children:Object.entries(B4).map(([G,ue])=>s.jsx(er,{value:G,className:"text-sm",children:ue},G))})})]})}),d?s.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black p-6 text-sm text-white/70 mb-6",children:["Failed to load dashboard: ",d]}):null,s.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[s.jsxs("div",{className:"col-span-12 lg:col-span-8 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[s.jsx(b_,{className:"col-span-12 md:col-span-4",title:"Conversion rate",value:"",meta:"Call booking integrations coming soon"}),s.jsx(b_,{className:"col-span-12 md:col-span-4",title:"Avg response time",value:c?"":iOe(ce),valueSuffix:c?"":"min",meta:"Outbound after inbound"}),s.jsx(b_,{className:"col-span-12 md:col-span-4",title:"Total conversations",value:c?"":Wo($),meta:c?"":`${Wo($-ae)} active  ${Wo(ae)} new`})]}),s.jsxs(Vu,{className:"p-6",children:[s.jsx("div",{className:"flex items-center justify-between gap-3",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-[13px] font-semibold text-white/85",children:"Funnel"}),s.jsx("div",{className:"text-xs text-white/45 mt-1",children:"Phase distribution for the selected range"})]})}),s.jsx("div",{className:"mt-5 grid grid-cols-6 gap-0 rounded-2xl border border-white/10 overflow-hidden",children:Q.map((G,ue)=>s.jsxs("div",{className:Pe("px-4 py-4 bg-black/50 border-white/10",ue!==0?"border-l-[0.5px]":""),children:[s.jsx("div",{className:"text-[12px] text-white/45",children:G.label}),s.jsx("div",{className:"mt-1 text-[18px] font-semibold text-white/92",children:c?"":Wo(G.value||0)})]},G.key))}),s.jsx("div",{className:"mt-6 h-[220px]",children:s.jsx(yy,{width:"100%",height:"100%",children:s.jsxs($j,{data:te,margin:{left:0,right:0,top:10,bottom:0},children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"funnelFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:.35}),s.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:.05})]})}),s.jsx(tx,{stroke:"rgba(255,255,255,0.06)",vertical:!1}),s.jsx(Sf,{dataKey:"stage",tick:{fill:"rgba(255,255,255,0.45)",fontSize:11},axisLine:!1,tickLine:!1}),s.jsx(kf,{hide:!0}),s.jsx(Ma,{cursor:{stroke:"rgba(255,255,255,0.08)"},contentStyle:{background:"rgba(0,0,0,0.9)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:14,color:"rgba(255,255,255,0.9)",fontSize:12},labelStyle:{color:"rgba(255,255,255,0.6)"},formatter:G=>[String(G),"Leads"]}),s.jsx(Wi,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:2,fill:"url(#funnelFill)",dot:!1,activeDot:{r:4,fill:"#3b82f6"}})]})})})]}),s.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[s.jsxs(Vu,{className:"col-span-12 md:col-span-5 p-6",children:[s.jsx("div",{className:"flex items-start justify-between gap-3",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-[13px] font-semibold text-white/85",children:"Unqualified leads"}),s.jsx("div",{className:"mt-1 text-sm text-white/50",children:c?"":`${aOe(me)}`})]})}),s.jsxs("div",{className:"mt-6 h-[260px] relative flex items-center justify-center",children:[c?s.jsx($e,{className:"h-40 w-40 rounded-full bg-white/[0.06]"}):$===0?s.jsx("div",{className:"text-sm text-white/45",children:"No conversations yet"}):s.jsx(yy,{width:"100%",height:"100%",children:s.jsxs(JEe,{children:[s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"unqualifiedRingFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#ef4444",stopOpacity:.9}),s.jsx("stop",{offset:"100%",stopColor:"#ef4444",stopOpacity:.35})]}),s.jsxs("linearGradient",{id:"otherRingFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#22c55e",stopOpacity:.72}),s.jsx("stop",{offset:"100%",stopColor:"#22c55e",stopOpacity:.26})]}),s.jsxs("filter",{id:"unqualifiedRingInnerGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"4",result:"blur"}),s.jsx("feComposite",{in:"blur",in2:"SourceAlpha",operator:"in",result:"innerBlur"}),s.jsx("feFlood",{floodColor:"#ef4444",floodOpacity:"0.18",result:"color"}),s.jsx("feComposite",{in:"color",in2:"innerBlur",operator:"in",result:"glow"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"glow",operator:"over"})]}),s.jsxs("filter",{id:"otherRingInnerGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"4",result:"blur"}),s.jsx("feComposite",{in:"blur",in2:"SourceAlpha",operator:"in",result:"innerBlur"}),s.jsx("feFlood",{floodColor:"#22c55e",floodOpacity:"0.16",result:"color"}),s.jsx("feComposite",{in:"color",in2:"innerBlur",operator:"in",result:"glow"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"glow",operator:"over"})]})]}),s.jsx(Ao,{data:Ne,dataKey:"value",nameKey:"name",innerRadius:"84%",outerRadius:"92%",startAngle:90,endAngle:-270,stroke:"rgba(0,0,0,0)",paddingAngle:2,cornerRadius:12,children:Ne.map(G=>s.jsx(Db,{fill:G.key==="unqualified"?"url(#unqualifiedRingFill)":"url(#otherRingFill)",filter:G.key==="unqualified"?"url(#unqualifiedRingInnerGlow)":"url(#otherRingInnerGlow)"},G.key))}),s.jsx(Ma,{contentStyle:{background:"rgba(0,0,0,0.9)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:14,color:"rgba(255,255,255,0.9)",fontSize:12},labelStyle:{color:"rgba(255,255,255,0.6)"}})]})}),s.jsxs("div",{className:"pointer-events-none absolute inset-0 flex flex-col items-center justify-center text-center",children:[s.jsx("div",{className:"text-[11px] uppercase tracking-[0.28em] text-white/40",children:"Total leads"}),s.jsx("div",{className:"mt-2 text-3xl text-white/92",children:c?"":Wo($)})]})]})]}),s.jsxs(Vu,{className:"col-span-12 md:col-span-7 p-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[12px] text-white/45",children:"Earned"}),s.jsx("div",{className:"mt-2 text-2xl font-semibold text-white/92",children:"$0"}),s.jsx("div",{className:"mt-1 text-xs text-white/35",children:"Stripe/Whop coming soon"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[12px] text-white/45",children:"Potential"}),s.jsx("div",{className:"mt-2 text-2xl font-semibold text-white/92",children:"$0"}),s.jsx("div",{className:"mt-1 text-xs text-white/35",children:"Stripe/Whop coming soon"})]})]}),s.jsx("div",{className:"mt-6 h-[220px]",children:s.jsx(yy,{width:"100%",height:"100%",children:s.jsxs($j,{data:je,margin:{left:0,right:0,top:0,bottom:0},children:[s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"earnedFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#22c55e",stopOpacity:.25}),s.jsx("stop",{offset:"100%",stopColor:"#22c55e",stopOpacity:.02})]}),s.jsxs("linearGradient",{id:"potentialFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#60a5fa",stopOpacity:.22}),s.jsx("stop",{offset:"100%",stopColor:"#60a5fa",stopOpacity:.02})]}),s.jsxs("filter",{id:"earnedGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"3.5",floodColor:"#22c55e",floodOpacity:"0.25"}),s.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"9",floodColor:"#22c55e",floodOpacity:"0.10"})]}),s.jsxs("filter",{id:"potentialGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"3.5",floodColor:"#60a5fa",floodOpacity:"0.22"}),s.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"9",floodColor:"#60a5fa",floodOpacity:"0.10"})]})]}),s.jsx(tx,{stroke:"rgba(255,255,255,0.06)",vertical:!1}),s.jsx(Sf,{dataKey:"w",tick:{fill:"rgba(255,255,255,0.45)",fontSize:11},axisLine:!1,tickLine:!1}),s.jsx(kf,{tick:{fill:"rgba(255,255,255,0.35)",fontSize:11},axisLine:!1,tickLine:!1,width:26}),s.jsx(Ma,{contentStyle:{background:"rgba(0,0,0,0.9)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:14,color:"rgba(255,255,255,0.9)",fontSize:12},labelStyle:{color:"rgba(255,255,255,0.6)"},formatter:(G,ue)=>[`$${String(G??0)}`,String(ue||"")]}),s.jsx(Wi,{type:"monotone",dataKey:"earned",stroke:"#22c55e",strokeWidth:2,fill:"url(#earnedFill)",fillOpacity:1,dot:!1,activeDot:!1,filter:"url(#earnedGlow)",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx(Wi,{type:"monotone",dataKey:"potential",stroke:"#60a5fa",strokeWidth:2,fill:"url(#potentialFill)",fillOpacity:1,dot:!1,activeDot:!1,filter:"url(#potentialGlow)",strokeLinecap:"round",strokeLinejoin:"round"})]})})}),s.jsxs("div",{className:"mt-4 flex items-center gap-2 text-xs text-white/45",children:[s.jsx("span",{className:"inline-block h-5 w-5 rounded-md bg-white/5 border border-white/10 flex items-center justify-center",children:s.jsx("span",{className:"text-[11px]",children:""})}),s.jsx("span",{children:Ce})]})]})]})]}),s.jsxs("div",{className:"col-span-12 lg:col-span-4 space-y-6",children:[s.jsx(Vu,{className:"p-6",children:s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between gap-3",children:s.jsxs("div",{className:"text-[15px] font-semibold text-white/90",children:["Urgent Tasks",c?"":` (${Wo(R.length)})`]})}),s.jsx("div",{className:"mt-4 space-y-3",children:c||A?s.jsx("div",{className:"space-y-2",children:Array.from({length:3}).map((G,ue)=>s.jsx("div",{className:"w-full text-left rounded-2xl border border-white/10 bg-black/40 px-4 py-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx($e,{className:"h-8 w-8 rounded-2xl bg-white/[0.06]"}),s.jsx($e,{className:"h-8 w-8 rounded-full bg-white/[0.08]"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx($e,{className:"h-4 w-48 rounded-xl bg-white/[0.10]"}),s.jsx($e,{className:"h-3 w-64 rounded-xl bg-white/[0.06] mt-2"})]})]})},ue))}):R.length===0?s.jsx("div",{className:"text-sm text-white/45",children:"No urgent tasks right now"}):R.map(G=>s.jsxs("button",{type:"button",className:"group w-full text-left rounded-2xl border border-white/10 bg-black/40 hover:bg-white/[0.03] hover:border-white/15 transition-colors px-4 py-3 overflow-hidden",onClick:()=>{e(`/messages?c=${encodeURIComponent(G.conversation_id)}`)},children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(vOe,{icon:G.icon}),s.jsx("div",{className:"shrink-0",children:s.jsx(Dp,{name:G.peer_name||G.peer_username||"Lead",size:"sm",bgColor:"#2A2A2A",imageUrl:G.peer_profile_picture_url||void 0,mode:G.peer_profile_picture_url?"photo":"letter"})}),s.jsx("div",{className:"min-w-0 flex-1",children:s.jsx("div",{className:"text-[13px] font-semibold text-white/85 truncate",children:G.title})})]}),s.jsx("div",{className:"max-h-0 opacity-0 translate-y-[-2px] transition-[max-height,opacity,transform] duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] group-hover:max-h-24 group-hover:opacity-100 group-hover:translate-y-0 group-focus:max-h-24 group-focus:opacity-100 group-focus:translate-y-0",children:s.jsx("div",{className:"pt-2 text-[11px] font-light text-white/35 leading-snug",children:uOe(G)})})]},G.conversation_id))})]})}),s.jsxs(Vu,{className:"p-6",children:[s.jsx("div",{className:"text-[15px] font-semibold text-white/90",children:"Top 3 this month"}),s.jsx("div",{className:"text-xs text-white/45 mt-1",children:"Based on assigned leads and wins"}),s.jsx("div",{className:"mt-5 space-y-4",children:c?s.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((G,ue)=>s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx($e,{className:"h-8 w-8 rounded-full bg-white/[0.08]"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx($e,{className:"h-4 w-40 rounded-xl bg-white/[0.10]"}),s.jsx($e,{className:"h-3 w-24 rounded-xl bg-white/[0.06] mt-2"})]})]}),s.jsx($e,{className:"h-4 w-10 rounded-xl bg-white/[0.06]"})]},ue))}):oe.length===0?s.jsx("div",{className:"text-sm text-white/45",children:"No assignments yet"}):oe.map((G,ue)=>{var Z;const he=((Z=G.member)==null?void 0:Z.displayName)||`User ${G.userId.slice(0,6)}`;return s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx(Dp,{name:he,size:"sm",bgColor:"#2A2A2A",mode:"letter"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-[13px] font-semibold text-white/85 truncate",children:he}),s.jsx("div",{className:"mt-0.5 text-xs text-white/45",children:G.won>0?`${Wo(G.won)} won`:`${Wo(G.assigned)} assigned`})]})]}),s.jsxs("div",{className:"text-[12px] text-white/35 font-semibold",children:["#",ue+1]})]},G.userId)})})]})]})]})]})]})})}function Vu({className:e,children:t}){return s.jsx("div",{className:Pe("rounded-3xl border border-white/10 bg-black",e),children:t})}function vOe({icon:e}){const t=String(e||"").trim().toLowerCase(),r=t==="call"||t==="reschedule"?{Icon:Vd,fg:"#ef4444"}:t==="hot"?{Icon:Js,fg:"#f97316"}:t==="qualified"?{Icon:Ss,fg:"#f59e0b"}:t==="no_show"?{Icon:Tl,fg:"#f97316"}:{Icon:qD,fg:"#60a5fa"};return s.jsx("div",{className:"w-8 h-8 acq-orb flex items-center justify-center shrink-0",style:vg(r.fg),children:s.jsx(r.Icon,{className:"h-4 w-4",style:{color:r.fg},strokeWidth:2.2})})}function b_({title:e,value:t,valueSuffix:r,meta:n,className:a}){return s.jsx(Vu,{className:Pe("p-6",a),children:s.jsx("div",{className:"flex items-start justify-between gap-4",children:s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-[12px] text-white/45",children:e}),s.jsxs("div",{className:"mt-3 flex items-baseline gap-2",children:[s.jsx("div",{className:"text-3xl font-semibold text-white/92",children:t}),r?s.jsx("div",{className:"text-sm text-white/50",children:r}):null]}),n?s.jsx("div",{className:"mt-1 text-xs text-white/35",children:n}):null]})})})}function yOe(e){const t=String(e||"").trim();return t?t==="hot_lead_unreplied"?"Follow up hot lead":t==="qualified_inactive"?"Follow up qualified lead":t==="no_show_followup"?"No-show follow up":t.replace(/_/g," "):"Urgent task"}function xOe(){const{workspace:e}=on();return s.jsx(Er,{fullWidth:!0,scrollable:!1,children:s.jsx(I7,{workspaceId:(e==null?void 0:e.id)||null,mode:"chat-log"})})}function rr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ja(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function na(e,t){const r=rr(e);return isNaN(t)?ja(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function Yi(e,t){const r=rr(e);if(isNaN(t))return ja(e,NaN);if(!t)return r;const n=r.getDate(),a=ja(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const i=a.getDate();return n>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}const oE=6048e5,bOe=864e5,$7=6e4,D7=36e5;let wOe={};function _g(){return wOe}function Cs(e,t){var l,c,u,d;const r=_g(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=rr(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function ru(e){return Cs(e,{weekStartsOn:1})}function L7(e){const t=rr(e),r=t.getFullYear(),n=ja(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=ru(n),i=ja(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=ru(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Af(e){const t=rr(e);return t.setHours(0,0,0,0),t}function hx(e){const t=rr(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function hs(e,t){const r=Af(e),n=Af(t),a=+r-hx(r),i=+n-hx(n);return Math.round((a-i)/bOe)}function _Oe(e){const t=L7(e),r=ja(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),ru(r)}function Uj(e,t){const r=t*7;return na(e,r)}function SOe(e,t){return Yi(e,t*12)}function jOe(e){let t;return e.forEach(function(r){const n=rr(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function kOe(e){let t;return e.forEach(r=>{const n=rr(r);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function NOe(e){return ja(e,Date.now())}function la(e,t){const r=Af(e),n=Af(t);return+r==+n}function lE(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function COe(e){if(!lE(e)&&typeof e!="number")return!1;const t=rr(e);return!isNaN(Number(t))}function Fp(e,t){const r=rr(e),n=rr(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function EOe(e,t,r){const n=Cs(e,r),a=Cs(t,r),i=+n-hx(n),o=+a-hx(a);return Math.round((i-o)/oE)}function cE(e){const t=rr(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Sa(e){const t=rr(e);return t.setDate(1),t.setHours(0,0,0,0),t}function F7(e){const t=rr(e),r=ja(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function uE(e,t){var l,c,u,d;const r=_g(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=rr(e),i=a.getDay(),o=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function B7(e){return uE(e,{weekStartsOn:1})}const AOe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},POe=(e,t,r)=>{let n;const a=AOe[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function w_(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const TOe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},OOe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},IOe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},MOe={date:w_({formats:TOe,defaultWidth:"full"}),time:w_({formats:OOe,defaultWidth:"full"}),dateTime:w_({formats:IOe,defaultWidth:"full"})},ROe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$Oe=(e,t,r,n)=>ROe[e];function $h(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const DOe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},LOe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},FOe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},BOe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},UOe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qOe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},zOe=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},WOe={ordinalNumber:zOe,era:$h({values:DOe,defaultWidth:"wide"}),quarter:$h({values:LOe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:$h({values:FOe,defaultWidth:"wide"}),day:$h({values:BOe,defaultWidth:"wide"}),dayPeriod:$h({values:UOe,defaultWidth:"wide",formattingValues:qOe,defaultFormattingWidth:"wide"})};function Dh(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?VOe(l,f=>f.test(o)):HOe(l,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function HOe(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function VOe(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function KOe(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const GOe=/^(\d+)(th|st|nd|rd)?/i,YOe=/\d+/i,XOe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},QOe={any:[/^b/i,/^(a|c)/i]},JOe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ZOe={any:[/1/i,/2/i,/3/i,/4/i]},e5e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},t5e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},r5e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},n5e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},a5e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},i5e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},s5e={ordinalNumber:KOe({matchPattern:GOe,parsePattern:YOe,valueCallback:e=>parseInt(e,10)}),era:Dh({matchPatterns:XOe,defaultMatchWidth:"wide",parsePatterns:QOe,defaultParseWidth:"any"}),quarter:Dh({matchPatterns:JOe,defaultMatchWidth:"wide",parsePatterns:ZOe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Dh({matchPatterns:e5e,defaultMatchWidth:"wide",parsePatterns:t5e,defaultParseWidth:"any"}),day:Dh({matchPatterns:r5e,defaultMatchWidth:"wide",parsePatterns:n5e,defaultParseWidth:"any"}),dayPeriod:Dh({matchPatterns:a5e,defaultMatchWidth:"any",parsePatterns:i5e,defaultParseWidth:"any"})},U7={code:"en-US",formatDistance:POe,formatLong:MOe,formatRelative:$Oe,localize:WOe,match:s5e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function o5e(e){const t=rr(e);return hs(t,F7(t))+1}function q7(e){const t=rr(e),r=+ru(t)-+_Oe(t);return Math.round(r/oE)+1}function z7(e,t){var d,f,m,p;const r=rr(e),n=r.getFullYear(),a=_g(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(m=a.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=ja(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=Cs(o,t),c=ja(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const u=Cs(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function l5e(e,t){var l,c,u,d;const r=_g(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=z7(e,t),i=ja(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),Cs(i,t)}function W7(e,t){const r=rr(e),n=+Cs(r,t)-+l5e(r,t);return Math.round(n/oE)+1}function gr(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Ho={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return gr(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):gr(r+1,2)},d(e,t){return gr(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return gr(e.getHours()%12||12,t.length)},H(e,t){return gr(e.getHours(),t.length)},m(e,t){return gr(e.getMinutes(),t.length)},s(e,t){return gr(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return gr(a,t.length)}},$u={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},U4={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Ho.y(e,t)},Y:function(e,t,r,n){const a=z7(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return gr(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):gr(i,t.length)},R:function(e,t){const r=L7(e);return gr(r,t.length)},u:function(e,t){const r=e.getFullYear();return gr(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return gr(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return gr(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Ho.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return gr(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=W7(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):gr(a,t.length)},I:function(e,t,r){const n=q7(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):gr(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Ho.d(e,t)},D:function(e,t,r){const n=o5e(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):gr(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return gr(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return gr(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return gr(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=$u.noon:n===0?a=$u.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=$u.evening:n>=12?a=$u.afternoon:n>=4?a=$u.morning:a=$u.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Ho.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Ho.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):gr(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):gr(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ho.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Ho.s(e,t)},S:function(e,t){return Ho.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return z4(n);case"XXXX":case"XX":return dc(n);case"XXXXX":case"XXX":default:return dc(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return z4(n);case"xxxx":case"xx":return dc(n);case"xxxxx":case"xxx":default:return dc(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+q4(n,":");case"OOOO":default:return"GMT"+dc(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+q4(n,":");case"zzzz":default:return"GMT"+dc(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return gr(n,t.length)},T:function(e,t,r){const n=e.getTime();return gr(n,t.length)}};function q4(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+t+gr(i,2)}function z4(e,t){return e%60===0?(e>0?"-":"+")+gr(Math.abs(e)/60,2):dc(e,t)}function dc(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=gr(Math.trunc(n/60),2),i=gr(n%60,2);return r+a+t+i}const W4=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},H7=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},c5e=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return W4(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",W4(n,t)).replace("{{time}}",H7(a,t))},u5e={p:H7,P:c5e},d5e=/^D+$/,f5e=/^Y+$/,h5e=["D","DD","YY","YYYY"];function m5e(e){return d5e.test(e)}function p5e(e){return f5e.test(e)}function g5e(e,t,r){const n=v5e(e,t,r);if(console.warn(n),h5e.includes(e))throw new RangeError(n)}function v5e(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const y5e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,x5e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,b5e=/^'([^]*?)'?$/,w5e=/''/g,_5e=/[a-zA-Z]/;function Lt(e,t,r){var d,f,m,p,v,g,b,y;const n=_g(),a=(r==null?void 0:r.locale)??n.locale??U7,i=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(m=n.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((g=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((y=(b=n.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??0,l=rr(e);if(!COe(l))throw new RangeError("Invalid time value");let c=t.match(x5e).map(w=>{const x=w[0];if(x==="p"||x==="P"){const _=u5e[x];return _(w,a.formatLong)}return w}).join("").match(y5e).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const x=w[0];if(x==="'")return{isToken:!1,value:S5e(w)};if(U4[x])return{isToken:!0,value:w};if(x.match(_5e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:w}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(w=>{if(!w.isToken)return w.value;const x=w.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&p5e(x)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&m5e(x))&&g5e(x,t,String(e));const _=U4[x[0]];return _(l,x,a.localize,u)}).join("")}function S5e(e){const t=e.match(b5e);return t?t[1].replace(w5e,"'"):e}function j5e(e){const t=rr(e),r=t.getFullYear(),n=t.getMonth(),a=ja(e,0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function k5e(e){return Math.trunc(+rr(e)/1e3)}function N5e(e){const t=rr(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function C5e(e,t){return EOe(N5e(e),Sa(e),t)+1}function qj(e,t){const r=rr(e),n=rr(t);return r.getTime()>n.getTime()}function V7(e,t){const r=rr(e),n=rr(t);return+r<+n}function E5e(e){return+rr(e)<Date.now()}function dE(e,t){const r=rr(e),n=rr(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function A5e(e,t){const r=rr(e),n=rr(t);return r.getFullYear()===n.getFullYear()}function K7(e){return la(e,NOe(e))}function __(e,t){return na(e,-t)}function H4(e,t){const n=I5e(e);let a;if(n.date){const c=M5e(n.date,2);a=R5e(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const i=a.getTime();let o=0,l;if(n.time&&(o=$5e(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(l=D5e(n.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(i+o),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(i+o+l)}const zv={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},P5e=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,T5e=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,O5e=/^([+-])(\d{2})(?::?(\d{2}))?$/;function I5e(e){const t={},r=e.split(zv.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],zv.timeZoneDelimiter.test(t.date)&&(t.date=e.split(zv.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const a=zv.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function M5e(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function R5e(e,t){if(t===null)return new Date(NaN);const r=e.match(P5e);if(!r)return new Date(NaN);const n=!!r[4],a=Lh(r[1]),i=Lh(r[2])-1,o=Lh(r[3]),l=Lh(r[4]),c=Lh(r[5])-1;if(n)return q5e(t,l,c)?L5e(t,l,c):new Date(NaN);{const u=new Date(0);return!B5e(t,i,o)||!U5e(t,a)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(a,o)),u)}}function Lh(e){return e?parseInt(e):1}function $5e(e){const t=e.match(T5e);if(!t)return NaN;const r=S_(t[1]),n=S_(t[2]),a=S_(t[3]);return z5e(r,n,a)?r*D7+n*$7+a*1e3:NaN}function S_(e){return e&&parseFloat(e.replace(",","."))||0}function D5e(e){if(e==="Z")return 0;const t=e.match(O5e);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return W5e(n,a)?r*(n*D7+a*$7):NaN}function L5e(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const a=n.getUTCDay()||7,i=(t-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}const F5e=[31,null,31,30,31,30,31,31,30,31,30,31];function G7(e){return e%400===0||e%4===0&&e%100!==0}function B5e(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(F5e[t]||(G7(e)?29:28))}function U5e(e,t){return t>=1&&t<=(G7(e)?366:365)}function q5e(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function z5e(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function W5e(e,t){return t>=0&&t<=59}function j_(e,t){const r=rr(e),n=r.getFullYear(),a=r.getDate(),i=ja(e,0);i.setFullYear(n,t,15),i.setHours(0,0,0,0);const o=j5e(i);return r.setMonth(t,Math.min(a,o)),r}function V4(e,t){const r=rr(e);return isNaN(+r)?ja(e,NaN):(r.setFullYear(t),r)}function H5e(){return s.jsxs("div",{className:"h-full flex bg-black overflow-hidden",children:[s.jsxs("div",{className:"w-[360px] border-r-[0.5px] border-white/10 flex flex-col min-w-0",children:[s.jsxs("div",{className:"p-5 pb-4 border-b-[0.5px] border-white/8",children:[s.jsx($e,{className:"h-7 w-32 rounded-xl bg-white/10"}),s.jsx($e,{className:"h-10 w-full rounded-2xl bg-white/[0.06] mt-4"}),s.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[s.jsx($e,{className:"h-8 w-24 rounded-xl bg-white/[0.06]"}),s.jsx($e,{className:"h-8 w-24 rounded-xl bg-white/[0.06]"}),s.jsx($e,{className:"h-8 w-24 rounded-xl bg-white/[0.06]"})]})]}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx("div",{className:"py-2",children:Array.from({length:9}).map((e,t)=>s.jsxs("div",{className:"w-full px-5 py-4 border-b-[0.5px] border-white/8 flex items-start gap-3",children:[s.jsx($e,{className:"h-10 w-10 rounded-full bg-white/10"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsx($e,{className:"h-4 w-40 rounded-xl bg-white/10"}),s.jsx($e,{className:"h-3 w-12 rounded-xl bg-white/[0.06]"})]}),s.jsx($e,{className:"h-3 w-64 rounded-xl bg-white/[0.06] mt-2"}),s.jsxs("div",{className:"mt-3 flex flex-wrap gap-1.5",children:[s.jsx($e,{className:"h-6 w-24 rounded-full bg-white/[0.06]"}),s.jsx($e,{className:"h-6 w-24 rounded-full bg-white/[0.06]"}),s.jsx($e,{className:"h-6 w-20 rounded-full bg-white/[0.06]"})]})]})]},t))})})]}),s.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[s.jsxs("div",{className:"h-[88px] border-b-[0.5px] border-white/10 px-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx($e,{className:"h-10 w-10 rounded-full bg-white/10"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx($e,{className:"h-4 w-40 rounded-xl bg-white/10"}),s.jsx($e,{className:"h-3 w-28 rounded-xl bg-white/[0.06] mt-2"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($e,{className:"h-9 w-9 rounded-xl bg-white/[0.06]"}),s.jsx($e,{className:"h-9 w-9 rounded-xl bg-white/[0.06]"})]})]}),s.jsx("div",{className:"flex-1 overflow-hidden p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex justify-start",children:s.jsx($e,{className:"h-12 w-[60%] max-w-[420px] rounded-2xl bg-white/[0.06]"})}),s.jsx("div",{className:"flex justify-end",children:s.jsx($e,{className:"h-10 w-[52%] max-w-[360px] rounded-2xl bg-white/[0.08]"})}),s.jsx("div",{className:"flex justify-start",children:s.jsx($e,{className:"h-16 w-[68%] max-w-[520px] rounded-2xl bg-white/[0.06]"})}),s.jsx("div",{className:"flex justify-end",children:s.jsx($e,{className:"h-12 w-[58%] max-w-[420px] rounded-2xl bg-white/[0.08]"})}),s.jsx("div",{className:"flex justify-start",children:s.jsx($e,{className:"h-10 w-[40%] max-w-[280px] rounded-2xl bg-white/[0.06]"})})]})}),s.jsx("div",{className:"border-t-[0.5px] border-white/10 p-4",children:s.jsx($e,{className:"h-12 w-full rounded-2xl bg-white/[0.06]"})})]})]})}const Y7=h.forwardRef(({className:e,size:t="default",children:r,...n},a)=>s.jsx("button",{ref:a,className:Pe("shiny-cta",t==="sm"?"shiny-cta--sm":"shiny-cta--default",e),...n,children:s.jsx("span",{children:r})}));Y7.displayName="ShinyButton";const Pf=h.forwardRef((e,t)=>s.jsx(Y7,{ref:t,...e}));Pf.displayName="PremiumButton";const V5e="/assets/instagram-logo-BCpJgjPo.png";var vw="Popover",[X7,p3e]=zn(vw,[Fl]),Sg=Fl(),[K5e,Hl]=X7(vw),Q7=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=Sg(t),c=h.useRef(null),[u,d]=h.useState(!1),[f,m]=_s({prop:n,defaultProp:a??!1,onChange:i,caller:vw});return s.jsx(SN,{...l,children:s.jsx(K5e,{scope:t,contentId:qi(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:h.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:u,onCustomAnchorAdd:h.useCallback(()=>d(!0),[]),onCustomAnchorRemove:h.useCallback(()=>d(!1),[]),modal:o,children:r})})};Q7.displayName=vw;var J7="PopoverAnchor",G5e=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Hl(J7,r),i=Sg(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return h.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(Jp,{...i,...n,ref:t})});G5e.displayName=J7;var Z7="PopoverTrigger",e9=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Hl(Z7,r),i=Sg(r),o=Ot(t,a.triggerRef),l=s.jsx(ot.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":i9(a.open),...n,ref:o,onClick:Ve(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(Jp,{asChild:!0,...i,children:l})});e9.displayName=Z7;var fE="PopoverPortal",[Y5e,X5e]=X7(fE,{forceMount:void 0}),t9=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=Hl(fE,t);return s.jsx(Y5e,{scope:t,forceMount:r,children:s.jsx(Wn,{present:r||i.open,children:s.jsx(Df,{asChild:!0,container:a,children:n})})})};t9.displayName=fE;var Tf="PopoverContent",r9=h.forwardRef((e,t)=>{const r=X5e(Tf,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=Hl(Tf,e.__scopePopover);return s.jsx(Wn,{present:n||i.open,children:i.modal?s.jsx(J5e,{...a,ref:t}):s.jsx(Z5e,{...a,ref:t})})});r9.displayName=Tf;var Q5e=Pl("PopoverContent.RemoveScroll"),J5e=h.forwardRef((e,t)=>{const r=Hl(Tf,e.__scopePopover),n=h.useRef(null),a=Ot(t,n),i=h.useRef(!1);return h.useEffect(()=>{const o=n.current;if(o)return uw(o)},[]),s.jsx(mg,{as:Q5e,allowPinchZoom:!0,children:s.jsx(n9,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ve(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ve(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Ve(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Z5e=h.forwardRef((e,t)=>{const r=Hl(Tf,e.__scopePopover),n=h.useRef(!1),a=h.useRef(!1);return s.jsx(n9,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),n9=h.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,m=Hl(Tf,r),p=Sg(r);return lw(),s.jsx(fg,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(lu,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:s.jsx(ab,{"data-state":i9(m.open),role:"dialog",id:m.contentId,...p,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),a9="PopoverClose",eIe=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Hl(a9,r);return s.jsx(ot.button,{type:"button",...n,ref:t,onClick:Ve(e.onClick,()=>a.onOpenChange(!1))})});eIe.displayName=a9;var tIe="PopoverArrow",rIe=h.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Sg(r);return s.jsx(ib,{...a,...n,ref:t})});rIe.displayName=tIe;function i9(e){return e?"open":"closed"}var nIe=Q7,aIe=e9,iIe=t9,s9=r9;const gc=nIe,vc=aIe,il=h.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(iIe,{children:s.jsxs(s.Fragment,{children:[s.jsx("div",{"aria-hidden":"true",className:"acq-popover-backdrop fixed inset-0 z-[60] bg-black/70 backdrop-blur-[2px]"}),s.jsx(s9,{ref:a,align:t,sideOffset:r,className:Pe("z-[70] w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})]})}));il.displayName=s9.displayName;function Bp(e,[t,r]){return Math.min(r,Math.max(t,e))}function sIe(e,t){return h.useReducer((r,n)=>t[r][n]??r,e)}var hE="ScrollArea",[o9,g3e]=zn(hE),[oIe,ji]=o9(hE),l9=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=h.useState(null),[u,d]=h.useState(null),[f,m]=h.useState(null),[p,v]=h.useState(null),[g,b]=h.useState(null),[y,w]=h.useState(0),[x,_]=h.useState(0),[S,k]=h.useState(!1),[C,j]=h.useState(!1),N=Ot(t,P=>c(P)),A=lh(a);return s.jsx(oIe,{scope:r,type:n,dir:A,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:m,scrollbarX:p,onScrollbarXChange:v,scrollbarXEnabled:S,onScrollbarXEnabledChange:k,scrollbarY:g,onScrollbarYChange:b,scrollbarYEnabled:C,onScrollbarYEnabledChange:j,onCornerWidthChange:w,onCornerHeightChange:_,children:s.jsx(ot.div,{dir:A,...o,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":x+"px",...e.style}})})});l9.displayName=hE;var c9="ScrollAreaViewport",u9=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=e,o=ji(c9,r),l=h.useRef(null),c=Ot(t,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(ot.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});u9.displayName=c9;var Ts="ScrollAreaScrollbar",mE=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=ji(Ts,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return h.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?s.jsx(lIe,{...n,ref:t,forceMount:r}):a.type==="scroll"?s.jsx(cIe,{...n,ref:t,forceMount:r}):a.type==="auto"?s.jsx(d9,{...n,ref:t,forceMount:r}):a.type==="always"?s.jsx(pE,{...n,ref:t}):null});mE.displayName=Ts;var lIe=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=ji(Ts,e.__scopeScrollArea),[i,o]=h.useState(!1);return h.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(Wn,{present:r||i,children:s.jsx(d9,{"data-state":i?"visible":"hidden",...n,ref:t})})}),cIe=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=ji(Ts,e.__scopeScrollArea),i=e.orientation==="horizontal",o=xw(()=>c("SCROLL_END"),100),[l,c]=sIe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return h.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,a.scrollHideDelay,c]),h.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let f=u[d];const m=()=>{const p=u[d];f!==p&&(c("SCROLL"),o()),f=p};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[a.viewport,i,c,o]),s.jsx(Wn,{present:r||l!=="hidden",children:s.jsx(pE,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:Ve(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ve(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),d9=h.forwardRef((e,t)=>{const r=ji(Ts,e.__scopeScrollArea),{forceMount:n,...a}=e,[i,o]=h.useState(!1),l=e.orientation==="horizontal",c=xw(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return Of(r.viewport,c),Of(r.content,c),s.jsx(Wn,{present:n||i,children:s.jsx(pE,{"data-state":i?"visible":"hidden",...a,ref:t})})}),pE=h.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=ji(Ts,e.__scopeScrollArea),i=h.useRef(null),o=h.useRef(0),[l,c]=h.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=g9(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,p){return pIe(m,o.current,l,p)}return r==="horizontal"?s.jsx(uIe,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,p=K4(m,l,a.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=f(m,a.dir))}}):r==="vertical"?s.jsx(dIe,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,p=K4(m,l);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=f(m))}}):null}),uIe=h.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=ji(Ts,e.__scopeScrollArea),[o,l]=h.useState(),c=h.useRef(null),u=Ot(t,c,i.onScrollbarXChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(h9,{"data-orientation":"horizontal",...a,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":yw(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(i.viewport){const m=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),y9(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:px(o.paddingLeft),paddingEnd:px(o.paddingRight)}})}})}),dIe=h.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=ji(Ts,e.__scopeScrollArea),[o,l]=h.useState(),c=h.useRef(null),u=Ot(t,c,i.onScrollbarYChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(h9,{"data-orientation":"vertical",...a,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":yw(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(i.viewport){const m=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),y9(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:px(o.paddingTop),paddingEnd:px(o.paddingBottom)}})}})}),[fIe,f9]=o9(Ts),h9=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...m}=e,p=ji(Ts,r),[v,g]=h.useState(null),b=Ot(t,N=>g(N)),y=h.useRef(null),w=h.useRef(""),x=p.viewport,_=n.content-n.viewport,S=rn(d),k=rn(c),C=xw(f,10);function j(N){if(y.current){const A=N.clientX-y.current.left,P=N.clientY-y.current.top;u({x:A,y:P})}}return h.useEffect(()=>{const N=A=>{const P=A.target;(v==null?void 0:v.contains(P))&&S(A,_)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[x,v,_,S]),h.useEffect(k,[n,k]),Of(v,C),Of(p.content,C),s.jsx(fIe,{scope:r,scrollbar:v,hasThumb:a,onThumbChange:rn(i),onThumbPointerUp:rn(o),onThumbPositionChange:k,onThumbPointerDown:rn(l),children:s.jsx(ot.div,{...m,ref:b,style:{position:"absolute",...m.style},onPointerDown:Ve(e.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),y.current=v.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),j(N))}),onPointerMove:Ve(e.onPointerMove,j),onPointerUp:Ve(e.onPointerUp,N=>{const A=N.target;A.hasPointerCapture(N.pointerId)&&A.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=w.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})})})}),mx="ScrollAreaThumb",m9=h.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=f9(mx,e.__scopeScrollArea);return s.jsx(Wn,{present:r||a.hasThumb,children:s.jsx(hIe,{ref:t,...n})})}),hIe=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,i=ji(mx,r),o=f9(mx,r),{onThumbPositionChange:l}=o,c=Ot(t,f=>o.onThumbChange(f)),u=h.useRef(void 0),d=xw(()=>{u.current&&(u.current(),u.current=void 0)},100);return h.useEffect(()=>{const f=i.viewport;if(f){const m=()=>{if(d(),!u.current){const p=gIe(f,l);u.current=p,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[i.viewport,d,l]),s.jsx(ot.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Ve(e.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),v=f.clientX-p.left,g=f.clientY-p.top;o.onThumbPointerDown({x:v,y:g})}),onPointerUp:Ve(e.onPointerUp,o.onThumbPointerUp)})});m9.displayName=mx;var gE="ScrollAreaCorner",p9=h.forwardRef((e,t)=>{const r=ji(gE,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(mIe,{...e,ref:t}):null});p9.displayName=gE;var mIe=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=ji(gE,r),[i,o]=h.useState(0),[l,c]=h.useState(0),u=!!(i&&l);return Of(a.scrollbarX,()=>{var f;const d=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(d),c(d)}),Of(a.scrollbarY,()=>{var f;const d=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(d),o(d)}),u?s.jsx(ot.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function px(e){return e?parseInt(e,10):0}function g9(e,t){const r=e/t;return isNaN(r)?0:r}function yw(e){const t=g9(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function pIe(e,t,r,n="ltr"){const a=yw(r),i=a/2,o=t||i,l=a-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,f=n==="ltr"?[0,d]:[d*-1,0];return v9([c,u],f)(e)}function K4(e,t,r="ltr"){const n=yw(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],u=Bp(e,c);return v9([0,o],[0,l])(u)}function v9(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function y9(e,t){return e>0&&e<t}var gIe=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function xw(e,t){const r=rn(e),n=h.useRef(0);return h.useEffect(()=>()=>window.clearTimeout(n.current),[]),h.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Of(e,t){const r=rn(t);sn(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var x9=l9,vIe=u9,yIe=p9;const b9=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(x9,{ref:n,className:Pe("relative overflow-hidden",e),...r,children:[s.jsx(vIe,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(w9,{}),s.jsx(yIe,{})]}));b9.displayName=x9.displayName;const w9=h.forwardRef(({className:e,orientation:t="vertical",...r},n)=>s.jsx(mE,{ref:n,orientation:t,className:Pe("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l-[0.5px] border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t-[0.5px] border-t-transparent p-[1px]",e),...r,children:s.jsx(m9,{className:"relative flex-1 rounded-full bg-border"})}));w9.displayName=mE.displayName;function vE(e){const t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var bw="Switch",[xIe,v3e]=zn(bw),[bIe,wIe]=xIe(bw),_9=h.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[m,p]=h.useState(null),v=Ot(t,x=>p(x)),g=h.useRef(!1),b=m?d||!!m.closest("form"):!0,[y,w]=_s({prop:a,defaultProp:i??!1,onChange:u,caller:bw});return s.jsxs(bIe,{scope:r,checked:y,disabled:l,children:[s.jsx(ot.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":N9(y),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:v,onClick:Ve(e.onClick,x=>{w(_=>!_),b&&(g.current=x.isPropagationStopped(),g.current||x.stopPropagation())})}),b&&s.jsx(k9,{control:m,bubbles:!g.current,name:n,value:c,checked:y,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});_9.displayName=bw;var S9="SwitchThumb",j9=h.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=wIe(S9,r);return s.jsx(ot.span,{"data-state":N9(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});j9.displayName=S9;var _Ie="SwitchBubbleInput",k9=h.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=h.useRef(null),l=Ot(o,i),c=vE(r),u=bN(t);return h.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&p){const v=new Event("click",{bubbles:n});p.call(d,r),d.dispatchEvent(v)}},[c,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});k9.displayName=_Ie;function N9(e){return e?"checked":"unchecked"}var C9=_9,SIe=j9;const jg=h.forwardRef(({className:e,...t},r)=>s.jsx(C9,{className:Pe("peer inline-flex h-7 w-12 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-emerald-500 data-[state=unchecked]:bg-muted","shadow-[inset_0_2px_4px_rgba(0,0,0,0.3),inset_0_-1px_2px_rgba(255,255,255,0.1)]",e),...t,ref:r,children:s.jsx(SIe,{className:Pe("pointer-events-none block h-5 w-5 rounded-full bg-white ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-1","shadow-[0_2px_4px_rgba(0,0,0,0.3),inset_0_1px_1px_rgba(255,255,255,0.8)]")})}));jg.displayName=C9.displayName;const jIe=1e4,kIe=2500,NIe=2e3,CIe={hot:{name:"Hot Lead",color:"#F97316",icon:"flame",prompt:"High-intent lead. Asking for pricing, timeline, booking, or immediate next steps."},warm:{name:"Warm Lead",color:"#FACC15",icon:"sun",prompt:"Interested lead. Engaged in conversation, but not yet asking for immediate commitment."},cold:{name:"Cold Lead",color:"#60A5FA",icon:"snowflake",prompt:"Low-intent lead. Non-committal responses, low engagement, or no clear buying signals yet."}},ai=e=>String(e||"").trim().toLowerCase(),Ln=(e,t)=>{const r=ai(e);return t==="hot"?r==="hot lead"||r==="hot":t==="warm"?r==="warm lead"||r==="warm":r==="cold lead"||r==="cold"},E9=[{value:"tag",icon:fo},{value:"star",icon:Ss},{value:"flame",icon:Js},{value:"sun",icon:ml},{value:"snowflake",icon:hl},{value:"briefcase",icon:Lx},{value:"message-circle",icon:Hc},{value:"mail",icon:BD},{value:"phone",icon:dG},{value:"phone-call",icon:Vd},{value:"calendar",icon:Fx},{value:"clock",icon:OD},{value:"target",icon:rN},{value:"zap",icon:sN},{value:"lightbulb",icon:nG},{value:"rocket",icon:mG},{value:"gem",icon:JK},{value:"dollar-sign",icon:Jk},{value:"coins",icon:BK},{value:"credit-card",icon:qK},{value:"wallet",icon:TG},{value:"shopping-bag",icon:xG},{value:"store",icon:wG},{value:"badge-check",icon:jD},{value:"check-circle-2",icon:Bx},{value:"x-circle",icon:Wc},{value:"shield-check",icon:GD},{value:"shield-alert",icon:KD},{value:"bell",icon:ND},{value:"bell-ring",icon:AK},{value:"thumbs-up",icon:nN},{value:"heart",icon:eN},{value:"sparkles",icon:QD},{value:"trophy",icon:Dm},{value:"user",icon:aN},{value:"users",icon:iN},{value:"user-check",icon:CG},{value:"user-round-check",icon:e3},{value:"user-round-x",icon:Tl},{value:"user-plus",icon:Lm},{value:"handshake",icon:DD},{value:"building-2",icon:ED},{value:"globe",icon:Zk},{value:"map-pin",icon:tN},{value:"camera",icon:DS},{value:"video",icon:r3},{value:"mic",icon:zD},{value:"book-open",icon:PK},{value:"notebook-pen",icon:oG},{value:"file-text",icon:Ux},{value:"clipboard-list",icon:TD},{value:"bookmark",icon:CD},{value:"bookmark-check",icon:TK},{value:"paperclip",icon:WD},{value:"link",icon:qx},{value:"megaphone",icon:UD},{value:"send",icon:Wx},{value:"circle-help",icon:PD}],EIe=new Map(E9.map(e=>[e.value,e.icon]));E9.map(e=>e.value);const Wv=["new_lead","in_contact","qualified","unqualified","call_booked","won","no_show"],Fh={new_lead:{name:"New lead",color:"#ec4899",icon:"user-plus",prompt:"Brand new inbound lead that has not been worked yet."},in_contact:{name:"In contact",color:"#6366f1",icon:"message-circle",prompt:"You have started a conversation with this lead."},qualified:{name:"Qualified",color:"#f59e0b",icon:"star",prompt:"Lead is a fit and has buying intent."},unqualified:{name:"Unqualified",color:"#ef4444",icon:"x-circle",prompt:"Lead is not a fit or has been disqualified."},call_booked:{name:"Call booked",color:"#9ca3af",icon:"phone-call",prompt:"A call has been booked with this lead."},won:{name:"Won",color:"#10b981",icon:"trophy",prompt:"Lead converted successfully."},no_show:{name:"No show",color:"#f97316",icon:"user-round-x",prompt:"Lead did not show up to the scheduled call."}};function Us(e){const t=ai(e);return t?t==="new lead"||t==="new"?"new_lead":t==="in contact"||t==="contacted"?"in_contact":t==="qualified"?"qualified":t==="unqualified"||t==="disqualified"?"unqualified":t==="call booked"||t==="booked call"||t==="call"?"call_booked":t==="won"||t==="closed won"?"won":t==="no show"||t==="noshow"?"no_show":null:null}function AIe(e,t){const r=ai(e);if(r==="star")return Ss;if(r==="message")return Hc;if(r==="briefcase")return Lx;if(r==="dollar")return Jk;if(r==="zap")return sN;const n=ai(t);return n==="priority"?Ss:n==="qualified"?Bx:n==="disqualified"?Wc:n==="spam"?kD:fo}function G4(e,t=.22){const r=String(e||"").trim();if(!r)return`rgba(255, 255, 255, ${t})`;if(/^#[0-9a-f]{3}$/i.test(r)){const n=r.slice(1).split("").map(l=>l+l).join(""),a=parseInt(n.slice(0,2),16),i=parseInt(n.slice(2,4),16),o=parseInt(n.slice(4,6),16);return`rgba(${a}, ${i}, ${o}, ${t})`}if(/^#[0-9a-f]{6}$/i.test(r)){const n=r.slice(1),a=parseInt(n.slice(0,2),16),i=parseInt(n.slice(2,4),16),o=parseInt(n.slice(4,6),16);return`rgba(${a}, ${i}, ${o}, ${t})`}return r}function Vo(e){const{iconName:t,tagName:r,color:n,className:a}=e,i=ai(t);if(Ln(String(r||""),"hot"))return s.jsx(Js,{className:Pe("fill-current",a),style:{color:n}});if(Ln(String(r||""),"warm"))return s.jsx(ml,{className:Pe("fill-current",a),style:{color:n}});if(Ln(String(r||""),"cold"))return s.jsx(hl,{className:Pe("fill-current",a),style:{color:n}});const o=EIe.get(i);if(o)return s.jsx(o,{className:a,style:{color:n}});const l=AIe(t,r);return s.jsx(l,{className:a,style:{color:n}})}function A9(e){if(!e)return"";const t=Date.now()-e.getTime();if(!Number.isFinite(t))return"";const r=Math.floor(t/1e3);if(r<0)return"";if(r<60)return`${Math.max(1,r)}s`;const n=Math.floor(r/60);if(n<60)return`${n}m`;const a=Math.floor(n/60);if(a<24)return`${a}h`;const i=Math.floor(a/24);if(i<7)return`${i}d`;const o=Math.floor(i/7);if(o<5)return`${o}w`;const l=Math.floor(i/30);if(l<12)return`${l}mo`;const c=Math.floor(i/365);return`${Math.max(1,c)}y`}function PIe(e){const t=A9(e);return t?t==="now"?"now":`${t} ago`:""}function Bh(e){const t=e.peerName?String(e.peerName).trim():"",r=e.peerUsername?String(e.peerUsername).trim():"";return t&&!/^\d+$/.test(t)?t:r&&!/^\d+$/.test(r)?r:"Instagram User"}function Hv(e,t){var f,m,p,v,g,b,y,w,x,_;if(!e)return null;const r=(e==null?void 0:e.direction)==="inbound"||(e==null?void 0:e.direction)==="outbound"?e.direction:null;if(r)return r;const n=new Set,a=(t==null?void 0:t.instagramAccountId)!=null?String(t.instagramAccountId).trim():"";a&&n.add(a);for(const S of(t==null?void 0:t.selfIds)||[]){const k=S!=null?String(S).trim():"";k&&n.add(k)}const i=(t==null?void 0:t.peerId)!=null?String(t.peerId).trim():"";if(n.size===0&&!i)return null;const o=(e==null?void 0:e.sender_id)!=null?String(e.sender_id).trim():"",l=(e==null?void 0:e.recipient_id)!=null?String(e.recipient_id).trim():"";if(o&&n.has(o))return"outbound";if(l&&n.has(l)||i&&o&&o===i)return"inbound";if(i&&l&&l===i)return"outbound";const c=((m=(f=e==null?void 0:e.raw_payload)==null?void 0:f.from)==null?void 0:m.id)!=null?String(e.raw_payload.from.id).trim():((v=(p=e==null?void 0:e.raw_payload)==null?void 0:p.sender)==null?void 0:v.id)!=null?String(e.raw_payload.sender.id).trim():"",u=((b=(g=e==null?void 0:e.raw_payload)==null?void 0:g.recipient)==null?void 0:b.id)!=null?String(e.raw_payload.recipient.id).trim():((w=(y=e==null?void 0:e.raw_payload)==null?void 0:y.to)==null?void 0:w.id)!=null?String(e.raw_payload.to.id).trim():"";if(c&&n.has(c))return"outbound";if(u&&n.has(u)||i&&c&&c===i)return"inbound";if(i&&u&&u===i)return"outbound";const d=Array.isArray((_=(x=e==null?void 0:e.raw_payload)==null?void 0:x.to)==null?void 0:_.data)?e.raw_payload.to.data.map(S=>(S==null?void 0:S.id)!=null?String(S.id).trim():"").filter(Boolean):[];return d.some(S=>n.has(S))?"inbound":i&&d.includes(i)&&c?"outbound":null}function Vv(e){var o,l,c,u,d,f,m,p;if(!e)return!1;if(((e==null?void 0:e.message_id)!=null?String(e.message_id).trim():"")||(((o=e==null?void 0:e.raw_payload)==null?void 0:o.sent_via)!=null?String(e.raw_payload.sent_via):"")==="api"||(((l=e==null?void 0:e.raw_payload)==null?void 0:l.id)!=null?String(e.raw_payload.id).trim():"")||(((u=(c=e==null?void 0:e.raw_payload)==null?void 0:c.message)==null?void 0:u.mid)!=null?String(e.raw_payload.message.mid).trim():""))return!0;if((e==null?void 0:e.direction)==="inbound"||(e==null?void 0:e.direction)==="outbound"?e.direction:null){const v=(e==null?void 0:e.message_text)!=null?String(e.message_text).trim():"",g=((f=(d=e==null?void 0:e.raw_payload)==null?void 0:d.message)==null?void 0:f.text)!=null?String(e.raw_payload.message.text).trim():((m=e==null?void 0:e.raw_payload)==null?void 0:m.text)!=null?String(e.raw_payload.text).trim():"",b=Array.isArray((p=e==null?void 0:e.raw_payload)==null?void 0:p.stored_attachments)&&e.raw_payload.stored_attachments.length>0,y=!!(ws(e==null?void 0:e.message_timestamp)||ws(e==null?void 0:e.created_at));if(v||g||b||y)return!0}return!1}function TIe(e,t){var c;if(!e||!(t!=null&&t.conversationId))return!1;const r=((c=e==null?void 0:e.raw_payload)==null?void 0:c.conversation_key)!=null?String(e.raw_payload.conversation_key):null;if(r&&r===t.conversationId)return!0;const n=(e==null?void 0:e.instagram_account_id)!=null?String(e.instagram_account_id):null;if(n&&t.instagramAccountId&&n!==String(t.instagramAccountId))return!1;const a=t.peerId?String(t.peerId):"",i=(e==null?void 0:e.instagram_user_id)!=null?String(e.instagram_user_id):"";if(a&&i&&i===a)return!0;const o=(e==null?void 0:e.sender_id)!=null?String(e.sender_id):"",l=(e==null?void 0:e.recipient_id)!=null?String(e.recipient_id):"";return!!(a&&(o===a||l===a))}function Y4(e){const{src:t,label:r,size:n="sm"}=e,[a,i]=h.useState(!1),o=n==="lg"?"w-28 h-28":"w-11 h-11",l=n==="lg"?"w-20 h-20":"w-8 h-8";return!!t&&!a?s.jsx("div",{className:`${o} acq-orb flex-shrink-0`,children:s.jsx("img",{src:String(t),alt:r||"avatar",className:"h-full w-full object-cover",loading:"lazy",onError:()=>i(!0)})}):s.jsx("div",{className:`${o} acq-orb flex items-center justify-center flex-shrink-0`,children:s.jsxs("svg",{viewBox:"0 0 64 64",className:l,"aria-hidden":"true",children:[s.jsx("circle",{cx:"32",cy:"24",r:"11",fill:"rgba(255,255,255,0.18)"}),s.jsx("path",{d:"M10 58c2.4-14.3 12.3-21 22-21s19.6 6.7 22 21",fill:"rgba(255,255,255,0.18)"})]})})}function OIe(e){const{src:t}=e,[r,n]=h.useState(!1);return!!t&&!r?s.jsx("div",{className:"w-7 h-7 acq-orb flex-shrink-0",children:s.jsx("img",{src:String(t),alt:"avatar",className:"h-full w-full object-cover",loading:"lazy",onError:()=>n(!0)})}):s.jsx("div",{className:"w-7 h-7 acq-orb flex items-center justify-center flex-shrink-0",children:s.jsxs("svg",{viewBox:"0 0 64 64",className:"w-5 h-5","aria-hidden":"true",children:[s.jsx("circle",{cx:"32",cy:"24",r:"11",fill:"rgba(255,255,255,0.18)"}),s.jsx("path",{d:"M10 58c2.4-14.3 12.3-21 22-21s19.6 6.7 22 21",fill:"rgba(255,255,255,0.18)"})]})})}function IIe(e,t){const r=/((https?:\/\/|www\.)[^\s<]+[^\s<\.)\],:;"']?)/gi,n=[];let a=0;for(const o of e.matchAll(r)){const l=o[0],c=o.index??-1;if(c<0)continue;c>a&&n.push(e.slice(a,c));const u=l.toLowerCase().startsWith("http")?l:`https://${l}`;n.push({url:l,href:u}),a=c+l.length}if(a<e.length&&n.push(e.slice(a)),n.length===0)return e;const i=t.theme==="outbound"?"underline decoration-black/30 hover:decoration-black/60":"underline decoration-white/30 hover:decoration-white/60";return s.jsx(s.Fragment,{children:n.map((o,l)=>typeof o=="string"?s.jsx("span",{children:o},l):s.jsx("a",{href:o.href,target:"_blank",rel:"noreferrer",className:i,children:o.url},l))})}function P9(e){if(!e)return null;const t=yE(String(e)).toLowerCase();return t.includes("/reel/")?"reel":t.includes("/stories/")?"story":t.includes("/p/")||t.includes("/tv/")?"post":null}function T9(e,t){const r=e!=null?String(e).toLowerCase():"";if(r.includes("reel"))return"reel";if(r.includes("story"))return"story";if(r.includes("post"))return"post";const n=P9(t);return n||(r==="share"?"post":null)}function MIe(e){var r,n,a,i,o,l,c;const t=[(r=e==null?void 0:e.payload)==null?void 0:r.url,(n=e==null?void 0:e.payload)==null?void 0:n.link,(a=e==null?void 0:e.payload)==null?void 0:a.href,(i=e==null?void 0:e.payload)==null?void 0:i.permalink_url,(o=e==null?void 0:e.payload)==null?void 0:o.permalink,(l=e==null?void 0:e.image_data)==null?void 0:l.url,(c=e==null?void 0:e.video_data)==null?void 0:c.url,e==null?void 0:e.file_url,e==null?void 0:e.url,e==null?void 0:e.link];for(const u of t)if(typeof u=="string"&&/^https?:\/\//i.test(u.trim()))return yE(u.trim());return null}function yE(e){try{const t=new URL(e),r=t.hostname.toLowerCase();if(r==="l.instagram.com"||r==="l.facebook.com"){const n=t.searchParams.get("u");if(n){const a=decodeURIComponent(n);if(/^https?:\/\//i.test(a))return a}}}catch{}return e}function RIe(e){return e?Array.isArray(e)?e:Array.isArray(e==null?void 0:e.data)?e.data:[e]:[]}function O9(e){var a;const t=((a=e==null?void 0:e.message)==null?void 0:a.attachments)??(e==null?void 0:e.attachments)??null,r=RIe(t),n=[];for(const i of r){const o=(i==null?void 0:i.type)!=null?String(i.type):null,l=MIe(i),c=T9(o,l);if(!l&&c){n.push({type:c,share_kind:c,is_share:!0,source_url:null,public_url:null});continue}l&&(c?n.push({type:c,share_kind:c,is_share:!0,source_url:l,public_url:l}):n.push({type:o,source_url:l,public_url:null}))}if(n.length===0&&e){const i=$Ie(e),o=LIe(i);if(o){const l=P9(o);l&&n.push({type:l,share_kind:l,is_share:!0,source_url:o,public_url:o})}}return n}function $Ie(e){const t=[],r=new Set,n=(a,i)=>{if(!(t.length>=30)&&!(i>5)&&a){if(typeof a=="string"){const o=a.trim();/^https?:\/\//i.test(o)&&t.push(yE(o));return}if(typeof a=="object"&&!r.has(a)){if(r.add(a),Array.isArray(a)){for(const o of a)n(o,i+1);return}for(const o of Object.keys(a))if(n(a[o],i+1),t.length>=30)return}}};return n(e,0),t}function DIe(e){const t=e.toLowerCase();return t.includes("/reel/")?100:t.includes("/stories/")?90:t.includes("/p/")||t.includes("/tv/")?80:t.includes("instagram.com")?60:t.includes("fb.watch")?40:10}function LIe(e){let t=null,r=0;for(const n of Array.isArray(e)?e:[]){if(!n||typeof n!="string")continue;const a=DIe(n);a>r&&(r=a,t=n)}return t}function xE(e){const t=e.trim().toLowerCase();return t==="[attachment]"||t==="[reel]"||t==="[post]"||t==="[story]"}function ws(e){if(e==null)return 0;if(e instanceof Date){const i=e.getTime();return Number.isFinite(i)?i:0}if(typeof e=="number")return Number.isFinite(e)?e<1e12?Math.round(e*1e3):Math.round(e):0;const t=String(e).trim();if(!t)return 0;if(/^\d{10,13}(\.\d+)?$/.test(t)){const i=Number(t);if(!Number.isFinite(i))return 0;const l=t.split(".")[0].length>=13?i:i*1e3,u=new Date(l).getTime();return Number.isFinite(u)?u:0}const r=t.replace(/([+-]\d{2})(\d{2})$/,"$1:$2"),n=Date.parse(r);if(Number.isFinite(n))return n;const a=Date.parse(t);return Number.isFinite(a)?a:0}function Kv(e){var a,i;const t=ws(e==null?void 0:e.message_timestamp),r=ws(((a=e==null?void 0:e.raw_payload)==null?void 0:a.created_time)??((i=e==null?void 0:e.raw_payload)==null?void 0:i.timestamp)),n=ws(e==null?void 0:e.created_at);return r&&(t===0||t<11045376e5)&&r>t?r:t||r||n||0}function Qh(e,t){const r=e?String(e):"",n=t?String(t):"";if(!r&&!n)return null;if(!r)return n||null;if(!n)return r||null;const a=ws(r),i=ws(n);return a&&i?i>=a?n:r:i?n:r}function FIe(e){const t={},r=new Set;for(const n of Array.isArray(e)?e:[]){const a=n!=null&&n.conversation_id?String(n.conversation_id):null,i=n!=null&&n.last_read_at?String(n.last_read_at):null;if(!a)continue;r.add(a);const o=Qh(t[a],i);o&&(t[a]=o)}return{map:t,conversationIds:r}}function k_(e){var d,f,m;const t=(d=e==null?void 0:e.raw_payload)==null?void 0:d.message,n=(typeof t=="string"?t:t&&typeof t=="object"&&(t==null?void 0:t.text)!=null?String(t.text):"")||(((f=e==null?void 0:e.raw_payload)==null?void 0:f.text)!=null?String(e.raw_payload.text):""),i=((e==null?void 0:e.message_text)!=null?String(e.message_text):n).trim(),o=Array.isArray((m=e==null?void 0:e.raw_payload)==null?void 0:m.stored_attachments)?e.raw_payload.stored_attachments:[],l=o.length===0?O9(e==null?void 0:e.raw_payload):[],c=o.length>0?o:l,u=I9(c);return i&&!(xE(i)&&c.length>0)?i:u||"Content not available"}function N_(e,t){const r=String(e||"").trim();if(!r)return t!=null&&t.allowEmpty?"":"Content not available";const n=r.toLowerCase();return n==="notification"?"Content not available":n==="[attachment]"?"Attachment":xE(r)?"Content not available":r}function I9(e){for(const t of Array.isArray(e)?e:[]){const r=(t==null?void 0:t.public_url)||(t==null?void 0:t.source_url)||null,n=typeof r=="string"&&String(r).trim().length>0,a=t!=null&&t.share_kind?String(t.share_kind).toLowerCase():null;if(a==="reel"||a==="post"||a==="story"){if(n)return`See ${a}`;continue}const i=t!=null&&t.type?String(t.type).toLowerCase():"";if(i==="reel"||i==="post"||i==="story"){if(n)return`See ${i}`;continue}const o=t!=null&&t.content_type?String(t.content_type).toLowerCase():"";if(i.includes("image")||o.startsWith("image/"))return"Photo";if(i.includes("video")||o.startsWith("video/"))return"Video";if(i.includes("audio")||o.startsWith("audio/"))return"Audio";if(i)return"Attachment"}return null}function BIe(e){const t=e.theme,r=t==="outbound"?"text-black/65":"text-white/65",n=t==="outbound"?"border-black/15 text-black/80 hover:bg-black/[0.03]":"border-white/15 text-white/80 hover:bg-white/[0.03]";return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:`text-xs leading-relaxed ${r}`,children:"Content not available."}),s.jsx("a",{href:"https://www.instagram.com/direct/inbox/",target:"_blank",rel:"noreferrer",className:`inline-flex h-7 items-center px-2 rounded-lg text-[11px] border ${n}`,children:"See on Instagram"})]})}function UIe(e){const t=String(e||"").trim();if(!t)return!1;let r=t.replace(/[0-9#*]\uFE0F?\u20E3/gu,"");return r=r.replace(new RegExp("\\p{Extended_Pictographic}","gu"),""),r=r.replace(/[\u{1F1E6}-\u{1F1FF}]/gu,""),r=r.replace(/[\u200D\uFE0E\uFE0F]/gu,""),r=r.replace(/[\u{1F3FB}-\u{1F3FF}]/gu,""),r=r.replace(/\s+/g,""),r.length===0}function X4(){var nA,aA,iA;const e=Xt(),{user:t}=Kt(),{workspace:r,members:n,userRole:a}=on(),[i,o]=Vf(),[l,c]=h.useState(!1),[u,d]=h.useState(null),[f,m]=h.useState(!0),[p,v]=h.useState(!1),[g,b]=h.useState(!1),[y,w]=h.useState(!0),[x,_]=h.useState([]),[S,k]=h.useState({}),[C,j]=h.useState([]),[N,A]=h.useState({}),[P,T]=h.useState([]),[L,U]=h.useState(!1),[D,H]=h.useState(!1),[B,M]=h.useState(!1),[$,re]=h.useState(null),[ie,q]=h.useState("summary"),[K,ne]=h.useState({}),[ae,_e]=h.useState(!1),[pe,ye]=h.useState(""),[ce,me]=h.useState(!1),[Q,te]=h.useState(null),[Ne,je]=h.useState([]),[J,oe]=h.useState(!1),[Ce,R]=h.useState(null),[Y,Se]=h.useState(null),Re=h.useRef(!1),de=h.useRef(!1),G=h.useRef(null),[ue,he]=h.useState("all"),[Z,ge]=h.useState(""),[Ie,Ee]=h.useState(!1),[We,Oe]=h.useState("all"),[Fe,rt]=h.useState("all"),[nt,Gt]=h.useState([]),[ht,dt]=h.useState([]),[gt,It]=h.useState("exclude"),[Qt,Nn]=h.useState("include"),[Br,nr]=h.useState(!1);h.useState("__none__");const[nn,ct]=h.useState(!1),[xe,et]=h.useState(null),[Wt,Jt]=h.useState(""),[ur,mr]=h.useState("tag"),[Ur,ke]=h.useState("#3b82f6"),[Je,wt]=h.useState(!1),[_t,Os]=h.useState(null),[Is,Ms]=h.useState(""),[pr,we]=h.useState(null),[qe,at]=h.useState(null),[$t,Pt]=h.useState(!1),[bt,xr]=h.useState(!1),[Gr,Vn]=h.useState(!1),[ir,fr]=h.useState(null),[Mt,Qa]=h.useState(null),[Rs,Ag]=h.useState(!1),[Pg,Tg]=h.useState(null),pu=h.useRef(null),Og=h.useRef(null),DE=h.useRef(null),[LE,FE]=h.useState(250),gu=h.useRef(!0),Tw=h.useRef(null),Gl=h.useRef(""),BE=h.useRef(0),$z=h.useRef({}),UE=h.useRef(null),qE=h.useRef(0),Ow=h.useRef(!1),Iw=h.useRef(!1),Mw=h.useRef(!1),Rw=h.useRef(!1),fh=h.useRef(Date.now()),$w=h.useRef(null),Lo=h.useRef({}),es=h.useCallback((E,O,F=8e3)=>{const I=Date.now(),se=Lo.current[E];Lo.current={...Lo.current,[E]:{...se||{},...O,__expiresAt:I+F}}},[]),$s=h.useCallback(E=>{if(!Lo.current[E])return;const O={...Lo.current};delete O[E],Lo.current=O},[]),zE=h.useCallback(E=>{const O=Lo.current,F=O?Object.keys(O):[];if(F.length===0)return E;const I=Date.now();let se=!1;const le=E.map(W=>{const ve=O[W.conversationId];if(!ve)return W;if(ve.__expiresAt&&ve.__expiresAt<I)return se=!0,W;se=!0;const{__expiresAt:X,...Te}=ve;return{...W,...Te}});if(se){const W={};for(const ve of F){const X=O[ve];X&&(X.__expiresAt&&X.__expiresAt<I||(W[ve]=X))}Lo.current=W}return le},[]),Ig=h.useCallback(async E=>{if(!(r!=null&&r.id)||!l)return null;const{data:O,error:F}=await z.from("instagram_thread_reads").select("conversation_id,last_read_at").eq("workspace_id",r.id);if(F)return console.warn("Load thread reads error:",F),null;const I=FIe(Array.isArray(O)?O:[]);return(E==null?void 0:E.applyToState)!==!1&&et(se=>{if(se===null)return I.map;const le=Object.keys(se),W=Object.keys(I.map);if(le.length!==W.length)return I.map;for(const ve of W)if(se[ve]!==I.map[ve])return I.map;return se}),I},[r==null?void 0:r.id,l]),Mg=h.useCallback(async E=>{var O,F;if(!(!(r!=null&&r.id)||!(t!=null&&t.id)||!l)&&!Rw.current){$w.current!==r.id&&($w.current=r.id,fh.current=Date.now()),Rw.current=!0;try{const I=fe=>{if(!fe)return null;const mt=new Date(String(fe));return Number.isFinite(mt.getTime())?mt:null},se=E!=null&&E.forceFull?new Date(Date.now()-864e5).toISOString():new Date(fh.current).toISOString(),le="conversation_id,instagram_account_id,instagram_user_id,peer_username,peer_name,peer_profile_picture_url,priority,is_spam,hidden_from_setters,shared_with_setters,assigned_user_id,lead_status,priority_snoozed_until,priority_followed_up_at,summary_text,summary_updated_at,shared_last_read_at,last_inbound_at,last_outbound_at,last_message_id,last_message_text,last_message_direction,last_message_at,ai_phase_updated_at,ai_phase_confidence,ai_temperature_confidence,ai_phase_reason,ai_phase_mode,ai_phase_last_run_source,updated_at",W="conversation_id,instagram_account_id,instagram_user_id,peer_username,peer_name,peer_profile_picture_url,priority,hidden_from_setters,shared_with_setters,assigned_user_id,lead_status,priority_snoozed_until,priority_followed_up_at,summary_text,summary_updated_at,shared_last_read_at,last_inbound_at,last_outbound_at,last_message_id,last_message_text,last_message_direction,last_message_at,ai_phase_updated_at,ai_phase_confidence,ai_temperature_confidence,ai_phase_reason,ai_phase_mode,ai_phase_last_run_source,updated_at",ve=async fe=>await z.from("instagram_threads").select(fe).eq("workspace_id",r.id).gt("updated_at",se).order("updated_at",{ascending:!1,nullsFirst:!1}).limit(250);let X=await ve(y?le:W);if(X.error&&y){const fe=`${String(((O=X.error)==null?void 0:O.message)||"")} ${String(((F=X.error)==null?void 0:F.details)||"")}`.toLowerCase();(fe.includes("is_spam")||fe.includes("does not exist")||fe.includes("column"))&&(w(!1),X=await ve(W))}if(X.error)return;const Te=Array.isArray(X.data)?X.data:[];if(Te.length===0)return;let Me=fh.current;const Be=[];for(const fe of Te){const mt=fe!=null&&fe.updated_at?String(fe.updated_at):"";if(mt){const pt=Date.parse(mt);Number.isFinite(pt)&&pt>Me&&(Me=pt)}const Dt=String((fe==null?void 0:fe.conversation_id)||""),lt=String((fe==null?void 0:fe.instagram_account_id)||""),St=fe!=null&&fe.instagram_user_id?String(fe.instagram_user_id):"";if(!Dt||!lt)continue;const kt=`${lt}:`,Ge=Dt.startsWith(kt)?Dt.slice(kt.length).trim():"",Ae=(!St||St==="unknown"||St===lt||St.startsWith("unknown:"))&&Ge?Ge:St;if(!Ae||Ae===lt)continue;const tt=String((fe==null?void 0:fe.lead_status)||"open"),Qe=tt==="qualified"||tt==="disqualified"||tt==="removed"?tt:"open",ut={conversationId:Dt,instagramAccountId:lt,peerId:Ae,peerUsername:fe!=null&&fe.peer_username?String(fe.peer_username):null,peerName:fe!=null&&fe.peer_name?String(fe.peer_name):null,peerPicture:fe!=null&&fe.peer_profile_picture_url?String(fe.peer_profile_picture_url):null,priority:!!(fe!=null&&fe.priority),isSpam:!!(fe!=null&&fe.is_spam),hiddenFromSetters:!!(fe!=null&&fe.hidden_from_setters),sharedWithSetters:!!(fe!=null&&fe.shared_with_setters),leadStatus:Qe,assignedUserId:fe!=null&&fe.assigned_user_id?String(fe.assigned_user_id):null,prioritySnoozedUntil:I(fe==null?void 0:fe.priority_snoozed_until),priorityFollowedUpAt:I(fe==null?void 0:fe.priority_followed_up_at),summaryText:fe!=null&&fe.summary_text?String(fe.summary_text):null,summaryUpdatedAt:I(fe==null?void 0:fe.summary_updated_at),sharedLastReadAt:I(fe==null?void 0:fe.shared_last_read_at),lastInboundAt:I(fe==null?void 0:fe.last_inbound_at),lastOutboundAt:I(fe==null?void 0:fe.last_outbound_at),lastMessageId:fe!=null&&fe.last_message_id?String(fe.last_message_id):null,lastText:fe!=null&&fe.last_message_text?String(fe.last_message_text):null,lastDirection:(fe==null?void 0:fe.last_message_direction)==="inbound"||(fe==null?void 0:fe.last_message_direction)==="outbound"?fe.last_message_direction:null,lastAt:I(fe==null?void 0:fe.last_message_at),aiPhaseUpdatedAt:I(fe==null?void 0:fe.ai_phase_updated_at),aiPhaseConfidence:(fe==null?void 0:fe.ai_phase_confidence)!=null&&Number.isFinite(Number(fe.ai_phase_confidence))?Number(fe.ai_phase_confidence):null,aiTemperatureConfidence:(fe==null?void 0:fe.ai_temperature_confidence)!=null&&Number.isFinite(Number(fe.ai_temperature_confidence))?Number(fe.ai_temperature_confidence):null,aiPhaseReason:fe!=null&&fe.ai_phase_reason?String(fe.ai_phase_reason):null,aiPhaseMode:(fe==null?void 0:fe.ai_phase_mode)==="shadow"||(fe==null?void 0:fe.ai_phase_mode)==="enforce"?fe.ai_phase_mode:null,aiPhaseLastRunSource:(fe==null?void 0:fe.ai_phase_last_run_source)==="incremental"||(fe==null?void 0:fe.ai_phase_last_run_source)==="catchup"||(fe==null?void 0:fe.ai_phase_last_run_source)==="backfill"||(fe==null?void 0:fe.ai_phase_last_run_source)==="manual_rephase"?fe.ai_phase_last_run_source:null};Be.push(ut)}if(Be.length===0)return;fh.current=Me,_(fe=>{const mt=new Map;for(const lt of fe)mt.set(lt.conversationId,lt);for(const lt of Be){const St=mt.get(lt.conversationId);mt.set(lt.conversationId,St?{...St,...lt}:lt)}const Dt=Array.from(mt.values());return Dt.sort((lt,St)=>{var kt,Ge;return(((kt=St.lastAt)==null?void 0:kt.getTime())||0)-(((Ge=lt.lastAt)==null?void 0:Ge.getTime())||0)}),Dt})}finally{Rw.current=!1}}},[r==null?void 0:r.id,t==null?void 0:t.id,l,y]),Fo=h.useCallback((E,O)=>{if(!E)return;const F=Number((O==null?void 0:O.atMs)||0)||Date.now();k(I=>{const se=I[E];return se&&Number(se.atMs||0)>=F?I:{...I,[E]:{atMs:F,messageId:(O==null?void 0:O.messageId)||null,text:N_((O==null?void 0:O.text)||""),direction:(O==null?void 0:O.direction)==="inbound"||(O==null?void 0:O.direction)==="outbound"?O.direction:null}}})},[]);UE.current=Q,h.useEffect(()=>{if(!Pg)return;const E=O=>{O.key==="Escape"&&Tg(null)};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[Pg]),h.useEffect(()=>{if(!pr){at(null);return}const E=URL.createObjectURL(pr);return at(E),()=>URL.revokeObjectURL(E)},[pr]),h.useEffect(()=>{if(Ow.current)return;Ow.current=!0;const E=i.get("assigned"),O=i.get("temperature")||i.get("status"),F=i.get("funnel"),I=i.get("phases"),se=i.get("spam"),le=i.get("conversation")||i.get("c"),W=i.get("msg"),ve=i.get("reminderMeeting"),X=i.get("reminderKind");if(E&&Oe(E),(O==="all"||O==="hot"||O==="warm"||O==="cold")&&rt(O),F){const Te=F.split(",").map(Me=>Me.trim()).filter(Me=>Me==="new_lead"||Me==="in_contact"||Me==="qualified"||Me==="unqualified"||Me==="call_booked"||Me==="won"||Me==="no_show");Gt(Array.from(new Set(Te)))}if(I){const Te=I.split(",").map(Me=>Me.trim()).filter(Boolean);dt(Array.from(new Set(Te)))}(se==="exclude"||se==="include"||se==="only")&&It(se),nr(!1),le&&te(le),W&&Ms(W),ve&&(X==="24h"||X==="1h")&&fr({meetingId:ve,kind:X})},[i]),h.useEffect(()=>{if(!Ow.current)return;const E=new URLSearchParams;We!=="all"&&E.set("assigned",We),Fe!=="all"&&E.set("temperature",Fe),gt!=="exclude"&&E.set("spam",gt),Br&&E.set("priorityOnly","1"),nt.length>0&&E.set("funnel",nt.join(",")),ht.length>0&&E.set("phases",ht.join(",")),o(E,{replace:!0})},[We,Fe,gt,Br,nt,ht,o]);const Dz=u!=null&&u.instagram_username?`@${u.instagram_username}`:"Instagram",be=h.useMemo(()=>Q&&x.find(E=>E.conversationId===Q)||null,[x,Q]),Ds=h.useMemo(()=>be?(Array.isArray(Ne)?Ne:[]).filter(O=>TIe(O,be)).filter(O=>Vv(O)):[],[be==null?void 0:be.conversationId,be==null?void 0:be.peerId,be==null?void 0:be.instagramAccountId,Ne]),Rg=h.useMemo(()=>{const E={};for(const O of n||[])O!=null&&O.userId&&(E[String(O.userId)]=String(O.displayName||"Team member"));return E},[n]),$g=h.useMemo(()=>(n||[]).filter(E=>E.role==="setter"),[n]),vu=h.useMemo(()=>{const E={};for(const O of C)E[O.id]=O;return E},[C]),yu=h.useMemo(()=>C.find(E=>E.name.toLowerCase()==="hot lead")||null,[C]),Na=h.useMemo(()=>{const E={hot:null,warm:null,cold:null};for(const O of C){const F=ai(O.name);!E.hot&&(F==="hot lead"||F==="hot")&&(E.hot=O),!E.warm&&(F==="warm lead"||F==="warm")&&(E.warm=O),!E.cold&&(F==="cold lead"||F==="cold")&&(E.cold=O)}return E},[C]),ts=h.useMemo(()=>{const E={new_lead:null,in_contact:null,qualified:null,unqualified:null,call_booked:null,won:null,no_show:null};for(const O of C){const F=Us(O==null?void 0:O.name);F&&(E[F]||(E[F]=O))}return E},[C]),Ls=h.useMemo(()=>be?N[be.conversationId]||[]:[],[be,N]),Bo=h.useMemo(()=>Ls.map(E=>vu[E]).filter(Boolean),[Ls,vu]),WE=h.useMemo(()=>be?K[be.conversationId]||[]:[],[be,K]),Yl=h.useMemo(()=>{var I,se,le;if(!be)return null;const E=((I=Na.hot)==null?void 0:I.id)&&Ls.includes(Na.hot.id)||Bo.some(W=>Ln(W.name,"hot")),O=((se=Na.warm)==null?void 0:se.id)&&Ls.includes(Na.warm.id)||Bo.some(W=>Ln(W.name,"warm")),F=((le=Na.cold)==null?void 0:le.id)&&Ls.includes(Na.cold.id)||Bo.some(W=>Ln(W.name,"cold"));return E?"hot":O?"warm":F?"cold":null},[be,Ls,Bo,Na]),Dg=h.useMemo(()=>{if(!be)return null;if(be.leadStatus==="qualified")return"qualified";if(be.leadStatus==="disqualified")return"unqualified";for(const E of Wv){const O=ts[E];if(O!=null&&O.id&&Ls.includes(O.id)||Bo.some(F=>Us(F==null?void 0:F.name)===E))return E}return"new_lead"},[be,Ls,Bo,ts]),Lg=h.useMemo(()=>C.filter(E=>{if(Ln(E.name,"hot")||Ln(E.name,"warm")||Ln(E.name,"cold")||Us(E.name))return!1;const O=ai(E.name);return!(O==="priority"||O==="qualified"||O==="disqualified"||O==="spam")}),[C]),HE=h.useMemo(()=>Bo.filter(E=>{if(Ln(E.name,"hot")||Ln(E.name,"warm")||Ln(E.name,"cold")||Us(E.name))return!1;const O=ai(E.name);return O!=="priority"&&O!=="qualified"&&O!=="disqualified"&&O!=="spam"}),[Bo]);h.useEffect(()=>{Qa(null)},[be==null?void 0:be.conversationId]),h.useEffect(()=>{q("summary")},[be==null?void 0:be.conversationId]),h.useEffect(()=>{Tw.current=(be==null?void 0:be.conversationId)||null,gu.current=!0},[be==null?void 0:be.conversationId]),h.useEffect(()=>{const E=Og.current;if(!E)return;const O=()=>{const F=E.scrollHeight-E.scrollTop-E.clientHeight;gu.current=F<120};return O(),E.addEventListener("scroll",O,{passive:!0}),()=>E.removeEventListener("scroll",O)},[be==null?void 0:be.conversationId]),h.useEffect(()=>{const E=Og.current;if(!E)return;const O=(be==null?void 0:be.conversationId)||null,F=Tw.current;if(O&&F===O){requestAnimationFrame(()=>{E.scrollTop=E.scrollHeight,gu.current=!0,setTimeout(()=>{const I=Og.current;I&&(I.scrollTop=I.scrollHeight,gu.current=!0)},60)}),Tw.current=null;return}gu.current&&requestAnimationFrame(()=>{E.scrollTop=E.scrollHeight,gu.current=!0})},[be==null?void 0:be.conversationId,Ds.length]),h.useEffect(()=>{if(!be){Gl.current="";return}const E=Ds;if(E.length===0){Gl.current="";return}let O="",F=-1;for(const I of E){const se=I!=null&&I.message_id?String(I.message_id):I!=null&&I.id?String(I.id):"";if(!se)continue;const le=Kv(I);le>=F&&(F=le,O=se)}O&&(Gl.current=O)},[be==null?void 0:be.conversationId,Ds]),h.useEffect(()=>{if(!be)return;const E=Ds;if(E.length===0)return;let O=null,F=-1;for(const ve of E){const X=Kv(ve);X>=F&&(F=X,O=ve)}if(!O)return;const I=F>0?F:Date.now(),se=O!=null&&O.message_id?String(O.message_id):O!=null&&O.id?String(O.id):null,le=Hv(O,{instagramAccountId:be!=null&&be.instagramAccountId?String(be.instagramAccountId):null,peerId:be!=null&&be.peerId?String(be.peerId):null}),W=k_(O);Fo(be.conversationId,{atMs:I,messageId:se,direction:le,text:W})},[be==null?void 0:be.conversationId,be==null?void 0:be.instagramAccountId,Ds,Fo]);const VE=h.useMemo(()=>{const E=xe!==null;return x.map(O=>{const F=S[O.conversationId]||null,I=O!=null&&O.lastAt?O.lastAt.getTime():0,se=F?Number(F.atMs||0):0,le=!!(F&&se&&(se>=I||!O.lastMessageId||!O.lastAt)),W=le?new Date(se):O.lastAt,ve=W?W.getTime():0,X=le?(F==null?void 0:F.text)||null:O.lastText,Te=le?(F==null?void 0:F.direction)||null:O.lastDirection,Me=le?(F==null?void 0:F.messageId)||null:O.lastMessageId,Be=E&&(xe==null?void 0:xe[O.conversationId])||null,fe=Be?ws(Be):0,mt=O!=null&&O.sharedLastReadAt?O.sharedLastReadAt.getTime():0,Dt=le&&(F==null?void 0:F.direction)==="inbound"?se:0,lt=le&&(F==null?void 0:F.direction)==="outbound"?se:0,St=Math.max(O!=null&&O.lastInboundAt?O.lastInboundAt.getTime():0,Dt,String(Te||"")==="inbound"?ve:0),kt=Math.max(O!=null&&O.lastOutboundAt?O.lastOutboundAt.getTime():0,lt,String(Te||"")==="outbound"?ve:0),Ge=Math.max(fe,mt,kt),Ae=(E||mt>0||kt>0)&&St>Ge;return{...O,lastAt:W,lastText:X,lastDirection:Te,lastMessageId:Me,unread:Ae}})},[x,xe,S]),Ca=h.useMemo(()=>{const E=Z.trim().toLowerCase(),O=Date.now(),F=Be=>{var lt;if(nt.length===0)return!0;const fe=String(Be.leadStatus||"open");if(fe==="qualified")return nt.includes("qualified");if(fe==="disqualified")return nt.includes("unqualified");const mt=N[String(Be.conversationId)]||[],Dt=new Set;for(const St of mt){const kt=((lt=vu[String(St)])==null?void 0:lt.name)||null,Ge=Us(kt);Ge&&Dt.add(Ge)}return Dt.size===0?nt.includes("new_lead"):nt.some(St=>Dt.has(St))},I=Be=>{if(Fe==="all")return!0;const fe=N[String(Be.conversationId)]||[],mt=Na[Fe];return mt!=null&&mt.id&&fe.includes(mt.id)?!0:fe.some(Dt=>{var lt;return Ln(((lt=vu[String(Dt)])==null?void 0:lt.name)||"",Fe)})},se=Be=>{if(ht.length===0)return!0;const fe=N[String(Be.conversationId)]||[];return ht.some(mt=>fe.includes(mt))},le=Be=>gt==="only"?!!Be.isSpam:gt==="exclude"?!Be.isSpam:!0,W=Be=>{const fe=!!Be.hiddenFromSetters;return Qt==="only"?fe:Qt==="exclude"?!fe:!0},ve=Be=>We==="all"?!0:We==="me"?String(Be.assignedUserId||"")===String((t==null?void 0:t.id)||""):We==="unassigned"?!Be.assignedUserId:String(Be.assignedUserId||"")===We,X=Be=>String(Be.leadStatus||"open")!=="removed",Te=VE.filter(Be=>{if(!X(Be)||!le(Be)||!W(Be)||!ve(Be)||!I(Be)||!se(Be)||!F(Be)||Br&&!Be.priority)return!1;if(ue==="priority"){if(!Be.priority)return!1;const fe=Be.prioritySnoozedUntil?Be.prioritySnoozedUntil.getTime():0;if(fe&&fe>O)return!1}else if(ue==="unread"&&!Be.unread)return!1;return!0}),Me=Be=>Be.map((fe,mt)=>({t:fe,idx:mt})).sort((fe,mt)=>{var St,kt;const Dt=(St=fe.t)!=null&&St.lastAt?fe.t.lastAt.getTime():0,lt=(kt=mt.t)!=null&&kt.lastAt?mt.t.lastAt.getTime():0;return lt!==Dt?lt-Dt:fe.idx-mt.idx}).map(fe=>fe.t);return Me(E?Te.filter(Be=>{const fe=String(Be.peerUsername||Be.peerName||Be.peerId||"").toLowerCase(),mt=String(Be.lastText||"").toLowerCase();return fe.includes(E)||mt.includes(E)}):Te)},[VE,ue,Z,We,Fe,nt,ht,gt,Qt,Br,N,vu,Na,t==null?void 0:t.id]),Lz=h.useMemo(()=>{const E=Z.trim().toLowerCase();return[ue,E,We,Fe,gt,Qt,Br?"1":"0",nt.join(","),ht.join(",")].join("|")},[ue,Z,We,Fe,gt,Qt,Br,nt,ht]);h.useEffect(()=>{FE(250)},[Lz]);const Dw=h.useMemo(()=>Ca.slice(0,Math.max(50,LE)),[Ca,LE]),Fz=h.useCallback(()=>{const E=DE.current;!E||E.scrollHeight-(E.scrollTop+E.clientHeight)>420||FE(F=>{const I=Ca.length;return F>=I?F:Math.min(F+250,I)})},[Ca.length]);h.useMemo(()=>{const E=Date.now(),O=new Date;O.setHours(0,0,0,0);const F=O.getTime();let I=0,se=0,le=0;const W=(yu==null?void 0:yu.id)||null;for(const X of x)if(X.leadStatus!=="removed"&&!X.isSpam){if(!X.isSpam&&X.lastDirection==="inbound"&&X.lastAt&&X.lastAt.getTime()>=F&&(I+=1),W&&(N[X.conversationId]||[]).includes(W)){const Te=X.lastInboundAt?X.lastInboundAt.getTime():0,Me=X.lastOutboundAt?X.lastOutboundAt.getTime():0;Te&&Te>Me&&E-Te>4*60*60*1e3&&(se+=1)}if(X.leadStatus==="qualified"){const Te=X.lastInboundAt?X.lastInboundAt.getTime():0,Me=X.lastOutboundAt?X.lastOutboundAt.getTime():0;Te&&Te>Me&&(le+=1)}}const ve=P.filter(X=>X.type==="no_show_followup").length;return{todaysNewLeads:I,hotLeadsWaiting:se,qualifiedWaiting:le,noShows:ve}},[x,N,yu==null?void 0:yu.id,P]),h.useEffect(()=>{r!=null&&r.id||(m(!1),c(!1),d(null))},[r==null?void 0:r.id]),h.useEffect(()=>{k({})},[r==null?void 0:r.id]);const KE=h.useCallback(async()=>{if(!(r!=null&&r.id)){m(!1);return}m(!0);try{const O=z.functions.invoke("instagram-connect",{body:{action:"status",workspaceId:r.id}}),F=new Promise((le,W)=>{const ve=setTimeout(()=>{clearTimeout(ve),W(new Error("Instagram status request timed out"))},12e3)}),{data:I,error:se}=await Promise.race([O,F]);if(se)console.error("Instagram status error:",se),c(!1),d(null);else{const le=I||{};c(!!(le!=null&&le.connected)),d((le==null?void 0:le.connection)||null)}}catch(E){console.error("Instagram status request failed:",E),c(!1),d(null)}finally{m(!1)}},[r==null?void 0:r.id]);h.useEffect(()=>{KE()},[KE]),h.useEffect(()=>{if(!f)return;const E=setTimeout(()=>{m(!1),c(!1),d(null)},15e3);return()=>clearTimeout(E)},[f]);const Xl=h.useCallback(async()=>{if(r!=null&&r.id)try{const{data:E,error:O}=await z.from("instagram_tags").select("id,name,color,icon,prompt").eq("workspace_id",r.id).order("created_at",{ascending:!0});if(O)throw O;const I=(Array.isArray(E)?E:[]).map(le=>{const W=String(le.name||"Tag"),ve=ai(W);let X=String(le.color||"#8A8A8A");return ve==="spam"&&(X="#dc2626"),ve==="qualified"&&(X="#22c55e"),ve==="disqualified"&&(X="#b91c1c"),ve==="priority"&&(X="#eab308"),{id:String(le.id),name:W,color:X,icon:le.icon?String(le.icon):null,prompt:le.prompt?String(le.prompt):null}});if(j(I),!I.some(le=>le.name.toLowerCase()==="hot lead")&&a==="owner"&&(t!=null&&t.id)&&!Iw.current){Iw.current=!0;const{error:le}=await z.from("instagram_tags").insert({workspace_id:r.id,name:"Hot Lead",color:"#F59E0B",icon:"star",prompt:"Tag this conversation when lead intent is high: asks about pricing, availability, booking, next steps, or sounds ready to buy.",created_by:t.id});le?Iw.current=!1:await Xl()}}catch{j([])}},[r==null?void 0:r.id,t==null?void 0:t.id,a]),xu=h.useCallback(async()=>{if(r!=null&&r.id)try{const{data:E,error:O}=await z.from("instagram_alerts").select("id,conversation_id,alert_type,assigned_user_id,overdue_minutes,recommended_action,status").eq("workspace_id",r.id).eq("status","open").order("created_at",{ascending:!1}).limit(100);if(O)throw O;const F=Array.isArray(E)?E:[];T(F.map(I=>({id:String(I.id),conversationId:String(I.conversation_id),type:String(I.alert_type),assignedUserId:I.assigned_user_id?String(I.assigned_user_id):null,overdueMinutes:Number(I.overdue_minutes||0),recommendedAction:I.recommended_action?String(I.recommended_action):null})))}catch{T([])}},[r==null?void 0:r.id]),Fg=h.useCallback(E=>{ne(O=>{const F=E.conversationId,I=O[F]||[],se=I.findIndex(le=>le.id===E.id);if(se>=0){const le=I.slice();return le[se]=E,{...O,[F]:le.sort((W,ve)=>W.createdAt.getTime()-ve.createdAt.getTime())}}return{...O,[F]:[...I,E].sort((le,W)=>le.createdAt.getTime()-W.createdAt.getTime())}})},[]),GE=h.useCallback(async E=>{if(!(!(r!=null&&r.id)||!E)){_e(!0);try{const{data:O,error:F}=await z.from("lead_team_messages").select("id,workspace_id,conversation_id,author_user_id,body,created_at").eq("workspace_id",r.id).eq("conversation_id",E).order("created_at",{ascending:!0}).limit(400);if(F)throw F;const I=Array.isArray(O)?O:[];ne(se=>({...se,[E]:I.map(le=>({id:String(le.id),workspaceId:String(le.workspace_id),conversationId:String(le.conversation_id),authorUserId:String(le.author_user_id),body:String(le.body||""),createdAt:new Date(String(le.created_at))}))}))}catch(O){console.warn("Failed to load internal team chat:",O),ne(F=>({...F,[E]:[]}))}finally{_e(!1)}}},[r==null?void 0:r.id]),Bz=h.useCallback(async()=>{if(!(r!=null&&r.id)||!(t!=null&&t.id)||!be)return;const E=pe.trim();if(E){me(!0);try{const{data:O,error:F}=await z.from("lead_team_messages").insert({workspace_id:r.id,conversation_id:be.conversationId,author_user_id:t.id,body:E}).select("id,workspace_id,conversation_id,author_user_id,body,created_at").single();if(F)throw F;const I=O;Fg({id:String(I.id),workspaceId:String(I.workspace_id),conversationId:String(I.conversation_id),authorUserId:String(I.author_user_id),body:String(I.body||""),createdAt:new Date(String(I.created_at))}),ye("")}catch(O){const F=String((O==null?void 0:O.message)||(O==null?void 0:O.details)||"").trim();ee.error(F||"Failed to post internal message")}finally{me(!1)}}},[r==null?void 0:r.id,t==null?void 0:t.id,be,pe,Fg]);h.useEffect(()=>{ye(""),be!=null&&be.conversationId&&GE(be.conversationId)},[be==null?void 0:be.conversationId,GE]);const Cn=h.useCallback(async E=>{var lt,St,kt,Ge,Ft;if(!(r!=null&&r.id)||!(t!=null&&t.id)||!l)return;const O=Ae=>{if(!Ae)return null;const tt=new Date(String(Ae));return Number.isFinite(tt.getTime())?tt:null},F=[{select:"conversation_id,instagram_account_id,instagram_user_id,peer_username,peer_name,peer_profile_picture_url,priority,is_spam,hidden_from_setters,shared_with_setters,assigned_user_id,lead_status,priority_snoozed_until,priority_followed_up_at,summary_text,summary_updated_at,shared_last_read_at,last_inbound_at,last_outbound_at,last_message_id,last_message_text,last_message_direction,last_message_at,ai_phase_updated_at,ai_phase_confidence,ai_temperature_confidence,ai_phase_reason,ai_phase_mode,ai_phase_last_run_source",supportsSpam:!0},{select:"conversation_id,instagram_account_id,instagram_user_id,peer_username,peer_name,peer_profile_picture_url,priority,is_spam,hidden_from_setters,shared_with_setters,assigned_user_id,lead_status,last_inbound_at,last_outbound_at,last_message_id,last_message_text,last_message_direction,last_message_at,ai_phase_updated_at,ai_phase_confidence,ai_temperature_confidence,ai_phase_reason,ai_phase_mode,ai_phase_last_run_source",supportsSpam:!0},{select:"conversation_id,instagram_account_id,instagram_user_id,peer_username,peer_name,peer_profile_picture_url,priority,is_spam,hidden_from_setters,shared_with_setters,assigned_user_id,lead_status,last_message_id,last_message_text,last_message_direction,last_message_at,ai_phase_updated_at,ai_phase_confidence,ai_temperature_confidence,ai_phase_reason,ai_phase_mode,ai_phase_last_run_source",supportsSpam:!0},{select:"conversation_id,instagram_account_id,instagram_user_id,peer_username,peer_name,peer_profile_picture_url,priority,is_spam,assigned_user_id,lead_status,last_message_id,last_message_text,last_message_direction,last_message_at,ai_phase_updated_at,ai_phase_confidence,ai_temperature_confidence,ai_phase_reason,ai_phase_mode,ai_phase_last_run_source",supportsSpam:!0},{select:"conversation_id,instagram_account_id,instagram_user_id,peer_username,peer_name,peer_profile_picture_url,priority,hidden_from_setters,shared_with_setters,assigned_user_id,lead_status,last_message_id,last_message_text,last_message_direction,last_message_at",supportsSpam:!1},{select:"conversation_id,instagram_account_id,instagram_user_id,peer_username,peer_name,peer_profile_picture_url,priority,last_message_id,last_message_text,last_message_direction,last_message_at",supportsSpam:!1},{select:"conversation_id,instagram_account_id,instagram_user_id,peer_username,peer_name,peer_profile_picture_url,last_message_id,last_message_text,last_message_at",supportsSpam:!1},{select:"conversation_id,instagram_account_id,instagram_user_id,last_message_id,last_message_text,last_message_at",supportsSpam:!1}],I=Ae=>{if(!Ae)return!1;const tt=`${String((Ae==null?void 0:Ae.message)||"")} ${String((Ae==null?void 0:Ae.details)||"")} ${String((Ae==null?void 0:Ae.hint)||"")}`.toLowerCase();return tt.includes("column")||tt.includes("does not exist")||tt.includes("is_spam")||tt.includes("last_message_direction")||tt.includes("priority")||tt.includes("ai_phase_")||tt.includes("hidden_from_setters")||tt.includes("shared_with_setters")};let se=[],le=null;for(let Ae=0;Ae<F.length;Ae+=1){const tt=F[Ae],Qe=1e3,ut=5e4,pt=[];let He=!0;for(let Ze=0;Ze<ut;Ze+=Qe){const jt=await z.from("instagram_threads").select(tt.select).eq("workspace_id",r.id).order("last_message_at",{ascending:!1,nullsFirst:!1}).order("conversation_id",{ascending:!1}).range(Ze,Ze+Qe-1);if(jt.error){le=jt.error,He=!1;break}const vt=Array.isArray(jt.data)?jt.data:[];if(vt.length>0&&pt.push(...vt),vt.length<Qe)break}if(He){se=pt,le=null,w(tt.supportsSpam);break}if(!I(le))break}le&&(console.warn("Load threads error (falling back to messages):",le),se=[],w(!1));let W=(Array.isArray(se)?se:[]).map(Ae=>{const tt=String(Ae.conversation_id||""),Qe=String(Ae.instagram_account_id||""),ut=Ae.instagram_user_id?String(Ae.instagram_user_id):"",pt=`${Qe}:`,He=tt.startsWith(pt)?tt.slice(pt.length).trim():"",jt=(!ut||ut==="unknown"||ut===Qe||ut.startsWith("unknown:"))&&He?He:ut,vt=String(Ae.lead_status||"open"),yt=vt==="qualified"||vt==="disqualified"||vt==="removed"?vt:"open";return{conversationId:tt,instagramAccountId:Qe,peerId:jt,peerUsername:Ae.peer_username?String(Ae.peer_username):null,peerName:Ae.peer_name?String(Ae.peer_name):null,peerPicture:Ae.peer_profile_picture_url?String(Ae.peer_profile_picture_url):null,priority:!!Ae.priority,isSpam:!!Ae.is_spam,hiddenFromSetters:!!Ae.hidden_from_setters,sharedWithSetters:!!Ae.shared_with_setters,leadStatus:yt,assignedUserId:Ae.assigned_user_id?String(Ae.assigned_user_id):null,prioritySnoozedUntil:O(Ae.priority_snoozed_until),priorityFollowedUpAt:O(Ae.priority_followed_up_at),summaryText:Ae.summary_text?String(Ae.summary_text):null,summaryUpdatedAt:O(Ae.summary_updated_at),sharedLastReadAt:O(Ae.shared_last_read_at),lastInboundAt:O(Ae.last_inbound_at),lastOutboundAt:O(Ae.last_outbound_at),lastMessageId:Ae.last_message_id?String(Ae.last_message_id):null,lastText:Ae.last_message_text?String(Ae.last_message_text):null,lastDirection:Ae.last_message_direction==="inbound"||Ae.last_message_direction==="outbound"?Ae.last_message_direction:null,lastAt:(()=>{if(!Ae.last_message_at)return null;const sr=new Date(String(Ae.last_message_at));return Number.isFinite(sr.getTime())?sr:null})(),aiPhaseUpdatedAt:O(Ae.ai_phase_updated_at),aiPhaseConfidence:Ae.ai_phase_confidence!=null&&Number.isFinite(Number(Ae.ai_phase_confidence))?Number(Ae.ai_phase_confidence):null,aiTemperatureConfidence:Ae.ai_temperature_confidence!=null&&Number.isFinite(Number(Ae.ai_temperature_confidence))?Number(Ae.ai_temperature_confidence):null,aiPhaseReason:Ae.ai_phase_reason?String(Ae.ai_phase_reason):null,aiPhaseMode:Ae.ai_phase_mode==="shadow"||Ae.ai_phase_mode==="enforce"?Ae.ai_phase_mode:null,aiPhaseLastRunSource:Ae.ai_phase_last_run_source==="incremental"||Ae.ai_phase_last_run_source==="catchup"||Ae.ai_phase_last_run_source==="backfill"||Ae.ai_phase_last_run_source==="manual_rephase"?Ae.ai_phase_last_run_source:null}});const ve=$z.current,X=W.filter(Ae=>{if(!Ae.lastMessageId||!Ae.lastAt)return!1;const tt=Ae.lastAt.getTime();return!Number.isFinite(tt)||tt<11045376e5}).map(Ae=>String(Ae.lastMessageId));if(X.length>0){const tt=Array.from(new Set(X)).slice(0,500).filter(Qe=>!ve[Qe]);if(tt.length>0){const{data:Qe,error:ut}=await z.from("instagram_messages").select("message_id,message_timestamp,created_at,raw_payload").eq("workspace_id",r.id).in("message_id",tt);if(!ut&&Array.isArray(Qe)&&Qe.length>0){const pt=Ze=>{if(Ze==null)return 0;if(Ze instanceof Date){const Vt=Ze.getTime();return Number.isFinite(Vt)?Vt:0}if(typeof Ze=="number")return Number.isFinite(Ze)?Ze<1e12?Math.round(Ze*1e3):Math.round(Ze):0;const jt=String(Ze).trim();if(!jt)return 0;if(/^\d{10,13}(\.\d+)?$/.test(jt)){const Vt=Number(jt);if(!Number.isFinite(Vt))return 0;const or=jt.split(".")[0].length>=13?Vt:Vt*1e3,ln=new Date(or).getTime();return Number.isFinite(ln)?ln:0}const vt=jt.replace(/([+-]\d{2})(\d{2})$/,"$1:$2"),yt=Date.parse(vt);if(Number.isFinite(yt))return yt;const sr=Date.parse(jt);return Number.isFinite(sr)?sr:0},He=Ze=>{var sr,Vt;const jt=pt(Ze==null?void 0:Ze.message_timestamp),vt=pt(((sr=Ze==null?void 0:Ze.raw_payload)==null?void 0:sr.created_time)??((Vt=Ze==null?void 0:Ze.raw_payload)==null?void 0:Vt.timestamp)),yt=pt(Ze==null?void 0:Ze.created_at);return vt&&(jt===0||jt<11045376e5)&&vt>jt?vt:jt||vt||yt||0};for(const Ze of Qe){const jt=Ze!=null&&Ze.message_id?String(Ze.message_id):null;if(!jt)continue;const vt=He(Ze);vt&&(ve[jt]=vt)}}}W=W.map(Qe=>{if(!Qe.lastMessageId)return Qe;const ut=ve[String(Qe.lastMessageId)]||0;return ut?{...Qe,lastAt:new Date(ut)}:Qe})}let Te=W.filter(Ae=>Ae.conversationId&&Ae.instagramAccountId&&Ae.peerId&&Ae.peerId!==Ae.instagramAccountId).slice();if(Te.length===0)try{const Ae=["instagram_account_id,instagram_user_id,sender_id,recipient_id,message_text,direction,message_id,message_timestamp,created_at,raw_payload","instagram_account_id,instagram_user_id,sender_id,recipient_id,message_text,message_id,message_timestamp,created_at,raw_payload","instagram_account_id,sender_id,recipient_id,message_text,message_id,created_at,raw_payload"];let tt=[],Qe=null;for(let ut=0;ut<Ae.length;ut+=1){const pt=Ae[ut],He=await z.from("instagram_messages").select(pt).eq("workspace_id",r.id).order("message_timestamp",{ascending:!1,nullsFirst:!1}).order("created_at",{ascending:!1}).limit(2500);if(!He.error){tt=He.data,Qe=null;break}Qe=He.error;const Ze=`${String(((lt=He.error)==null?void 0:lt.message)||"")} ${String(((St=He.error)==null?void 0:St.details)||"")}`.toLowerCase();if(!Ze.includes("column")&&!Ze.includes("does not exist"))break}if(!Qe&&Array.isArray(tt)&&tt.length>0){const ut=He=>{if(He==null)return 0;if(He instanceof Date){const sr=He.getTime();return Number.isFinite(sr)?sr:0}if(typeof He=="number")return Number.isFinite(He)?He<1e12?Math.round(He*1e3):Math.round(He):0;const Ze=String(He).trim();if(!Ze)return 0;if(/^\d{10,13}(\.\d+)?$/.test(Ze)){const sr=Number(Ze);if(!Number.isFinite(sr))return 0;const pn=Ze.split(".")[0].length>=13?sr:sr*1e3,Mn=new Date(pn).getTime();return Number.isFinite(Mn)?Mn:0}const jt=Ze.replace(/([+-]\d{2})(\d{2})$/,"$1:$2"),vt=Date.parse(jt);if(Number.isFinite(vt))return vt;const yt=Date.parse(Ze);return Number.isFinite(yt)?yt:0},pt={};for(const He of tt){const Ze=He!=null&&He.instagram_account_id?String(He.instagram_account_id):"",jt=He!=null&&He.sender_id?String(He.sender_id):"",vt=He!=null&&He.recipient_id?String(He.recipient_id):"",yt=(kt=He==null?void 0:He.raw_payload)!=null&&kt.conversation_id?String(He.raw_payload.conversation_id):null;let sr=(Ge=He==null?void 0:He.raw_payload)!=null&&Ge.conversation_key?String(He.raw_payload.conversation_key):yt?`${Ze}:${yt}`:"",Vt=He!=null&&He.instagram_user_id?String(He.instagram_user_id):"";if((!Vt||Vt===Ze||Vt==="unknown"||Vt.startsWith("unknown:"))&&(jt&&jt!==Ze?Vt=jt:vt&&vt!==Ze&&(Vt=vt)),(!Vt||Vt===Ze||Vt==="unknown"||Vt.startsWith("unknown:"))&&sr&&Ze&&sr.startsWith(`${Ze}:`)){const ln=sr.slice(`${Ze}:`.length).trim();ln&&ln!==Ze&&(Vt=ln)}if(!Vt&&yt&&(Vt=`unknown:${yt}`),!sr&&Ze&&Vt&&(sr=`${Ze}:${Vt}`),!Ze||!Vt||!sr||Vt===Ze)continue;const pn=(()=>{var Ea,hh;const ln=ut(He==null?void 0:He.message_timestamp),Pr=ut(((Ea=He==null?void 0:He.raw_payload)==null?void 0:Ea.created_time)??((hh=He==null?void 0:He.raw_payload)==null?void 0:hh.timestamp)),Ql=ut(He==null?void 0:He.created_at);return Pr&&(!ln||ln<11045376e5)&&Pr>ln?Pr:ln||Pr||Ql||0})();if(!pn)continue;const or=pt[sr];if(or&&or.lastAt&&or.lastAt.getTime()>=pn)continue;const Mn=Hv(He,{instagramAccountId:Ze,peerId:Vt});pt[sr]={conversationId:sr,instagramAccountId:Ze,peerId:Vt,peerUsername:null,peerName:null,peerPicture:null,priority:!1,isSpam:!1,hiddenFromSetters:!1,sharedWithSetters:!1,leadStatus:"open",assignedUserId:null,prioritySnoozedUntil:null,priorityFollowedUpAt:null,summaryText:null,summaryUpdatedAt:null,sharedLastReadAt:null,lastInboundAt:Mn==="inbound"?new Date(pn):null,lastOutboundAt:Mn==="outbound"?new Date(pn):null,lastMessageId:He!=null&&He.message_id?String(He.message_id):null,lastText:He!=null&&He.message_text?String(He.message_text):null,lastDirection:Mn,lastAt:new Date(pn),aiPhaseUpdatedAt:null,aiPhaseConfidence:null,aiTemperatureConfidence:null,aiPhaseReason:null,aiPhaseMode:null,aiPhaseLastRunSource:null}}Te=Object.values(pt),Te.sort((He,Ze)=>{const jt=He.lastAt?He.lastAt.getTime():-1;return(Ze.lastAt?Ze.lastAt.getTime():-1)-jt})}}catch{}Te.sort((Ae,tt)=>{const Qe=Ae.lastAt?Ae.lastAt.getTime():-1;return(tt.lastAt?tt.lastAt.getTime():-1)-Qe});const Me=[],Be=new Set;for(const Ae of Te)Be.has(Ae.conversationId)||(Be.add(Ae.conversationId),Me.push(Ae));Te=Me,Te=zE(Te),_(Te);try{const Ae=Date.now(),tt=Number(BE.current||0);if(Ae-tt>8e3){BE.current=Ae;const Qe=Te.map(pt=>String(pt.conversationId)).filter(Boolean).slice(0,500),ut=new Set(Qe);if(ut.size>0){const{data:pt,error:He}=await z.from("instagram_messages").select("id,message_id,instagram_account_id,instagram_user_id,sender_id,recipient_id,message_text,direction,message_timestamp,created_at,raw_payload").eq("workspace_id",r.id).order("message_timestamp",{ascending:!1,nullsFirst:!1}).order("created_at",{ascending:!1}).limit(1500);if(!He&&Array.isArray(pt)&&pt.length>0){const Ze={},jt=new Set;for(const yt of pt){const sr=(Ft=yt==null?void 0:yt.raw_payload)!=null&&Ft.conversation_key?String(yt.raw_payload.conversation_key):null,Vt=yt!=null&&yt.instagram_account_id?String(yt.instagram_account_id):null,pn=yt!=null&&yt.instagram_user_id?String(yt.instagram_user_id):null,or=sr||(Vt&&pn?`${Vt}:${pn}`:null);if(!or||!ut.has(or)||jt.has(or)||!Vv(yt))continue;const Mn=Kv(yt)||0;if(!Mn)continue;const ln=yt!=null&&yt.message_id?String(yt.message_id):yt!=null&&yt.id?String(yt.id):null,Pr=Hv(yt,{instagramAccountId:Vt,peerId:pn});if(Ze[or]={atMs:Mn,messageId:ln,text:k_(yt),direction:Pr},jt.add(or),jt.size>=ut.size)break}const vt=Object.keys(Ze);vt.length>0&&k(yt=>{let sr=!1;const Vt={...yt};for(const pn of vt){const or=Ze[pn],Mn=Number((or==null?void 0:or.atMs)||0)||0;if(!Mn)continue;const ln=yt[pn];ln&&Number(ln.atMs||0)>=Mn||(Vt[pn]={atMs:Mn,messageId:(or==null?void 0:or.messageId)||null,text:N_((or==null?void 0:or.text)||""),direction:(or==null?void 0:or.direction)==="inbound"||(or==null?void 0:or.direction)==="outbound"?or.direction:null},sr=!0)}return sr?Vt:yt})}}}}catch{}try{const Ae=Te.map(tt=>String(tt.conversationId||"")).filter(Boolean);if(Ae.length===0)A({});else{const tt={};for(let ut=0;ut<Ae.length;ut+=1e3){const pt=Ae.slice(ut,ut+1e3),{data:He,error:Ze}=await z.from("instagram_conversation_tags").select("conversation_id,tag_id").eq("workspace_id",r.id).in("conversation_id",pt);if(!Ze)for(const jt of Array.isArray(He)?He:[]){const vt=jt!=null&&jt.conversation_id?String(jt.conversation_id):null,yt=jt!=null&&jt.tag_id?String(jt.tag_id):null;!vt||!yt||(tt[vt]||(tt[vt]=[]),tt[vt].includes(yt)||tt[vt].push(yt))}}A(tt)}}catch{A({})}const fe=await Ig({applyToState:!1});if(!fe)return;const mt={...fe.map},Dt=new Set(fe.conversationIds);if(E!=null&&E.baselineReads){const Ae=Te.filter(Qe=>!Dt.has(Qe.conversationId)).map(Qe=>({workspace_id:r.id,conversation_id:Qe.conversationId,user_id:t.id,last_read_at:Qe.lastAt?Qe.lastAt.toISOString():new Date().toISOString()})),tt=1e3;for(let Qe=0;Qe<Ae.length;Qe+=tt){const ut=Ae.slice(Qe,Qe+tt);if(ut.length===0)continue;const{error:pt}=await z.from("instagram_thread_reads").upsert(ut,{onConflict:"workspace_id,conversation_id,user_id"});if(pt){console.warn("Baseline reads upsert failed:",pt);break}for(const He of ut){const Ze=He!=null&&He.conversation_id?String(He.conversation_id):null,jt=He!=null&&He.last_read_at?String(He.last_read_at):null;if(!Ze)continue;Dt.add(Ze);const vt=Qh(mt[Ze],jt);vt&&(mt[Ze]=vt)}}}et(mt)},[r==null?void 0:r.id,t==null?void 0:t.id,l,zE,Ig]),rs=h.useCallback(async E=>{var ve;if(!(r!=null&&r.id))return;const O=r.id,F=E.conversationId,I=E.instagramAccountId&&F&&F.startsWith(`${String(E.instagramAccountId)}:`)?F.slice(`${String(E.instagramAccountId)}:`.length).trim():"",se=(()=>{const X=E.peerId?String(E.peerId):"";return X&&!X.startsWith("unknown:")&&X!==String(E.instagramAccountId||"")?X:I&&!I.startsWith("unknown:")&&I!==String(E.instagramAccountId||"")?I:X})(),le=++qE.current,W=()=>UE.current!==F||le!==qE.current;oe(!0);try{const X=pt=>Array.isArray(pt)?pt:[],Te=pt=>{const He=new Set,Ze=[];for(const jt of pt)for(const vt of X(jt)){const yt=vt!=null&&vt.message_id?String(vt.message_id):vt!=null&&vt.id?String(vt.id):"";if(yt){if(He.has(yt))continue;He.add(yt)}Ze.push(vt)}return Ze},Me=!!se&&!String(se).startsWith("unknown:")&&!!E.instagramAccountId&&String(se)!==String(E.instagramAccountId),Be=z.from("instagram_messages").select("*").eq("workspace_id",O).eq("instagram_account_id",E.instagramAccountId).eq("raw_payload->>conversation_key",F).order("message_timestamp",{ascending:!0,nullsFirst:!1}).order("created_at",{ascending:!0}).limit(2e3),fe=Me?z.from("instagram_messages").select("*").eq("workspace_id",O).eq("instagram_account_id",E.instagramAccountId).eq("instagram_user_id",se).order("message_timestamp",{ascending:!0,nullsFirst:!1}).order("created_at",{ascending:!0}).limit(2e3):Promise.resolve({data:[],error:null}),mt=Me?z.from("instagram_messages").select("*").eq("workspace_id",O).eq("instagram_account_id",E.instagramAccountId).is("raw_payload->>conversation_key",null).or(`sender_id.eq.${se},recipient_id.eq.${se},instagram_user_id.eq.${se}`).order("message_timestamp",{ascending:!0,nullsFirst:!1}).order("created_at",{ascending:!0}).limit(2e3):Promise.resolve({data:[],error:null}),Dt=Me?z.from("instagram_messages").select("*").eq("workspace_id",O).eq("instagram_account_id",E.instagramAccountId).or(`sender_id.eq.${se},recipient_id.eq.${se}`).order("message_timestamp",{ascending:!0,nullsFirst:!1}).order("created_at",{ascending:!0}).limit(2e3):Promise.resolve({data:[],error:null}),[lt,St,kt,Ge]=await Promise.all([Be,fe,mt,Dt]);if(lt!=null&&lt.error)throw lt.error;const Ae=Te([X(lt==null?void 0:lt.data),X(St==null?void 0:St.data),X(kt==null?void 0:kt.data),X(Ge==null?void 0:Ge.data)]).filter(pt=>Vv(pt));if(Ae.length>0){W()||je(Ae);return}if(E.lastMessageId){const{data:pt}=await z.from("instagram_messages").select("raw_payload,instagram_account_id").eq("workspace_id",O).eq("message_id",String(E.lastMessageId)).maybeSingle(),He=(ve=pt==null?void 0:pt.raw_payload)!=null&&ve.conversation_id?String(pt.raw_payload.conversation_id):null;if(He){const{data:Ze,error:jt}=await z.from("instagram_messages").select("*").eq("workspace_id",O).eq("instagram_account_id",E.instagramAccountId).eq("raw_payload->>conversation_id",He).order("message_timestamp",{ascending:!0,nullsFirst:!1}).order("created_at",{ascending:!0}).limit(2e3);if(!jt&&Array.isArray(Ze)&&Ze.length>0){W()||je(Ze);return}}}if(!se||String(se).startsWith("unknown:")){const{data:pt,error:He}=await z.from("instagram_messages").select("*").eq("workspace_id",O).eq("instagram_account_id",E.instagramAccountId).order("message_timestamp",{ascending:!0,nullsFirst:!1}).order("created_at",{ascending:!0}).limit(120);if(!He&&Array.isArray(pt)&&pt.length>0){W()||je(pt);return}W()||je([]);return}const{data:tt,error:Qe}=await z.from("instagram_messages").select("*").eq("workspace_id",O).eq("instagram_account_id",E.instagramAccountId).or(`sender_id.eq.${se},recipient_id.eq.${se},instagram_user_id.eq.${se}`).order("message_timestamp",{ascending:!0,nullsFirst:!1}).order("created_at",{ascending:!0}).limit(2e3);if(Qe)throw Qe;const ut=Array.isArray(tt)?tt:[];W()||je(ut)}catch(X){if(W())return;console.error("Load messages error:",X),je([])}finally{W()||oe(!1)}},[r==null?void 0:r.id]);h.useEffect(()=>{if(!(r!=null&&r.id)||!l||!be)return;const E=r.id,O=be.conversationId,F=be.instagramAccountId,I=be.peerId;let se=!1;const le=async()=>{if(!se)try{let X=z.from("instagram_messages").select("id,message_id,message_timestamp,created_at,raw_payload").eq("workspace_id",E).eq("instagram_account_id",F).not("message_id","is",null);I?X=X.eq("instagram_user_id",I):X=X.eq("raw_payload->>conversation_key",O);const{data:Te,error:Me}=await X.order("message_timestamp",{ascending:!1,nullsFirst:!1}).order("created_at",{ascending:!1}).limit(1);if(Me)return;const Be=Array.isArray(Te)?Te[0]:null,fe=Be!=null&&Be.message_id?String(Be.message_id):Be!=null&&Be.id?String(Be.id):"";if(!fe||fe===Gl.current)return;Gl.current=fe,rs(be)}catch{}},W=setTimeout(le,900),ve=setInterval(()=>{document.visibilityState==="visible"&&le()},1800);return()=>{se=!0,clearTimeout(W),clearInterval(ve)}},[r==null?void 0:r.id,l,be==null?void 0:be.conversationId,be==null?void 0:be.instagramAccountId,be==null?void 0:be.peerId,rs]);const Uz=h.useCallback(async E=>{var le;if(!(r!=null&&r.id)||!be)return;const O=be.peerId;if(!O||String(O).startsWith("unknown:")){ee.error("Cannot react to messages in this thread yet.");return}const F=E!=null&&E.message_id?String(E.message_id):"";if(!F){ee.error("This message cannot be reacted to.");return}if(String((E==null?void 0:E.direction)||"")==="outbound"){ee.error("You can only react to inbound messages.");return}const se=((le=E==null?void 0:E.raw_payload)!=null&&le.my_reaction?String(E.raw_payload.my_reaction):null)?"unreact":"react";Ag(!0);try{const{data:W,error:ve}=await z.functions.invoke("instagram-connect",{body:{action:"react-message",workspaceId:r.id,recipientId:O,messageId:F,mode:se,reaction:"love"}});if(ve)throw ve;if(!(W!=null&&W.success))throw new Error((W==null?void 0:W.error)||"Failed to react");je(X=>(Array.isArray(X)?X:[]).map(Te=>{if((Te!=null&&Te.message_id?String(Te.message_id):"")!==F)return Te;const Be=Te!=null&&Te.raw_payload&&typeof Te.raw_payload=="object"?Te.raw_payload:{};return{...Te,raw_payload:{...Be,my_reaction:se==="react"?"love":null}}}))}catch(W){console.error("React error:",W),ee.error((W==null?void 0:W.message)||"Failed to react")}finally{Ag(!1)}},[r==null?void 0:r.id,be]),Bg=h.useCallback(async E=>{if(!(r!=null&&r.id)||!be)return!1;const O=String(E||"").replace(/\s+/g," ").trim();if(!O)return!1;if(!be.peerId||String(be.peerId).startsWith("unknown:"))return ee.error("This thread is read-only until Instagram resolves the lead ID. Ask the lead to send a fresh DM, then sync inbox."),!1;Pt(!0);try{const{data:F,error:I}=await z.functions.invoke("instagram-connect",{body:{action:"send-message",workspaceId:r.id,recipientId:be.peerId,text:O,replyToMessageId:(Mt==null?void 0:Mt.messageId)||null,replyToText:(Mt==null?void 0:Mt.preview)||null}});if(I)throw I;if(!(F!=null&&F.success))throw new Error((F==null?void 0:F.error)||"Failed to send message");Ms(""),Qa(null);const se=(F==null?void 0:F.sentAt)||new Date().toISOString(),le=(F==null?void 0:F.messageId)||null;je(ve=>[...Array.isArray(ve)?ve:[],{id:le||`local-${Date.now()}`,message_id:le,direction:"outbound",message_text:O,message_timestamp:se,raw_payload:{conversation_key:be.conversationId,sent_via:"api",reply_to_message_id:(Mt==null?void 0:Mt.messageId)||null,reply_to_text:(Mt==null?void 0:Mt.preview)||null}}]);const W=ws(se)||Date.now();if(Fo(be.conversationId,{atMs:W,messageId:le,direction:"outbound",text:O}),es(be.conversationId,{lastAt:new Date(W),lastText:O,lastDirection:"outbound",lastMessageId:le},12e3),await Cn(),await rs(be),ir!=null&&ir.meetingId&&(r!=null&&r.id)){const ve=ir.kind==="24h"?"reminder_24h_sent_at":"reminder_1h_sent_at",{error:X}=await z.from("meetings").update({[ve]:new Date().toISOString()}).eq("workspace_id",r.id).eq("id",ir.meetingId);if(X)console.warn("Failed to stamp meeting reminder send:",X);else{fr(null);const Te=new URLSearchParams(i);Te.delete("msg"),Te.delete("reminderMeeting"),Te.delete("reminderKind"),o(Te,{replace:!0})}}return!0}catch(F){return console.error("Send message error:",F),ee.error((F==null?void 0:F.message)||"Failed to send message"),!1}finally{Pt(!1)}},[r==null?void 0:r.id,be,Mt,Cn,rs,Fo,es,ir,i,o]),YE=h.useCallback(async E=>{var I,se;if(!(r!=null&&r.id)||!be||!E)return!1;if(!be.peerId||String(be.peerId).startsWith("unknown:"))return ee.error("This thread is read-only until Instagram resolves the lead ID. Ask the lead to send a fresh DM, then sync inbox."),!1;const O=10*1024*1024;if(!String(E.type||"").toLowerCase().startsWith("image/"))return ee.error("Only image attachments are supported for now."),!1;const F=String(E.type||"").toLowerCase();F.includes("heic")||F.includes("heif"),Pt(!0);try{const W=await(async lt=>{var Ge;const St=String(lt.type||"").toLowerCase();if(St==="image/jpeg"||St==="image/png")return lt;let kt=null;try{kt=await createImageBitmap(lt)}catch{if(St.includes("heic")||St.includes("heif"))throw new Error("HEIC images are not supported yet. Please upload a JPG or PNG.");return lt}try{const Ft=document.createElement("canvas");Ft.width=kt.width,Ft.height=kt.height;const Ae=Ft.getContext("2d");if(!Ae)return lt;Ae.drawImage(kt,0,0);const tt=await new Promise((ut,pt)=>{Ft.toBlob(He=>He?ut(He):pt(new Error("Failed to encode image")),"image/jpeg",.92)}),Qe=(lt.name||"image").replace(/\.[^/.]+$/,"")||"image";return new File([tt],`${Qe}.jpg`,{type:"image/jpeg"})}finally{try{(Ge=kt==null?void 0:kt.close)==null||Ge.call(kt)}catch{}}})(E);if(W.size>O)return ee.error("Image must be 10MB or smaller."),!1;const ve=new FormData;ve.append("action","send-image-multipart"),ve.append("workspaceId",r.id),ve.append("recipientId",String(be.peerId)),ve.append("file",W,W.name||"image.jpg");const{data:X,error:Te}=await eu("instagram-connect",{body:ve});if(Te)throw Te;if(!(X!=null&&X.success))throw new Error((X==null?void 0:X.error)||"Failed to send image");const Me=X!=null&&X.messageId?String(X.messageId):null,Be=X!=null&&X.sentAt?String(X.sentAt):new Date().toISOString(),fe=X!=null&&X.imageUrl?String(X.imageUrl):null;we(null),pu.current&&(pu.current.value=""),Qa(null);const mt=fe?[{type:"image",source_url:fe,public_url:fe,content_type:E.type||null,size:E.size}]:[];je(lt=>[...Array.isArray(lt)?lt:[],{id:Me||`local-${Date.now()}`,message_id:Me,direction:"outbound",message_text:null,message_timestamp:Be,raw_payload:{conversation_key:be.conversationId,sent_via:"api",stored_attachments:mt}}]);const Dt=ws(Be)||Date.now();return Fo(be.conversationId,{atMs:Dt,messageId:Me,direction:"outbound",text:"Photo"}),es(be.conversationId,{lastAt:new Date(Dt),lastText:"Photo",lastDirection:"outbound",lastMessageId:Me},12e3),await Cn(),await rs(be),!0}catch(le){console.error("Send image error:",le);let W="";const ve=le==null?void 0:le.context;if(ve){try{const X=await ve.clone().json(),Te=String((X==null?void 0:X.error)||(X==null?void 0:X.message)||"").trim(),Me=X==null?void 0:X.details,Be=String((Me==null?void 0:Me.message)||((I=Me==null?void 0:Me.error)==null?void 0:I.message)||((se=Me==null?void 0:Me.error)==null?void 0:se.error_user_msg)||(Me==null?void 0:Me.error_user_msg)||"").trim();Te&&Be?W=`${Te}: ${Be}`:Te?W=Te:Be&&(W=Be)}catch{}if(!W)try{const X=String(await ve.clone().text()).trim();X&&(W=X)}catch{}!W&&Number.isFinite(ve==null?void 0:ve.status)&&(W=`Failed to send image (HTTP ${ve.status})`)}return ee.error(W||(le==null?void 0:le.message)||"Failed to send image"),!1}finally{Pt(!1)}},[r==null?void 0:r.id,t==null?void 0:t.id,be,Cn,rs,Fo,es]),XE=h.useCallback(async()=>{const E=Is.replace(/\s+/g," ").trim(),O=pr;if(!E&&!O||$t)return;(O?await YE(O):!0)&&E&&await Bg(E)},[Is,pr,$t,YE,Bg]),Ug=h.useCallback(async()=>{if(!(r!=null&&r.id)||Gr)return null;Vn(!0);try{const{data:E,error:O}=await z.from("workspaces").select("booking_url").eq("id",r.id).maybeSingle();if(O)throw O;const F=E!=null&&E.booking_url?String(E.booking_url).trim():"";return F||(ee.error("Set your booking URL in Settings  Integrations."),null)}catch(E){console.error("Load booking URL error:",E);const O=String((E==null?void 0:E.message)||"").toLowerCase();return O.includes("booking_url")&&O.includes("column")?ee.error("Missing DB column `booking_url`. Run migration `20260217213000_booking_links_inbox.sql`."):ee.error((E==null?void 0:E.message)||"Failed to load booking URL"),null}finally{Vn(!1)}},[r==null?void 0:r.id,Gr]),qz=h.useCallback(async()=>{const E=await Ug();if(E)try{await navigator.clipboard.writeText(E),ee.success("Booking link copied"),xr(!1)}catch{ee.error("Copy failed")}},[Ug]),zz=h.useCallback(async()=>{const E=await Ug();E&&(xr(!1),await Bg(E))},[Ug,Bg]);h.useCallback(()=>{if(!(be!=null&&be.conversationId))return;const E=new URLSearchParams;E.set("create","1"),E.set("conversation",be.conversationId),e(`/meetings?${E.toString()}`),xr(!1)},[e,be==null?void 0:be.conversationId]);const qg=h.useCallback(async(E,O)=>{if(!(r!=null&&r.id)||!(t!=null&&t.id))return;const F=O?O.toISOString():new Date().toISOString();et(le=>{const W=le||{},ve=Qh(W[E],F);return!ve||le&&W[E]===ve?le:{...W,[E]:ve}}),_(le=>le.map(W=>W.conversationId===E?{...W,sharedLastReadAt:(()=>{const ve=Qh(W.sharedLastReadAt?W.sharedLastReadAt.toISOString():null,F);return ve?new Date(ve):W.sharedLastReadAt})()}:W));const[{error:I},{error:se}]=await Promise.all([z.from("instagram_thread_reads").upsert({workspace_id:r.id,conversation_id:E,user_id:t.id,last_read_at:F},{onConflict:"workspace_id,conversation_id,user_id"}),z.from("instagram_threads").update({shared_last_read_at:F}).eq("workspace_id",r.id).eq("conversation_id",E)]);if(I&&console.warn("Mark read failed:",I),se){const le=`${String((se==null?void 0:se.message)||"")} ${String((se==null?void 0:se.details)||"")}`.toLowerCase();le.includes("shared_last_read_at")&&(le.includes("column")||le.includes("does not exist"))||console.warn("Update shared thread read marker failed:",se)}},[r==null?void 0:r.id,t==null?void 0:t.id]),Yr=h.useCallback((E,O)=>{const F=String((E==null?void 0:E.message)||(E==null?void 0:E.details)||"").trim(),I=`${F} ${String((E==null?void 0:E.hint)||"")}`.toLowerCase();return I.includes("failed to send a request to the edge function")?"Edge Function unreachable for project efpagcbqixencqosalgr. Deploy functions to this exact project and retry.":I.includes("lead_status")?"Missing DB column `lead_status`. Run migration `20260211100000_mochi_inbox_features.sql` on the same Supabase project used by this app.":I.includes("assigned_user_id")?"Missing DB column `assigned_user_id`. Run migration `20260211100000_mochi_inbox_features.sql` on the same Supabase project used by this app.":I.includes("is_spam")?"Missing DB column `is_spam`. Run migration `20260210153000_instagram_threads_spam.sql` on the same Supabase project used by this app.":I.includes("priority_snoozed_until")||I.includes("priority_followed_up_at")?"Missing priority workflow columns. Run migration `20260211100000_mochi_inbox_features.sql` on the same Supabase project used by this app.":I.includes("hidden_from_setters")||I.includes("shared_with_setters")?"Missing privacy columns for setter mode. Run migration `20260212201000_setter_workspace_enforcement.sql` on the same Supabase project used by this app.":I.includes("row-level security")||I.includes("permission denied")?"RLS blocked this action. Ensure your user is a member of the current workspace in `workspace_members` and thread policies are applied.":I.includes("instagram_threads")&&I.includes("does not exist")?"Table `instagram_threads` does not exist in this project. Run migration `20260210120000_instagram_threads_users_reads.sql`.":F||O},[]),QE=h.useCallback(async E=>{if(!(r!=null&&r.id))return{error:new Error("Workspace missing")};const{error:O}=await z.from("instagram_threads").upsert({workspace_id:r.id,instagram_account_id:E.instagramAccountId,conversation_id:E.conversationId,instagram_user_id:E.peerId,peer_username:E.peerUsername,peer_name:E.peerName,peer_profile_picture_url:E.peerPicture,priority:!!E.priority,hidden_from_setters:!!E.hiddenFromSetters,shared_with_setters:!!E.sharedWithSetters,assigned_user_id:E.assignedUserId,last_message_id:E.lastMessageId,last_message_text:E.lastText,last_message_direction:E.lastDirection,last_message_at:E.lastAt?E.lastAt.toISOString():null},{onConflict:"workspace_id,conversation_id"});return{error:O}},[r==null?void 0:r.id]),En=h.useCallback(async(E,O)=>{if(!(r!=null&&r.id))return{error:new Error("Workspace missing")};const F=async()=>await z.from("instagram_threads").update(O).eq("workspace_id",r.id).eq("conversation_id",E.conversationId).select("conversation_id").maybeSingle();let I=await F();if(I.error)return{error:I.error};if(I.data)return{error:null};const se=await QE(E);return se.error?{error:se.error}:(I=await F(),I.error?{error:I.error}:I.data?{error:null}:{error:new Error("Conversation row not found in instagram_threads")})},[r==null?void 0:r.id,QE]),qr=h.useCallback(async(E,O,F)=>{if(!(!(r!=null&&r.id)||!(t!=null&&t.id)))try{await z.from("instagram_thread_audit_log").insert({workspace_id:r.id,conversation_id:E,action:O,actor_user_id:t.id,details:F||{}})}catch{}},[r==null?void 0:r.id,t==null?void 0:t.id]),bu=h.useCallback(async(E,O,F)=>{if(!(!(r!=null&&r.id)||!(t!=null&&t.id)||E.length===0))try{await z.from("instagram_thread_audit_log").insert(E.map(I=>({workspace_id:r.id,conversation_id:I,action:O,actor_user_id:t.id,details:F||{}})))}catch{}},[r==null?void 0:r.id,t==null?void 0:t.id]);h.useCallback(async E=>{if(!(r!=null&&r.id))return;const O=Ca.map(le=>le).filter(le=>String(le.leadStatus||"open")!=="removed").slice(0,200),F=O.map(le=>le.conversationId);if(F.length===0){ee.message("No conversations available for bulk assign.");return}const I={};for(const le of O)I[le.conversationId]={assignedUserId:le.assignedUserId||null,hiddenFromSetters:!!le.hiddenFromSetters,sharedWithSetters:!!le.sharedWithSetters};ct(!0);const se={assignedUserId:E};E&&(se.hiddenFromSetters=!1,se.sharedWithSetters=!0),_(le=>le.map(W=>F.includes(W.conversationId)?{...W,...se}:W));try{const le={assigned_user_id:E};E&&(le.hidden_from_setters=!1,le.shared_with_setters=!0);const{error:W}=await z.from("instagram_threads").update(le).eq("workspace_id",r.id).in("conversation_id",F);if(W)throw W;await bu(F,"bulk_assign",{next_assigned_user_id:E}),ee.success(`Assigned ${F.length} conversations`)}catch(le){_(W=>W.map(ve=>{var X,Te,Me;return F.includes(ve.conversationId)?{...ve,assignedUserId:((X=I[ve.conversationId])==null?void 0:X.assignedUserId)??null,hiddenFromSetters:((Te=I[ve.conversationId])==null?void 0:Te.hiddenFromSetters)??!!ve.hiddenFromSetters,sharedWithSetters:((Me=I[ve.conversationId])==null?void 0:Me.sharedWithSetters)??!!ve.sharedWithSetters}:ve})),ee.error(Yr(le,"Failed bulk assign"))}finally{ct(!1)}},[r==null?void 0:r.id,Ca,bu,Yr]),h.useCallback(async E=>{if(!(r!=null&&r.id))return;if(!y){ee.error("Spam filter is not enabled yet (run the is_spam migration).");return}const O=Ca.map(se=>se).filter(se=>String(se.leadStatus||"open")!=="removed").slice(0,200),F=O.map(se=>se.conversationId);if(F.length===0){ee.message("No conversations available for bulk spam update.");return}const I={};for(const se of O)I[se.conversationId]=!!se.isSpam;ct(!0),_(se=>se.map(le=>F.includes(le.conversationId)?{...le,isSpam:E}:le));try{const{error:se}=await z.from("instagram_threads").update({is_spam:E}).eq("workspace_id",r.id).in("conversation_id",F);if(se)throw se;await bu(F,E?"bulk_mark_spam":"bulk_unspam",{is_spam:E}),ee.success(`${E?"Marked spam":"Unspammed"} ${F.length} conversations`)}catch(se){_(le=>le.map(W=>F.includes(W.conversationId)?{...W,isSpam:I[W.conversationId]}:W)),ee.error(Yr(se,"Failed bulk spam update"))}finally{ct(!1)}},[r==null?void 0:r.id,y,Ca,bu,Yr]),h.useCallback(async E=>{if(!(r!=null&&r.id))return;const O=Ca.map(se=>se).filter(se=>String(se.leadStatus||"open")!=="removed").slice(0,200),F=O.map(se=>se.conversationId);if(F.length===0){ee.message("No conversations available for bulk priority update.");return}const I={};for(const se of O)I[se.conversationId]={priority:!!se.priority,prioritySnoozedUntil:se.prioritySnoozedUntil||null};ct(!0),_(se=>se.map(le=>F.includes(le.conversationId)?{...le,priority:E,...E?{}:{prioritySnoozedUntil:null}}:le));try{const se={priority:E};E||(se.priority_snoozed_until=null);const{error:le}=await z.from("instagram_threads").update(se).eq("workspace_id",r.id).in("conversation_id",F);if(le)throw le;await bu(F,E?"bulk_pin":"bulk_unpin",{priority:E}),ee.success(`${E?"Pinned":"Unpinned"} ${F.length} conversations`)}catch(se){_(le=>le.map(W=>{var ve,X;return F.includes(W.conversationId)?{...W,priority:((ve=I[W.conversationId])==null?void 0:ve.priority)??!1,prioritySnoozedUntil:((X=I[W.conversationId])==null?void 0:X.prioritySnoozedUntil)??null}:W})),ee.error(Yr(se,"Failed bulk priority update"))}finally{ct(!1)}},[r==null?void 0:r.id,Ca,bu,Yr]);const Wz=h.useCallback(async E=>{if(!(r!=null&&r.id))return;const O=!E.priority;_(I=>I.map(se=>se.conversationId===E.conversationId?{...se,priority:O,...O?{}:{prioritySnoozedUntil:null}}:se)),es(E.conversationId,{priority:O,...O?{}:{prioritySnoozedUntil:null}});const F=await En(E,{priority:O,...O?{}:{priority_snoozed_until:null}});if(F.error){console.warn("Priority update failed:",F.error),_(I=>I.map(se=>se.conversationId===E.conversationId?{...se,priority:!O}:se)),$s(E.conversationId),ee.error(Yr(F.error,"Failed to update Priority"));return}$s(E.conversationId),qr(E.conversationId,O?"pin":"unpin",{priority:O})},[r==null?void 0:r.id,es,$s,En,Yr,qr]),Hz=h.useCallback(async E=>{if(!(r!=null&&r.id))return;if(!y){ee.error("Spam filter is not enabled yet (run the is_spam migration).");return}const O=!E.isSpam;_(I=>I.map(se=>se.conversationId===E.conversationId?{...se,isSpam:O}:se)),es(E.conversationId,{isSpam:O});const F=await En(E,{is_spam:O});if(F.error){console.warn("Spam update failed:",F.error),_(I=>I.map(se=>se.conversationId===E.conversationId?{...se,isSpam:!O}:se)),$s(E.conversationId),ee.error(Yr(F.error,"Failed to update Spam"));return}$s(E.conversationId),qr(E.conversationId,O?"mark_spam":"unspam",{is_spam:O})},[r==null?void 0:r.id,y,es,$s,En,Yr,qr]);h.useCallback(async(E,O)=>{if(!(r!=null&&r.id))return;const F=E.leadStatus;_(le=>le.map(W=>W.conversationId===E.conversationId?{...W,leadStatus:O}:W));const I={lead_status:O};O==="qualified"&&(I.qualified_at=new Date().toISOString(),I.removed_at=null),O==="removed"&&(I.removed_at=new Date().toISOString(),I.qualified_at=null),O==="open"&&(I.qualified_at=null,I.removed_at=null);const se=await En(E,I);if(se.error){_(le=>le.map(W=>W.conversationId===E.conversationId?{...W,leadStatus:F}:W)),ee.error(Yr(se.error,"Failed to update lead status"));return}qr(E.conversationId,`status_${O}`,{previous_status:F,next_status:O})},[r==null?void 0:r.id,En,Yr,qr]);const Vz=h.useCallback(async(E,O)=>{if(a!=="owner"){ee.error("Only workspace owners can assign conversations.");return}if(!(r!=null&&r.id))return;const F={assignedUserId:E.assignedUserId,hiddenFromSetters:E.hiddenFromSetters,sharedWithSetters:E.sharedWithSetters},I=O?!1:E.hiddenFromSetters,se=O?!0:E.sharedWithSetters;_(ve=>ve.map(X=>X.conversationId===E.conversationId?{...X,assignedUserId:O,...O?{hiddenFromSetters:I,sharedWithSetters:se}:{}}:X)),es(E.conversationId,{assignedUserId:O,...O?{hiddenFromSetters:I,sharedWithSetters:se}:{}},12e3);const le={assigned_user_id:O};O&&(le.hidden_from_setters=!1,le.shared_with_setters=!0);const W=await En(E,le);if(W.error){_(ve=>ve.map(X=>X.conversationId===E.conversationId?{...X,assignedUserId:F.assignedUserId,hiddenFromSetters:F.hiddenFromSetters,sharedWithSetters:F.sharedWithSetters}:X)),$s(E.conversationId),ee.error(Yr(W.error,"Failed to assign conversation"));return}$s(E.conversationId),qr(E.conversationId,"assign",{previous_assigned_user_id:F.assignedUserId,next_assigned_user_id:O})},[r==null?void 0:r.id,a,es,$s,En,Yr,qr]),Kz=h.useCallback(async(E,O)=>{if(a!=="owner"){ee.error("Only workspace owners can change lead privacy.");return}if(!(r!=null&&r.id))return;const F=typeof O.hiddenFromSetters=="boolean"?O.hiddenFromSetters:E.hiddenFromSetters,I=typeof O.hiddenFromSetters=="boolean"?!O.hiddenFromSetters:typeof O.sharedWithSetters=="boolean"?O.sharedWithSetters:E.sharedWithSetters,se=F?!1:!!I,le={hiddenFromSetters:E.hiddenFromSetters,sharedWithSetters:E.sharedWithSetters,assignedUserId:E.assignedUserId};_(X=>X.map(Te=>Te.conversationId===E.conversationId?{...Te,hiddenFromSetters:F,sharedWithSetters:se,assignedUserId:F?null:Te.assignedUserId}:Te));const W={hidden_from_setters:F,shared_with_setters:se};F&&(W.assigned_user_id=null);const ve=await En(E,W);if(ve.error){_(X=>X.map(Te=>Te.conversationId===E.conversationId?{...Te,hiddenFromSetters:le.hiddenFromSetters,sharedWithSetters:le.sharedWithSetters,assignedUserId:le.assignedUserId}:Te)),ee.error(Yr(ve.error,"Failed to update lead privacy"));return}await qr(E.conversationId,"visibility_update",{previous_hidden_from_setters:le.hiddenFromSetters,next_hidden_from_setters:F,previous_shared_with_setters:le.sharedWithSetters,next_shared_with_setters:se})},[r==null?void 0:r.id,a,En,Yr,qr]);h.useCallback(async E=>{if(!(r!=null&&r.id))return;const O=new Date(Date.now()+24*60*60*1e3);_(I=>I.map(se=>se.conversationId===E.conversationId?{...se,prioritySnoozedUntil:O}:se));const F=await En(E,{priority_snoozed_until:O.toISOString()});if(F.error){_(I=>I.map(se=>se.conversationId===E.conversationId?{...se,prioritySnoozedUntil:E.prioritySnoozedUntil}:se)),ee.error(Yr(F.error,"Failed to snooze"));return}qr(E.conversationId,"priority_snooze_24h",{snoozed_until:O.toISOString()})},[r==null?void 0:r.id,En,Yr,qr]),h.useCallback(async E=>{if(!(r!=null&&r.id))return;const O=new Date().toISOString();_(I=>I.map(se=>se.conversationId===E.conversationId?{...se,priorityFollowedUpAt:new Date(O),prioritySnoozedUntil:null}:se));const F=await En(E,{priority_followed_up_at:O,priority_snoozed_until:null});if(F.error){_(I=>I.map(se=>se.conversationId===E.conversationId?{...se,priorityFollowedUpAt:E.priorityFollowedUpAt,prioritySnoozedUntil:E.prioritySnoozedUntil}:se)),ee.error(Yr(F.error,"Failed to mark followed up"));return}qr(E.conversationId,"priority_followed_up",{at:O})},[r==null?void 0:r.id,En,Yr,qr]);const JE=h.useCallback(async(E,O)=>{if(!(r!=null&&r.id)||!(t!=null&&t.id))return;const I=new Set(N[E]||[]).has(O),se=N[E]||[];if(A(W=>{const ve={...W},X=new Set(ve[E]||[]);return I?X.delete(O):X.add(O),ve[E]=Array.from(X),ve}),I){const{error:W}=await z.from("instagram_conversation_tags").delete().eq("workspace_id",r.id).eq("conversation_id",E).eq("tag_id",O);if(W){A(ve=>({...ve,[E]:se})),ee.error((W==null?void 0:W.message)||"Failed to remove tag");return}qr(E,"remove_tag",{tag_id:O});return}const{error:le}=await z.from("instagram_conversation_tags").insert({workspace_id:r.id,conversation_id:E,tag_id:O,source:"manual",created_by:t.id});if(le&&String((le==null?void 0:le.code)||"")!=="23505"){A(W=>({...W,[E]:se})),ee.error((le==null?void 0:le.message)||"Failed to apply tag");return}qr(E,"apply_tag",{tag_id:O})},[r==null?void 0:r.id,t==null?void 0:t.id,N,qr]);h.useCallback(async()=>{if(!(r!=null&&r.id)||!(t!=null&&t.id)||!be)return;const E=Wt.trim();if(!E){ee.error("Tag name is required");return}wt(!0);try{const O=C.find(W=>ai(W.name)===ai(E)),F=(O==null?void 0:O.id)||null;let I=O||null;if(!I){const{data:W,error:ve}=await z.from("instagram_tags").insert({workspace_id:r.id,name:E,color:Ur||"#3b82f6",icon:ur||"tag",prompt:null,created_by:t.id}).select("id,name,color,icon,prompt").maybeSingle();if(ve)throw ve;if(!(W!=null&&W.id))throw new Error("Failed to create custom tag");I={id:String(W.id),name:String(W.name||E),color:String(W.color||Ur||"#3b82f6"),icon:W.icon?String(W.icon):String(ur||"tag"),prompt:W.prompt?String(W.prompt):null},j(X=>X.some(Te=>Te.id===I.id)?X:[...X,I])}const se=F||I.id,{error:le}=await z.from("instagram_conversation_tags").insert({workspace_id:r.id,conversation_id:be.conversationId,tag_id:se,source:"manual",created_by:t.id});if(le&&String((le==null?void 0:le.code)||"")!=="23505")throw le;A(W=>{const ve=new Set(W[be.conversationId]||[]);return ve.add(se),{...W,[be.conversationId]:Array.from(ve)}}),qr(be.conversationId,"apply_tag",{tag_id:se}),Jt(""),mr("tag"),ke("#3b82f6"),ee.success(O?"Custom tag applied":"Custom tag created")}catch(O){ee.error((O==null?void 0:O.message)||"Failed to create custom tag")}finally{wt(!1)}},[r==null?void 0:r.id,t==null?void 0:t.id,be,Wt,Ur,ur,C,qr]),h.useCallback(async E=>{if(!(r!=null&&r.id))return;const O=ai(E.name),F=Ln(O,"hot")||Ln(O,"warm")||Ln(O,"cold");if(O==="priority"||O==="qualified"||O==="disqualified"||O==="spam"||F){ee.error("Default tags cannot be deleted");return}const I=C,se=N;Os(E.id),j(le=>le.filter(W=>W.id!==E.id)),A(le=>{const W={};for(const ve of Object.keys(le))W[ve]=(le[ve]||[]).filter(X=>X!==E.id);return W});try{const{error:le}=await z.from("instagram_conversation_tags").delete().eq("workspace_id",r.id).eq("tag_id",E.id);if(le)throw le;const{error:W}=await z.from("instagram_tags").delete().eq("workspace_id",r.id).eq("id",E.id);if(W)throw W;ee.success("Custom tag deleted")}catch(le){j(I),A(se),ee.error((le==null?void 0:le.message)||"Failed to delete custom tag")}finally{Os(null)}},[r==null?void 0:r.id,C,N]);const ZE=h.useCallback(async E=>{const O=Na[E];if(O)return O;if(!(r!=null&&r.id)||!(t!=null&&t.id))return null;const F=CIe[E],I=X=>({id:String(X.id),name:String(X.name||F.name),color:String(X.color||F.color),icon:X.icon?String(X.icon):null,prompt:X.prompt?String(X.prompt):null});let se=null;const{data:le,error:W}=await z.from("instagram_tags").insert({workspace_id:r.id,name:F.name,color:F.color,icon:F.icon,prompt:F.prompt,created_by:t.id}).select("id,name,color,icon,prompt").maybeSingle();if(!W&&le)se=le;else{const{data:X}=await z.from("instagram_tags").select("id,name,color,icon,prompt").eq("workspace_id",r.id),Te=(Array.isArray(X)?X:[]).find(Me=>Ln(String((Me==null?void 0:Me.name)||""),E));if(!Te)return ee.error(`Create "${F.name}" in Settings to use this action.`),null;se=Te}const ve=I(se);return j(X=>X.some(Te=>Te.id===ve.id)?X:[...X,ve]),ve},[Na,r==null?void 0:r.id,t==null?void 0:t.id]),Gz=h.useCallback(async(E,O)=>{if(!(r!=null&&r.id)||!(t!=null&&t.id))return;const F=await ZE(O);if(!F)return;const I=new Set(["hot","warm","cold"].map(ve=>{var X;return(X=Na[ve])==null?void 0:X.id}).filter(Boolean));I.add(F.id);const se=E.conversationId,le=new Set(N[se]||[]),W=new Set(le);for(const ve of Array.from(W))I.has(ve)&&ve!==F.id&&W.delete(ve);W.add(F.id),A(ve=>({...ve,[se]:Array.from(W)}));try{const ve=Array.from(le).filter(X=>I.has(X)&&X!==F.id);for(const X of ve){const{error:Te}=await z.from("instagram_conversation_tags").delete().eq("workspace_id",r.id).eq("conversation_id",se).eq("tag_id",X);if(Te)throw Te}if(!le.has(F.id)){const{error:X}=await z.from("instagram_conversation_tags").insert({workspace_id:r.id,conversation_id:se,tag_id:F.id,source:"manual",created_by:t.id});if(X)throw X}qr(se,"set_temperature",{level:O,tag_id:F.id})}catch{A(ve=>({...ve,[se]:Array.from(le)})),ee.error("Failed to update lead temperature")}},[r==null?void 0:r.id,t==null?void 0:t.id,N,ZE,Na,qr]),eA=h.useCallback(async E=>{const O=ts[E];if(O)return O;if(!(r!=null&&r.id)||!(t!=null&&t.id)||a==="setter")return null;const F=Fh[E],I=X=>({id:String(X.id),name:String(X.name||F.name),color:String(X.color||F.color),icon:X.icon?String(X.icon):F.icon,prompt:X.prompt?String(X.prompt):F.prompt});let se=null;const{data:le,error:W}=await z.from("instagram_tags").insert({workspace_id:r.id,name:F.name,color:F.color,icon:F.icon,prompt:F.prompt,created_by:t.id}).select("id,name,color,icon,prompt").maybeSingle();if(!W&&le)se=le;else{const{data:X}=await z.from("instagram_tags").select("id,name,color,icon,prompt").eq("workspace_id",r.id),Te=(Array.isArray(X)?X:[]).find(Me=>Us(String((Me==null?void 0:Me.name)||""))===E);if(!Te)return ee.error(`Create "${F.name}" in Settings to use this action.`),null;se=Te}const ve=I(se);return j(X=>X.some(Te=>Te.id===ve.id)?X:[...X,ve]),ve},[ts,r==null?void 0:r.id,t==null?void 0:t.id,a]),Yz=h.useCallback(async(E,O)=>{if(!(r!=null&&r.id))return;const F=E.conversationId;if(!F)return;const I=N[F]||[],se=new Set(I),le=new Set;for(const Me of C)Us(Me==null?void 0:Me.name)&&le.add(Me.id);const W=E.leadStatus,ve=O==="qualified"?"qualified":O==="unqualified"?"disqualified":"open",X=ts[O]||await eA(O);if(!(X!=null&&X.id)){ee.error("Phase tags are missing. Run migrations or connect Instagram to seed them.");return}le.add(X.id);const Te=new Set(se);for(const Me of Array.from(Te))le.has(Me)&&Te.delete(Me);Te.add(X.id),A(Me=>({...Me,[F]:Array.from(Te)})),_(Me=>Me.map(Be=>Be.conversationId===F?{...Be,leadStatus:ve}:Be));try{const Me=Array.from(se).filter(fe=>le.has(fe)&&fe!==X.id);if(Me.length>0){const{error:fe}=await z.from("instagram_conversation_tags").delete().eq("workspace_id",r.id).eq("conversation_id",F).in("tag_id",Me);if(fe)throw fe}if(!se.has(X.id)){const{error:fe}=await z.from("instagram_conversation_tags").insert({workspace_id:r.id,conversation_id:F,tag_id:X.id,source:"manual",created_by:(t==null?void 0:t.id)||null});if(fe&&String((fe==null?void 0:fe.code)||"")!=="23505")throw fe}const Be=await En(E,{lead_status:ve});if(Be.error)throw Be.error;qr(F,"set_phase",{phase:O,lead_status:ve,tag_id:X.id})}catch(Me){A(Be=>({...Be,[F]:I})),_(Be=>Be.map(fe=>fe.conversationId===F?{...fe,leadStatus:W}:fe)),ee.error(Yr(Me,"Failed to update phase"))}},[r==null?void 0:r.id,t==null?void 0:t.id,C,ts,eA,N,En,Yr,qr]),tA=h.useCallback((E,O)=>{const F=Ge=>{if(!Ge)return 0;const Ft=typeof Ge=="number"?Ge:Number(Ge);if(Number.isFinite(Ft)&&String(Ge).trim().match(/^\d{10,13}$/))return Ft<1e12?Ft*1e3:Ft;const Ae=Date.parse(String(Ge));return Number.isFinite(Ae)?Ae:0},I=Ge=>{var Ft,Ae;return F(Ge==null?void 0:Ge.message_timestamp)||F((Ft=Ge==null?void 0:Ge.raw_payload)==null?void 0:Ft.created_time)||F((Ae=Ge==null?void 0:Ge.raw_payload)==null?void 0:Ae.timestamp)||F(Ge==null?void 0:Ge.created_at)},se=Ge=>{const Ft=String(E.peerId||""),Ae=(Ge==null?void 0:Ge.sender_id)!=null?String(Ge.sender_id):"",tt=(Ge==null?void 0:Ge.recipient_id)!=null?String(Ge.recipient_id):"";if(Ae&&Ft&&Ae===Ft)return!1;if(tt&&Ft&&tt===Ft)return!0;const Qe=String(E.instagramAccountId||"");if(Ae&&Qe&&Ae===Qe)return!0;if(tt&&Qe&&tt===Qe)return!1;const ut=Ge!=null&&Ge.direction?String(Ge.direction):"";return ut==="outbound"},le=Ge=>{var Qe,ut,pt;const Ft=(Ge==null?void 0:Ge.message_text)??((Qe=Ge==null?void 0:Ge.raw_payload)==null?void 0:Qe.message)??((ut=Ge==null?void 0:Ge.raw_payload)==null?void 0:ut.text)??"",Ae=typeof Ft=="string"?Ft.trim():String(Ft||"").trim();return Ae||((Array.isArray((pt=Ge==null?void 0:Ge.raw_payload)==null?void 0:pt.stored_attachments)?Ge.raw_payload.stored_attachments:[]).length>0?"[attachment]":"")},W=(Array.isArray(O)?O:[]).map((Ge,Ft)=>({m:Ge,index:Ft})).sort((Ge,Ft)=>{const Ae=I(Ge.m),tt=I(Ft.m);return Ae!==tt?Ae-tt:Ge.index-Ft.index}).map(Ge=>Ge.m);if(W.length===0)return"No messages available yet. Send a message to start this conversation and generate a richer summary.";let ve=0,X=0,Te="",Me="",Be=0,fe=0;for(const Ge of W){const Ft=se(Ge),Ae=I(Ge),tt=le(Ge);Ft?(X+=1,Ae>=fe&&tt&&(fe=Ae,Me=tt)):(ve+=1,Ae>=Be&&tt&&(Be=Ae,Te=tt))}const mt=W[W.length-1],Dt=le(mt),lt=se(mt),St=Bh(E),kt=Be>fe?"Lead spoke last. Follow up quickly with a concrete next step.":"You spoke last. If no response soon, send a short bump message.";return[`${St} thread: ${W.length} messages (${ve} inbound, ${X} outbound).`,Dt?`Latest message (${lt?"you":"lead"}): ${Dt.slice(0,220)}`:null,Te?`Lead context: ${Te.slice(0,180)}`:null,Me?`Your last reply: ${Me.slice(0,180)}`:null,`Recommended action: ${kt}`].filter(Boolean).join(`
`)},[]),Lw=h.useCallback(async(E=!1)=>{if(!(!(r!=null&&r.id)||!be)){H(!0);try{const O=async le=>{const{data:W,error:ve}=await Hu({action:"summarize-conversation",workspaceId:r.id,conversationId:be.conversationId,forceRefresh:le});if(ve)throw ve;if(!(W!=null&&W.success))throw new Error((W==null?void 0:W.error)||"Failed to summarize");return W};let F=null;try{F=await O(E)}catch{F=await O(!0)}const I=F!=null&&F.summary?String(F.summary):null,se=F!=null&&F.updatedAt?new Date(String(F.updatedAt)):new Date;_(le=>le.map(W=>W.conversationId===be.conversationId?{...W,summaryText:I,summaryUpdatedAt:se}:W))}catch{const F=tA(be,Ds),I=new Date;_(le=>le.map(W=>W.conversationId===be.conversationId?{...W,summaryText:F,summaryUpdatedAt:I}:W));const se=await En(be,{summary_text:F,summary_updated_at:I.toISOString()});se.error&&console.warn("Local summary persist failed:",se.error)}finally{H(!1)}}},[r==null?void 0:r.id,be,Ds,tA,En]),zg=h.useCallback(async E=>{if(r!=null&&r.id&&!Mw.current){Mw.current=!0,E!=null&&E.silent||U(!0);try{const{data:O,error:F}=await Hu({action:"scan-alerts",workspaceId:r.id});if(F)throw F;if(!(O!=null&&O.success))throw new Error((O==null?void 0:O.error)||"Alert scan failed");await xu(),E!=null&&E.silent||ee.success(`Alerts scanned (${Number((O==null?void 0:O.opened)||0)} opened)`)}catch(O){if(E!=null&&E.silent)console.warn("Silent alert scan failed:",(O==null?void 0:O.message)||O);else{const F=await Ru(O,"Failed to scan alerts","inbox-ai");ee.error(F)}}finally{E!=null&&E.silent||U(!1),Mw.current=!1}}},[r==null?void 0:r.id,xu]),Xz=h.useCallback(async E=>{if(r!=null&&r.id)try{const{data:O,error:F}=await Hu({action:"resolve-alert",workspaceId:r.id,alertId:E});if(F)throw F;if(!(O!=null&&O.success))throw new Error((O==null?void 0:O.error)||"Resolve failed");T(I=>I.filter(se=>se.id!==E))}catch(O){const F=await Ru(O,"Failed to resolve alert","inbox-ai");ee.error(F)}},[r==null?void 0:r.id]);h.useCallback(async(E,O)=>{var F;if(r!=null&&r.id){M(!0);try{const{data:I,error:se}=await Hu({action:"retag-start",workspaceId:r.id,tagId:E,onlyLast30Days:O});if(se)throw se;if(!(I!=null&&I.success)||!((F=I==null?void 0:I.job)!=null&&F.id))throw new Error((I==null?void 0:I.error)||"Failed to start retag");re(I.job),ee.success("Retag job started")}catch(I){M(!1);const se=await Ru(I,"Failed to start retag","inbox-ai");ee.error(se)}}},[r==null?void 0:r.id]);const Wg=h.useCallback(async E=>{if(r!=null&&r.id&&!Re.current){Re.current=!0,b(!0);try{const{data:O,error:F}=await z.functions.invoke("instagram-connect",{body:{action:"sync-messages",workspaceId:r.id,...E!=null&&E.fast?{maxConversations:20,maxPages:1,messagesLimit:25}:{}}});if(F)throw console.error("Sync error:",F),F;if(!(O!=null&&O.success))throw new Error((O==null?void 0:O.error)||"Sync failed");R(new Date),Se({conversationsFetched:Number((O==null?void 0:O.conversationsFetched)||0),conversationsWithMessages:Number((O==null?void 0:O.conversationsWithMessages)||0),messagesUpserted:Number((O==null?void 0:O.messagesUpserted)||0),warnings:Array.isArray(O==null?void 0:O.warnings)?O.warnings:[],errors:Array.isArray(O==null?void 0:O.errors)?O.errors:[],lastError:null});const I=Number((O==null?void 0:O.messagesUpserted)||0),se=Number((O==null?void 0:O.conversationsFetched)||0);E!=null&&E.silent||(I>0?ee.success(`Updated inbox (${I} messages)`):ee.message(`Inbox updated (${se} conversations checked)`)),await Cn({baselineReads:!0}),be&&await rs(be),a==="owner"&&zg({silent:!0})}catch(O){const F=await Ru(O,"Failed to sync messages","instagram-connect");Se(I=>({...I,lastError:F||"Sync failed"})),E!=null&&E.silent||ee.error(F||"Failed to sync messages")}finally{b(!1),Re.current=!1}}},[r==null?void 0:r.id,Cn,be,rs,a,zg]),rA=h.useCallback(async()=>{if(r!=null&&r.id&&!de.current){de.current=!0;try{let E=null,O=!1,F=0;for(;!O&&F<200;){F+=1;const{data:I,error:se}=await z.functions.invoke("instagram-connect",{body:{action:"sync-conversations",workspaceId:r.id,pageUrl:E,maxPages:10}});if(se)throw se;if(!(I!=null&&I.success))throw new Error((I==null?void 0:I.error)||"Backfill failed");E=I!=null&&I.nextPageUrl?String(I.nextPageUrl):null,O=!!(I!=null&&I.done)||!E,F%3===0&&await Cn()}await Cn({baselineReads:!0})}catch(E){const O=await Ru(E,"Failed to backfill conversations","instagram-connect");if(String(O||(E==null?void 0:E.message)||"").toLowerCase().includes("invalid action"))try{const{data:I,error:se}=await z.functions.invoke("instagram-connect",{body:{action:"sync-messages",workspaceId:r.id,maxConversations:250,maxPages:50,messagesLimit:25}});if(se)throw se;if(!(I!=null&&I.success))throw new Error((I==null?void 0:I.error)||"Sync failed");await Cn({baselineReads:!0})}catch(I){console.warn("Automatic full sync fallback failed:",I)}else console.warn("Automatic conversation backfill failed:",O||(E==null?void 0:E.message)||E)}finally{de.current=!1}}},[r==null?void 0:r.id,Cn]);h.useEffect(()=>{if(!(r!=null&&r.id)||!l||a!=="owner")return;let E=!1;const O=()=>{E||zg({silent:!0})},F=setTimeout(O,2e3),I=setInterval(()=>{document.visibilityState==="visible"&&O()},5*6e4);return()=>{E=!0,clearTimeout(F),clearInterval(I)}},[r==null?void 0:r.id,l,a,zg]),h.useEffect(()=>{if(!(r!=null&&r.id)||!l)return;let E=!1;const O=async()=>{E||await Wg({silent:!0,fast:!0})},F=setTimeout(O,250),I=setInterval(()=>{document.visibilityState==="visible"&&O()},jIe),se=()=>O();return window.addEventListener("focus",se),()=>{E=!0,clearTimeout(F),clearInterval(I),window.removeEventListener("focus",se)}},[r==null?void 0:r.id,l,Wg]),h.useEffect(()=>{if(!(r!=null&&r.id)||!l||G.current===r.id)return;G.current=r.id;const E=setTimeout(()=>{rA()},250);return()=>clearTimeout(E)},[r==null?void 0:r.id,l,rA]),h.useEffect(()=>{if(!(r!=null&&r.id)||!l)return;const E=z.channel(`ig_messages:${r.id}`).on("postgres_changes",{event:"*",schema:"public",table:"instagram_threads",filter:`workspace_id=eq.${r.id}`},O=>{try{const F=String((O==null?void 0:O.eventType)||""),I=F==="DELETE"?O==null?void 0:O.old:O==null?void 0:O.new,se=I!=null&&I.conversation_id?String(I.conversation_id):"";if(!se)return;if(F==="DELETE"){_(Me=>Me.filter(Be=>Be.conversationId!==se));return}const le=Me=>{if(!Me)return null;const Be=new Date(String(Me));return Number.isFinite(Be.getTime())?Be:null},W=(I==null?void 0:I.lead_status)!=null?String(I.lead_status):"",ve=W==="qualified"||W==="disqualified"||W==="removed"?W:W?"open":null,X={};(I==null?void 0:I.priority)!==void 0&&(X.priority=!!I.priority),(I==null?void 0:I.is_spam)!==void 0&&(X.isSpam=!!I.is_spam),(I==null?void 0:I.hidden_from_setters)!==void 0&&(X.hiddenFromSetters=!!I.hidden_from_setters),(I==null?void 0:I.shared_with_setters)!==void 0&&(X.sharedWithSetters=!!I.shared_with_setters),(I==null?void 0:I.assigned_user_id)!==void 0&&(X.assignedUserId=I.assigned_user_id?String(I.assigned_user_id):null),ve&&(X.leadStatus=ve),(I==null?void 0:I.priority_snoozed_until)!==void 0&&(X.prioritySnoozedUntil=le(I.priority_snoozed_until)),(I==null?void 0:I.priority_followed_up_at)!==void 0&&(X.priorityFollowedUpAt=le(I.priority_followed_up_at)),(I==null?void 0:I.summary_text)!==void 0&&(X.summaryText=I.summary_text?String(I.summary_text):null),(I==null?void 0:I.summary_updated_at)!==void 0&&(X.summaryUpdatedAt=le(I.summary_updated_at)),(I==null?void 0:I.ai_phase_updated_at)!==void 0&&(X.aiPhaseUpdatedAt=le(I.ai_phase_updated_at)),(I==null?void 0:I.ai_phase_confidence)!==void 0&&(X.aiPhaseConfidence=(I==null?void 0:I.ai_phase_confidence)!=null&&Number.isFinite(Number(I.ai_phase_confidence))?Number(I.ai_phase_confidence):null),(I==null?void 0:I.ai_temperature_confidence)!==void 0&&(X.aiTemperatureConfidence=(I==null?void 0:I.ai_temperature_confidence)!=null&&Number.isFinite(Number(I.ai_temperature_confidence))?Number(I.ai_temperature_confidence):null),(I==null?void 0:I.ai_phase_reason)!==void 0&&(X.aiPhaseReason=I.ai_phase_reason?String(I.ai_phase_reason):null),(I==null?void 0:I.ai_phase_mode)!==void 0&&(X.aiPhaseMode=I.ai_phase_mode==="shadow"||I.ai_phase_mode==="enforce"?I.ai_phase_mode:null),(I==null?void 0:I.ai_phase_last_run_source)!==void 0&&(X.aiPhaseLastRunSource=I.ai_phase_last_run_source==="incremental"||I.ai_phase_last_run_source==="catchup"||I.ai_phase_last_run_source==="backfill"||I.ai_phase_last_run_source==="manual_rephase"?I.ai_phase_last_run_source:null),(I==null?void 0:I.shared_last_read_at)!==void 0&&(X.sharedLastReadAt=le(I.shared_last_read_at)),(I==null?void 0:I.last_inbound_at)!==void 0&&(X.lastInboundAt=le(I.last_inbound_at)),(I==null?void 0:I.last_outbound_at)!==void 0&&(X.lastOutboundAt=le(I.last_outbound_at)),(I==null?void 0:I.last_message_id)!==void 0&&(X.lastMessageId=I.last_message_id?String(I.last_message_id):null),(I==null?void 0:I.last_message_text)!==void 0&&(X.lastText=I.last_message_text?String(I.last_message_text):null),(I==null?void 0:I.last_message_at)!==void 0&&(X.lastAt=le(I.last_message_at)),(I==null?void 0:I.last_message_direction)!==void 0&&(X.lastDirection=I.last_message_direction==="inbound"||I.last_message_direction==="outbound"?I.last_message_direction:null);let Te=!1;_(Me=>{const Be=Me.findIndex(Dt=>Dt.conversationId===se);if(Be<0)return Te=!0,Me;const fe={...Me[Be],...X},mt=[...Me.slice(0,Be),fe,...Me.slice(Be+1)];return mt.sort((Dt,lt)=>{var St,kt;return(((St=lt.lastAt)==null?void 0:St.getTime())||0)-(((kt=Dt.lastAt)==null?void 0:kt.getTime())||0)}),mt}),Te&&Mg({forceFull:!0})}catch{Cn()}}).on("postgres_changes",{event:"*",schema:"public",table:"instagram_thread_reads",filter:`workspace_id=eq.${r.id}`},O=>{try{if(String((O==null?void 0:O.eventType)||"")==="DELETE")return;const I=O==null?void 0:O.new,se=I!=null&&I.conversation_id?String(I.conversation_id):null,le=I!=null&&I.last_read_at?String(I.last_read_at):null;if(!se||!le)return;et(W=>{const ve=W||{},X=Qh(ve[se],le);return!X||W&&ve[se]===X?W:{...ve,[se]:X}})}catch{}}).on("postgres_changes",{event:"INSERT",schema:"public",table:"instagram_messages",filter:`workspace_id=eq.${r.id}`},O=>{var F;Cn();try{const I=O==null?void 0:O.new,se=(F=I==null?void 0:I.raw_payload)!=null&&F.conversation_key?String(I.raw_payload.conversation_key):null,le=I!=null&&I.instagram_user_id?String(I.instagram_user_id):null,W=I!=null&&I.instagram_account_id?String(I.instagram_account_id):null,ve=se||(W&&le?`${W}:${le}`:null);if(ve&&Vv(I)){const X=Kv(I)||Date.now(),Te=I!=null&&I.message_id?String(I.message_id):I!=null&&I.id?String(I.id):null,Me=Hv(I,{instagramAccountId:W,peerId:le}),Be=k_(I);Fo(ve,{atMs:X,messageId:Te,direction:Me,text:Be}),Me==="outbound"&&qg(ve,new Date(X))}if(!be)return;if(se&&se===be.conversationId){const X=I!=null&&I.message_id?String(I.message_id):I!=null&&I.id?String(I.id):"";X&&(Gl.current=X),je(Te=>{const Me=Array.isArray(Te)?Te:[];return!X||Me.some(fe=>String((fe==null?void 0:fe.message_id)||(fe==null?void 0:fe.id)||"")===X)?Me:[...Me,I]});return}if(le&&W&&be.peerId===le&&be.instagramAccountId===W){const X=I!=null&&I.message_id?String(I.message_id):I!=null&&I.id?String(I.id):"";X&&(Gl.current=X),je(Te=>{const Me=Array.isArray(Te)?Te:[];return!X||Me.some(fe=>String((fe==null?void 0:fe.message_id)||(fe==null?void 0:fe.id)||"")===X)?Me:[...Me,I]})}}catch{}}).on("postgres_changes",{event:"*",schema:"public",table:"instagram_conversation_tags",filter:`workspace_id=eq.${r.id}`},()=>Cn()).on("postgres_changes",{event:"*",schema:"public",table:"instagram_tags",filter:`workspace_id=eq.${r.id}`},()=>Xl()).on("postgres_changes",{event:"*",schema:"public",table:"instagram_alerts",filter:`workspace_id=eq.${r.id}`},()=>xu()).on("postgres_changes",{event:"INSERT",schema:"public",table:"lead_team_messages",filter:`workspace_id=eq.${r.id}`},O=>{try{const F=O==null?void 0:O.new;if(!(F!=null&&F.id)||!(F!=null&&F.conversation_id)||!(F!=null&&F.author_user_id))return;Fg({id:String(F.id),workspaceId:String(F.workspace_id||r.id),conversationId:String(F.conversation_id),authorUserId:String(F.author_user_id),body:String(F.body||""),createdAt:new Date(String(F.created_at||new Date().toISOString()))})}catch{}}).subscribe();return()=>{z.removeChannel(E)}},[r==null?void 0:r.id,l,Cn,be,rs,Xl,xu,Fg,Fo,Mg,qg]),h.useEffect(()=>{if(!(r!=null&&r.id)||!l)return;$w.current=r.id,fh.current=Date.now()-1e4;let E=!1;const O=()=>{E||document.visibilityState==="visible"&&Mg()},F=setTimeout(O,1200),I=setInterval(O,kIe),se=()=>O();return window.addEventListener("focus",se),()=>{E=!0,clearTimeout(F),clearInterval(I),window.removeEventListener("focus",se)}},[r==null?void 0:r.id,l,Mg]),h.useEffect(()=>{if(!(r!=null&&r.id)||!l)return;let E=!1;const O=()=>{E||document.visibilityState==="visible"&&Ig()},F=setTimeout(O,900),I=setInterval(O,NIe),se=()=>O();return window.addEventListener("focus",se),()=>{E=!0,clearTimeout(F),clearInterval(I),window.removeEventListener("focus",se)}},[r==null?void 0:r.id,l,Ig]),h.useEffect(()=>{!(r!=null&&r.id)||!(t!=null&&t.id)||!l||Cn({baselineReads:!0})},[r==null?void 0:r.id,t==null?void 0:t.id,l,Cn]),h.useEffect(()=>{!(r!=null&&r.id)||!l||(Xl(),xu())},[r==null?void 0:r.id,l,Xl,xu]),h.useEffect(()=>{if(!(r!=null&&r.id)||!($!=null&&$.id)||!B)return;let E=!1;const O=async()=>{if(!E)try{const{data:I,error:se}=await Hu({action:"retag-step",workspaceId:r.id,jobId:$.id});if(se)throw se;if(!(I!=null&&I.success)||!(I!=null&&I.job))throw new Error((I==null?void 0:I.error)||"Retag step failed");re(I.job);const le=String(I.job.status||"");(le==="completed"||le==="failed")&&(M(!1),await Cn(),await Xl(),le==="completed"?ee.success("Retag complete"):ee.error(I.job.error||"Retag failed"))}catch(I){M(!1);const se=await Ru(I,"Retag step failed","inbox-ai");ee.error(se)}},F=setInterval(O,1200);return O(),()=>{E=!0,clearInterval(F)}},[r==null?void 0:r.id,$==null?void 0:$.id,B,Cn,Xl]),h.useEffect(()=>{if(!be){oe(!1),je([]);return}oe(!0),je([]),rs(be),Wg({silent:!0,fast:!0}),be.summaryText||Lw(!1)},[be==null?void 0:be.conversationId]);const Qz=async()=>{v(!0);try{if(!(r!=null&&r.id))throw new Error("No workspace selected. Please refresh and try again.");sessionStorage.setItem("ig_connect_workspace_id",r.id);const{data:E,error:O}=await z.functions.invoke("instagram-connect",{body:{action:"get-auth-url",workspaceId:r.id}});if(O)throw console.error("Instagram get-auth-url error:",O),new Error(O.message||"Failed to start Instagram connection.");const F=E==null?void 0:E.authUrl;if(!F)throw new Error("No auth URL returned from server.");window.location.href=F}catch(E){console.error("Instagram connect error:",E),ee.error(E.message||"Failed to connect Instagram")}finally{v(!1)}};return!(r!=null&&r.id)&&!f?s.jsx(Er,{children:s.jsx("div",{className:"h-full min-h-[calc(100vh-4rem)] flex flex-col items-center justify-center bg-black px-4",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("p",{className:"text-white/70 text-sm mb-2 leading-relaxed",children:"No workspace selected."}),s.jsx("p",{className:"text-white/40 text-xs leading-relaxed",children:"Refresh the page. If this keeps happening, sign out and sign back in so we can reattach you to a workspace."}),s.jsx("div",{className:"mt-6",children:s.jsx(Pf,{size:"sm",onClick:()=>window.location.reload(),className:"gap-2",children:"Reload"})})]})})}):f?s.jsx(Er,{fullWidth:!0,scrollable:!1,children:s.jsx(H5e,{})}):l?s.jsxs(Er,{fullWidth:!0,scrollable:!1,children:[s.jsxs("div",{className:"h-full flex bg-black overflow-hidden",children:[s.jsxs("div",{className:"w-[360px] border-r-[0.5px] border-white/10 flex flex-col min-w-0",children:[s.jsxs("div",{className:"px-5 pt-5",children:[s.jsx("div",{className:"flex items-start justify-between gap-4",children:s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"headline-domaine text-[26px] font-normal tracking-tight text-white/90",children:"Inbox"}),a==="setter"?s.jsx("button",{type:"button",onClick:()=>Oe(E=>E==="me"?"all":"me"),className:`mt-2 inline-flex items-center h-8 px-3 rounded-full border border-white/10 text-[12px] font-semibold transition-colors ${We==="me"?"bg-white/[0.08] text-white":"bg-black text-white/55 hover:text-white/80 hover:bg-white/[0.03]"}`,children:"Only show my leads"}):null]})}),s.jsx("div",{className:"mt-4 -mx-5 px-5 border-b-[0.5px] border-white/10",children:s.jsx("div",{className:"grid grid-cols-3 items-end",children:["all","priority","unread"].map(E=>{const O=ue===E,F=E==="all"?"All":E==="priority"?"Priority":"Unread";return s.jsxs("button",{onClick:()=>he(E),className:`relative -mb-px py-3 text-[13px] font-semibold text-center transition-colors ${O?"text-white":"text-white/50 hover:text-white/80"}`,children:[F,O?s.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 bottom-0 h-[2px] w-12 bg-white rounded-full"}):null]},E)})})}),s.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[s.jsxs("div",{className:"relative flex-1 min-w-0",children:[s.jsx(zx,{className:"h-4 w-4 text-[#6b6f75] absolute left-3 top-1/2 -translate-y-1/2"}),s.jsx("input",{value:Z,onChange:E=>ge(E.target.value),placeholder:"Search",className:"w-full h-10 pl-9 pr-3 rounded-2xl bg-black border border-white/10 text-sm text-white/80 placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-white/10"})]}),s.jsxs(gc,{open:Ie,onOpenChange:Ee,children:[s.jsx(vc,{asChild:!0,children:s.jsx("button",{type:"button",className:"h-10 w-10 rounded-2xl border border-white/10 bg-black text-[#8d9198] hover:text-[#d6d9de] hover:bg-white/[0.03] transition-colors grid place-items-center flex-shrink-0","aria-label":"Filters",children:s.jsx(XD,{className:"h-4 w-4"})})}),s.jsx(il,{align:"end",side:"bottom",sideOffset:8,className:"w-[320px] rounded-2xl border border-white/10 bg-black p-3",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"inbox-filter-title text-sm font-light text-white/60",children:"Filters"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsxs("button",{type:"button",className:"inbox-filter-select h-9 w-full rounded-xl bg-black border border-white/10 px-3 text-sm font-light text-white/80 focus:outline-none hover:bg-white/[0.03] transition-colors inline-flex items-center justify-between gap-2",children:[s.jsx("span",{className:"truncate",children:We==="all"?"Assigned: All":We==="me"?"Assigned: Me":We==="unassigned"?"Assigned: Unassigned":`Assigned: ${((nA=$g.find(E=>String(E.userId)===String(We)))==null?void 0:nA.displayName)||"Team member"}`}),s.jsx(oi,{className:"h-4 w-4 text-white/60"})]})}),s.jsx(Hr,{align:"start",className:"min-w-[220px] rounded-2xl border border-white/10 bg-black p-1",children:s.jsxs(Ra,{value:We,onValueChange:Oe,children:[s.jsx(er,{value:"all",className:"rounded-xl text-[13px]",children:"Assigned: All"}),s.jsx(er,{value:"me",className:"rounded-xl text-[13px]",children:"Assigned: Me"}),s.jsx(er,{value:"unassigned",className:"rounded-xl text-[13px]",children:"Assigned: Unassigned"}),s.jsx(di,{className:"bg-white/10"}),$g.map(E=>s.jsxs(er,{value:E.userId,className:"rounded-xl text-[13px]",children:["Assigned: ",E.displayName||"Team member"]},E.id))]})})]}),s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsxs("button",{type:"button",className:"inbox-filter-select h-9 w-full rounded-xl bg-black border border-white/10 px-3 text-sm font-light text-white/80 focus:outline-none hover:bg-white/[0.03] transition-colors inline-flex items-center justify-between gap-2",children:[s.jsxs("span",{className:"inline-flex items-center gap-2 min-w-0",children:[Fe==="hot"?s.jsx(Js,{className:"h-3.5 w-3.5 text-[#ff8b4a] fill-current"}):Fe==="warm"?s.jsx(ml,{className:"h-3.5 w-3.5 text-[#facc15] fill-current"}):Fe==="cold"?s.jsx(hl,{className:"h-3.5 w-3.5 text-[#93c5fd] fill-current"}):s.jsx("span",{className:"h-2 w-2 rounded-full bg-[#9ca3af]"}),s.jsx("span",{className:"truncate",children:Fe==="all"?"Temperature: All":Fe==="hot"?"Temperature: Hot":Fe==="warm"?"Temperature: Warm":"Temperature: Cold"})]}),s.jsx(oi,{className:"h-4 w-4 text-white/60"})]})}),s.jsx(Hr,{align:"start",className:"min-w-[220px] rounded-2xl border border-white/10 bg-black p-1",children:s.jsxs(Ra,{value:Fe,onValueChange:E=>rt(E),children:[s.jsx(er,{value:"all",className:"rounded-xl text-[13px]",children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{className:"h-2 w-2 rounded-full bg-[#9ca3af]"}),"Temperature: All"]})}),s.jsx(di,{className:"bg-white/10"}),s.jsx(er,{value:"hot",className:"rounded-xl text-[13px]",children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(Js,{className:"h-3.5 w-3.5 text-[#ff8b4a] fill-current"}),"Temperature: Hot"]})}),s.jsx(er,{value:"warm",className:"rounded-xl text-[13px]",children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(ml,{className:"h-3.5 w-3.5 text-[#facc15] fill-current"}),"Temperature: Warm"]})}),s.jsx(er,{value:"cold",className:"rounded-xl text-[13px]",children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(hl,{className:"h-3.5 w-3.5 text-[#93c5fd] fill-current"}),"Temperature: Cold"]})})]})})]}),s.jsx("div",{className:"col-span-2",children:s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsxs("button",{type:"button",className:"inbox-filter-select h-9 w-full rounded-xl bg-black border border-white/10 px-3 text-sm font-light text-white/80 focus:outline-none hover:bg-white/[0.03] transition-colors inline-flex items-center justify-between gap-2",children:[s.jsx("span",{className:"truncate",children:gt==="exclude"?"Spam: Exclude":gt==="include"?"Spam: Include":"Spam: Only"}),s.jsx(oi,{className:"h-4 w-4 text-white/60"})]})}),s.jsx(Hr,{align:"start",className:"min-w-[220px] rounded-2xl border border-white/10 bg-black p-1",children:s.jsxs(Ra,{value:gt,onValueChange:E=>It(E),children:[s.jsx(er,{value:"exclude",className:"rounded-xl text-[13px]",children:"Spam: Exclude"}),s.jsx(er,{value:"include",className:"rounded-xl text-[13px]",children:"Spam: Include"}),s.jsx(er,{value:"only",className:"rounded-xl text-[13px]",children:"Spam: Only"})]})})]})}),a!=="setter"?s.jsx("div",{className:"col-span-2",children:s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsxs("button",{type:"button",className:"inbox-filter-select h-9 w-full rounded-xl bg-black border border-white/10 px-3 text-sm font-light text-white/80 focus:outline-none hover:bg-white/[0.03] transition-colors inline-flex items-center justify-between gap-2",children:[s.jsx("span",{className:"truncate",children:Qt==="exclude"?"Private leads: Exclude":Qt==="include"?"Private leads: Include":"Private leads: Only"}),s.jsx(oi,{className:"h-4 w-4 text-white/60"})]})}),s.jsx(Hr,{align:"start",className:"min-w-[220px] rounded-2xl border border-white/10 bg-black p-1",children:s.jsxs(Ra,{value:Qt,onValueChange:E=>Nn(E),children:[s.jsx(er,{value:"exclude",className:"rounded-xl text-[13px]",children:"Private leads: Exclude"}),s.jsx(er,{value:"include",className:"rounded-xl text-[13px]",children:"Private leads: Include"}),s.jsx(er,{value:"only",className:"rounded-xl text-[13px]",children:"Private leads: Only"})]})})]})}):null]}),s.jsxs("div",{children:[s.jsx("div",{className:"inbox-filter-title text-sm font-light text-white/50 mb-2",children:"Phase"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Wv.map(E=>{const O=Fh[E],F=ts[E],I={name:(F==null?void 0:F.name)||O.name,color:(F==null?void 0:F.color)||O.color,icon:(F==null?void 0:F.icon)||O.icon},se=nt.includes(E);return s.jsxs("button",{type:"button",className:Pe("h-10 rounded-xl border px-3 text-left text-[12px] inline-flex items-center gap-2 transition-colors",se?"border-white/30 bg-white/[0.04] text-white":"border-white/10 text-white/70 hover:text-white hover:bg-white/[0.03]"),onClick:()=>{Gt(le=>le.includes(E)?le.filter(W=>W!==E):[...le,E])},children:[s.jsx("span",{className:Pe("h-4 w-4 rounded-[5px] border inline-flex items-center justify-center flex-shrink-0",se?"border-white/30 bg-white text-black":"border-white/20 bg-transparent"),children:se?s.jsx(hy,{className:"h-3 w-3"}):null}),s.jsx(Vo,{iconName:I.icon,tagName:I.name,color:I.color,className:"h-3.5 w-3.5 fill-current"}),s.jsx("span",{className:"truncate",children:I.name})]},E)})})]}),Lg.length>0?s.jsxs("div",{children:[s.jsx("div",{className:"inbox-filter-title text-sm font-light text-white/50 mb-2",children:"Phases"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Lg.map(E=>{const O=ht.includes(E.id);return s.jsxs("button",{type:"button",className:Pe("h-10 rounded-xl border px-3 text-left text-[12px] inline-flex items-center gap-2 transition-colors",O?"border-white/30 bg-white/[0.04] text-white":"border-white/10 text-white/70 hover:text-white hover:bg-white/[0.03]"),onClick:()=>{dt(F=>F.includes(E.id)?F.filter(I=>I!==E.id):[...F,E.id])},children:[s.jsx("span",{className:Pe("h-4 w-4 rounded-[5px] border inline-flex items-center justify-center flex-shrink-0",O?"border-white/30 bg-white text-black":"border-white/20 bg-transparent"),children:O?s.jsx(hy,{className:"h-3 w-3"}):null}),s.jsx(Vo,{iconName:E.icon,tagName:E.name,color:E.color,className:"h-3.5 w-3.5 fill-current"}),s.jsx("span",{className:"truncate",children:E.name})]},E.id)})})]}):null,s.jsxs("div",{className:"flex items-center justify-end gap-2 pt-1",children:[s.jsx("button",{type:"button",className:"h-8 px-2 rounded-lg text-[11px] border border-white/15 text-white/60 hover:text-white",onClick:()=>{Oe("all"),rt("all"),Gt([]),dt([]),It("exclude"),nr(!1)},children:"Reset"}),s.jsx("button",{type:"button",className:"h-8 px-2 rounded-lg text-[11px] border border-white/15 text-white/70 hover:text-white",onClick:()=>Ee(!1),children:"Close"})]})]})})]})]})]}),s.jsxs("div",{className:"flex-1 relative overflow-hidden",children:[s.jsx("div",{ref:DE,onScroll:Fz,className:"absolute inset-0 overflow-auto hide-scrollbar",children:Ca.length===0?s.jsxs("div",{className:"p-5 text-xs text-white/40",children:[s.jsx("div",{className:"font-medium text-white/60",children:"No conversations yet."}),s.jsxs("div",{className:"mt-2 leading-relaxed",children:["If you already have DMs in Instagram, Metas API may not backfill older chats (especially Requests that are inactive). Send a fresh DM to ",s.jsx("span",{className:"text-white/70",children:Dz})," from another IG account and it should appear here automatically."]}),s.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[s.jsx("button",{type:"button",className:"h-8 px-3 rounded-lg border border-white/15 text-[11px] text-white/75 hover:text-white hover:bg-white/[0.04] disabled:opacity-50",onClick:()=>Wg({silent:!1,fast:!0}),disabled:g,children:g?"Refreshing":"Refresh Inbox"}),s.jsx("a",{href:"https://www.instagram.com/direct/inbox/",target:"_blank",rel:"noreferrer",className:"h-8 px-3 rounded-lg border border-white/15 text-[11px] text-white/60 hover:text-white hover:bg-white/[0.04] inline-flex items-center",children:"Open Instagram"})]}),Y!=null&&Y.lastError?s.jsxs("div",{className:"mt-3 text-xs text-red-400/90",children:["Last update error: ",Y.lastError]}):null,(aA=Y==null?void 0:Y.warnings)!=null&&aA.length?s.jsx("div",{className:"mt-3 text-[11px] text-white/40",children:Y.warnings[0]}):null,Y?s.jsxs("div",{className:"mt-3 text-[11px] text-white/35",children:["Last sync: ",Y.conversationsFetched??0," convs checked, ",Y.conversationsWithMessages??0," with messages, ",Y.messagesUpserted??0," messages saved."]}):null]}):s.jsxs("div",{className:"py-2",children:[Dw.map(E=>{const O=(be==null?void 0:be.conversationId)===E.conversationId,F=E.lastAt,I=A9(F),se=Bh(E),le=!!(E.lastMessageId||F),W=N_(E.lastText,{allowEmpty:!le}),ve=!!E.unread,X=String(E.conversationId),Te=!!E.priority,Me=!!E.isSpam,Be=String(E.leadStatus||"open"),fe=E.assignedUserId?Rg[String(E.assignedUserId)]||"Assigned":"Unassigned",Dt=(N[X]||[]).map(Qe=>vu[Qe]).filter(Boolean),lt=Be==="qualified"?"qualified":Be==="disqualified"?"unqualified":(()=>{const Qe=new Set;for(const ut of Dt){const pt=Us(ut==null?void 0:ut.name);pt&&Qe.add(pt)}for(const ut of Wv)if(Qe.has(ut))return ut;return"new_lead"})(),St=Fh[lt],kt=ts[lt],Ge={name:(kt==null?void 0:kt.name)||St.name,color:(kt==null?void 0:kt.color)||St.color,icon:(kt==null?void 0:kt.icon)||St.icon},Ft=Dt.filter(Qe=>!Us(Qe==null?void 0:Qe.name)).slice(0,4),Ae=E.prioritySnoozedUntil?E.prioritySnoozedUntil.getTime():0,tt=!!(Ae&&Ae>Date.now());return s.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{te(X);const Qe=F&&F.getTime()>Date.now()?F:new Date;qg(X,Qe)},onKeyDown:Qe=>{if(Qe.key==="Enter"||Qe.key===" "){Qe.preventDefault(),te(X);const ut=F&&F.getTime()>Date.now()?F:new Date;qg(X,ut)}},className:`inbox-thread-row group relative w-full px-5 py-4 min-h-[126px] flex items-start gap-3 text-left border-b-[0.5px] border-white/8 hover:bg-white/5 transition-colors ${O?"bg-white/5":"bg-transparent"}`,children:[s.jsxs("div",{className:"absolute right-5 top-4 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{type:"button",className:"h-8 w-8 rounded-lg border border-white/10 bg-black hover:border-white/20 hover:bg-black text-white grid place-items-center",title:Te?"Unpin from Priority":"Pin user to Priority","aria-label":Te?"Unpin from Priority":"Pin user to Priority",onClick:Qe=>{Qe.preventDefault(),Qe.stopPropagation(),Wz(E)},children:s.jsx(Ss,{className:`h-4 w-4 text-white ${Te?"fill-current":""}`})}),s.jsx("button",{type:"button",className:"h-8 w-8 rounded-lg border border-white/10 bg-black hover:border-white/20 hover:bg-black text-white grid place-items-center disabled:opacity-40",title:Me?"Unspam":"Mark spam","aria-label":Me?"Unspam":"Mark spam",onClick:Qe=>{Qe.preventDefault(),Qe.stopPropagation(),Hz(E)},disabled:!y,children:s.jsx(kD,{className:"h-4 w-4 text-white"})})]}),s.jsx("div",{className:"relative flex-shrink-0",children:s.jsx(Y4,{src:E.peerPicture||null,label:se})}),s.jsxs("div",{className:"min-w-0 flex-1 -mt-[1px]",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsx("div",{className:`inbox-thread-name text-sm font-normal truncate mt-0 ${ve?"text-white":"text-white/90"}`,children:se}),ve?s.jsx("span",{className:"h-3 w-3 rounded-full bg-[#3b82f6] border border-black/80 mt-[11px] mr-[2px] flex-shrink-0","aria-hidden":"true"}):s.jsx("span",{className:"h-3 w-3 mt-[11px] mr-[2px] flex-shrink-0","aria-hidden":"true"})]}),s.jsxs("div",{className:Pe("inbox-thread-desc text-[13px] mt-2 leading-[1.25] flex items-center min-w-0",ve?"inbox-thread-desc-unread text-white":"text-white/45"),children:[s.jsx("span",{className:"min-w-0 flex-initial truncate",children:W||" "}),I?s.jsxs("span",{className:Pe("shrink-0 whitespace-nowrap",ve?"inbox-thread-desc-unread text-white":"text-white/45"),children:["  ",I]}):null]}),s.jsxs("div",{className:"mt-3 flex flex-wrap gap-1.5",children:[s.jsxs("span",{className:"inbox-thread-chip px-2 py-[1px] rounded-full text-[13px] font-normal border border-white/15 bg-transparent text-white/75 inline-flex items-center gap-1",children:[s.jsx(Vo,{iconName:Ge.icon,tagName:Ge.name,color:Ge.color,className:"h-3 w-3 fill-current"}),Ge.name]}),s.jsxs("span",{className:"inbox-thread-chip px-2 py-[1px] rounded-full text-[13px] font-normal border border-white/15 bg-transparent text-white/75 inline-flex items-center gap-1",children:[E.assignedUserId?s.jsx(e3,{className:"h-3 w-3 text-[#e5e7eb]"}):s.jsx(Tl,{className:"h-3 w-3 text-[#e5e7eb]"}),fe]}),tt?s.jsxs("span",{className:"inbox-thread-chip px-2 py-[1px] rounded-full text-[13px] font-normal border border-white/15 bg-transparent text-white/75 inline-flex items-center gap-1",children:[s.jsx("span",{className:"h-2 w-2 rounded-full bg-[#62a8ff]"}),"Snoozed"]}):null,Ft.map(Qe=>s.jsxs("span",{className:"inbox-thread-chip px-2 py-[1px] rounded-full text-[13px] font-normal border border-white/15 bg-transparent text-white/75 inline-flex items-center gap-1",children:[s.jsx(Vo,{iconName:Qe.icon,tagName:Qe.name,color:Qe.color,className:"h-3 w-3 fill-current"}),Qe.name]},`${X}-${Qe.id}`))]})]})]},X)}),Dw.length<Ca.length?s.jsxs("div",{className:"px-5 py-3 text-[11px] text-white/35",children:["Showing ",Dw.length," of ",Ca.length,". Scroll to load more."]}):null]})}),s.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 z-30 h-32 bg-gradient-to-t from-[#0e0e0e] via-[#0e0e0e]/92 to-transparent"})]})]}),s.jsx("div",{className:"flex-1 flex flex-col min-w-0",children:be?s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsx("div",{ref:Og,className:"flex-1 min-h-0 overflow-auto p-4 hide-scrollbar",style:{overflowAnchor:"none"},children:(()=>{const E=W=>{if(W==null)return 0;if(W instanceof Date){const Be=W.getTime();return Number.isFinite(Be)?Be:0}if(typeof W=="number")return Number.isFinite(W)?W<1e12?Math.round(W*1e3):Math.round(W):0;const ve=String(W).trim();if(!ve)return 0;if(/^\d{10,13}(\.\d+)?$/.test(ve)){const Be=Number(ve);if(!Number.isFinite(Be))return 0;const mt=ve.split(".")[0].length>=13?Be:Be*1e3,lt=new Date(mt).getTime();return Number.isFinite(lt)?lt:0}const X=ve.replace(/([+-]\d{2})(\d{2})$/,"$1:$2"),Te=Date.parse(X);if(Number.isFinite(Te))return Te;const Me=Date.parse(ve);return Number.isFinite(Me)?Me:0},O=W=>{var Me,Be;const ve=E(W==null?void 0:W.message_timestamp),X=E(((Me=W==null?void 0:W.raw_payload)==null?void 0:Me.created_time)??((Be=W==null?void 0:W.raw_payload)==null?void 0:Be.timestamp)),Te=E(W==null?void 0:W.created_at);return X&&(ve===0||ve<11045376e5)&&X>ve?X:ve||X||Te||0},F=W=>{var St,kt,Ge,Ft,Ae,tt;const ve=be.peerId,X=(W==null?void 0:W.sender_id)!=null?String(W.sender_id):"",Te=(W==null?void 0:W.recipient_id)!=null?String(W.recipient_id):"",Me=new Set;if(be.instagramAccountId&&Me.add(String(be.instagramAccountId)),u!=null&&u.facebook_user_id&&Me.add(String(u.facebook_user_id)),u!=null&&u.page_id&&Me.add(String(u.page_id)),X&&ve&&X===ve)return!1;if(Te&&ve&&Te===ve||X&&Me.has(X))return!0;if(Te&&Me.has(Te))return!1;const Be=((kt=(St=W==null?void 0:W.raw_payload)==null?void 0:St.from)==null?void 0:kt.id)??((Ft=(Ge=W==null?void 0:W.raw_payload)==null?void 0:Ge.sender)==null?void 0:Ft.id)??null,fe=((tt=(Ae=W==null?void 0:W.raw_payload)==null?void 0:Ae.recipient)==null?void 0:tt.id)??null,mt=Be!=null?String(Be):"",Dt=fe!=null?String(fe):"";if(mt&&ve&&mt===ve)return!1;if(Dt&&ve&&Dt===ve||mt&&Me.has(mt))return!0;if(Dt&&Me.has(Dt))return!1;const lt=W!=null&&W.direction?String(W.direction):"";return lt==="outbound"},I=(Array.isArray(Ds)?Ds:[]).map((W,ve)=>({m:W,idx:ve})).sort((W,ve)=>{const X=O(W.m),Te=O(ve.m);return X!==Te?X-Te:W.idx-ve.idx}).map(W=>W.m);if(I.length===0)return null;const se=W=>{const ve=new Date(W),X=ve.getTime();return Number.isFinite(X)?Math.floor((Date.now()-X)/(24*60*60*1e3))<7?Lt(ve,"EEE h:mm a"):Lt(ve,"MMM d, h:mm a"):""},le=(W,ve)=>{if(!ve)return!1;if(!W)return!0;const X=ve-W,Te=new Date(W),Me=new Date(ve);return Te.getFullYear()!==Me.getFullYear()||Te.getMonth()!==Me.getMonth()||Te.getDate()!==Me.getDate()||X>=60*60*1e3};return I.map((W,ve)=>{var Vt,pn,or,Mn,ln;const X=F(W),Te=(Vt=W==null?void 0:W.raw_payload)==null?void 0:Vt.message,Be=(typeof Te=="string"?Te:Te&&typeof Te=="object"&&(Te==null?void 0:Te.text)!=null?String(Te.text):"")||(((pn=W==null?void 0:W.raw_payload)==null?void 0:pn.text)!=null?String(W.raw_payload.text):""),fe=(W==null?void 0:W.message_text)!=null?String(W.message_text):Be,mt=(or=W==null?void 0:W.raw_payload)!=null&&or.reply_to_text?String(W.raw_payload.reply_to_text):"",Dt=Array.isArray((Mn=W==null?void 0:W.raw_payload)==null?void 0:Mn.stored_attachments)?W.raw_payload.stored_attachments:[],lt=Dt.length===0?O9(W==null?void 0:W.raw_payload):[],St=Dt.length>0?Dt:lt,kt=I9(St),Ge=fe.trim(),Ft=!!Ge&&!(xE(Ge)&&St.length>0),Ae=Ft&&!mt&&St.length===0&&UIe(Ge),tt=(ln=W==null?void 0:W.raw_payload)!=null&&ln.my_reaction?String(W.raw_payload.my_reaction):"",Qe=O(W),ut=ve>0?I[ve-1]:null,pt=ut?O(ut):0,He=ve===0?!0:le(pt,Qe),Ze=ut?F(ut):null,jt=ve===0?!0:Ze!==X,vt=ve+1<I.length?I[ve+1]:null,yt=vt?O(vt):0,sr=!X&&(!vt||F(vt)||le(Qe,yt));return s.jsxs("div",{className:`space-y-2 ${ve===0||He?"pt-0":jt?"pt-3":"pt-1"}`,children:[He?s.jsx("div",{className:"flex justify-center py-2",children:s.jsx("div",{className:"text-[11px] text-white/35",children:Qe?se(Qe):""})}):null,s.jsxs("div",{className:`flex ${X?"justify-end":"justify-start"}`,children:[X?null:s.jsx("div",{className:"w-10 flex items-end justify-center mr-2",children:sr?s.jsx(OIe,{src:be.peerPicture||null,label:Bh(be)}):s.jsx("div",{className:"w-7 h-7"})}),s.jsxs("div",{className:"relative group max-w-[70%]",children:[s.jsxs("div",{className:Pe(Ae?"bg-transparent text-white":"rounded-2xl px-3 py-2",Ae?null:X?"bg-white text-black border-0":"bg-[rgba(58,61,66,0.84)] text-white border-0"),children:[mt?s.jsx("div",{className:`mb-2 px-2 py-1 rounded-xl border-l-2 ${X?"bg-black/[0.04] border-black/30 text-black/65":"bg-white/[0.04] border-white/30 text-white/65"}`,children:s.jsx("div",{className:"text-[11px] leading-snug line-clamp-2",children:mt})}):null,St.length>0&&s.jsx("div",{className:"space-y-2 mb-2",children:St.map((Pr,Ql)=>{const Ea=(Pr==null?void 0:Pr.public_url)||(Pr==null?void 0:Pr.source_url),hh=String((Pr==null?void 0:Pr.type)||""),Hg=Pr!=null&&Pr.share_kind?String(Pr.share_kind).toLowerCase():"",wu=Hg==="reel"||Hg==="post"||Hg==="story"?Hg:T9(hh,typeof Ea=="string"?String(Ea):null);if(wu&&!Ea){const Fw=wu==="reel"?"Shared a reel":wu==="story"?"Shared a story":"Shared a post";return s.jsx("span",{className:`text-xs ${X?"text-black/70":"text-white/60"}`,children:Fw},`${W.id||W.message_id}-att-${Ql}`)}const Jz=hh==="image"||typeof Ea=="string"&&/\.(png|jpe?g|gif|webp)(\?|$)/i.test(Ea);if(!Ea)return null;if(wu){const Fw=wu==="reel"?"See reel":wu==="story"?"See story":"See post";return s.jsx("a",{href:String(Ea),target:"_blank",rel:"noreferrer",className:`text-xs underline ${X?"text-black/80":"text-white/70"}`,children:Fw},`${W.id||W.message_id}-att-${Ql}`)}return Jz?s.jsx("img",{src:Ea,alt:"attachment",className:"rounded-xl max-h-64 w-auto border border-white/10 cursor-zoom-in",loading:"lazy",onClick:()=>Tg(String(Ea))},`${W.id||W.message_id}-att-${Ql}`):s.jsx("a",{href:Ea,target:"_blank",rel:"noreferrer",className:`text-xs underline ${X?"text-black/80":"text-white/70"}`,children:"Open attachment"},`${W.id||W.message_id}-att-${Ql}`)})}),Ft?Ae?s.jsx("div",{className:"whitespace-pre-wrap text-[44px] leading-none",children:Ge}):s.jsx("div",{className:"text-xs whitespace-pre-wrap leading-relaxed",children:IIe(Ge,{theme:X?"outbound":"inbound"})}):St.length===0?s.jsx(BIe,{theme:X?"outbound":"inbound"}):null]}),s.jsxs("div",{className:`absolute top-1/2 -translate-y-1/2 flex items-center gap-2 ${X?"right-full mr-2":"left-full ml-2"} opacity-0 group-hover:opacity-100`,children:[s.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-white/10 bg-black text-[#aab0b8] hover:text-[#e3e6ea] hover:bg-white/[0.03] grid place-items-center",onClick:()=>{const Pr=((Ft?Ge:"")||kt||(St.length?"[attachment]":"(no text)")).trim();Qa({messageId:W!=null&&W.message_id?String(W.message_id):null,preview:Pr.length>140?`${Pr.slice(0,140)}`:Pr})},"aria-label":"Reply",title:"Reply",children:s.jsx(hG,{className:"h-4 w-4"})}),X?null:s.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-white/10 bg-black text-[#aab0b8] hover:text-[#e3e6ea] hover:bg-white/[0.03] grid place-items-center disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>Uz(W),disabled:Rs||!(W!=null&&W.message_id),"aria-label":"React",title:"React",children:s.jsx(eN,{className:`h-4 w-4 ${tt?"fill-[#ff3040] text-[#ff3040]":""}`})})]}),tt?s.jsx("div",{className:`absolute -bottom-3 ${X?"right-2":"left-2"}`,children:s.jsx("div",{className:"h-6 w-6 rounded-full border border-white/10 bg-black grid place-items-center",children:s.jsx("span",{className:"text-[12px] leading-none",children:""})})}):null]})]})]},W.id||W.message_id||`msg-${ve}`)})})()}),s.jsxs("div",{className:"p-4",children:[Mt?s.jsxs("div",{className:"mb-3 px-3 py-2 rounded-2xl border border-white/10 bg-white/[0.02] flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-[11px] text-white/50",children:"Replying"}),s.jsx("div",{className:"text-[12px] text-white/75 truncate",children:Mt.preview})]}),s.jsx("button",{type:"button",className:"h-8 w-8 rounded-xl border border-white/10 bg-black text-[#8d9198] hover:text-[#d6d9de] hover:bg-white/[0.03] grid place-items-center flex-shrink-0",onClick:()=>Qa(null),"aria-label":"Cancel reply",title:"Cancel",children:s.jsx(my,{className:"h-4 w-4"})})]}):null,qe?s.jsxs("div",{className:"mb-3 px-3 py-2 rounded-2xl border border-white/10 bg-white/[0.02] flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx("img",{src:qe,alt:"attachment preview",className:"h-10 w-10 rounded-xl object-cover border border-white/10 flex-shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-[12px] text-white/75 truncate",children:pr!=null&&pr.name?String(pr.name):"Image"}),s.jsx("div",{className:"text-[11px] text-white/40",children:"Ready to send"})]})]}),s.jsx("button",{type:"button",className:"h-8 w-8 rounded-xl border border-white/10 bg-black text-[#8d9198] hover:text-[#d6d9de] hover:bg-white/[0.03] grid place-items-center flex-shrink-0",onClick:()=>{we(null),pu.current&&(pu.current.value="")},"aria-label":"Remove attachment",title:"Remove",children:s.jsx(my,{className:"h-4 w-4"})})]}):null,s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:pu,type:"file",accept:"image/*",className:"hidden",onChange:E=>{const O=E.target.files&&E.target.files[0]?E.target.files[0]:null;O&&we(O)}}),s.jsx("textarea",{value:Is,onChange:E=>Ms(E.target.value),placeholder:"Message",rows:1,className:"w-full min-h-[48px] max-h-32 resize-none rounded-[999px] bg-black border border-white/10 pl-20 pr-14 py-3 text-sm text-white/80 placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-white/10",onKeyDown:E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),XE())}}),s.jsxs("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 -mt-[3px] flex items-center gap-1",children:[s.jsx("button",{type:"button",onClick:()=>{var E;return(E=pu.current)==null?void 0:E.click()},disabled:$t,className:"h-8 w-8 rounded-full bg-transparent text-white/70 hover:text-white grid place-items-center disabled:opacity-40 disabled:cursor-not-allowed","aria-label":"Add image",title:"Add image",children:s.jsx(LD,{className:"h-4 w-4 -translate-y-[1px]"})}),s.jsxs(gc,{open:bt,onOpenChange:xr,children:[s.jsx(vc,{asChild:!0,children:s.jsx("button",{type:"button",disabled:$t||!be,className:"h-8 w-8 rounded-full bg-transparent text-white/70 hover:text-white grid place-items-center disabled:opacity-40 disabled:cursor-not-allowed","aria-label":"Book call",title:"Book call",children:s.jsx(Fx,{className:"h-4 w-4 -translate-y-[1px]"})})}),s.jsxs(il,{align:"start",side:"top",sideOffset:10,className:"w-[220px] rounded-xl border border-white/10 bg-black p-1.5",children:[s.jsx("button",{type:"button",onClick:zz,disabled:$t||Gr||!be,className:"w-full h-9 rounded-lg px-3 text-left text-[13px] text-white/80 hover:text-white hover:bg-white/[0.04] disabled:opacity-50 disabled:cursor-not-allowed",children:Gr?"Loading":"Send booking link"}),s.jsx("button",{type:"button",onClick:qz,disabled:$t||Gr||!be,className:"w-full h-9 rounded-lg px-3 text-left text-[13px] text-white/80 hover:text-white hover:bg-white/[0.04] disabled:opacity-50 disabled:cursor-not-allowed",children:"Copy booking link"}),a!=="setter"?s.jsx("button",{type:"button",disabled:!0,className:"w-full h-9 rounded-lg px-3 text-left text-[13px] text-white/45 bg-white/[0.01] cursor-not-allowed",children:"Schedule call  Coming soon"}):null]})]})]}),s.jsx("button",{type:"button",onClick:XE,disabled:$t||!Is.trim()&&!pr,className:"absolute right-3 top-1/2 -translate-y-1/2 -mt-[2px] h-8 w-8 rounded-full bg-transparent text-white/85 hover:text-white grid place-items-center disabled:opacity-40 disabled:cursor-not-allowed","aria-label":"Send",title:"Send",children:s.jsx(Wx,{className:"h-4 w-4"})})]})]})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(FS,{className:"w-12 h-12 text-[#4b4f55] mx-auto mb-4"}),s.jsx("p",{className:"text-white/40 text-sm",children:"Select a conversation"}),s.jsx("p",{className:"text-xs text-white/20 mt-1",children:"to view messages"})]})})}),s.jsx("div",{className:"w-[340px] border-l-[0.5px] border-white/10 flex flex-col min-w-0",children:s.jsx("div",{className:"flex-1 min-h-0 overflow-auto p-5 hide-scrollbar space-y-4",children:be?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col items-center pt-2",children:[s.jsx(Y4,{src:be.peerPicture||null,label:Bh(be),size:"lg"}),s.jsx("div",{className:"mt-3 text-[18px] font-semibold text-white/92 text-center",children:Bh(be)}),s.jsx("div",{className:"mt-1 text-[14px] text-white/35 text-center",children:be.peerUsername?`@${be.peerUsername}`:"@instagram_user"})]}),s.jsxs(gc,{children:[s.jsx(vc,{asChild:!0,children:s.jsxs("button",{type:"button",className:"w-full h-10 rounded-xl border border-white/10 bg-transparent px-3 text-[13px] text-white/85 hover:bg-white/[0.03] flex items-center justify-between",children:[s.jsxs("span",{className:"inline-flex items-center gap-2",children:[Yl==="hot"?s.jsx(Js,{className:"h-3.5 w-3.5 text-[#ff8b4a] fill-current"}):Yl==="warm"?s.jsx(ml,{className:"h-3.5 w-3.5 text-[#facc15] fill-current"}):Yl==="cold"?s.jsx(hl,{className:"h-3.5 w-3.5 text-[#93c5fd] fill-current"}):s.jsx("span",{className:"h-2 w-2 rounded-full bg-[#9ca3af]"}),Yl==="hot"?"Hot":Yl==="warm"?"Warm":Yl==="cold"?"Cold":"No temperature"]}),s.jsx("span",{className:"text-white/45",children:""})]})}),s.jsx(il,{align:"center",side:"bottom",sideOffset:6,className:"w-[220px] rounded-xl border border-white/10 bg-black p-1.5",children:s.jsx("div",{className:"space-y-1",children:[{value:"hot",label:"Hot",icon:Js,iconClass:"text-[#ff8b4a]"},{value:"warm",label:"Warm",icon:ml,iconClass:"text-[#facc15]"},{value:"cold",label:"Cold",icon:hl,iconClass:"text-[#93c5fd]"}].map(E=>s.jsxs("button",{type:"button",className:`w-full h-8 rounded-lg px-2 text-left text-[12px] transition-colors inline-flex items-center gap-2 ${Yl===E.value?"text-white bg-white/[0.06]":"text-white/75 hover:text-white hover:bg-white/[0.04]"}`,onClick:()=>Gz(be,E.value),children:[s.jsx(E.icon,{className:`h-3.5 w-3.5 fill-current ${E.iconClass}`}),E.label]},E.value))})})]}),s.jsxs("div",{className:"rounded-xl border border-white/10 p-3 space-y-2.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 text-[13px] text-white/78",children:[s.jsx(fo,{className:"h-3.5 w-3.5 text-[#58a6ff]"}),"Phase"]}),s.jsxs(gc,{children:[s.jsx(vc,{asChild:!0,children:s.jsx("button",{type:"button",className:"h-8 w-8 rounded-xl border border-white/10 text-white/70 hover:text-white hover:bg-white/[0.04] grid place-items-center","aria-label":"Manage phase",title:"Manage phase",children:"+"})}),s.jsx(il,{align:"end",side:"bottom",sideOffset:6,className:"w-[280px] rounded-xl border border-white/10 bg-black p-2",children:s.jsx("div",{className:"space-y-1",children:Wv.map(E=>{const O=Fh[E],F=ts[E],I={name:(F==null?void 0:F.name)||O.name,color:(F==null?void 0:F.color)||O.color,icon:(F==null?void 0:F.icon)||O.icon},se=Dg===E;return s.jsxs("button",{type:"button",className:`w-full h-8 rounded-lg px-2 text-left text-[12px] flex items-center gap-2 transition-colors ${se?"text-white bg-white/[0.06]":"text-white/75 hover:text-white hover:bg-white/[0.04]"}`,onClick:()=>Yz(be,E),children:[s.jsx(Vo,{iconName:I.icon,tagName:I.name,color:I.color,className:"h-3.5 w-3.5 fill-current"}),I.name]},E)})})})]})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:Dg?(()=>{const E=Fh[Dg],O=ts[Dg],F={name:(O==null?void 0:O.name)||E.name,color:(O==null?void 0:O.color)||E.color,icon:(O==null?void 0:O.icon)||E.icon};return s.jsxs("span",{className:"px-2 py-[2px] rounded-[10px] text-[10px] border border-transparent text-white inline-flex items-center gap-1.5",style:{backgroundColor:G4(F.color,.22)},children:[s.jsx(Vo,{iconName:F.icon,tagName:F.name,color:F.color,className:"h-3 w-3 fill-current"}),F.name]})})():null})]}),Lg.length>0?s.jsxs("div",{className:"rounded-xl border border-white/10 p-3 space-y-2.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 text-[13px] text-white/78",children:[s.jsx(fo,{className:"h-3.5 w-3.5 text-[#58a6ff]"}),"Phases"]}),s.jsxs(gc,{children:[s.jsx(vc,{asChild:!0,children:s.jsx("button",{type:"button",className:"h-8 w-8 rounded-xl border border-white/10 text-white/70 hover:text-white hover:bg-white/[0.04] grid place-items-center","aria-label":"Manage phases",title:"Manage phases",children:"+"})}),s.jsx(il,{align:"end",side:"bottom",sideOffset:6,className:"w-[280px] rounded-xl border border-white/10 bg-black p-2",children:s.jsx("div",{className:"space-y-1",children:Lg.map(E=>{const O=Ls.includes(E.id);return s.jsxs("button",{type:"button",className:`w-full h-8 rounded-lg px-2 text-left text-[12px] flex items-center gap-2 transition-colors ${O?"text-white bg-white/[0.06]":"text-white/75 hover:text-white hover:bg-white/[0.04]"}`,onClick:()=>JE(be.conversationId,E.id),children:[s.jsx("span",{className:"h-4 w-4 grid place-items-center",children:O?s.jsx(hy,{className:"h-3.5 w-3.5"}):null}),s.jsx(Vo,{iconName:E.icon,tagName:E.name,color:E.color,className:"h-3.5 w-3.5 fill-current"}),s.jsx("span",{className:"truncate",children:E.name})]},E.id)})})})]})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:HE.length>0?HE.map(E=>s.jsxs("button",{type:"button",className:"px-2 py-[2px] rounded-[10px] text-[10px] border border-transparent text-white inline-flex items-center gap-1.5 hover:opacity-90",style:{backgroundColor:G4(E.color,.22)},onClick:()=>JE(be.conversationId,E.id),title:"Click to remove",children:[s.jsx(Vo,{iconName:E.icon,tagName:E.name,color:E.color,className:"h-3 w-3 fill-current"}),E.name]},E.id)):s.jsx("div",{className:"text-[11px] text-white/40",children:"No phases"})})]}):null,s.jsx("div",{className:"grid grid-cols-1 gap-2",children:s.jsxs("div",{className:"rounded-xl border border-white/10 p-3",children:[s.jsx("div",{className:"text-[11px] text-white/50 mb-1",children:"Setter"}),s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsxs("button",{type:"button",className:"w-full h-8 rounded-lg bg-black border border-white/10 px-2 text-[11px] text-white/80 focus:outline-none hover:bg-white/[0.03] transition-colors inline-flex items-center justify-between gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:a!=="owner",children:[s.jsx("span",{className:"truncate",children:be.assignedUserId?((iA=$g.find(E=>String(E.userId)===String(be.assignedUserId)))==null?void 0:iA.displayName)||Rg[String(be.assignedUserId)]||"Team member":"Unassigned"}),s.jsx(oi,{className:"h-3.5 w-3.5 text-white/55"})]})}),s.jsx(Hr,{align:"start",className:"min-w-[220px] rounded-2xl border border-white/10 bg-black p-1",children:s.jsxs(Ra,{value:be.assignedUserId||"__none__",onValueChange:E=>Vz(be,E==="__none__"?null:E),children:[s.jsx(er,{value:"__none__",className:"rounded-xl text-[13px]",children:"Unassigned"}),s.jsx(di,{className:"bg-white/10"}),$g.map(E=>s.jsx(er,{value:E.userId,className:"rounded-xl text-[13px]",children:E.displayName||"Team member"},E.id))]})})]})]})}),a==="owner"?s.jsxs("div",{className:"rounded-xl border border-white/10 p-3 space-y-3",children:[s.jsx("div",{className:"text-[11px] text-white/50",children:"Setter visibility"}),s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-[12px] text-white/85",children:"Private lead"}),s.jsx("div",{className:"text-[10px] text-white/40",children:"Hide this conversation from setters."})]}),s.jsx(jg,{checked:be.hiddenFromSetters,onCheckedChange:E=>Kz(be,{hiddenFromSetters:E})})]})]}):null,s.jsx("div",{className:"-mx-5 px-5 border-t-[0.5px] border-white/10",children:s.jsx("div",{className:"flex items-center justify-between",children:[{id:"summary",label:"Summary"},{id:"team",label:"Team"},{id:"calls",label:"Calls"}].map(E=>{const O=ie===E.id;return s.jsxs("button",{type:"button",className:`relative py-3 text-[13px] ${O?"text-white/90":"text-white/45 hover:text-white/75"}`,onClick:()=>q(E.id),children:[E.label,O?s.jsx("span",{className:"absolute left-0 right-0 bottom-0 h-[2px] bg-white/85"}):null]},E.id)})})}),ie==="summary"?s.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/[0.01] p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm text-white/85",children:"AI Summary"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",className:"h-8 px-2 rounded-xl border border-white/10 text-[11px] text-[#8d9198] hover:text-[#d6d9de]",onClick:()=>Lw(!1),disabled:D,children:D?"Summarizing...":"Summarize"}),s.jsx("button",{type:"button",className:"h-8 px-2 rounded-xl border border-white/10 text-[11px] text-[#8d9198] hover:text-[#d6d9de]",onClick:()=>Lw(!0),disabled:D,children:"Refresh"})]})]}),s.jsx("div",{className:"mt-2 text-[12px] text-white/65 whitespace-pre-wrap leading-relaxed",children:be.summaryText||"No summary yet."})]}):null,ie==="team"?s.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/[0.01] p-4 space-y-3",children:[s.jsx("div",{className:"text-sm text-white/85",children:"Internal team chat"}),s.jsx("div",{className:"text-[12px] text-white/55",children:be.assignedUserId?`Assigned setter: ${Rg[be.assignedUserId]||"Team member"}`:be.sharedWithSetters?"Shared with all setters.":"No setter assigned yet."}),s.jsxs("div",{className:"rounded-lg border border-white/10 bg-black/20 p-2",children:[s.jsx("div",{className:"max-h-40 overflow-auto hide-scrollbar space-y-2 pr-1",children:ae?s.jsx("div",{className:"text-[11px] text-white/45",children:"Loading internal chat"}):WE.length===0?s.jsx("div",{className:"text-[11px] text-white/45",children:"No internal notes yet."}):WE.map(E=>s.jsxs("div",{className:"rounded-lg border border-white/10 px-2 py-1.5",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("div",{className:"text-[10px] text-white/70 truncate",children:E.authorUserId===(t==null?void 0:t.id)?"You":Rg[E.authorUserId]||"Team member"}),s.jsx("div",{className:"text-[10px] text-white/40",children:PIe(E.createdAt)})]}),s.jsx("div",{className:"mt-1 text-[11px] text-white/80 whitespace-pre-wrap break-words",children:E.body})]},E.id))}),s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("input",{value:pe,onChange:E=>ye(E.target.value),placeholder:"Write internal note",className:"flex-1 h-8 rounded-lg border border-white/10 bg-black px-2 text-[11px] text-white/80 placeholder:text-white/35 focus:outline-none",maxLength:4e3}),s.jsx("button",{type:"button",className:"h-8 px-2 rounded-lg border border-white/10 text-[11px] text-[#8d9198] hover:text-[#d6d9de] disabled:opacity-50",onClick:Bz,disabled:ce||pe.trim().length===0,children:ce?"Sending":"Send"})]})]}),s.jsxs("div",{className:"space-y-2 pt-1",children:[s.jsx("div",{className:"text-[11px] text-white/55",children:"Open alerts"}),P.filter(E=>E.conversationId===be.conversationId).length===0?s.jsx("div",{className:"text-[11px] text-white/45",children:"No open alerts for this lead."}):P.filter(E=>E.conversationId===be.conversationId).map(E=>s.jsxs("div",{className:"rounded-lg border border-white/10 px-2 py-2",children:[s.jsx("div",{className:"text-[11px] text-white/80",children:E.type.replaceAll("_"," ")}),s.jsxs("div",{className:"text-[10px] text-white/50 mt-1",children:["Overdue ",Math.max(1,Math.floor(E.overdueMinutes/60)),"h"]}),s.jsx("button",{type:"button",className:"mt-2 h-7 px-2 rounded-lg border border-white/10 text-[10px] text-[#8d9198] hover:text-[#d6d9de]",onClick:()=>Xz(E.id),children:"Mark resolved"})]},E.id))]})]}):null,ie==="calls"?s.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/[0.01] p-4",children:[s.jsx("div",{className:"text-sm text-white/85",children:"Calls"}),s.jsx("div",{className:"mt-2 text-[12px] text-white/50",children:"No call timeline events yet."})]}):null]}):s.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center px-6",children:[s.jsx("div",{className:"h-14 w-14 rounded-full border border-white/10 bg-white/[0.03] grid place-items-center",children:s.jsx(aN,{className:"h-6 w-6 text-white/55"})}),s.jsx("div",{className:"mt-4 text-sm text-white/70",children:"Select a conversation to view details"})]})})})]}),Pg?s.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-center justify-center p-6",onClick:()=>Tg(null),role:"dialog","aria-modal":"true",children:[s.jsx("button",{type:"button",className:"absolute top-4 right-4 h-10 w-10 rounded-2xl bg-white/10 hover:bg-white/15 transition-colors grid place-items-center text-white/80",onClick:E=>{E.stopPropagation(),Tg(null)},"aria-label":"Close",children:s.jsx(my,{className:"h-4 w-4"})}),s.jsx("img",{src:Pg,alt:"attachment",className:"max-h-[90vh] max-w-[90vw] rounded-2xl border border-white/10 shadow-2xl",onClick:E=>E.stopPropagation()})]}):null]}):s.jsx(Er,{children:s.jsx("div",{className:"h-full min-h-[calc(100vh-4rem)] flex flex-col items-center justify-center bg-black px-4",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsxs("p",{className:"text-white/50 text-sm mb-8 leading-relaxed",children:["Connect your Instagram account to manage DMs,",s.jsx("br",{}),"respond to leads, and track conversations"]}),s.jsxs(Pf,{size:"sm",onClick:Qz,disabled:p,className:"gap-3",children:[s.jsx("img",{src:V5e,alt:"Instagram",className:"w-5 h-5 object-contain"}),p?"Connecting...":"Connect Instagram"]})]})})})}const $r=h.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:Pe("flex h-10 w-full px-4 py-2.5 bg-[#151618] border border-border rounded-2xl text-[15px] text-foreground placeholder:text-muted-foreground/50 focus:outline-none focus:border-border transition-colors disabled:cursor-not-allowed disabled:opacity-50",e),autoComplete:"off",ref:n,...r}));$r.displayName="Input";function Du(e){const t=Number(e);return Number.isFinite(t)?t:0}function Lu(e){if(!e)return 0;const t=Date.parse(e);return Number.isFinite(t)?t:0}function qIe(e,t=Date.now()){return e==="7d"?new Date(t-7*864e5).toISOString():e==="30d"?new Date(t-30*864e5).toISOString():e==="90d"?new Date(t-90*864e5).toISOString():null}function Q4(e,t=Date.now()){return qIe(e==="all"?"90d":e,t)}async function zIe(e){const{workspaceId:t,linkIds:r,fromIso:n,pageSize:a=1e3,maxRows:i=25e3}=e,o=[];let l=0;for(;o.length<i;){const c=l+a-1,{data:u,error:d}=await z.from("tracked_link_events").select("link_id,event_type,event_at").eq("workspace_id",t).in("link_id",r).eq("event_type","click").gte("event_at",n).order("event_at",{ascending:!0}).range(l,c);if(d)throw d;const f=Array.isArray(u)?u:[];if(o.push(...f),f.length<a)break;l+=a}return o}function WIe(){const{workspace:e}=on(),[t,r]=h.useState("30d"),[n,a]=h.useState(!0),[i,o]=h.useState(!1),[l,c]=h.useState(""),[u,d]=h.useState([]),[f,m]=h.useState([]),[p,v]=h.useState([]),[g,b]=h.useState([]),[y,w]=h.useState([]),x=h.useRef(null),_=h.useCallback(async M=>{const $=e!=null&&e.id?String(e.id):"";if(!$)return;const re=!!(M!=null&&M.silent),ie=(M==null?void 0:M.range)||t;re||o(!0);try{try{const{data:ae}=await z.from("workspaces").select("booking_url").eq("id",$).maybeSingle(),_e=ae!=null&&ae.booking_url?String(ae.booking_url).trim():"";c(_e)}catch{c("")}try{const{data:ae}=await z.from("connected_youtube_channels").select("id,title,last_synced_at").eq("workspace_id",$).order("created_at",{ascending:!1}).limit(20);d(Array.isArray(ae)?ae:[])}catch{d([])}let q=[];try{const{data:ae,error:_e}=await z.from("content_ctas").select("id,workspace_id,source_type,source_ref,tracked_link_id,created_at").eq("workspace_id",$).eq("source_type","youtube_video").order("created_at",{ascending:!1}).limit(2e3);if(_e)throw _e;q=Array.isArray(ae)?ae:[],m(q)}catch{q=[],m([])}const K=Array.from(new Set(q.map(ae=>String(ae.tracked_link_id)).filter(Boolean)));try{if(K.length===0)v([]);else{const{data:ae}=await z.from("tracked_links").select("id,workspace_id,name,slug,destination_url,mode,archived,clicks_total,last_clicked_at,created_at").eq("workspace_id",$).in("id",K).order("created_at",{ascending:!1});v(Array.isArray(ae)?ae:[])}}catch{v([])}const ne=Q4(ie);try{if(K.length===0)b([]);else{const ae=await zIe({workspaceId:$,linkIds:K,fromIso:ne});b(ae)}}catch{b([])}try{const ae=Array.from(new Set(q.map(ce=>String(ce.source_ref)).filter(Boolean))),[_e,pe]=await Promise.all([z.from("youtube_videos").select("id,workspace_id,video_id,title,description,published_at,thumbnails_json,tags,view_count,like_count,comment_count,is_short").eq("workspace_id",$).order("published_at",{ascending:!1}).limit(200),ae.length?z.from("youtube_videos").select("id,workspace_id,video_id,title,description,published_at,thumbnails_json,tags,view_count,like_count,comment_count,is_short").eq("workspace_id",$).in("video_id",ae):Promise.resolve({data:[]})]),ye=new Map;for(const ce of[...pe.data||[],..._e.data||[]])ce!=null&&ce.video_id&&ye.set(String(ce.video_id),ce);w(Array.from(ye.values()))}catch{w([])}}finally{re||o(!1)}},[e==null?void 0:e.id,t]);h.useEffect(()=>{const M=e!=null&&e.id?String(e.id):"";if(!M){x.current=null,a(!1),o(!1),c(""),d([]),m([]),v([]),b([]),w([]);return}let $=!1;const re=x.current!==M;return x.current=M,re&&a(!0),_({silent:!0,range:t}).catch(()=>{}).finally(()=>{!$&&re&&a(!1)}),()=>{$=!0}},[e==null?void 0:e.id,t,_]);const S=typeof window<"u"?window.location.origin:"",k=h.useMemo(()=>{const M=new Map;for(const $ of p)M.set(String($.id),$);return M},[p]);h.useMemo(()=>{const M=new Map;for(const $ of y)M.set(String($.video_id),$);return M},[y]);const C=h.useMemo(()=>Q4(t),[t]),j=h.useMemo(()=>Lu(C),[C]),N=h.useMemo(()=>{const M=new Map;for(const $ of g){const re=String($.link_id);M.set(re,(M.get(re)||0)+1)}return M},[g]),A=h.useMemo(()=>{const M=new Map;for(const $ of g){const re=String($.link_id),ie=M.get(re);(!ie||Lu($.event_at)>Lu(ie))&&M.set(re,$.event_at)}return M},[g]),P=h.useMemo(()=>{const M=new Set;for(const $ of y)$.is_short!==!0&&M.add(String($.video_id));return M},[y]),T=h.useMemo(()=>{const M=new Set;for(const $ of f){if(!P.has(String($.source_ref)))continue;const re=k.get(String($.tracked_link_id));re!=null&&re.id&&M.add(String(re.id))}return M},[f,P,k]),L=h.useMemo(()=>{const M=new Date(j);M.setHours(0,0,0,0);const $=new Date;$.setHours(0,0,0,0);const re=K=>K.toISOString().slice(0,10),ie=new Map;for(const K of g){if(!T.has(String(K.link_id)))continue;const ne=String(K.event_at||"").slice(0,10);ne&&ie.set(ne,(ie.get(ne)||0)+1)}const q=[];for(let K=M.getTime();K<=$.getTime();K+=864e5){const ne=new Date(K),ae=re(ne);q.push({day:ae,clicks:ie.get(ae)||0})}return q},[g,j,T]),U=h.useMemo(()=>{const M=[],$=new Map;for(const ie of f)$.set(String(ie.source_ref),ie);const re=[...y].filter(ie=>ie.is_short!==!0).sort((ie,q)=>Lu(q.published_at)-Lu(ie.published_at));for(const ie of re){const q=$.get(String(ie.video_id))||null,K=q&&k.get(String(q.tracked_link_id))||null,ne=K?Du(t==="all"?K.clicks_total:N.get(String(K.id))||0):0,ae=K?Du(K.clicks_total):0,_e=K?t==="all"?K.last_clicked_at:A.get(String(K.id))||null:null,pe=Du(ie.view_count),ye=pe>0?ne/pe:0,ce=K?`${S}/l/${K.slug}`:null,me=String(ie.description||""),Q=K?me.includes(`/l/${K.slug}`):!1;M.push({video:ie,cta:q,link:K,short_url:ce,clicks_range:ne,clicks_all_time:ae,last_clicked_at:_e,ctr:ye,cta_in_description:Q})}return M},[f,y,k,S,t,N,A]),D=h.useMemo(()=>{var pe;const M=new Set;for(const ye of T)M.add(ye);let $=0,re=0;for(const ye of M){const ce=k.get(ye);if(!ce)continue;$+=Du(t==="all"?ce.clicks_total:N.get(ye)||0);const me=Lu(ce.created_at);(!re||me<re)&&(re=me)}const ie=re?Math.max(1,Math.ceil((Date.now()-re)/864e5)):1,q=t==="all"?ie:Math.max(1,Math.ceil((Date.now()-j)/864e5)),K=$/q,ne=[...U].sort((ye,ce)=>ce.ctr-ye.ctr)[0]||null,ae=U.length,_e=U.filter(ye=>!!ye.cta).length;return{totalClicks:$,avgPerDay:K,ctaCoverage:{withCta:_e,totalVideos:ae},topCtrVideoTitle:((pe=ne==null?void 0:ne.video)==null?void 0:pe.title)||null,activeCtas:_e}},[T,k,t,N,j,U]),H=u.length>0,B=h.useMemo(()=>({label:t==="all"?"Last 90 days":t,fromIso:C}),[t,C]);return{timeRange:t,setTimeRange:r,loading:n,refreshing:i,refresh:_,bookingUrl:l,youtubeChannels:u,youtubeHasAny:H,youtubeVideos:y,ctas:f,links:p,events:g,chartMeta:B,chartData:L,kpis:D,videoRows:U}}const Fu=10;function Bu(e){try{return new Intl.NumberFormat(void 0,{notation:"compact",maximumFractionDigits:1}).format(e)}catch{return String(e)}}function J4(e){if(!e)return"";const t=Date.parse(e);if(!Number.isFinite(t))return"";const r=Date.now()-t;if(r<6e4)return"just now";const n=Math.floor(r/6e4);if(n<60)return`${n}m`;const a=Math.floor(n/60);return a<24?`${a}h`:`${Math.floor(a/24)}d`}function Z4(e){return!Number.isFinite(e)||e<=0?"0%":`${(e*100).toFixed(e>=.1?1:2)}%`}function eM(e=8){const t="abcdefghijklmnopqrstuvwxyz0123456789",r=new Uint8Array(e);crypto.getRandomValues(r);let n="";for(let a=0;a<r.length;a+=1)n+=t[r[a]%t.length];return n}function tM(e){const t=`${String((e==null?void 0:e.message)||"")} ${String((e==null?void 0:e.details)||"")}`.toLowerCase();return t.includes("duplicate")||t.includes("unique")||t.includes("slug")}function rM(e){const t=`${String((e==null?void 0:e.message)||"")} ${String((e==null?void 0:e.details)||"")} ${String((e==null?void 0:e.code)||"")}`.toLowerCase();return t.includes("23505")||t.includes("duplicate")||t.includes("unique")}function HIe(e){var r,n,a,i,o;const t=e||{};return((r=t==null?void 0:t.maxres)==null?void 0:r.url)||((n=t==null?void 0:t.standard)==null?void 0:n.url)||((a=t==null?void 0:t.high)==null?void 0:a.url)||((i=t==null?void 0:t.medium)==null?void 0:i.url)||((o=t==null?void 0:t.default)==null?void 0:o.url)||null}function VIe(){var Ce;const{workspace:e}=on(),{timeRange:t,setTimeRange:r,loading:n,refreshing:a,refresh:i,bookingUrl:o,youtubeChannels:l,youtubeHasAny:c,videoRows:u,chartMeta:d,chartData:f,kpis:m}=WIe(),[p,v]=h.useState(""),[g,b]=h.useState("published"),[y,w]=h.useState("desc"),[x,_]=h.useState(!1),[S,k]=h.useState(null),C=h.useRef(!1),j=h.useRef(!1),[N,A]=h.useState(null),[P,T]=h.useState(null),[L,U]=h.useState(null),[D,H]=h.useState(null),[B,M]=h.useState(null),[$,re]=h.useState(1),ie=h.useRef(null),q=[{key:"7d",label:"7d"},{key:"30d",label:"30d"},{key:"90d",label:"90d"},{key:"all",label:"All"}],K=h.useCallback(async()=>{const R={provider:"google",options:{redirectTo:`${window.location.origin}/youtube-callback`,scopes:"https://www.googleapis.com/auth/youtube.force-ssl",queryParams:{access_type:"offline",prompt:"consent",include_granted_scopes:"true"}}};try{const{error:Y}=await z.auth.signInWithOAuth(R);if(Y)throw Y}catch(Y){if(String((Y==null?void 0:Y.message)||"").toLowerCase().includes("manual linking disabled"))try{await z.auth.signOut();const{error:Re}=await z.auth.signInWithOAuth(R);if(Re)throw Re;return}catch(Re){ee.error(String((Re==null?void 0:Re.message)||"Failed to connect YouTube"));return}ee.error(String((Y==null?void 0:Y.message)||"Failed to connect YouTube"))}},[]),ne=h.useCallback(async R=>{var de;const Y=e!=null&&e.id?String(e.id):"";if(!Y||!c||j.current)return;const Se=!!(R!=null&&R.silent),Re=((R==null?void 0:R.onlyChannelIds)||l.map(G=>String(G.id))).filter(Boolean);if(Re.length!==0){j.current=!0,_(!0),k("Syncing");try{const{data:G}=await z.auth.getSession(),ue=(de=G==null?void 0:G.session)!=null&&de.access_token?String(G.session.access_token):"";if(!ue)throw new Error("Please sign in again");let he=0;for(const Z of Re){let ge=!1;for(let Ie=0;Ie<2;Ie+=1){const Ee=await fetch("https://efpagcbqixencqosalgr.supabase.co/functions/v1/youtube-channel",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ue}`},body:JSON.stringify({action:"sync",channelDbId:Z,workspaceId:Y})}),We=await Ee.json().catch(()=>({}));if(Ee.ok){ge=!0;break}console.warn("YouTube sync failed:",We),Ie===0&&await new Promise(Oe=>setTimeout(Oe,700))}ge&&(he+=1)}localStorage.setItem(`acq_content_last_sync_${Y}`,String(Date.now())),await i({silent:!0}),Se||(he>0?ee.success("YouTube synced"):ee.error("Sync failed")),k(he>0?"Synced just now":"Sync failed")}catch(G){Se||ee.error(String((G==null?void 0:G.message)||"Failed to sync YouTube")),k("Sync failed")}finally{j.current=!1,_(!1)}}},[e==null?void 0:e.id,c,l,i]);h.useEffect(()=>{C.current=!1,k(null)},[e==null?void 0:e.id]),h.useEffect(()=>()=>{ie.current&&window.clearTimeout(ie.current)},[]),h.useEffect(()=>{const R=e!=null&&e.id?String(e.id):"";if(!R||!c||l.length===0||C.current)return;const Y=Number(localStorage.getItem(`acq_content_last_sync_${R}`)||"0");if(Y&&Date.now()-Y<5*6e4)return;const Se=60*6e4;l.some(de=>{const G=de.last_synced_at?Date.parse(de.last_synced_at):0;return!G||!Number.isFinite(G)?!0:Date.now()-G>Se})&&(C.current=!0,ne({silent:!0}).catch(()=>{}))},[e==null?void 0:e.id,c,l,ne]),h.useEffect(()=>{if(!(e!=null&&e.id?String(e.id):""))return;const Y=()=>i({silent:!0}).catch(()=>{}),Se=()=>{Y()},Re=()=>{document.visibilityState==="visible"&&Y()};window.addEventListener("focus",Se),document.addEventListener("visibilitychange",Re);const de=window.setInterval(()=>{document.visibilityState==="visible"&&Y()},6e4);return()=>{window.removeEventListener("focus",Se),document.removeEventListener("visibilitychange",Re),window.clearInterval(de)}},[e==null?void 0:e.id,i]),h.useEffect(()=>{if(!(e!=null&&e.id?String(e.id):"")||!c)return;const Y=window.setInterval(()=>{document.visibilityState==="visible"&&ne({silent:!0}).catch(()=>{})},15*6e4);return()=>{window.clearInterval(Y)}},[e==null?void 0:e.id,c,ne]);const ae=h.useMemo(()=>{const R=p.trim().toLowerCase(),Y=R?u.filter(de=>String(de.video.title||"").toLowerCase().includes(R)):u,Se=y==="asc"?1:-1;return[...Y].sort((de,G)=>{if(g==="views")return Se*(Number(de.video.view_count||0)-Number(G.video.view_count||0));if(g==="clicks")return Se*(Number(de.clicks_range||0)-Number(G.clicks_range||0));const ue=de.video.published_at?Date.parse(de.video.published_at):0,he=G.video.published_at?Date.parse(G.video.published_at):0;return Se*(ue-he)})},[u,p,g,y]),_e=h.useMemo(()=>ae.filter(R=>!R.cta),[ae]),pe=h.useMemo(()=>Math.max(1,Math.ceil(ae.length/Fu)),[ae.length]),ye=h.useMemo(()=>{const R=($-1)*Fu;return ae.slice(R,R+Fu)},[ae,$]),ce=h.useMemo(()=>ae.length?($-1)*Fu+1:0,[ae.length,$]),me=h.useMemo(()=>Math.min($*Fu,ae.length),[$,ae.length]);h.useEffect(()=>{re(1)},[p,t,g,y]),h.useEffect(()=>{$>pe&&re(pe)},[$,pe]),h.useCallback(R=>{R===g?w(Y=>Y==="asc"?"desc":"asc"):(b(R),w("desc"))},[g]);const Q=h.useCallback(()=>{if(ae.length===0){ee.info("No rows to export");return}const R=["video_id","title","published_at","views","likes","comments","cta_short_url","cta_destination_url","clicks_range","clicks_all_time","ctr","cta_in_description"],Y=ue=>{const he=String(ue??"");return he.includes('"')||he.includes(",")||he.includes(`
`)?`"${he.replaceAll('"','""')}"`:he},Se=[R.join(","),...ae.map(ue=>{var he;return[ue.video.video_id,ue.video.title,ue.video.published_at||"",Number(ue.video.view_count||0),Number(ue.video.like_count||0),Number(ue.video.comment_count||0),ue.short_url||"",((he=ue.link)==null?void 0:he.destination_url)||"",Number(ue.clicks_range||0),Number(ue.clicks_all_time||0),Z4(Number(ue.ctr||0)),ue.cta_in_description?"yes":"no"].map(Y).join(",")})].join(`
`),Re=new Blob([Se],{type:"text/csv;charset=utf-8"}),de=URL.createObjectURL(Re),G=document.createElement("a");G.href=de,G.download=`content-youtube-roi-${t}.csv`,document.body.appendChild(G),G.click(),G.remove(),URL.revokeObjectURL(de),ee.success("CSV exported")},[ae,t]),te=h.useCallback(async()=>{var G,ue;const R=e!=null&&e.id?String(e.id):"";if(!R||_e.length===0)return;const Y=String(o||"").trim();if(!Y){ee.error("Set your booking URL in Settings to bulk-create CTAs.");return}const{data:Se}=await z.auth.getSession(),Re=(ue=(G=Se==null?void 0:Se.session)==null?void 0:G.user)!=null&&ue.id?String(Se.session.user.id):"";if(!Re){ee.error("Please sign in again");return}A("create"),T({current:0,total:_e.length,label:"Creating CTAs"});let de=0;try{for(let he=0;he<_e.length;he+=1){const Z=_e[he];T({current:he,total:_e.length,label:`Creating CTA ${he+1}/${_e.length}`});let ge=null;for(let Ee=0;Ee<6;Ee+=1){const We=eM(8),{data:Oe,error:Fe}=await z.from("tracked_links").insert({workspace_id:R,created_by:Re,name:String(Z.video.title||"").trim().slice(0,140)||"CTA link",slug:We,destination_url:Y,mode:"redirect",utm_params:{created_for:"content_youtube",source_type:"youtube_video",source_ref:Z.video.video_id}}).select("id,workspace_id,name,slug,destination_url,mode,archived,clicks_total,last_clicked_at,created_at").maybeSingle();if(!Fe&&(Oe!=null&&Oe.id)){ge=Oe;break}if(!tM(Fe))break}if(!ge)continue;const{error:Ie}=await z.from("content_ctas").insert({workspace_id:R,source_type:"youtube_video",source_ref:Z.video.video_id,tracked_link_id:ge.id});if(Ie){if(await z.from("tracked_links").delete().eq("workspace_id",R).eq("id",ge.id),rM(Ie))continue;continue}de+=1}}finally{T(null),A(null)}de>0?(ee.success(`Created ${de} CTA${de===1?"":"s"}`),await i({silent:!0})):ee.error("No CTAs created")},[e==null?void 0:e.id,o,_e,i]),Ne=h.useCallback(async R=>{var G,ue;if(R.cta){ee.info("CTA already exists for this video.");return}const Y=e!=null&&e.id?String(e.id):"";if(!Y)return;const Se=String(o||"").trim();if(!Se){ee.error("Set your booking URL in Settings first.");return}const{data:Re}=await z.auth.getSession(),de=(ue=(G=Re==null?void 0:Re.session)==null?void 0:G.user)!=null&&ue.id?String(Re.session.user.id):"";if(!de){ee.error("Please sign in again");return}U(R.video.video_id);try{let he=null;for(let ge=0;ge<6;ge+=1){const Ie=eM(8),{data:Ee,error:We}=await z.from("tracked_links").insert({workspace_id:Y,created_by:de,name:String(R.video.title||"").trim().slice(0,140)||"CTA link",slug:Ie,destination_url:Se,mode:"redirect",utm_params:{created_for:"content_youtube",source_type:"youtube_video",source_ref:R.video.video_id}}).select("id,workspace_id,name,slug,destination_url,mode,archived,clicks_total,last_clicked_at,created_at").maybeSingle();if(!We&&(Ee!=null&&Ee.id)){he=Ee;break}if(!tM(We))break}if(!he){ee.error("Failed to create CTA");return}const{error:Z}=await z.from("content_ctas").insert({workspace_id:Y,source_type:"youtube_video",source_ref:R.video.video_id,tracked_link_id:he.id});if(Z){if(await z.from("tracked_links").delete().eq("workspace_id",Y).eq("id",he.id),rM(Z)){ee.info("CTA already exists for this video."),await i({silent:!0});return}throw Z}ee.success("CTA created"),await i({silent:!0})}catch(he){ee.error(String((he==null?void 0:he.message)||"Failed to create CTA"))}finally{U(null)}},[e==null?void 0:e.id,o,i]),je=h.useCallback(async R=>{if(!R.short_url){ee.error("No CTA link found for this video.");return}try{await navigator.clipboard.writeText(R.short_url),M(R.video.video_id),ie.current&&window.clearTimeout(ie.current),ie.current=window.setTimeout(()=>{M(Y=>Y===R.video.video_id?null:Y)},2e3),ee.success("CTA link copied")}catch{ee.error("Failed to copy CTA link")}},[]),J=h.useCallback(async R=>{const Y=e!=null&&e.id?String(e.id):"";if(!(!Y||!R))try{const{error:Se}=await z.from("content_ctas").delete().eq("workspace_id",Y).eq("id",R);if(Se)throw Se;ee.success("CTA mapping deleted"),await i({silent:!0})}catch(Se){ee.error(String((Se==null?void 0:Se.message)||"Failed to delete CTA mapping"))}},[e==null?void 0:e.id,i]),oe=h.useMemo(()=>{const R=u.filter(Y=>Number(Y.video.view_count||0)>0&&Number(Y.clicks_range||0)>0);return R.sort((Y,Se)=>Number(Se.ctr||0)-Number(Y.ctr||0)),R[0]||null},[u]);return n?s.jsx(Er,{children:s.jsxs("div",{className:"p-8",children:[s.jsx("div",{className:"flex items-start justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"headline-domaine text-[36px] font-normal",children:"Content"}),s.jsx("div",{className:"mt-1 text-sm text-white/45",children:"YouTube ROI + CTA control."})]})}),s.jsx("div",{className:"mt-7 grid grid-cols-1 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((R,Y)=>s.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black p-6",children:[s.jsx($e,{className:"h-4 w-24 bg-white/5"}),s.jsx($e,{className:"mt-4 h-10 w-28 bg-white/5"}),s.jsx($e,{className:"mt-3 h-3 w-32 bg-white/5"})]},Y))}),s.jsxs("div",{className:"mt-6 rounded-3xl border border-white/10 bg-black p-6",children:[s.jsx($e,{className:"h-5 w-44 bg-white/5"}),s.jsx($e,{className:"mt-5 h-[260px] w-full bg-white/5"})]}),s.jsxs("div",{className:"mt-6 rounded-3xl border border-white/10 bg-black p-6",children:[s.jsx($e,{className:"h-5 w-40 bg-white/5"}),s.jsx($e,{className:"mt-4 h-[420px] w-full bg-white/5"})]})]})}):s.jsxs(Er,{children:[s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"headline-domaine text-[36px] font-normal",children:"Content"}),s.jsx("div",{className:"mt-1 text-sm text-white/45",children:"YouTube ROI + CTA control."}),s.jsx("div",{className:"mt-2 text-xs text-white/40",children:S||(c?`Last synced: ${J4(((Ce=l[0])==null?void 0:Ce.last_synced_at)||null)}`:"Connect YouTube to begin.")})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ze,{variant:"outline",size:"icon",onClick:Q,title:"Export CSV","aria-label":"Export CSV",className:"mr-1 h-8 w-8 rounded-xl border-0 bg-white/8 text-white hover:bg-white/24 hover:text-white",children:s.jsx(lN,{className:"h-4 w-4"})}),s.jsxs(ze,{onClick:()=>ne(),disabled:!c||x,className:"h-8 gap-2 rounded-xl border-0 bg-white px-3.5 text-black hover:bg-white/90",children:[s.jsx(RY,{className:"h-4 w-4"}),"Sync"]})]})]}),s.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-between gap-3",children:[s.jsx("div",{className:"-ml-2 flex items-center gap-2",children:q.map(R=>s.jsx(KIe,{active:t===R.key,onClick:()=>r(R.key),children:R.label},R.key))}),s.jsxs("div",{className:"w-full sm:w-[360px] relative",children:[s.jsx(Jx,{className:"h-4 w-4 text-white/45 absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none"}),s.jsx($r,{value:p,onChange:R=>v(R.target.value),placeholder:"Search videos by title",className:"bg-transparent border-white/10 rounded-2xl h-10 pl-9"})]})]}),o?null:s.jsxs("div",{className:"mt-4 rounded-3xl border border-white/10 bg-black/50 px-5 py-4 text-sm text-white/55",children:["Set your ",s.jsx("span",{className:"text-white/80 font-semibold",children:"booking URL"})," in Settings to speed up CTA creation (it becomes the default destination)."]}),s.jsxs("div",{className:"mt-7 grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(Gv,{title:"Total clicks",value:Bu(m.totalClicks),meta:t==="all"?"All time":d.label}),s.jsx(Gv,{title:"Clicks / day",value:m.avgPerDay?m.avgPerDay.toFixed(1):"0",meta:t==="all"?"Avg since first CTA":d.label}),s.jsx(Gv,{title:"CTA coverage",value:`${m.ctaCoverage.withCta}/${m.ctaCoverage.totalVideos}`,meta:"Videos with a CTA"}),s.jsx(Gv,{title:"Top video (CTR)",value:oe?Z4(oe.ctr):"",meta:oe?oe.video.title:"No data yet"})]}),s.jsxs(zj,{className:"mt-6 p-6",children:[s.jsx("div",{className:"flex items-start justify-between gap-3",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-white/85",children:"Daily clicks"}),s.jsx("div",{className:"mt-1 text-xs text-white/45",children:d.label})]})}),s.jsx("div",{className:"mt-5 h-[280px]",children:s.jsx(yy,{width:"100%",height:"100%",children:s.jsxs($j,{data:f,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"roiClicks",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#60a5fa",stopOpacity:.35}),s.jsx("stop",{offset:"95%",stopColor:"#60a5fa",stopOpacity:.02})]})}),s.jsx(tx,{stroke:"rgba(255,255,255,0.06)",vertical:!1}),s.jsx(Sf,{dataKey:"day",tickLine:!1,axisLine:!1,tick:{fill:"rgba(255,255,255,0.45)",fontSize:11},minTickGap:18,tickFormatter:R=>R.slice(5)}),s.jsx(kf,{tickLine:!1,axisLine:!1,tick:{fill:"rgba(255,255,255,0.45)",fontSize:11},width:32}),s.jsx(Ma,{cursor:{stroke:"rgba(255,255,255,0.1)"},contentStyle:{background:"rgba(0,0,0,0.92)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:16,boxShadow:"0 18px 55px rgba(0,0,0,0.5)"},labelStyle:{color:"rgba(255,255,255,0.75)"},itemStyle:{color:"rgba(255,255,255,0.9)"},formatter:R=>[R,"Clicks"]}),s.jsx(Wi,{type:"monotone",dataKey:"clicks",stroke:"#60a5fa",strokeWidth:2,fill:"url(#roiClicks)"})]})})})]}),s.jsxs(zj,{className:"mt-6 p-6",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-white/85",children:"Videos"}),s.jsx("div",{className:"mt-1 text-xs text-white/45",children:c?`${ae.length} videos  ${_e.length} missing CTA`:"Connect YouTube to see videos."})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(ze,{variant:"outline",className:"gap-2",disabled:N!==null||_e.length===0,onClick:te,children:[s.jsx(PY,{className:"h-4 w-4"}),"Create CTAs for missing"]})})]}),P?s.jsxs("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/50 px-4 py-3 text-sm text-white/65",children:[P.label,s.jsxs("span",{className:"ml-2 text-white/45",children:["(",P.current,"/",P.total,")"]})]}):null,c?ae.length===0?s.jsx("div",{className:"mt-5 rounded-2xl border border-white/10 bg-black/50 px-4 py-4 text-sm text-white/55",children:"No videos found."}):s.jsx("div",{className:"mt-5",children:s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"space-y-3",children:ye.map(R=>{const Y=R.video,Se=HIe(Y.thumbnails_json);return s.jsxs("div",{className:"grid grid-cols-[minmax(0,2.45fr)_minmax(80px,0.55fr)_minmax(120px,0.7fr)_minmax(150px,0.8fr)_minmax(205px,0.95fr)] gap-4 rounded-2xl bg-black/40 px-4 py-4 items-center transition-colors hover:bg-white/[0.015]",children:[s.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[s.jsx("div",{className:"h-[81px] w-[144px] rounded-xl bg-black/50 overflow-hidden shrink-0 flex items-center justify-center",children:Se?s.jsx("img",{src:Se,alt:"",className:"h-full w-full object-contain"}):s.jsx(y1,{className:"h-4 w-4 text-white/60"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-[13px] font-semibold text-white/85 truncate",children:Y.title}),s.jsxs("div",{className:"mt-1 text-xs text-white/45 flex items-center gap-2",children:[s.jsx("span",{children:Y.published_at?new Date(Y.published_at).toLocaleDateString():""}),Y.is_short?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-white/25",children:""}),s.jsx("span",{className:"text-white/55",children:"Short"})]}):null]})]})]}),s.jsxs("div",{className:"text-sm text-white/80 flex items-center justify-end gap-1.5 tabular-nums text-right",children:[s.jsx(Xd,{className:"h-3.5 w-3.5 text-white/45"}),Bu(Number(Y.view_count||0))]}),s.jsxs("div",{className:"text-xs text-white/55 flex items-center justify-end gap-3 tabular-nums text-right",children:[s.jsxs("span",{className:"inline-flex items-center gap-1",title:"Likes",children:[s.jsx(u3,{className:"h-3.5 w-3.5 text-white/45"}),Bu(Number(Y.like_count||0))]}),s.jsxs("span",{className:"inline-flex items-center gap-1",title:"Comments",children:[s.jsx(cN,{className:"h-3.5 w-3.5 text-white/45"}),Bu(Number(Y.comment_count||0))]})]}),s.jsxs("div",{className:"text-xs text-white/55 flex items-center justify-end gap-2 tabular-nums text-right",children:[s.jsx("span",{className:"text-white/80 font-semibold",children:Bu(Number(R.clicks_range||0))}),s.jsx("span",{className:"text-white/25",children:"/"}),s.jsx("span",{className:"text-white/45",children:Bu(Number(R.clicks_all_time||0))}),s.jsx("span",{className:"text-white/25",children:""}),s.jsx("span",{className:"text-white/45",children:J4(R.last_clicked_at)})]}),s.jsx("div",{className:"flex items-center justify-end gap-2",children:R.cta?s.jsxs(s.Fragment,{children:[s.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>je(R),className:"h-8 rounded-xl border-0 bg-white/8 px-2.5 text-[11px] text-white/90 hover:bg-white/24",title:"Copy CTA link",children:[s.jsxs("span",{className:"relative mr-1.5 h-3.5 w-3.5",children:[s.jsx(TY,{className:Pe("absolute inset-0 h-3.5 w-3.5 transition-all duration-200",B===Y.video_id?"scale-75 opacity-0":"scale-100 opacity-100")}),s.jsx(Ha,{className:Pe("absolute inset-0 h-3.5 w-3.5 text-emerald-300 transition-all duration-200",B===Y.video_id?"scale-100 opacity-100":"scale-75 opacity-0")})]}),B===Y.video_id?"Copied":"Copy CTA"]}),s.jsx(ze,{variant:"outline",size:"icon",onClick:()=>H({ctaId:R.cta.id,title:Y.title}),className:"h-8 w-8 rounded-xl border-0 bg-white/8 text-white hover:bg-white/24 hover:text-white",title:"Delete CTA mapping",children:s.jsx(Va,{className:"h-3.5 w-3.5"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(ze,{variant:"outline",size:"sm",disabled:L===Y.video_id||N!==null,onClick:()=>Ne(R),className:"h-8 rounded-xl border-0 bg-white/8 px-2.5 text-[11px] text-white/90 hover:bg-white/12",children:L===Y.video_id?"Creating":"Create CTA"}),s.jsx(ze,{variant:"outline",size:"icon",disabled:!0,className:"h-8 w-8 rounded-xl border-0 bg-white/8 text-white/35 opacity-60",title:"No CTA mapping to delete yet",children:s.jsx(Va,{className:"h-3.5 w-3.5"})})]})})]},Y.video_id)})})})}):s.jsx("div",{className:"mt-5 rounded-3xl border border-white/10 bg-black/50 p-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-2xl border border-white/10 bg-black flex items-center justify-center",children:s.jsx(y1,{className:"h-5 w-5 text-white/70"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-sm font-semibold text-white/85",children:"Connect YouTube"}),s.jsx("div",{className:"mt-1 text-xs text-white/45",children:"Connect your channel to import videos and manage CTAs."}),s.jsx("div",{className:"mt-4",children:s.jsxs(ze,{onClick:K,className:"gap-2",children:[s.jsx(y1,{className:"h-4 w-4"}),"Connect YouTube"]})})]})]})}),ae.length>Fu?s.jsxs("div",{className:"mt-4 flex items-center justify-between gap-3 px-1",children:[s.jsxs("div",{className:"text-xs text-white/45",children:["Showing ",ce,"-",me," of ",ae.length]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ze,{variant:"outline",size:"sm",disabled:$<=1,onClick:()=>re(R=>Math.max(1,R-1)),className:"h-8 rounded-xl border-0 bg-white/8 px-3 text-[12px] text-white/80 hover:bg-white/14",children:"Prev"}),s.jsx(ze,{variant:"outline",size:"sm",disabled:$>=pe,onClick:()=>re(R=>Math.min(pe,R+1)),className:"h-8 rounded-xl border-0 bg-white/8 px-3 text-[12px] text-white/80 hover:bg-white/14",children:"Next"}),s.jsxs("span",{className:"text-xs text-white/45 px-1",children:["Page ",$," of ",pe]})]})]}):null]})]}),s.jsx(Wl,{open:!!D,onOpenChange:R=>R?null:H(null),children:s.jsxs(To,{className:"rounded-3xl border border-white/10 bg-black",children:[s.jsxs(Oo,{children:[s.jsx(Mo,{className:"text-red-400",children:"Are you sure?"}),s.jsxs(Ro,{children:["Delete the CTA mapping for ",s.jsx("span",{className:"text-white/80",children:(D==null?void 0:D.title)||"this video"}),"? This cannot be undone."]})]}),s.jsxs(Io,{children:[s.jsx(Do,{className:"rounded-xl border-0 bg-white/8 text-white/80 hover:bg-white/12",children:"Cancel"}),s.jsx($o,{onClick:()=>{D!=null&&D.ctaId&&(J(D.ctaId),H(null))},className:"rounded-xl border-0 bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})})]})}function zj({className:e,children:t}){return s.jsx("div",{className:Pe("rounded-3xl border border-white/10 bg-black",e),children:t})}function Gv({title:e,value:t,meta:r}){return s.jsxs(zj,{className:"p-6",children:[s.jsx("div",{className:"text-[12px] text-white/45",children:e}),s.jsx("div",{className:"mt-3 text-3xl font-semibold text-white/92",children:t}),s.jsx("div",{className:"mt-1 text-xs text-white/35 truncate",children:r})]})}function KIe({active:e,onClick:t,children:r}){return s.jsx("button",{type:"button",onClick:t,className:Pe("h-8 px-3.5 rounded-xl transition-colors text-[13px] font-semibold tracking-[0.02em]",e?"bg-[#1b1f21] text-white":"bg-transparent text-[#a1a4a5]"),children:r})}function GIe(){return s.jsx(Er,{requireOwner:!0,children:s.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-12",children:[s.jsx("h1",{className:"text-2xl font-medium mb-8",children:"Ask AI"}),s.jsxs("div",{className:"border border-dashed border-border rounded-lg p-12 text-center",children:[s.jsx("p",{className:"text-muted-foreground",children:"AI Assistant coming soon"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Get personalized recommendations based on your KPIs"})]})]})})}const Yv=["#ec4899","#6366f1","#f59e0b","#10b981","#ef4444","#f97316","#3b82f6","#8b5cf6","#9ca3af"],M9=[{value:"user-plus",icon:Lm},{value:"message-circle",icon:Hc},{value:"star",icon:Ss},{value:"x-circle",icon:Wc},{value:"phone-call",icon:Vd},{value:"trophy",icon:Dm},{value:"user-round-x",icon:Tl},{value:"tag",icon:fo},{value:"check-circle-2",icon:Bx},{value:"badge-check",icon:jD},{value:"flame",icon:Js},{value:"sun",icon:ml},{value:"snowflake",icon:hl},{value:"link",icon:qx},{value:"send",icon:Wx},{value:"bell",icon:ND},{value:"bookmark",icon:CD},{value:"briefcase",icon:Lx},{value:"dollar",icon:Jk},{value:"zap",icon:sN},{value:"heart",icon:eN},{value:"sparkles",icon:QD},{value:"shield-check",icon:GD},{value:"shield-alert",icon:KD},{value:"megaphone",icon:UD},{value:"clipboard-list",icon:TD},{value:"file-text",icon:Ux},{value:"camera",icon:DS},{value:"video",icon:DS},{value:"mic",icon:zD},{value:"globe",icon:Zk},{value:"map-pin",icon:tN},{value:"building-2",icon:ED},{value:"handshake",icon:DD},{value:"users",icon:iN},{value:"user",icon:aN}],YIe=new Map(M9.map(e=>[e.value,e.icon]));function R9(e){return String(e||"").trim().toLowerCase().replace(/[_-]+/g," ").replace(/\s+/g," ")}function XIe(e){const t=R9(e);return t==="hot"||t==="warm"||t==="cold"||t==="hot lead"||t==="warm lead"||t==="cold lead"}function QIe(e){const{color:t,icon:r,label:n,sizeClassName:a="w-10 h-10"}=e,i=YIe.get(String(r||"").trim().toLowerCase())||fo;return s.jsx("div",{className:Pe(a,"acq-orb flex items-center justify-center shrink-0"),style:vg(t),"aria-label":n,title:n,children:s.jsx(i,{className:"h-5 w-5",style:{color:t}})})}function JIe(){var Ur;const e=Xt(),[t,r]=Vf(),{profile:n,updateProfile:a,signOut:i,user:o,loading:l}=Kt(),{workspace:c,userRole:u,updateWorkspace:d}=on(),f=String(t.get("tab")||"").trim(),m=["team","phases","socials","integrations"].includes(f)?f:"team",p=u==="owner",v=h.useCallback(ke=>{r(Je=>{const wt=new URLSearchParams(Je);return wt.set("tab",ke),wt})},[r]),[g,b]=h.useState(""),[y,w]=h.useState(!1),[x,_]=h.useState("photo"),[S,k]=h.useState("#2A2A2A"),[C,j]=h.useState(""),[N,A]=h.useState(!1),[P,T]=h.useState(""),[L,U]=h.useState(!1),[D,H]=h.useState(!1),[B,M]=h.useState(null),[$,re]=h.useState(!1),[ie,q]=h.useState(null),[K,ne]=h.useState(""),[ae,_e]=h.useState(null),[pe,ye]=h.useState([]),[ce,me]=h.useState(!1),[Q,te]=h.useState(""),[Ne,je]=h.useState(!1),[J,oe]=h.useState(!1),[Ce,R]=h.useState(null),[Y,Se]=h.useState(""),[Re,de]=h.useState(Yv[0]),[G,ue]=h.useState("tag"),[he,Z]=h.useState(""),[ge,Ie]=h.useState(null),Ee=h.useMemo(()=>[{id:"team",label:"Team",icon:iN},{id:"phases",label:"Phases",icon:fo},{id:"socials",label:"Socials",icon:Zk},{id:"integrations",label:"Integrations",icon:fG}],[]);h.useEffect(()=>{n&&(b(n.full_name||n.display_name||""),_(n.avatar_mode||"photo"),k(n.avatar_color||"#2A2A2A"))},[n]),h.useEffect(()=>{c&&j(c.name||"")},[c]),h.useEffect(()=>{if(!(c!=null&&c.id))return;let ke=!1;return(async()=>{U(!0);try{const{data:wt,error:_t}=await z.from("workspaces").select("booking_url").eq("id",c.id).maybeSingle();if(_t)throw _t;ke||T(wt!=null&&wt.booking_url?String(wt.booking_url):"")}catch(wt){console.warn("Failed to load booking URL:",wt),ke||T("")}finally{ke||U(!1)}})(),()=>{ke=!0}},[c==null?void 0:c.id]);const We=h.useCallback(async()=>{if(c!=null&&c.id&&u==="owner"&&!D){H(!0);try{const ke=P.trim(),{error:Je}=await z.from("workspaces").update({booking_url:ke||null}).eq("id",c.id);if(Je)throw Je;ee.success("Booking link saved")}catch(ke){console.error("Save booking URL error:",ke),ee.error((ke==null?void 0:ke.message)||"Failed to save booking link")}finally{H(!1)}}},[c==null?void 0:c.id,u,P,D]),Oe=h.useCallback(async ke=>{if(!(c!=null&&c.id)){M(null),ne("");return}re(!0);try{let Je=null;if(p){const{data:wt,error:_t}=await eu("billing-api",{body:{action:"status",workspaceId:c.id}});if(_t)throw _t;if(wt!=null&&wt.error)throw new Error(String(wt.error));Je=(wt==null?void 0:wt.billing)||null}else{const{data:wt,error:_t}=await z.from("workspace_billing_integrations").select("*").eq("workspace_id",c.id).maybeSingle();if(_t)throw _t;Je=wt||null}M(Je),ne(String((Je==null?void 0:Je.whop_membership_id)||""))}catch(Je){console.error("Load billing status error:",Je),M(null),ke!=null&&ke.silent||ee.error((Je==null?void 0:Je.message)||"Failed to load billing status")}finally{re(!1)}},[c==null?void 0:c.id,p]),Fe=h.useCallback(async(ke,Je)=>{if(!(c!=null&&c.id))throw new Error("No workspace selected");if(!p)throw new Error("Only workspace owners can manage billing");const{data:wt,error:_t}=await eu("billing-api",{body:{action:ke,workspaceId:c.id,...Je||{}}});if(_t)throw _t;if(wt!=null&&wt.error)throw new Error(String(wt.error));return wt},[c==null?void 0:c.id,p]),rt=h.useCallback(async()=>{if(!ie){q("checkout");try{const ke=await Fe("stripe_create_checkout"),Je=String((ke==null?void 0:ke.url)||"").trim();if(!Je)throw new Error("Stripe checkout URL not returned");window.location.assign(Je)}catch(ke){console.error("Stripe checkout error:",ke),ee.error((ke==null?void 0:ke.message)||"Failed to open Stripe checkout")}finally{q(null)}}},[ie,Fe]),nt=h.useCallback(async()=>{if(!ie){q("portal");try{const ke=await Fe("stripe_create_portal"),Je=String((ke==null?void 0:ke.url)||"").trim();if(!Je)throw new Error("Stripe portal URL not returned");window.location.assign(Je)}catch(ke){console.error("Stripe portal error:",ke),ee.error((ke==null?void 0:ke.message)||"Failed to open Stripe portal")}finally{q(null)}}},[ie,Fe]),Gt=h.useCallback(async()=>{if(!ie){q("sync");try{const ke=await Fe("stripe_sync_subscription");if(ke!=null&&ke.billing){const Je=ke.billing;M(Je)}else await Oe({silent:!0});ee.success("Stripe status synced")}catch(ke){console.error("Stripe sync error:",ke),ee.error((ke==null?void 0:ke.message)||"Failed to sync Stripe status")}finally{q(null)}}},[ie,Fe,Oe]),ht=h.useCallback(async()=>{if(ae)return;const ke=K.trim();if(!ke){ee.error("Enter a Whop membership ID first");return}_e("link");try{const Je=await Fe("whop_link_membership",{membershipId:ke});if(Je!=null&&Je.billing){const wt=Je.billing;M(wt),ne(String(wt.whop_membership_id||ke))}else await Oe({silent:!0});ee.success("Whop membership linked")}catch(Je){console.error("Whop link error:",Je),ee.error((Je==null?void 0:Je.message)||"Failed to link Whop membership")}finally{_e(null)}},[ae,K,Fe,Oe]),dt=h.useCallback(async()=>{if(ae)return;const ke=K.trim();_e("sync");try{const Je=await Fe("whop_sync_membership",ke?{membershipId:ke}:void 0);if(Je!=null&&Je.billing){const wt=Je.billing;M(wt),ne(String(wt.whop_membership_id||ke))}else await Oe({silent:!0});ee.success("Whop membership synced")}catch(Je){console.error("Whop sync error:",Je),ee.error((Je==null?void 0:Je.message)||"Failed to sync Whop membership")}finally{_e(null)}},[ae,K,Fe,Oe]),gt=h.useCallback(()=>{R(null),Se(""),de(Yv[0]),ue("tag"),Z("")},[]),It=h.useCallback(async()=>{if(c!=null&&c.id){me(!0);try{const{data:ke,error:Je}=await z.from("instagram_tags").select("id,name,color,icon,prompt").eq("workspace_id",c.id).order("created_at",{ascending:!0});if(Je)throw Je;const _t=(Array.isArray(ke)?ke:[]).map(pr=>({id:String(pr.id),name:String(pr.name||"Phase"),color:String(pr.color||"#8A8A8A"),icon:String(pr.icon||"tag"),prompt:pr.prompt?String(pr.prompt):null})).filter(pr=>!XIe(pr.name)).filter(pr=>{const we=R9(pr.name);return we!=="priority"&&we!=="spam"}),{data:Os,error:Is}=await z.from("instagram_conversation_tags").select("tag_id").eq("workspace_id",c.id);if(Is)throw Is;const Ms={};for(const pr of Array.isArray(Os)?Os:[]){const we=String(pr.tag_id||"");we&&(Ms[we]=(Ms[we]||0)+1)}ye(_t.map(pr=>({...pr,leadCount:Ms[pr.id]||0})))}catch(ke){console.warn("Failed to load phases:",ke),ye([])}finally{me(!1)}}},[c==null?void 0:c.id]);h.useEffect(()=>{m==="integrations"&&Oe({silent:!0})},[m,Oe]),h.useEffect(()=>{m!=="phases"||l||!o||!(c!=null&&c.id)||It()},[m,l,o==null?void 0:o.id,c==null?void 0:c.id,It]);const Qt=h.useCallback(async()=>{w(!0);const ke={},Je=String((n==null?void 0:n.full_name)||(n==null?void 0:n.display_name)||"").trim(),wt=String(g||"").trim();if(Je!==wt&&(ke.display_name=wt||null,ke.full_name=wt||null),((n==null?void 0:n.avatar_mode)||"photo")!==x&&(ke.avatar_mode=x),((n==null?void 0:n.avatar_color)||"#2A2A2A")!==S&&(ke.avatar_color=S),Object.keys(ke).length===0){w(!1),ee.success("Profile updated");return}const{error:_t}=await a(ke);if(w(!1),_t){const Os=String((_t==null?void 0:_t.message)||"Failed to update profile");ee.error(Os);return}ee.success("Profile updated")},[n,g,x,S,a]);h.useCallback(async()=>{A(!0);const{error:ke}=await d({name:C});A(!1),ke?ee.error("Failed to update workspace"):ee.success("Workspace updated")},[d,C]);const Nn=h.useCallback(()=>{gt(),je(!0)},[gt]),Br=h.useCallback(ke=>{R(ke.id),Se(ke.name),de(ke.color||Yv[0]),ue(ke.icon||"tag"),Z(ke.prompt||""),je(!0)},[]),nr=h.useCallback(async()=>{if(!(c!=null&&c.id))return;const ke=Y.trim();if(!ke){ee.error("Phase name is required");return}oe(!0);try{if(Ce){const{error:Je}=await z.from("instagram_tags").update({name:ke,color:Re||"#8A8A8A",icon:G||"tag",prompt:he.trim()||null}).eq("workspace_id",c.id).eq("id",Ce);if(Je)throw Je;ee.success("Phase updated")}else{const{error:Je}=await z.from("instagram_tags").insert({workspace_id:c.id,name:ke,color:Re||"#8A8A8A",icon:G||"tag",prompt:he.trim()||null,created_by:(o==null?void 0:o.id)||null});if(Je)throw Je;ee.success("Phase created")}je(!1),gt(),await It()}catch(Je){ee.error((Je==null?void 0:Je.message)||"Failed to save phase")}finally{oe(!1)}},[c==null?void 0:c.id,o==null?void 0:o.id,Ce,Y,Re,G,he,It,gt]),nn=h.useCallback(async()=>{if(!(c!=null&&c.id)||!ge)return;const ke=ge;try{const{error:Je}=await z.from("instagram_tags").delete().eq("workspace_id",c.id).eq("id",ke.id);if(Je)throw Je;ee.success("Phase deleted"),await It()}catch(Je){ee.error((Je==null?void 0:Je.message)||"Failed to delete phase")}finally{Ie(null)}},[c==null?void 0:c.id,ge,It]),ct=h.useMemo(()=>{const ke=Q.trim().toLowerCase();return ke?pe.filter(Je=>Je.name.toLowerCase().includes(ke)):pe},[pe,Q]),xe=String((B==null?void 0:B.stripe_status)||"").trim().replace(/_/g," "),et=String((B==null?void 0:B.whop_status)||"").trim().replace(/_/g," "),Wt=!!String((B==null?void 0:B.stripe_customer_id)||"").trim(),Jt=!!String((B==null?void 0:B.stripe_subscription_id)||"").trim(),ur=!!(c!=null&&c.id),mr=h.useCallback(ke=>{const Je=String(ke||"").trim();if(!Je)return"";const wt=new Date(Je);return Number.isNaN(wt.getTime())?Je:wt.toLocaleString()},[]);return s.jsxs(Er,{children:[s.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-10",children:[s.jsxs("div",{children:[s.jsx("div",{className:"headline-domaine text-3xl font-semibold text-white",children:"Settings"}),s.jsx("p",{className:"text-sm text-white/45 mt-1",children:"Manage your workspace, team, and integrations"})]}),s.jsxs("div",{className:"mt-8 flex flex-col md:flex-row gap-8",children:[s.jsx("nav",{className:"md:w-[240px] flex md:flex-col gap-2 overflow-auto hide-scrollbar",children:Ee.map(ke=>{const Je=m===ke.id,wt=ke.icon;return s.jsxs("button",{type:"button",onClick:()=>v(ke.id),className:Pe("h-11 px-4 rounded-2xl border text-sm inline-flex items-center gap-3 transition-colors whitespace-nowrap",Je?"border-white/20 bg-white/[0.05] text-white":"border-white/10 bg-black text-white/65 hover:text-white hover:bg-white/[0.03]"),children:[s.jsx(wt,{className:"h-4 w-4 text-white/70"}),s.jsx("span",{className:"font-medium",children:ke.label})]},ke.id)})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[m==="profile"?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black p-6",children:[s.jsx("div",{className:"text-lg font-semibold text-white",children:"Profile"}),s.jsx("div",{className:"mt-1 text-sm text-white/45",children:"Update your personal info."}),s.jsxs("div",{className:"mt-6 space-y-5",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-white/60",children:"Avatar"}),s.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[s.jsx(Dp,{name:g||"User",size:"md",bgColor:S,imageUrl:(n==null?void 0:n.avatar_url)||((Ur=o==null?void 0:o.user_metadata)==null?void 0:Ur.avatar_url),mode:x}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",className:Pe("h-9 px-3 rounded-xl border text-[13px] transition-colors",x==="photo"?"border-white/20 bg-white/[0.06] text-white":"border-white/10 text-white/70 hover:text-white hover:bg-white/[0.03]"),onClick:()=>_("photo"),children:"Photo"}),s.jsx("button",{type:"button",className:Pe("h-9 px-3 rounded-xl border text-[13px] transition-colors",x==="letter"?"border-white/20 bg-white/[0.06] text-white":"border-white/10 text-white/70 hover:text-white hover:bg-white/[0.03]"),onClick:()=>_("letter"),children:"Letter"})]}),x==="letter"?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"text-xs text-white/45",children:"Color"}),s.jsx("input",{type:"color",value:S,onChange:ke=>k(ke.target.value),className:"h-8 w-12 rounded-lg border border-white/10 bg-transparent"}),s.jsx("input",{value:S,onChange:ke=>k(ke.target.value),className:"h-8 w-28 rounded-lg border border-white/10 bg-transparent px-2 text-xs text-white/75"})]}):null]})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-white/60",children:"Name"}),s.jsx("input",{value:g,onChange:ke=>b(ke.target.value),placeholder:"Your name",className:"mt-2 h-10 w-full rounded-2xl border border-white/10 bg-transparent px-3 text-sm text-white/80 placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-white/10"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",className:"h-8 px-3.5 rounded-xl bg-white text-black text-[13px] font-semibold hover:bg-white/90 disabled:opacity-60",disabled:y,onClick:Qt,children:y?s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4 animate-spin"}),"Saving"]}):"Save changes"}),s.jsx("button",{type:"button",className:"h-10 px-4 rounded-2xl border border-white/10 text-sm text-white/60 hover:text-white hover:bg-white/[0.03]",onClick:()=>i(),children:"Sign out"})]})]})]}),null]}):null,m==="team"?s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black p-6",children:[s.jsx("div",{className:"text-lg font-semibold text-white",children:"Team"}),s.jsx("div",{className:"mt-1 text-sm text-white/45",children:"Manage team members and roles."}),s.jsx("div",{className:"mt-6 flex items-center gap-2",children:s.jsx("button",{type:"button",className:"h-8 px-3.5 rounded-xl bg-white text-black text-[13px] font-semibold hover:bg-white/90",onClick:()=>e("/team"),children:"Open Team"})})]}):null,m==="socials"?s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black p-6",children:[s.jsx("div",{className:"text-lg font-semibold text-white",children:"Socials"}),s.jsx("div",{className:"mt-1 text-sm text-white/45",children:"Connect your social accounts."}),s.jsx("div",{className:"mt-6 flex items-center gap-2",children:s.jsx("button",{type:"button",className:"h-8 px-3.5 rounded-xl bg-white text-black text-[13px] font-semibold hover:bg-white/90",onClick:()=>e("/messages"),children:"Manage Instagram in Inbox"})})]}):null,m==="integrations"?s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black p-6",children:[s.jsx("div",{className:"text-lg font-semibold text-white",children:"Integrations"}),s.jsx("div",{className:"mt-1 text-sm text-white/45",children:"Configure the links and tools used across your workspace."})]}),s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black p-6",children:[s.jsx("div",{className:"text-sm font-medium text-white/90",children:"Booking link"}),s.jsx("div",{className:"mt-1 text-xs text-white/45",children:"Used by the Inbox Book call button. Paste any booking URL (Calendly recommended)."}),s.jsxs("div",{className:"mt-4 flex items-end gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[11px] text-white/60 uppercase tracking-wider",children:"Booking URL"}),s.jsx("input",{value:P,onChange:ke=>T(ke.target.value),placeholder:"https://calendly.com/...",disabled:L||u!=="owner",className:"mt-2 w-full h-10 px-3 rounded-2xl bg-transparent border border-white/10 text-sm text-white/80 placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-white/10 disabled:opacity-60"})]}),u==="owner"?s.jsx("button",{type:"button",className:"h-10 px-4 rounded-2xl bg-white text-black text-sm font-semibold hover:bg-white/90 disabled:opacity-60",disabled:L||D,onClick:We,children:D?s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4 animate-spin"}),"Saving"]}):"Save"}):null]}),u!=="owner"?s.jsx("div",{className:"mt-3 text-xs text-white/35",children:"Only workspace owners can edit this."}):null]}),s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black p-6",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-white/90",children:"Billing integrations"}),s.jsx("div",{className:"mt-1 text-xs text-white/45",children:"Stripe subscriptions and Whop membership sync."})]}),s.jsxs("button",{type:"button",className:"h-8 px-3 rounded-xl border border-white/10 text-xs text-white/70 hover:text-white hover:bg-white/[0.03] disabled:opacity-60 inline-flex items-center gap-1.5",onClick:()=>Oe(),disabled:$||!ur,children:[s.jsx(VD,{className:Pe("h-3.5 w-3.5",$?"animate-spin":"")}),"Refresh"]})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 xl:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/[0.015] p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-[0.12em] text-white/45",children:"Stripe"}),s.jsxs("div",{className:"mt-2 text-sm text-white/85",children:["Status:"," ",s.jsx("span",{className:"text-white/65",children:xe||"not connected"})]}),s.jsxs("div",{className:"mt-1 text-xs text-white/50",children:["Customer:"," ",s.jsx("span",{className:"text-white/65",children:Wt?String(B==null?void 0:B.stripe_customer_id):""})]}),s.jsxs("div",{className:"mt-1 text-xs text-white/50",children:["Subscription:"," ",s.jsx("span",{className:"text-white/65",children:Jt?String(B==null?void 0:B.stripe_subscription_id):""})]}),s.jsxs("div",{className:"mt-1 text-xs text-white/50",children:["Current period end:"," ",s.jsx("span",{className:"text-white/65",children:mr(B==null?void 0:B.stripe_current_period_end)})]}),p?s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[s.jsx("button",{type:"button",className:"h-9 px-3.5 rounded-xl bg-white text-black text-[13px] font-semibold hover:bg-white/90 disabled:opacity-60",onClick:rt,disabled:ie!==null||!ur,children:ie==="checkout"?s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4 animate-spin"}),"Opening"]}):"Start checkout"}),s.jsx("button",{type:"button",className:"h-9 px-3.5 rounded-xl border border-white/10 text-[13px] text-white/80 hover:bg-white/[0.04] disabled:opacity-60",onClick:nt,disabled:ie!==null||!Wt,children:ie==="portal"?s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4 animate-spin"}),"Opening"]}):"Open portal"}),s.jsx("button",{type:"button",className:"h-9 px-3.5 rounded-xl border border-white/10 text-[13px] text-white/80 hover:bg-white/[0.04] disabled:opacity-60",onClick:Gt,disabled:ie!==null||!Jt,children:ie==="sync"?s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4 animate-spin"}),"Syncing"]}):"Sync status"})]}):s.jsx("div",{className:"mt-4 text-xs text-white/40",children:"Only workspace owners can manage Stripe actions."})]}),s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/[0.015] p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-[0.12em] text-white/45",children:"Whop"}),s.jsxs("div",{className:"mt-2 text-sm text-white/85",children:["Status:"," ",s.jsx("span",{className:"text-white/65",children:et||"not connected"})]}),s.jsxs("div",{className:"mt-1 text-xs text-white/50",children:["Membership ID:"," ",s.jsx("span",{className:"text-white/65",children:B!=null&&B.whop_membership_id?String(B.whop_membership_id):""})]}),s.jsxs("div",{className:"mt-1 text-xs text-white/50",children:["Expires:"," ",s.jsx("span",{className:"text-white/65",children:mr(B==null?void 0:B.whop_expires_at)})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-[11px] text-white/60 uppercase tracking-wider",children:"Membership ID"}),s.jsx("input",{value:K,onChange:ke=>ne(ke.target.value),placeholder:"whop_membership_...",disabled:!p||ae!==null,className:"mt-2 w-full h-10 px-3 rounded-2xl bg-transparent border border-white/10 text-sm text-white/80 placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-white/10 disabled:opacity-60"})]}),p?s.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[s.jsx("button",{type:"button",className:"h-9 px-3.5 rounded-xl bg-white text-black text-[13px] font-semibold hover:bg-white/90 disabled:opacity-60",onClick:ht,disabled:ae!==null||!K.trim(),children:ae==="link"?s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4 animate-spin"}),"Linking"]}):"Link membership"}),s.jsx("button",{type:"button",className:"h-9 px-3.5 rounded-xl border border-white/10 text-[13px] text-white/80 hover:bg-white/[0.04] disabled:opacity-60",onClick:dt,disabled:ae!==null,children:ae==="sync"?s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4 animate-spin"}),"Syncing"]}):"Sync membership"})]}):s.jsx("div",{className:"mt-3 text-xs text-white/40",children:"Only workspace owners can manage Whop actions."})]})]})]})]}):null,m==="phases"?s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/[0.02] p-5 space-y-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-white/90",children:"Auto-Phasing"}),s.jsx("div",{className:"mt-1 text-xs text-white/45",children:"This feature is currently disabled."})]}),s.jsx("div",{className:"rounded-xl border border-white/10 bg-black/30 p-3 text-sm text-white/60",children:"Coming soon."})]}),s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold text-white",children:"Phases"}),s.jsx("div",{className:"mt-1 text-sm text-white/45",children:"Manage phases for your leads."})]}),s.jsxs("button",{type:"button",className:"h-10 px-4 rounded-2xl border border-white/15 text-sm text-white/85 hover:bg-white/[0.04] inline-flex items-center gap-2",onClick:Nn,children:[s.jsx(HD,{className:"h-4 w-4"}),"New Phase"]})]}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("div",{className:"relative flex-1 min-w-0",children:[s.jsx(zx,{className:"h-4 w-4 text-white/30 absolute left-3 top-1/2 -translate-y-1/2"}),s.jsx("input",{value:Q,onChange:ke=>te(ke.target.value),placeholder:"Search for phases",className:"w-full h-10 pl-9 pr-3 rounded-2xl bg-transparent border border-white/10 text-sm text-white/80 placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-white/10"})]})}),s.jsx("div",{className:"rounded-2xl border border-white/10 overflow-hidden",children:ce?s.jsx("div",{className:"p-5 text-sm text-white/50",children:"Loading phases"}):ct.length===0?s.jsx("div",{className:"p-5 text-sm text-white/50",children:"No phases yet."}):ct.map(ke=>s.jsx("div",{className:"px-4 py-3 border-b-[0.5px] border-white/10 last:border-b-0 hover:bg-white/[0.03] transition-colors",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(QIe,{color:ke.color,icon:ke.icon,label:ke.name}),s.jsx("button",{type:"button",className:"flex-1 min-w-0 text-left",onClick:()=>Br(ke),children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-sm text-white/90 truncate",children:ke.name}),s.jsx("div",{className:"mt-0.5 text-xs text-white/45 truncate",children:ke.prompt?ke.prompt:"No AI prompt"})]}),s.jsxs("div",{className:"text-xs text-white/45 whitespace-nowrap",children:[ke.leadCount," lead",ke.leadCount===1?"":"s"]})]})}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{type:"button",className:"h-9 w-9 rounded-xl border border-white/10 text-white/65 hover:text-white hover:bg-white/[0.04] grid place-items-center","aria-label":`Delete ${ke.name}`,title:"Delete",onClick:()=>Ie(ke),children:s.jsx(ZD,{className:"h-4 w-4"})}),s.jsx(AD,{className:"h-4 w-4 text-white/20"})]})]})},ke.id))})]}):null]})]})]}),s.jsx(Gi,{open:Ne,onOpenChange:ke=>{je(ke),ke||gt()},children:s.jsx(yi,{className:"max-w-[560px] rounded-2xl border border-white/10 bg-black p-0 text-white",children:s.jsxs("div",{className:"p-5",children:[s.jsx(xi,{children:s.jsx(bi,{className:"text-base font-semibold",children:Ce?"Edit Phase":"New Phase"})}),s.jsxs("div",{className:"mt-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-white/60",children:"Pick a color"}),s.jsx("div",{className:"mt-2 flex items-center gap-2",children:Yv.map(ke=>s.jsx("button",{type:"button",className:Pe("h-7 w-7 rounded-full border transition-colors",Re===ke?"border-white/60":"border-white/10 hover:border-white/25"),style:{backgroundColor:ke},"aria-label":`Select ${ke}`,onClick:()=>de(ke)},ke))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-white/60",children:"Pick an icon"}),s.jsx("div",{className:"mt-2 rounded-2xl border border-white/10 bg-black/40 p-2",children:s.jsx(b9,{className:"h-[190px]",children:s.jsx("div",{className:"grid grid-cols-8 gap-2",children:M9.map(ke=>{const Je=ke.icon,wt=G===ke.value;return s.jsx("button",{type:"button",className:Pe("h-10 w-10 rounded-xl border grid place-items-center transition-colors",wt?"border-white/45 bg-white/[0.06]":"border-white/10 bg-transparent hover:bg-white/[0.04]"),onClick:()=>ue(ke.value),"aria-label":`Select ${ke.value}`,title:ke.value,children:s.jsx(Je,{className:"h-4 w-4",style:{color:Re}})},ke.value)})})})})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-white/60",children:"Phase name"}),s.jsx("input",{value:Y,onChange:ke=>Se(ke.target.value),placeholder:"Hot Lead",className:"mt-2 h-10 w-full rounded-2xl border border-white/10 bg-transparent px-3 text-sm text-white/80 placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-white/10"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("div",{className:"text-sm text-white/60",children:"Requirements (Optional)"})}),s.jsx("div",{className:"mt-1 text-xs text-white/40",children:"We analyze entire lead conversations using these requirements to decide when to apply the phase."}),s.jsx("textarea",{value:he,onChange:ke=>Z(ke.target.value),placeholder:"If lead asks for a call or demo, apply Hot Lead.",className:"mt-2 w-full min-h-[110px] rounded-2xl border border-white/10 bg-transparent px-3 py-2 text-sm text-white/80 placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-white/10"})]}),s.jsxs("div",{className:"flex items-center justify-end gap-2 pt-1",children:[s.jsx("button",{type:"button",className:"h-10 px-4 rounded-2xl border border-white/10 text-sm text-white/65 hover:text-white hover:bg-white/[0.03]",onClick:()=>je(!1),children:"Cancel"}),s.jsx("button",{type:"button",className:"h-10 px-4 rounded-2xl border border-white/15 text-sm text-white/85 hover:bg-white/[0.04] disabled:opacity-60",onClick:nr,disabled:J,children:J?s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4 animate-spin"}),"Saving"]}):Ce?"Update Phase":"Create Phase"})]})]})]})})}),s.jsx(Wl,{open:!!ge,onOpenChange:ke=>ke?null:Ie(null),children:s.jsxs(To,{className:"rounded-2xl border border-white/10 bg-black text-white",children:[s.jsxs(Oo,{children:[s.jsx(Mo,{children:"Delete phase?"}),s.jsx(Ro,{className:"text-white/60",children:"Are you sure you want to delete this phase? This cannot be undone."})]}),s.jsxs(Io,{children:[s.jsx(Do,{className:"rounded-xl border border-white/15 bg-transparent text-white/75 hover:bg-white/[0.04]",children:"Cancel"}),s.jsx($o,{className:"rounded-xl bg-white text-black hover:bg-white/90",onClick:ke=>{ke.preventDefault(),nn()},children:"Delete"})]})]})})]})}var ZIe="Label",$9=h.forwardRef((e,t)=>s.jsx(ot.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));$9.displayName=ZIe;var D9=$9;const e4e=Lf("text-[15px] font-normal leading-none tracking-[0.01em] peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ut=h.forwardRef(({className:e,...t},r)=>s.jsx(D9,{ref:r,className:Pe(e4e(),e),...t}));Ut.displayName=D9.displayName;function t4e(){var ie;const[e]=Vf(),t=Xt(),{user:r,signUp:n,signIn:a,signOut:i}=Kt(),[o,l]=h.useState(null),[c,u]=h.useState(!0),[d,f]=h.useState(!1),[m,p]=h.useState(""),[v,g]=h.useState(!1),[b,y]=h.useState("signup"),[w,x]=h.useState(""),[_,S]=h.useState(""),[k,C]=h.useState(!1),[j,N]=h.useState(!1),A=e.get("token"),P=e.get("clientId"),T=o?!!(o.isClientInvite||o.clientId):!!P,L=!!P,U=String((r==null?void 0:r.email)||"").trim().toLowerCase(),D=String((o==null?void 0:o.email)||"").trim().toLowerCase(),H=!!(r&&o&&U&&D&&U!==D),B=T?"/portal/login":"/auth";h.useEffect(()=>{if(!A){p("Invalid invitation link"),u(!1);return}z.functions.invoke("verify-token",{body:{token:A,type:"invite",clientId:P||void 0}}).then(({data:q,error:K})=>{var ne;if(K||!(q!=null&&q.success)){p((K==null?void 0:K.message)||(q==null?void 0:q.error)||"Invalid or expired invitation");return}if(l(q.invite),L){y("signup");const ae=String(((ne=q.invite)==null?void 0:ne.clientName)||"").trim();ae&&x(ae)}}).finally(()=>u(!1))},[A,P,L]),h.useEffect(()=>{r&&o&&A&&!H&&$(r.id)},[r,o,A,H]),h.useEffect(()=>{if(!H)return;let q=!0;return N(!0),i().catch(K=>{console.error("Failed to sign out mismatched account on invite flow:",K)}).finally(()=>{q&&N(!1)}),()=>{q=!1}},[H,i]);const M=h.useMemo(()=>o?String(o.clientName||w||"").trim():"",[o,w]),$=async(q,K)=>{f(!0);const{data:ne,error:ae}=await z.functions.invoke("accept-invite",{body:{token:A,userId:q,clientId:(o==null?void 0:o.clientId)||P||void 0,fullName:K==null?void 0:K.fullName}});if(ae||!(ne!=null&&ne.success)){let ye=(ae==null?void 0:ae.message)||(ne==null?void 0:ne.error)||"Failed to accept invitation";const ce=ae;if(ce!=null&&ce.context)try{const me=await ce.context.clone().json(),Q=String((me==null?void 0:me.error)||(me==null?void 0:me.message)||"").trim();Q&&(ye=Q)}catch{}ee.error(ye),p(ye),f(!1);return}ee.success(`Welcome to ${ne.workspaceName}!`);const _e=String((ne==null?void 0:ne.role)||"").trim().toLowerCase();if(_e==="setter"){try{sessionStorage.setItem("acq_signin_intent","setter")}catch{}ya(q)}const pe=_e==="setter"?"/setter-portal/messages":ne.redirectTo||"/dashboard";(K==null?void 0:K.navigateOnSuccess)!==!1&&t(pe),f(!1)},re=async q=>{if(q.preventDefault(),!o)return;if(f(!0),b==="signup"){const ne=o.email.split("@")[0]||"Client",ae=T?String(o.clientName||"").trim()||ne:String(w||"").trim();if(!ae){ee.error("Full name is required"),f(!1);return}const{error:_e,userId:pe,needsEmailConfirmation:ye}=await n(o.email,_,ae);if(_e){ee.error(_e.message),f(!1);return}pe&&(await $(pe,{navigateOnSuccess:!ye,fullName:ae}),ye&&(g(!0),ee.success("Confirm your signup via email to finish setup.",{action:{label:"Open Gmail",onClick:()=>window.open("https://www.gmail.com","_blank","noopener,noreferrer")}})));return}const{error:K}=await a(o.email,_);if(K){ee.error("Invalid password"),f(!1);return}};return c?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):j?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Switching to the invited account..."})]})}):m?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-muted-foreground mb-4",children:m}),s.jsx(ze,{variant:"outline",onClick:()=>t(B),children:"Back to login"})]})}):r&&o&&!H?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Joining workspace..."})]})}):v?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs("div",{className:"w-full max-w-sm space-y-6 text-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-medium",children:"Confirm your email"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:['We sent a "Confirm your signup" email to ',s.jsx("strong",{children:o==null?void 0:o.email}),".",s.jsx("br",{}),"Click the link in that email, then come back here."]})]}),s.jsxs("div",{className:"flex gap-3 justify-center",children:[s.jsx(ze,{type:"button",onClick:()=>window.open("https://www.gmail.com","_blank","noopener,noreferrer"),children:"Open Gmail"}),s.jsx(ze,{variant:"outline",type:"button",onClick:()=>t(B),children:"Back to login"})]})]})}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs("div",{className:"w-full max-w-sm space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:s.jsx(Vc,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("h1",{className:"text-xl font-medium",children:"You've been invited"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:T?s.jsxs(s.Fragment,{children:["Join ",s.jsx("strong",{children:o==null?void 0:o.workspaceName})," as a client"]}):s.jsxs(s.Fragment,{children:["Join ",s.jsx("strong",{children:o==null?void 0:o.workspaceName})," as an Appointment Setter"]})})]}),s.jsxs("form",{onSubmit:re,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{children:"Email"}),s.jsx($r,{value:(o==null?void 0:o.email)||"",disabled:!0,className:"h-12 bg-muted"})]}),b==="signup"&&!T&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"fullName",children:"Full Name"}),s.jsx($r,{id:"fullName",type:"text",value:w,onChange:q=>x(q.target.value),placeholder:"Your name",required:!0,className:"h-12"})]}),b==="signup"&&T&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{children:"Name"}),s.jsx($r,{value:M||((ie=o==null?void 0:o.email)==null?void 0:ie.split("@")[0])||"",disabled:!0,className:"h-12 bg-muted"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"password",children:b==="signup"?"Create Password":"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx($r,{id:"password",type:k?"text":"password",value:_,onChange:q=>S(q.target.value),placeholder:"",required:!0,minLength:8,className:"h-12 pr-10"}),s.jsx("button",{type:"button",onClick:()=>C(q=>!q),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:k?s.jsx(Fm,{className:"w-4 h-4"}):s.jsx(Xd,{className:"w-4 h-4"})})]})]}),s.jsx(ze,{type:"submit",disabled:d,className:"w-full h-12",children:d?"Joining...":b==="signup"?"Create Account & Join":"Sign In & Join"})]}),!T&&s.jsx("div",{className:"text-center",children:b==="signup"?s.jsxs("button",{type:"button",onClick:()=>y("signin"),className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:["Already have an account? ",s.jsx("span",{className:"text-foreground",children:"Sign in"})]}):s.jsxs("button",{type:"button",onClick:()=>y("signup"),className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:["Need an account? ",s.jsx("span",{className:"text-foreground",children:"Sign up"})]})})]})})}var L9=["PageUp","PageDown"],F9=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],B9={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},uh="Slider",[Wj,r4e,n4e]=Gp(uh),[U9,y3e]=zn(uh,[n4e]),[a4e,ww]=U9(uh),q9=h.forwardRef((e,t)=>{const{name:r,min:n=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[n],value:d,onValueChange:f=()=>{},onValueCommit:m=()=>{},inverted:p=!1,form:v,...g}=e,b=h.useRef(new Set),y=h.useRef(0),x=o==="horizontal"?i4e:s4e,[_=[],S]=_s({prop:d,defaultProp:u,onChange:P=>{var L;(L=[...b.current][y.current])==null||L.focus(),f(P)}}),k=h.useRef(_);function C(P){const T=d4e(_,P);A(P,T)}function j(P){A(P,y.current)}function N(){const P=k.current[y.current];_[y.current]!==P&&m(_)}function A(P,T,{commit:L}={commit:!1}){const U=p4e(i),D=g4e(Math.round((P-n)/i)*i+n,U),H=Bp(D,[n,a]);S((B=[])=>{const M=c4e(B,H,T);if(m4e(M,c*i)){y.current=M.indexOf(H);const $=String(M)!==String(B);return $&&L&&m(M),$?M:B}else return B})}return s.jsx(a4e,{scope:e.__scopeSlider,name:r,disabled:l,min:n,max:a,valueIndexToChangeRef:y,thumbs:b.current,values:_,orientation:o,form:v,children:s.jsx(Wj.Provider,{scope:e.__scopeSlider,children:s.jsx(Wj.Slot,{scope:e.__scopeSlider,children:s.jsx(x,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:Ve(g.onPointerDown,()=>{l||(k.current=_)}),min:n,max:a,inverted:p,onSlideStart:l?void 0:C,onSlideMove:l?void 0:j,onSlideEnd:l?void 0:N,onHomeKeyDown:()=>!l&&A(n,0,{commit:!0}),onEndKeyDown:()=>!l&&A(a,_.length-1,{commit:!0}),onStepKeyDown:({event:P,direction:T})=>{if(!l){const D=L9.includes(P.key)||P.shiftKey&&F9.includes(P.key)?10:1,H=y.current,B=_[H],M=i*D*T;A(B+M,H,{commit:!0})}}})})})})});q9.displayName=uh;var[z9,W9]=U9(uh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),i4e=h.forwardRef((e,t)=>{const{min:r,max:n,dir:a,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=e,[f,m]=h.useState(null),p=Ot(t,x=>m(x)),v=h.useRef(void 0),g=lh(a),b=g==="ltr",y=b&&!i||!b&&i;function w(x){const _=v.current||f.getBoundingClientRect(),S=[0,_.width],C=bE(S,y?[r,n]:[n,r]);return v.current=_,C(x-_.left)}return s.jsx(z9,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:s.jsx(H9,{dir:g,"data-orientation":"horizontal",...d,ref:p,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:x=>{const _=w(x.clientX);o==null||o(_)},onSlideMove:x=>{const _=w(x.clientX);l==null||l(_)},onSlideEnd:()=>{v.current=void 0,c==null||c()},onStepKeyDown:x=>{const S=B9[y?"from-left":"from-right"].includes(x.key);u==null||u({event:x,direction:S?-1:1})}})})}),s4e=h.forwardRef((e,t)=>{const{min:r,max:n,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=e,d=h.useRef(null),f=Ot(t,d),m=h.useRef(void 0),p=!a;function v(g){const b=m.current||d.current.getBoundingClientRect(),y=[0,b.height],x=bE(y,p?[n,r]:[r,n]);return m.current=b,x(g-b.top)}return s.jsx(z9,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:s.jsx(H9,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const b=v(g.clientY);i==null||i(b)},onSlideMove:g=>{const b=v(g.clientY);o==null||o(b)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:g=>{const y=B9[p?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:y?-1:1})}})})}),H9=h.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=e,d=ww(uh,r);return s.jsx(ot.span,{...u,ref:t,onKeyDown:Ve(e.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):L9.concat(F9).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:Ve(e.onPointerDown,f=>{const m=f.target;m.setPointerCapture(f.pointerId),f.preventDefault(),d.thumbs.has(m)?m.focus():n(f)}),onPointerMove:Ve(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&a(f)}),onPointerUp:Ve(e.onPointerUp,f=>{const m=f.target;m.hasPointerCapture(f.pointerId)&&(m.releasePointerCapture(f.pointerId),i(f))})})}),V9="SliderTrack",K9=h.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=ww(V9,r);return s.jsx(ot.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:t})});K9.displayName=V9;var Hj="SliderRange",G9=h.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=ww(Hj,r),i=W9(Hj,r),o=h.useRef(null),l=Ot(t,o),c=a.values.length,u=a.values.map(m=>Q9(m,a.min,a.max)),d=c>1?Math.min(...u):0,f=100-Math.max(...u);return s.jsx(ot.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:l,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:f+"%"}})});G9.displayName=Hj;var Vj="SliderThumb",Y9=h.forwardRef((e,t)=>{const r=r4e(e.__scopeSlider),[n,a]=h.useState(null),i=Ot(t,l=>a(l)),o=h.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return s.jsx(o4e,{...e,ref:i,index:o})}),o4e=h.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:a,...i}=e,o=ww(Vj,r),l=W9(Vj,r),[c,u]=h.useState(null),d=Ot(t,w=>u(w)),f=c?o.form||!!c.closest("form"):!0,m=bN(c),p=o.values[n],v=p===void 0?0:Q9(p,o.min,o.max),g=u4e(n,o.values.length),b=m==null?void 0:m[l.size],y=b?f4e(b,v,l.direction):0;return h.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${v}% + ${y}px)`},children:[s.jsx(Wj.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(ot.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:d,style:p===void 0?{display:"none"}:e.style,onFocus:Ve(e.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),f&&s.jsx(X9,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},n)]})});Y9.displayName=Vj;var l4e="RadioBubbleInput",X9=h.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const a=h.useRef(null),i=Ot(a,n),o=vE(t);return h.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("input",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(ot.input,{style:{display:"none"},...r,ref:i,defaultValue:t})});X9.displayName=l4e;function c4e(e=[],t,r){const n=[...e];return n[r]=t,n.sort((a,i)=>a-i)}function Q9(e,t,r){const i=100/(r-t)*(e-t);return Bp(i,[0,100])}function u4e(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function d4e(e,t){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-t)),n=Math.min(...r);return r.indexOf(n)}function f4e(e,t,r){const n=e/2,i=bE([0,50],[0,n]);return(n-i(t)*r)*r}function h4e(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function m4e(e,t){if(t>0){const r=h4e(e);return Math.min(...r)>=t}return!0}function bE(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function p4e(e){return(String(e).split(".")[1]||"").length}function g4e(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var J9=q9,v4e=K9,y4e=G9,x4e=Y9;const Z9=h.forwardRef(({className:e,...t},r)=>s.jsxs(J9,{ref:r,className:Pe("relative flex w-full touch-none select-none items-center",e),...t,children:[s.jsx(v4e,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:s.jsx(y4e,{className:"absolute h-full bg-primary"})}),s.jsx(x4e,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Z9.displayName=J9.displayName;const nM=["$0 (audience only)","$10k","$50k","$100k","$250k","$500k","$1M+"];function b4e(){const e=Xt(),{user:t,profile:r,loading:n,updateProfile:a,refreshProfile:i,signOut:o}=Kt(),[l,c]=h.useState(1),[u,d]=h.useState(""),[f,m]=h.useState(null),[p,v]=h.useState(3),[g,b]=h.useState(""),[y,w]=h.useState(!1),x=h.useRef(null);h.useEffect(()=>{if(!n&&!t){e("/auth");return}!n&&t&&e("/dashboard",{replace:!0})},[n,t,e]);const _=async()=>{l===1?(await o(),e("/auth")):c(C=>C-1)},S=async()=>{var C,j,N;w(!0);try{if(l===1){const{data:A,error:P}=await z.auth.getSession();if(P||!(A!=null&&A.session)){const{data:D,error:H}=await z.auth.refreshSession();if(H||!(D!=null&&D.session)){console.error("No valid session:",H||"Session is null"),ee.error("Session expired. Please log in again."),e("/auth"),w(!1);return}}const T=((j=(C=A==null?void 0:A.session)==null?void 0:C.user)==null?void 0:j.id)||((N=(await z.auth.getUser()).data.user)==null?void 0:N.id);if(!T){console.error("No user ID available"),ee.error("Authentication error. Please log in again."),e("/auth"),w(!1);return}console.log("[Onboarding] Creating workspace via RPC for user:",T);const{data:L,error:U}=await z.rpc("create_workspace_for_user",{p_workspace_name:u.trim(),p_user_id:T});if(U){console.error("Error creating workspace via RPC:",U),ee.error("Failed to create workspace. Please try again."),w(!1);return}console.log("[Onboarding] Workspace created:",L),x.current=L,ee.success("Workspace created!")}if(l===2&&x.current){const{error:A}=await z.from("onboarding_responses").update({has_team:f===!0}).eq("workspace_id",x.current);if(A){console.error("Error saving team status:",A),ee.error("Failed to save. Please try again."),w(!1);return}}if(l===3&&x.current){const{error:A}=await z.from("onboarding_responses").update({revenue_range:nM[p]}).eq("workspace_id",x.current);if(A){console.error("Error saving revenue range:",A),ee.error("Failed to save. Please try again."),w(!1);return}}if(l===5){const A=x.current||(r==null?void 0:r.current_workspace_id);if(!A){console.error("No workspace ID found for step 5"),ee.error("Session error. Please start over."),e("/auth"),w(!1);return}const{error:P}=await z.from("onboarding_responses").update({completed_at:new Date().toISOString()}).eq("workspace_id",A);if(P){console.error("Error completing onboarding:",P),ee.error("Failed to complete setup. Please try again."),w(!1);return}const{error:T}=await a({onboarding_completed:!0});T&&console.error("Error updating profile:",T),await i(),ee.success("Setup complete! Welcome to ACQ Dashboard."),e("/dashboard",{replace:!0}),w(!1);return}c(A=>A+1)}catch(A){console.error("Onboarding error:",A),ee.error("Something went wrong. Please try again.")}finally{w(!1)}},k=async()=>{var C;if(!(!g||!x.current)){w(!0);try{const j=(C=(await z.auth.getUser()).data.user)==null?void 0:C.id;if(!j){ee.error("Authentication error."),w(!1);return}const N=crypto.randomUUID()+"-"+crypto.randomUUID(),{error:A}=await z.from("invites").insert({workspace_id:x.current,email:g,role:"setter",token:N,invited_by:j,expires_at:new Date(Date.now()+7*24*60*60*1e3).toISOString()});A?(console.error("Error sending invite:",A),ee.error("Failed to send invite.")):(ee.success(`Invite sent to ${g}`),b(""))}catch(j){console.error("Invite error:",j),ee.error("Failed to send invite.")}finally{w(!1)}}};return n?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsx("div",{className:"animate-pulse text-muted-foreground",children:"Loading..."})}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs("div",{className:"w-full max-w-md space-y-8",children:[s.jsxs("div",{className:"text-center relative",children:[s.jsx("button",{type:"button",onClick:_,className:"absolute left-0 top-1/2 -translate-y-1/2 p-2 text-muted-foreground hover:text-foreground transition-colors","aria-label":"Go back",children:s.jsx(ho,{className:"w-5 h-5"})}),s.jsx("img",{src:HL,alt:"ACQ",className:"h-8 mx-auto mb-6"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Step ",l," of 5"]})]}),l===1&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-medium text-center",children:"What's your business name?"}),s.jsxs("div",{children:[s.jsx(Ut,{children:"Business Name"}),s.jsx($r,{value:u,onChange:C=>d(C.target.value),placeholder:"Acme Coaching",className:"mt-1 h-12"})]})]}),l===2&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-medium text-center",children:"Are you working in a team?"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("button",{type:"button",onClick:()=>m(!1),className:Pe("p-6 border rounded-lg text-center transition-all cursor-pointer",f===!1?"border-border bg-card":"border-border hover:border-border"),children:[s.jsx(eb,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),s.jsx("p",{className:"text-sm font-sans font-normal",children:"I'm all alone"})]}),s.jsxs("button",{type:"button",onClick:()=>m(!0),className:Pe("p-6 border rounded-lg text-center transition-all cursor-pointer",f===!0?"border-border bg-card":"border-border hover:border-border"),children:[s.jsx(Vc,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),s.jsx("p",{className:"text-sm font-sans font-normal",children:"I have setters"})]})]})]}),l===3&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-medium text-center",children:"How much are you earning roughly?"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Z9,{value:[p],onValueChange:([C])=>v(C),max:6,step:1,className:"py-4"}),s.jsx("p",{className:"text-center text-lg font-medium",children:nM[p]})]})]}),l===4&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-medium text-center",children:"Upload KPI targets (optional)"}),s.jsxs("div",{className:"border border-dashed border-border rounded-lg p-8 text-center",children:[s.jsx("p",{className:"text-muted-foreground text-sm",children:"CSV or XLSX file"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"You can skip this for now"})]})]}),l===5&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-medium text-center",children:"Invite appointment setters"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($r,{type:"email",value:g,onChange:C=>b(C.target.value),placeholder:"setter@example.com",className:"h-12"}),s.jsx(ze,{onClick:k,disabled:y||!g,children:"Invite"})]}),s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Or skip this and invite later from settings"})]}),s.jsx(Pf,{type:"button",onClick:S,disabled:y||l===1&&!u.trim()||l===2&&f===null,className:"w-full",children:y?"Loading...":l===5?"Complete Setup":"Continue"})]})})}var eq={exports:{}},tq={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var If=h;function w4e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _4e=typeof Object.is=="function"?Object.is:w4e,S4e=If.useState,j4e=If.useEffect,k4e=If.useLayoutEffect,N4e=If.useDebugValue;function C4e(e,t){var r=t(),n=S4e({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return k4e(function(){a.value=r,a.getSnapshot=t,C_(a)&&i({inst:a})},[e,r,t]),j4e(function(){return C_(a)&&i({inst:a}),e(function(){C_(a)&&i({inst:a})})},[e]),N4e(r),r}function C_(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!_4e(e,r)}catch{return!0}}function E4e(e,t){return t()}var A4e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?E4e:C4e;tq.useSyncExternalStore=If.useSyncExternalStore!==void 0?If.useSyncExternalStore:A4e;eq.exports=tq;var P4e=eq.exports;function T4e(){return P4e.useSyncExternalStore(O4e,()=>!0,()=>!1)}function O4e(){return()=>{}}var wE="Avatar",[I4e,x3e]=zn(wE),[M4e,rq]=I4e(wE),nq=h.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[a,i]=h.useState("idle");return s.jsx(M4e,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(ot.span,{...n,ref:t})})});nq.displayName=wE;var aq="AvatarImage",iq=h.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=e,o=rq(aq,r),l=R4e(n,i),c=rn(u=>{a(u),o.onImageLoadingStatusChange(u)});return sn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(ot.img,{...i,ref:t,src:n}):null});iq.displayName=aq;var sq="AvatarFallback",oq=h.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...a}=e,i=rq(sq,r),[o,l]=h.useState(n===void 0);return h.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(ot.span,{...a,ref:t}):null});oq.displayName=sq;function aM(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function R4e(e,{referrerPolicy:t,crossOrigin:r}){const n=T4e(),a=h.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[o,l]=h.useState(()=>aM(i,e));return sn(()=>{l(aM(i,e))},[i,e]),sn(()=>{const c=f=>()=>{l(f)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,r,t]),o}var lq=nq,cq=iq,uq=oq;const _w=h.forwardRef(({className:e,...t},r)=>s.jsx(lq,{ref:r,className:Pe("acq-orb flex h-10 w-10 shrink-0",e),...t}));_w.displayName=lq.displayName;const Sw=h.forwardRef(({className:e,...t},r)=>s.jsx(cq,{ref:r,className:Pe("aspect-square h-full w-full",e),...t}));Sw.displayName=cq.displayName;const jw=h.forwardRef(({className:e,...t},r)=>s.jsx(uq,{ref:r,className:Pe("flex h-full w-full items-center justify-center rounded-full bg-transparent text-muted-foreground",e),...t}));jw.displayName=uq.displayName;var _E="Progress",SE=100,[$4e,b3e]=zn(_E),[D4e,L4e]=$4e(_E),dq=h.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=F4e,...o}=e;(a||a===0)&&!iM(a)&&console.error(B4e(`${a}`,"Progress"));const l=iM(a)?a:SE;n!==null&&!sM(n,l)&&console.error(U4e(`${n}`,"Progress"));const c=sM(n,l)?n:null,u=gx(c)?i(c,l):void 0;return s.jsx(D4e,{scope:r,value:c,max:l,children:s.jsx(ot.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":gx(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":mq(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});dq.displayName=_E;var fq="ProgressIndicator",hq=h.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=L4e(fq,r);return s.jsx(ot.div,{"data-state":mq(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});hq.displayName=fq;function F4e(e,t){return`${Math.round(e/t*100)}%`}function mq(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function gx(e){return typeof e=="number"}function iM(e){return gx(e)&&!isNaN(e)&&e>0}function sM(e,t){return gx(e)&&!isNaN(e)&&e<=t&&e>=0}function B4e(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${SE}\`.`}function U4e(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${SE} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var pq=dq,q4e=hq;const gq=h.forwardRef(({className:e,value:t,...r},n)=>s.jsx(pq,{ref:n,className:Pe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:s.jsx(q4e,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));gq.displayName=pq.displayName;const z4e=10*1024*1024;function W4e({onFileSelect:e,fileName:t}){const[r,n]=h.useState(!1),a=h.useCallback(u=>u.size>z4e?(ee.error("File too large. Maximum size is 10MB."),!1):!0,[]),i=h.useCallback(u=>{u.preventDefault(),n(!0)},[]),o=h.useCallback(u=>{u.preventDefault(),n(!1)},[]),l=h.useCallback(u=>{u.preventDefault(),n(!1);const d=u.dataTransfer.files[0];d&&d.type==="text/csv"&&a(d)&&e(d)},[e,a]),c=h.useCallback(u=>{var f;const d=(f=u.target.files)==null?void 0:f[0];d&&a(d)&&e(d)},[e,a]);return s.jsxs("div",{onDragOver:i,onDragLeave:o,onDrop:l,className:`
        relative rounded-lg transition-all cursor-pointer
        flex flex-col items-center justify-center py-8 px-4 overflow-hidden
        border border-border shadow-[inset_0_2px_8px_rgba(0,0,0,0.4)]
        ${r?"border-border bg-white/5":"hover:border-border hover:shadow-[inset_0_2px_12px_rgba(0,0,0,0.5)]"}
      `,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/10 pointer-events-none"}),s.jsx("input",{type:"file",accept:".csv",onChange:c,className:"hidden",id:"csv-upload"}),s.jsxs("label",{htmlFor:"csv-upload",className:"cursor-pointer text-center",children:[s.jsx(d3,{className:"w-6 h-6 mx-auto mb-3 text-muted-foreground"}),t?s.jsx("p",{className:"text-sm",children:t}):s.jsx(s.Fragment,{children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Drop CSV here or click to select"})})]})]})}function oM({label:e,keywords:t,onAdd:r,onRemove:n,placeholder:a}){const[i,o]=h.useState(""),l=()=>{const u=i.trim();u&&!t.includes(u)&&(r(u),o(""))},c=u=>{u.key==="Enter"&&(u.preventDefault(),l())};return s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:e}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($r,{value:i,onChange:u=>o(u.target.value),onKeyDown:c,placeholder:a,className:"flex-1 h-9"}),s.jsx(ze,{onClick:l,size:"sm",variant:"secondary",className:"h-9 px-3",children:s.jsx(kl,{className:"w-4 h-4"})})]}),t.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1.5 pt-1",children:t.map(u=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-secondary text-xs rounded",children:[u,s.jsx("button",{onClick:()=>n(u),className:"hover:text-foreground text-muted-foreground",children:s.jsx(Bf,{className:"w-3 h-3"})})]},u))})]})}function H4e(e){const r=new Date().getTime()-e.getTime(),n=Math.floor(r/6e4),a=Math.floor(r/36e5),i=Math.floor(r/864e5);return n<1?"just now":n<60?`${n}m ago`:a<24?`${a}h ago`:i<7?`${i}d ago`:new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(e)}function V4e({runs:e,onDelete:t,maxVisible:r=5}){const[n,a]=h.useState(null),i=Xt(),o=(f,m)=>{m.stopPropagation(),a(f)},l=()=>{n&&(t(n),a(null))},c=f=>{i(`/run/${f}`)},u=e.slice(0,r),d=e.length>r;return e.length===0?s.jsx("div",{className:"text-center py-12 text-muted-foreground text-sm",children:"No runs yet"}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-3",children:[u.map(f=>s.jsxs("div",{className:"p-4 bg-card border border-border rounded-lg relative group cursor-pointer hover:border-border transition-colors",onClick:()=>c(f.id),children:[s.jsx(ze,{variant:"ghost",size:"sm",onClick:m=>o(f.id,m),className:"absolute top-2 right-2 h-7 w-7 p-0 text-muted-foreground hover:text-foreground opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Va,{className:"w-3.5 h-3.5"})}),s.jsx("div",{className:"mb-2 pr-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-medium",children:f.name}),s.jsx("span",{className:"text-xs text-muted-foreground",children:H4e(f.timestamp)})]})}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.matchingProfiles," matching / ",f.totalProfiles," total"]}),f.generateOpeners&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:" Openers"}),s.jsxs("div",{className:"flex items-center gap-1 mt-3 text-xs text-muted-foreground group-hover:text-foreground transition-colors",children:[s.jsx("span",{children:"View"}),s.jsx(Ll,{className:"w-3 h-3"})]})]},f.id)),d&&s.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>i("/runs"),className:"w-full text-xs text-muted-foreground hover:text-foreground",children:"View all runs "})]}),s.jsx(Wl,{open:!!n,onOpenChange:f=>!f&&a(null),children:s.jsxs(To,{children:[s.jsxs(Oo,{children:[s.jsx(Mo,{children:"Are you sure?"}),s.jsx(Ro,{children:"This will permanently delete this run from your history."})]}),s.jsxs(Io,{children:[s.jsx(Do,{children:"Cancel"}),s.jsx($o,{onClick:l,className:"bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})})]})}const kg=h.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:Pe("flex min-h-[80px] w-full rounded-2xl border border-border bg-[#151618] px-4 py-2.5 text-[15px] text-foreground placeholder:text-muted-foreground/50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/10 focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));kg.displayName="Textarea";var K4e=[" ","Enter","ArrowUp","ArrowDown"],G4e=[" ","Enter"],nu="Select",[kw,Nw,Y4e]=Gp(nu),[dh,w3e]=zn(nu,[Y4e,Fl]),Cw=Fl(),[X4e,Vl]=dh(nu),[Q4e,J4e]=dh(nu),vq=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:m,required:p,form:v}=e,g=Cw(t),[b,y]=h.useState(null),[w,x]=h.useState(null),[_,S]=h.useState(!1),k=lh(u),[C,j]=_s({prop:n,defaultProp:a??!1,onChange:i,caller:nu}),[N,A]=_s({prop:o,defaultProp:l,onChange:c,caller:nu}),P=h.useRef(null),T=b?v||!!b.closest("form"):!0,[L,U]=h.useState(new Set),D=Array.from(L).map(H=>H.props.value).join(";");return s.jsx(SN,{...g,children:s.jsxs(X4e,{required:p,scope:t,trigger:b,onTriggerChange:y,valueNode:w,onValueNodeChange:x,valueNodeHasChildren:_,onValueNodeHasChildrenChange:S,contentId:qi(),value:N,onValueChange:A,open:C,onOpenChange:j,dir:k,triggerPointerDownPosRef:P,disabled:m,children:[s.jsx(kw.Provider,{scope:t,children:s.jsx(Q4e,{scope:e.__scopeSelect,onNativeOptionAdd:h.useCallback(H=>{U(B=>new Set(B).add(H))},[]),onNativeOptionRemove:h.useCallback(H=>{U(B=>{const M=new Set(B);return M.delete(H),M})},[]),children:r})}),T?s.jsxs(Uq,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:f,value:N,onChange:H=>A(H.target.value),disabled:m,form:v,children:[N===void 0?s.jsx("option",{value:""}):null,Array.from(L)]},D):null]})})};vq.displayName=nu;var yq="SelectTrigger",xq=h.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=Cw(r),o=Vl(yq,r),l=o.disabled||n,c=Ot(t,o.onTriggerChange),u=Nw(r),d=h.useRef("touch"),[f,m,p]=zq(g=>{const b=u().filter(x=>!x.disabled),y=b.find(x=>x.value===o.value),w=Wq(b,g,y);w!==void 0&&o.onValueChange(w.value)}),v=g=>{l||(o.onOpenChange(!0),p()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return s.jsx(Jp,{asChild:!0,...i,children:s.jsx(ot.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":qq(o.value)?"":void 0,...a,ref:c,onClick:Ve(a.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&v(g)}),onPointerDown:Ve(a.onPointerDown,g=>{d.current=g.pointerType;const b=g.target;b.hasPointerCapture(g.pointerId)&&b.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(v(g),g.preventDefault())}),onKeyDown:Ve(a.onKeyDown,g=>{const b=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(b&&g.key===" ")&&K4e.includes(g.key)&&(v(),g.preventDefault())})})})});xq.displayName=yq;var bq="SelectValue",wq=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=Vl(bq,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,f=Ot(t,c.onValueNodeChange);return sn(()=>{u(d)},[u,d]),s.jsx(ot.span,{...l,ref:f,style:{pointerEvents:"none"},children:qq(c.value)?s.jsx(s.Fragment,{children:o}):i})});wq.displayName=bq;var Z4e="SelectIcon",_q=h.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(ot.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});_q.displayName=Z4e;var eMe="SelectPortal",Sq=e=>s.jsx(Df,{asChild:!0,...e});Sq.displayName=eMe;var au="SelectContent",jq=h.forwardRef((e,t)=>{const r=Vl(au,e.__scopeSelect),[n,a]=h.useState();if(sn(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?ou.createPortal(s.jsx(kq,{scope:e.__scopeSelect,children:s.jsx(kw.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(Nq,{...e,ref:t})});jq.displayName=au;var Ai=10,[kq,Kl]=dh(au),tMe="SelectContentImpl",rMe=Pl("SelectContent.RemoveScroll"),Nq=h.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:v,hideWhenDetached:g,avoidCollisions:b,...y}=e,w=Vl(au,r),[x,_]=h.useState(null),[S,k]=h.useState(null),C=Ot(t,pe=>_(pe)),[j,N]=h.useState(null),[A,P]=h.useState(null),T=Nw(r),[L,U]=h.useState(!1),D=h.useRef(!1);h.useEffect(()=>{if(x)return uw(x)},[x]),lw();const H=h.useCallback(pe=>{const[ye,...ce]=T().map(te=>te.ref.current),[me]=ce.slice(-1),Q=document.activeElement;for(const te of pe)if(te===Q||(te==null||te.scrollIntoView({block:"nearest"}),te===ye&&S&&(S.scrollTop=0),te===me&&S&&(S.scrollTop=S.scrollHeight),te==null||te.focus(),document.activeElement!==Q))return},[T,S]),B=h.useCallback(()=>H([j,x]),[H,j,x]);h.useEffect(()=>{L&&B()},[L,B]);const{onOpenChange:M,triggerPointerDownPosRef:$}=w;h.useEffect(()=>{if(x){let pe={x:0,y:0};const ye=me=>{var Q,te;pe={x:Math.abs(Math.round(me.pageX)-(((Q=$.current)==null?void 0:Q.x)??0)),y:Math.abs(Math.round(me.pageY)-(((te=$.current)==null?void 0:te.y)??0))}},ce=me=>{pe.x<=10&&pe.y<=10?me.preventDefault():x.contains(me.target)||M(!1),document.removeEventListener("pointermove",ye),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",ye),document.addEventListener("pointerup",ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ye),document.removeEventListener("pointerup",ce,{capture:!0})}}},[x,M,$]),h.useEffect(()=>{const pe=()=>M(!1);return window.addEventListener("blur",pe),window.addEventListener("resize",pe),()=>{window.removeEventListener("blur",pe),window.removeEventListener("resize",pe)}},[M]);const[re,ie]=zq(pe=>{const ye=T().filter(Q=>!Q.disabled),ce=ye.find(Q=>Q.ref.current===document.activeElement),me=Wq(ye,pe,ce);me&&setTimeout(()=>me.ref.current.focus())}),q=h.useCallback((pe,ye,ce)=>{const me=!D.current&&!ce;(w.value!==void 0&&w.value===ye||me)&&(N(pe),me&&(D.current=!0))},[w.value]),K=h.useCallback(()=>x==null?void 0:x.focus(),[x]),ne=h.useCallback((pe,ye,ce)=>{const me=!D.current&&!ce;(w.value!==void 0&&w.value===ye||me)&&P(pe)},[w.value]),ae=n==="popper"?Kj:Cq,_e=ae===Kj?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:v,hideWhenDetached:g,avoidCollisions:b}:{};return s.jsx(kq,{scope:r,content:x,viewport:S,onViewportChange:k,itemRefCallback:q,selectedItem:j,onItemLeave:K,itemTextRefCallback:ne,focusSelectedItem:B,selectedItemText:A,position:n,isPositioned:L,searchRef:re,children:s.jsx(mg,{as:rMe,allowPinchZoom:!0,children:s.jsx(fg,{asChild:!0,trapped:w.open,onMountAutoFocus:pe=>{pe.preventDefault()},onUnmountAutoFocus:Ve(a,pe=>{var ye;(ye=w.trigger)==null||ye.focus({preventScroll:!0}),pe.preventDefault()}),children:s.jsx(lu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:pe=>pe.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:s.jsx(ae,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:pe=>pe.preventDefault(),...y,..._e,onPlaced:()=>U(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Ve(y.onKeyDown,pe=>{const ye=pe.ctrlKey||pe.altKey||pe.metaKey;if(pe.key==="Tab"&&pe.preventDefault(),!ye&&pe.key.length===1&&ie(pe.key),["ArrowUp","ArrowDown","Home","End"].includes(pe.key)){let me=T().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);if(["ArrowUp","End"].includes(pe.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes(pe.key)){const Q=pe.target,te=me.indexOf(Q);me=me.slice(te+1)}setTimeout(()=>H(me)),pe.preventDefault()}})})})})})})});Nq.displayName=tMe;var nMe="SelectItemAlignedPosition",Cq=h.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=Vl(au,r),o=Kl(au,r),[l,c]=h.useState(null),[u,d]=h.useState(null),f=Ot(t,C=>d(C)),m=Nw(r),p=h.useRef(!1),v=h.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:y,focusSelectedItem:w}=o,x=h.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&b&&y){const C=i.trigger.getBoundingClientRect(),j=u.getBoundingClientRect(),N=i.valueNode.getBoundingClientRect(),A=y.getBoundingClientRect();if(i.dir!=="rtl"){const Q=A.left-j.left,te=N.left-Q,Ne=C.left-te,je=C.width+Ne,J=Math.max(je,j.width),oe=window.innerWidth-Ai,Ce=Bp(te,[Ai,Math.max(Ai,oe-J)]);l.style.minWidth=je+"px",l.style.left=Ce+"px"}else{const Q=j.right-A.right,te=window.innerWidth-N.right-Q,Ne=window.innerWidth-C.right-te,je=C.width+Ne,J=Math.max(je,j.width),oe=window.innerWidth-Ai,Ce=Bp(te,[Ai,Math.max(Ai,oe-J)]);l.style.minWidth=je+"px",l.style.right=Ce+"px"}const P=m(),T=window.innerHeight-Ai*2,L=g.scrollHeight,U=window.getComputedStyle(u),D=parseInt(U.borderTopWidth,10),H=parseInt(U.paddingTop,10),B=parseInt(U.borderBottomWidth,10),M=parseInt(U.paddingBottom,10),$=D+H+L+M+B,re=Math.min(b.offsetHeight*5,$),ie=window.getComputedStyle(g),q=parseInt(ie.paddingTop,10),K=parseInt(ie.paddingBottom,10),ne=C.top+C.height/2-Ai,ae=T-ne,_e=b.offsetHeight/2,pe=b.offsetTop+_e,ye=D+H+pe,ce=$-ye;if(ye<=ne){const Q=P.length>0&&b===P[P.length-1].ref.current;l.style.bottom="0px";const te=u.clientHeight-g.offsetTop-g.offsetHeight,Ne=Math.max(ae,_e+(Q?K:0)+te+B),je=ye+Ne;l.style.height=je+"px"}else{const Q=P.length>0&&b===P[0].ref.current;l.style.top="0px";const Ne=Math.max(ne,D+g.offsetTop+(Q?q:0)+_e)+ce;l.style.height=Ne+"px",g.scrollTop=ye-ne+g.offsetTop}l.style.margin=`${Ai}px 0`,l.style.minHeight=re+"px",l.style.maxHeight=T+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[m,i.trigger,i.valueNode,l,u,g,b,y,i.dir,n]);sn(()=>x(),[x]);const[_,S]=h.useState();sn(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const k=h.useCallback(C=>{C&&v.current===!0&&(x(),w==null||w(),v.current=!1)},[x,w]);return s.jsx(iMe,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:k,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:s.jsx(ot.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});Cq.displayName=nMe;var aMe="SelectPopperPosition",Kj=h.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Ai,...i}=e,o=Cw(r);return s.jsx(ab,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Kj.displayName=aMe;var[iMe,jE]=dh(au,{}),Gj="SelectViewport",Eq=h.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=Kl(Gj,r),o=jE(Gj,r),l=Ot(t,i.onViewportChange),c=h.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(kw.Slot,{scope:r,children:s.jsx(ot.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ve(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const p=Math.abs(c.current-d.scrollTop);if(p>0){const v=window.innerHeight-Ai*2,g=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),y=Math.max(g,b);if(y<v){const w=y+p,x=Math.min(v,w),_=w-x;f.style.height=x+"px",f.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});Eq.displayName=Gj;var Aq="SelectGroup",[sMe,oMe]=dh(Aq),lMe=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=qi();return s.jsx(sMe,{scope:r,id:a,children:s.jsx(ot.div,{role:"group","aria-labelledby":a,...n,ref:t})})});lMe.displayName=Aq;var Pq="SelectLabel",Tq=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=oMe(Pq,r);return s.jsx(ot.div,{id:a.id,...n,ref:t})});Tq.displayName=Pq;var vx="SelectItem",[cMe,Oq]=dh(vx),Iq=h.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=Vl(vx,r),c=Kl(vx,r),u=l.value===n,[d,f]=h.useState(i??""),[m,p]=h.useState(!1),v=Ot(t,w=>{var x;return(x=c.itemRefCallback)==null?void 0:x.call(c,w,n,a)}),g=qi(),b=h.useRef("touch"),y=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(cMe,{scope:r,value:n,disabled:a,textId:g,isSelected:u,onItemTextChange:h.useCallback(w=>{f(x=>x||((w==null?void 0:w.textContent)??"").trim())},[]),children:s.jsx(kw.ItemSlot,{scope:r,value:n,disabled:a,textValue:d,children:s.jsx(ot.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:v,onFocus:Ve(o.onFocus,()=>p(!0)),onBlur:Ve(o.onBlur,()=>p(!1)),onClick:Ve(o.onClick,()=>{b.current!=="mouse"&&y()}),onPointerUp:Ve(o.onPointerUp,()=>{b.current==="mouse"&&y()}),onPointerDown:Ve(o.onPointerDown,w=>{b.current=w.pointerType}),onPointerMove:Ve(o.onPointerMove,w=>{var x;b.current=w.pointerType,a?(x=c.onItemLeave)==null||x.call(c):b.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ve(o.onPointerLeave,w=>{var x;w.currentTarget===document.activeElement&&((x=c.onItemLeave)==null||x.call(c))}),onKeyDown:Ve(o.onKeyDown,w=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&w.key===" "||(G4e.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})})})})});Iq.displayName=vx;var Jh="SelectItemText",Mq=h.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=Vl(Jh,r),l=Kl(Jh,r),c=Oq(Jh,r),u=J4e(Jh,r),[d,f]=h.useState(null),m=Ot(t,y=>f(y),c.onItemTextChange,y=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,y,c.value,c.disabled)}),p=d==null?void 0:d.textContent,v=h.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=u;return sn(()=>(g(v),()=>b(v)),[g,b,v]),s.jsxs(s.Fragment,{children:[s.jsx(ot.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ou.createPortal(i.children,o.valueNode):null]})});Mq.displayName=Jh;var Rq="SelectItemIndicator",$q=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return Oq(Rq,r).isSelected?s.jsx(ot.span,{"aria-hidden":!0,...n,ref:t}):null});$q.displayName=Rq;var Yj="SelectScrollUpButton",Dq=h.forwardRef((e,t)=>{const r=Kl(Yj,e.__scopeSelect),n=jE(Yj,e.__scopeSelect),[a,i]=h.useState(!1),o=Ot(t,n.onScrollButtonChange);return sn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(Fq,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Dq.displayName=Yj;var Xj="SelectScrollDownButton",Lq=h.forwardRef((e,t)=>{const r=Kl(Xj,e.__scopeSelect),n=jE(Xj,e.__scopeSelect),[a,i]=h.useState(!1),o=Ot(t,n.onScrollButtonChange);return sn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(Fq,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Lq.displayName=Xj;var Fq=h.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=Kl("SelectScrollButton",r),o=h.useRef(null),l=Nw(r),c=h.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return h.useEffect(()=>()=>c(),[c]),sn(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(ot.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ve(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Ve(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Ve(a.onPointerLeave,()=>{c()})})}),uMe="SelectSeparator",Bq=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(ot.div,{"aria-hidden":!0,...n,ref:t})});Bq.displayName=uMe;var Qj="SelectArrow",dMe=h.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Cw(r),i=Vl(Qj,r),o=Kl(Qj,r);return i.open&&o.position==="popper"?s.jsx(ib,{...a,...n,ref:t}):null});dMe.displayName=Qj;var fMe="SelectBubbleInput",Uq=h.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=h.useRef(null),i=Ot(n,a),o=vE(t);return h.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(ot.select,{...r,style:{...rD,...r.style},ref:i,defaultValue:t})});Uq.displayName=fMe;function qq(e){return e===""||e===void 0}function zq(e){const t=rn(e),r=h.useRef(""),n=h.useRef(0),a=h.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=h.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return h.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function Wq(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=hMe(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function hMe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var mMe=vq,Hq=xq,pMe=wq,gMe=_q,vMe=Sq,Vq=jq,yMe=Eq,Kq=Tq,Gq=Iq,xMe=Mq,bMe=$q,Yq=Dq,Xq=Lq,Qq=Bq;const Ad=mMe,Pd=pMe,Dc=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(Hq,{ref:n,className:Pe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-[15px] ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(gMe,{asChild:!0,children:s.jsx(Kd,{className:"h-4 w-4 opacity-50"})})]}));Dc.displayName=Hq.displayName;const Jq=h.forwardRef(({className:e,...t},r)=>s.jsx(Yq,{ref:r,className:Pe("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(_Y,{className:"h-4 w-4"})}));Jq.displayName=Yq.displayName;const Zq=h.forwardRef(({className:e,...t},r)=>s.jsx(Xq,{ref:r,className:Pe("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Kd,{className:"h-4 w-4"})}));Zq.displayName=Xq.displayName;const Lc=h.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(vMe,{children:s.jsxs(Vq,{ref:a,className:Pe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(Jq,{}),s.jsx(yMe,{className:Pe("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(Zq,{})]})}));Lc.displayName=Vq.displayName;const wMe=h.forwardRef(({className:e,...t},r)=>s.jsx(Kq,{ref:r,className:Pe("py-1.5 pl-8 pr-2 text-[15px] font-normal",e),...t}));wMe.displayName=Kq.displayName;const ga=h.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(Gq,{ref:n,className:Pe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-[15px] outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(bMe,{children:s.jsx(Ha,{className:"h-4 w-4"})})}),s.jsx(xMe,{children:t})]}));ga.displayName=Gq.displayName;const _Me=h.forwardRef(({className:e,...t},r)=>s.jsx(Qq,{ref:r,className:Pe("-mx-1 my-1 h-[0.5px] bg-muted",e),...t}));_Me.displayName=Qq.displayName;function SMe({enabled:e,onToggle:t,style:r,onStyleChange:n,customScript:a,onCustomScriptChange:i}){const[o,l]=h.useState(e);return h.useEffect(()=>{if(e){const c=setTimeout(()=>l(!0),50);return()=>clearTimeout(c)}else l(!1)},[e]),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ut,{htmlFor:"generateOpeners",className:"text-sm font-medium cursor-pointer",children:"Generate openers"}),s.jsx(jg,{id:"generateOpeners",checked:e,onCheckedChange:t})]}),s.jsx("div",{className:Pe("grid transition-all duration-300 ease-in-out",e?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"),children:s.jsx("div",{className:"overflow-hidden",children:s.jsxs("div",{className:"space-y-3 pt-2",children:[s.jsxs(Ad,{value:r,onValueChange:c=>n(c),children:[s.jsx(Dc,{className:"w-full bg-background border-input",children:s.jsx(Pd,{placeholder:"Select opener style..."})}),s.jsxs(Lc,{className:"bg-popover border border-border z-50",children:[s.jsx(ga,{value:"pain-driven",className:"focus:bg-accent focus:text-accent-foreground data-[state=checked]:bg-accent data-[state=checked]:text-accent-foreground",children:"Pain-driven"}),s.jsx(ga,{value:"curiosity-driven",className:"focus:bg-accent focus:text-accent-foreground data-[state=checked]:bg-accent data-[state=checked]:text-accent-foreground",children:"Curiosity-driven"}),s.jsx(ga,{value:"ai-generated",className:"focus:bg-accent focus:text-accent-foreground data-[state=checked]:bg-accent data-[state=checked]:text-accent-foreground",children:"AI-generated"}),s.jsx(ga,{value:"randomize",className:"focus:bg-accent focus:text-accent-foreground data-[state=checked]:bg-accent data-[state=checked]:text-accent-foreground",children:"Randomize"}),s.jsx(ga,{value:"custom",className:"focus:bg-accent focus:text-accent-foreground data-[state=checked]:bg-accent data-[state=checked]:text-accent-foreground",children:"Custom"})]})]}),r==="custom"&&s.jsx("div",{className:"space-y-2",children:s.jsx(kg,{value:a,onChange:c=>i(c.target.value),placeholder:"Enter your custom opener script...",className:"min-h-[80px] text-sm"})})]})})})]})}const lM={"pain-driven":`Generate a DM opener using this exact template, replacing {{NAME}} with a simple, common first name (like Jake, Paul, Sarah, Emma - never business names or usernames):

"Hi {{NAME}}, not sure if you've been dealing with this but I've been speaking with other coaches and the biggest issue they're facing is getting consistent appointments on their calendar every day. If this is something you're going through I'd love to just give you some value and showcase a video on how this works."

Profile context (use to infer an appropriate first name):
Name: {{fullName}}
Username: {{username}}

Rules: Use the exact template above, only replace {{NAME}} with a realistic first name. If you cannot determine a first name, use a common name like "Jake" or "Sarah".`,"curiosity-driven":`Generate this exact DM opener:

"What's up I've been seeing you on my feed for the past few days now and im really intrigued in what you do, can I talk to you for a second?"

Rules: Return exactly this message, no changes.`,"ai-generated":`Write a simple, friendly one-sentence DM opener. Keep it generic and safe - do not reference specific details from the profile to avoid mistakes.

Rules: one sentence, max 18 words, no emojis, no exclamation marks, be friendly but vague.`},cM=["pain-driven","curiosity-driven","ai-generated"];function jMe(e,t,r){const n=a=>{for(const i of a){const o=t.find(l=>l.toLowerCase()===i.toLowerCase());if(o&&e[o])return e[o]}};return{rowId:r.toString(),username:n(["username","user","handle"]),fullName:n(["fullname","full_name","name","displayname"]),bio:n(["bio","biography","description"]),category:n(["category","businesscategory","business_category","type"]),website:n(["website","url","site","externalurl"]),followers:n(["followers","follower_count","followers_count"]),following:n(["following","following_count"]),posts:n(["posts","post_count","media_count"]),location:n(["location","city","country"]),email:n(["email","public_email","contact_email"]),phone:n(["phone","public_phone","contact_phone"])}}function Jj(e,t){if(e==="custom")return t||"";if(e==="randomize"){const r=cM[Math.floor(Math.random()*cM.length)];return lM[r]}return lM[e]}async function kMe(e,t,r,n,a){const i=new Map;if(e.length===0)return i;const o=e.map((d,f)=>jMe(d,t,f)),l=50,c=[];for(let d=0;d<o.length;d+=l)c.push(o.slice(d,d+l));let u=0;for(const d of c){const f=r==="randomize"?Jj("randomize"):Jj(r,n);try{const{data:{session:m}}=await z.auth.getSession();if(!(m!=null&&m.access_token)){console.error("No authenticated session for opener generation"),d.forEach(v=>{i.set(parseInt(v.rowId),{opener:"",error:"Authentication required"})}),u+=d.length,a==null||a(u,o.length);continue}const p=await fetch("https://efpagcbqixencqosalgr.supabase.co/functions/v1/generate-openers",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m.access_token}`},body:JSON.stringify({promptTemplate:f,leads:d,style:r})});if(p.ok){const v=await p.json();v.results&&v.results.forEach(g=>{i.set(parseInt(g.rowId),{opener:g.opener,error:g.error})})}else{const v=await p.text();console.error("Opener generation failed:",v),d.forEach(g=>{i.set(parseInt(g.rowId),{opener:"",error:"Generation failed"})})}}catch(m){console.error("Error calling opener service:",m),d.forEach(p=>{i.set(parseInt(p.rowId),{opener:"",error:"Network error"})})}u+=d.length,a==null||a(u,o.length)}return i}const _y=["new_lead","in_contact","qualified","unqualified","call_booked","won","no_show"],$n={new_lead:{label:"New lead",color:"#ec4899",icon:Lm},in_contact:{label:"In contact",color:"#6366f1",icon:Hc},qualified:{label:"Qualified",color:"#f59e0b",icon:Ss},unqualified:{label:"Unqualified",color:"#ef4444",icon:Wc},call_booked:{label:"Call booked",color:"#9ca3af",icon:Vd},won:{label:"Won",color:"#10b981",icon:Dm},no_show:{label:"No show",color:"#f97316",icon:Tl}},Uh={hot:{label:"Hot",icon:Js,color:"#ff8b4a"},warm:{label:"Warm",icon:ml,color:"#facc15"},cold:{label:"Cold",icon:hl,color:"#93c5fd"}},NMe={hot:{name:"Hot Lead",color:"#F97316",icon:"flame",prompt:"High-intent lead. Asking for pricing, timeline, booking, or immediate next steps."},warm:{name:"Warm Lead",color:"#FACC15",icon:"sun",prompt:"Interested lead. Engaged in conversation, but not yet asking for immediate commitment."},cold:{name:"Cold Lead",color:"#60A5FA",icon:"snowflake",prompt:"Low-intent lead. Non-committal responses, low engagement, or no clear buying signals yet."}},qs={new_lead:"user-plus",in_contact:"message-circle",qualified:"star",unqualified:"x-circle",call_booked:"phone-call",won:"trophy",no_show:"user-round-x"},CMe={new_lead:"Brand new inbound lead that has not been worked yet.",in_contact:"You have started a conversation with this lead.",qualified:"Lead is a fit and has buying intent.",unqualified:"Lead is not a fit or has been disqualified.",call_booked:"A call has been booked with this lead.",won:"Lead converted successfully.",no_show:"Lead did not show up to the scheduled call."},Ia=e=>String(e||"").trim().toLowerCase(),ri=(e,t)=>{const r=Ia(e);return t==="hot"?r==="hot lead"||r==="hot":t==="warm"?r==="warm lead"||r==="warm":r==="cold lead"||r==="cold"};function Ku(e){const t=Ia(e);return t?t==="new lead"||t==="new"?"new_lead":t==="in contact"||t==="contacted"?"in_contact":t==="qualified"?"qualified":t==="unqualified"||t==="disqualified"?"unqualified":t==="call booked"||t==="booked call"||t==="call"?"call_booked":t==="won"||t==="closed won"?"won":t==="no show"||t==="noshow"?"no_show":null:null}function E_(e,t){const r=Ia(e);if(r==="user-plus")return Lm;if(r==="message-circle")return Hc;if(r==="star")return Ss;if(r==="x-circle")return Wc;if(r==="phone-call")return Vd;if(r==="trophy")return Dm;if(r==="user-round-x")return Tl;if(r==="tag")return fo;const n=Ia(t);return n==="new lead"?Lm:n==="in contact"?Hc:n==="qualified"?Ss:n==="unqualified"||n==="disqualified"?Wc:n==="call booked"?Vd:n==="won"?Dm:n==="no show"?Tl:fo}function nc(e,t=.22){const r=String(e||"").trim();if(!r)return`rgba(255, 255, 255, ${t})`;if(/^#[0-9a-f]{3}$/i.test(r)){const n=r.slice(1).split("").map(l=>l+l).join(""),a=parseInt(n.slice(0,2),16),i=parseInt(n.slice(2,4),16),o=parseInt(n.slice(4,6),16);return`rgba(${a}, ${i}, ${o}, ${t})`}if(/^#[0-9a-f]{6}$/i.test(r)){const n=r.slice(1),a=parseInt(n.slice(0,2),16),i=parseInt(n.slice(2,4),16),o=parseInt(n.slice(4,6),16);return`rgba(${a}, ${i}, ${o}, ${t})`}return r}function EMe(e){if(!e)return"";const t=Date.now()-e.getTime();if(!Number.isFinite(t))return"";const r=Math.floor(t/1e3);if(r<0)return"";if(r<60)return`${Math.max(1,r)}s`;const n=Math.floor(r/60);if(n<60)return`${n}m`;const a=Math.floor(n/60);if(a<24)return`${a}h`;const i=Math.floor(a/24);if(i<7)return`${i}d`;const o=Math.floor(i/7);if(o<5)return`${o}w`;const l=Math.floor(i/30);if(l<12)return`${l}mo`;const c=Math.floor(i/365);return`${Math.max(1,c)}y`}function AMe(e){const t=EMe(e);return t?`${t} ago`:""}function A_(e){const t=String(e.peer_name||"").trim();if(t)return t;const r=String(e.peer_username||"").trim();return r||"Instagram lead"}function P_(e){const t=String(e.peer_username||"").trim();return t?`@${t}`:""}function T_(e,t){var i;let r=!1,n=!1,a=!1;for(const o of e){const l=((i=t[o])==null?void 0:i.name)||"";ri(l,"hot")&&(r=!0),ri(l,"warm")&&(n=!0),ri(l,"cold")&&(a=!0)}return r?"hot":n?"warm":a?"cold":null}function O_(e,t,r){var i;const n=Ia(e.lead_status);if(n==="qualified")return"qualified";if(n==="disqualified")return"unqualified";const a=new Set;for(const o of t){const l=Ku((i=r[o])==null?void 0:i.name);l&&a.add(l)}for(const o of _y)if(a.has(o))return o;return"new_lead"}function Uu(e){const t=String(e??"");return/[",\n]/.test(t)?`"${t.replace(/"/g,'""')}"`:t}function PMe(){const{user:e}=Kt(),{runs:t,loading:r,createRun:n,deleteRun:a}=UL(),[i,o]=h.useState([]),[l,c]=h.useState([]),[u,d]=h.useState(null),[f,m]=h.useState([]),[p,v]=h.useState([]),[g,b]=h.useState(!1),[y,w]=h.useState(!1),[x,_]=h.useState("pain-driven"),[S,k]=h.useState(""),[C,j]=h.useState(null),N=h.useCallback(async P=>{try{const{data:T,headers:L}=await hne(P);o(T),c(L),d(P.name)}catch(T){console.error("Failed to parse CSV:",T),ee.error("Failed to parse CSV")}},[]),A=h.useCallback(async()=>{if(i.length===0||!e)return;b(!0),j(null);const{filtered:P,matchedIncludes:T}=pne(i,l,f,p),L=P.map(B=>{const M=i.indexOf(B);return vne(B,l,T.get(M)||[],[])});let U=L,D=null;if(y){if(D=Jj(x,S),L.length>0){j({current:0,total:L.length});const B=await kMe(L,l,x,S,(M,$)=>j({current:M,total:$}));U=L.map((M,$)=>{const re=B.get($);return{...M,opener:(re==null?void 0:re.opener)||"",openerError:(re==null?void 0:re.error)||""}})}}else U=L.map(B=>({...B,opener:""}));const H=t.length+1;await n({name:`Run ${H}`,timestamp:new Date,totalProfiles:i.length,matchingProfiles:U.length,includeKeywords:[...f],excludeKeywords:[...p],filteredData:U,originalHeaders:l,promptId:y?x:null,promptSnapshot:y?D:null,generateOpeners:y}),b(!1),j(null),ee.success("Run saved")},[i,l,f,p,t.length,y,x,S,e,n]);return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsx(W4e,{onFileSelect:N,fileName:u}),i.length>0?s.jsxs("p",{className:"text-sm text-white/55",children:[i.length.toLocaleString()," profiles loaded"]}):null,s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[s.jsx(oM,{label:"Include Keywords",keywords:f,onAdd:P=>m(T=>[...T,P]),onRemove:P=>m(T=>T.filter(L=>L!==P)),placeholder:"Add keyword..."}),s.jsx(oM,{label:"Exclude Keywords",keywords:p,onAdd:P=>v(T=>[...T,P]),onRemove:P=>v(T=>T.filter(L=>L!==P)),placeholder:"Add keyword..."})]}),s.jsx(SMe,{enabled:y,onToggle:w,style:x,onStyleChange:_,customScript:S,onCustomScriptChange:k}),s.jsx(ze,{onClick:A,disabled:i.length===0||g||f.length===0&&p.length===0,className:"w-full h-12 text-sm font-medium",children:g?C?`Generating openers: ${C.current}/${C.total}`:"Processing...":`Start Filtering${i.length>0?` (${i.length.toLocaleString()} profiles)`:""}`}),C?s.jsx(gq,{value:C.current/C.total*100,className:"h-2"}):null]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xs text-white/45 uppercase tracking-wider mb-4",children:"Run History"}),r?s.jsx("div",{className:"space-y-2",children:Array.from({length:6}).map((P,T)=>s.jsx("div",{className:"border border-white/10 rounded-2xl p-4 bg-black",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx($e,{className:"h-4 w-44 rounded-xl bg-white/[0.10]"}),s.jsx($e,{className:"h-3 w-64 rounded-xl bg-white/[0.06] mt-2"})]}),s.jsx($e,{className:"h-9 w-28 rounded-xl bg-white/[0.06]"})]})},T))}):s.jsx(V4e,{runs:t,onDelete:P=>a(P)})]})]})}function uM(){var oe,Ce;const{workspace:e,userRole:t}=on(),{user:r}=Kt(),[n,a]=h.useState([]),[i,o]=h.useState([]),[l,c]=h.useState({}),[u,d]=h.useState({}),[f,m]=h.useState([]),[p,v]=h.useState(!1),[g,b]=h.useState("all"),[y,w]=h.useState("all"),[x,_]=h.useState("all"),[S,k]=h.useState("all"),[C,j]=h.useState(""),[N,A]=h.useState(25),[P,T]=h.useState(0),L=Xt(),U=h.useRef(!1),D=h.useRef(Date.now()),H=h.useRef(null),B=h.useMemo(()=>{const R={};for(const Y of i)R[Y.id]=Y;return R},[i]),M=h.useMemo(()=>{const R={};for(const Y of f){const Se=String(Y.user_id||"");Se&&(R[Se]={name:String(Y.display_name||"Team member"),role:String(Y.role||"")})}return R},[f]),$=h.useMemo(()=>{const R={hot:null,warm:null,cold:null};for(const Y of i)!R.hot&&ri(Y.name,"hot")&&(R.hot=Y),!R.warm&&ri(Y.name,"warm")&&(R.warm=Y),!R.cold&&ri(Y.name,"cold")&&(R.cold=Y);return R},[i]),re=h.useMemo(()=>i.filter(R=>!!Ku(R==null?void 0:R.name)).map(R=>R.id),[i]),ie=h.useMemo(()=>i.filter(R=>!!(Ku(R==null?void 0:R.name)||ri(String((R==null?void 0:R.name)||""),"hot")||ri(String((R==null?void 0:R.name)||""),"warm")||ri(String((R==null?void 0:R.name)||""),"cold"))).map(R=>R.id),[i]),q=h.useCallback(async R=>{const Y=String(R||"").trim();if(!(e!=null&&e.id)||!Y)return;if(ie.length===0){d(G=>{if(!(Y in G))return G;const ue={...G};return delete ue[Y],ue});return}const{data:Se,error:Re}=await z.from("instagram_conversation_tags").select("tag_id,source").eq("workspace_id",e.id).eq("conversation_id",Y).in("tag_id",ie);if(Re)return;const de=(Array.isArray(Se)?Se:[]).some(G=>{const ue=Ia((G==null?void 0:G.source)||"");return ue&&ue!=="ai"&&ue!=="retag"});d(G=>{if(!de&&!(Y in G))return G;if(!de){const ue={...G};return delete ue[Y],ue}return G[Y]?G:{...G,[Y]:!0}})},[e==null?void 0:e.id,ie]),K=h.useMemo(()=>{const R={new_lead:null,in_contact:null,qualified:null,unqualified:null,call_booked:null,won:null,no_show:null};for(const Y of i){const Se=Ku(Y==null?void 0:Y.name);Se&&(R[Se]||(R[Se]=Y))}return R},[i]),ne=h.useMemo(()=>{const R={new_lead:{label:$n.new_lead.label,color:$n.new_lead.color,iconName:qs.new_lead},in_contact:{label:$n.in_contact.label,color:$n.in_contact.color,iconName:qs.in_contact},qualified:{label:$n.qualified.label,color:$n.qualified.color,iconName:qs.qualified},unqualified:{label:$n.unqualified.label,color:$n.unqualified.color,iconName:qs.unqualified},call_booked:{label:$n.call_booked.label,color:$n.call_booked.color,iconName:qs.call_booked},won:{label:$n.won.label,color:$n.won.color,iconName:qs.won},no_show:{label:$n.no_show.label,color:$n.no_show.color,iconName:qs.no_show}};for(const Y of _y){const Se=K[Y];Se&&(R[Y]={label:String(Se.name||R[Y].label),color:String(Se.color||R[Y].color),iconName:String(Se.icon||R[Y].iconName)})}return R},[K]),ae=h.useCallback(async R=>{const Y=$[R];if(Y)return Y;if(!(e!=null&&e.id)||!(r!=null&&r.id)||t==="setter")return null;const Se=NMe[R],{data:Re,error:de}=await z.from("instagram_tags").insert({workspace_id:e.id,name:Se.name,color:Se.color,icon:Se.icon,prompt:Se.prompt,created_by:r.id}).select("id,name,color,icon").maybeSingle();if(de)return ee.error((de==null?void 0:de.message)||`Failed to create ${Se.name}`),null;if(!(Re!=null&&Re.id))return null;const G={id:String(Re.id),name:String(Re.name||Se.name),color:Re.color!=null?String(Re.color):Se.color,icon:Re.icon!=null?String(Re.icon):Se.icon};return o(ue=>ue.some(he=>he.id===G.id)?ue:[...ue,G]),G},[$,e==null?void 0:e.id,r==null?void 0:r.id,t]),_e=h.useCallback(async(R,Y)=>{if(!(e!=null&&e.id)||!R)return;const Se=l[R]||[],Re=new Set(Se),de=new Set(["hot","warm","cold"].map(he=>{var Z;return(Z=$[he])==null?void 0:Z.id}).filter(Boolean));let G=null;if(Y){if(G=await ae(Y),!G)return;de.add(G.id)}const ue=new Set(Re);for(const he of Array.from(ue))de.has(he)&&ue.delete(he);G&&ue.add(G.id),c(he=>({...he,[R]:Array.from(ue)}));try{const he=Array.from(Re).filter(Z=>de.has(Z)&&(!G||Z!==G.id));if(he.length>0){const{error:Z}=await z.from("instagram_conversation_tags").delete().eq("workspace_id",e.id).eq("conversation_id",R).in("tag_id",he);if(Z)throw Z}if(G&&!Re.has(G.id)){const{error:Z}=await z.from("instagram_conversation_tags").insert({workspace_id:e.id,conversation_id:R,tag_id:G.id,source:"manual",created_by:(r==null?void 0:r.id)||null});if(Z&&String((Z==null?void 0:Z.code)||"")!=="23505")throw Z}}catch(he){c(Z=>({...Z,[R]:Se})),ee.error((he==null?void 0:he.message)||"Failed to update temperature")}},[e==null?void 0:e.id,r==null?void 0:r.id,l,$,ae]),pe=h.useCallback(async R=>{var he,Z,ge;const Y=((he=$n[R])==null?void 0:he.label)||"",Se=Ia(Y),Re=i.find(Ie=>Ia(Ie.name)===Se)||i.find(Ie=>Ku(Ie.name)===R)||null;if(Re!=null&&Re.id)return Re.id;if(!(e!=null&&e.id)||!(r!=null&&r.id)||t==="setter")return null;const{data:de,error:G}=await z.from("instagram_tags").insert({workspace_id:e.id,name:Y,color:((Z=$n[R])==null?void 0:Z.color)||"#9ca3af",icon:qs[R]||"tag",prompt:CMe[R]||null,created_by:r.id}).select("id,name,color,icon").maybeSingle();if(G)return ee.error((G==null?void 0:G.message)||`Failed to create ${Y||"phase"} tag`),null;if(!(de!=null&&de.id))return null;const ue={id:String(de.id),name:String(de.name||Y),color:de.color!=null?String(de.color):((ge=$n[R])==null?void 0:ge.color)||null,icon:de.icon!=null?String(de.icon):qs[R]||null};return o(Ie=>Ie.some(Ee=>Ee.id===ue.id)?Ie:[...Ie,ue]),ue.id},[i,e==null?void 0:e.id,r==null?void 0:r.id,t]),ye=h.useCallback(async(R,Y)=>{var ge;if(!(e!=null&&e.id)||!R)return;const Se=await pe(Y);if(!Se){ee.error("Phase tags are missing. Run migrations or connect Instagram to seed them.");return}const Re=l[R]||[],de=new Set(Re),G=new Set(re),ue=new Set(de);for(const Ie of Array.from(ue))G.has(Ie)&&ue.delete(Ie);ue.add(Se);const he=((ge=n.find(Ie=>String(Ie.conversation_id)===String(R)))==null?void 0:ge.lead_status)||null,Z=Y==="qualified"?"qualified":Y==="unqualified"?"disqualified":"open";c(Ie=>({...Ie,[R]:Array.from(ue)})),a(Ie=>Ie.map(Ee=>String(Ee.conversation_id)===String(R)?{...Ee,lead_status:Z}:Ee));try{const Ie=Array.from(de).filter(We=>G.has(We)&&We!==Se);if(Ie.length>0){const{error:We}=await z.from("instagram_conversation_tags").delete().eq("workspace_id",e.id).eq("conversation_id",R).in("tag_id",Ie);if(We)throw We}if(!de.has(Se)){const{error:We}=await z.from("instagram_conversation_tags").insert({workspace_id:e.id,conversation_id:R,tag_id:Se,source:"manual",created_by:(r==null?void 0:r.id)||null});if(We&&String((We==null?void 0:We.code)||"")!=="23505")throw We}const{error:Ee}=await z.from("instagram_threads").update({lead_status:Z}).eq("workspace_id",e.id).eq("conversation_id",R);if(Ee)throw Ee}catch(Ie){c(Ee=>({...Ee,[R]:Re})),a(Ee=>Ee.map(We=>String(We.conversation_id)===String(R)?{...We,lead_status:he}:We)),ee.error((Ie==null?void 0:Ie.message)||"Failed to update phase")}},[e==null?void 0:e.id,r==null?void 0:r.id,i,n,l,re,pe]),ce=h.useCallback(async()=>{if(e!=null&&e.id){v(!0);try{const[R,Y,Se]=await Promise.all([z.from("instagram_threads").select("conversation_id,instagram_user_id,peer_username,peer_name,peer_profile_picture_url,assigned_user_id,lead_status,last_message_at,last_message_text,ai_phase_updated_at,ai_phase_confidence,ai_temperature_confidence,ai_phase_reason,ai_phase_mode,ai_phase_last_run_source").eq("workspace_id",e.id).neq("lead_status","removed").order("last_message_at",{ascending:!1}).limit(1e3),z.from("instagram_tags").select("id,name,color,icon").eq("workspace_id",e.id).order("created_at",{ascending:!0}),z.from("workspace_members").select("user_id,role,display_name").eq("workspace_id",e.id).order("created_at",{ascending:!0})]);if(R.error)throw R.error;if(Y.error)throw Y.error;if(Se.error)throw Se.error;const Re=Array.isArray(R.data)?R.data:[],de=Array.isArray(Y.data)?Y.data:[],G=Array.isArray(Se.data)?Se.data:[],ue=new Set(de.filter(Ee=>!!(Ku(Ee==null?void 0:Ee.name)||ri(String((Ee==null?void 0:Ee.name)||""),"hot")||ri(String((Ee==null?void 0:Ee.name)||""),"warm")||ri(String((Ee==null?void 0:Ee.name)||""),"cold"))).map(Ee=>String(Ee.id))),he=Re.map(Ee=>String(Ee.conversation_id)).filter(Boolean);let Z=[];if(he.length>0){const Ee=await z.from("instagram_conversation_tags").select("conversation_id,tag_id,source").eq("workspace_id",e.id).in("conversation_id",he);if(Ee.error)throw Ee.error;Z=Array.isArray(Ee.data)?Ee.data:[]}const ge={},Ie={};for(const Ee of Z){const We=String(Ee.conversation_id||""),Oe=String(Ee.tag_id||"");if(!(!We||!Oe)&&(ge[We]||(ge[We]=[]),ge[We].push(Oe),ue.has(Oe))){const Fe=Ia((Ee==null?void 0:Ee.source)||"");Fe&&Fe!=="ai"&&Fe!=="retag"&&(Ie[We]=!0)}}a(Re),o(de),m(G),c(ge),d(Ie)}catch(R){console.error("Failed to load leads:",R),ee.error((R==null?void 0:R.message)||"Failed to load leads")}finally{v(!1)}}},[e==null?void 0:e.id]);h.useEffect(()=>{ce()},[ce]),h.useEffect(()=>{if(!(e!=null&&e.id))return;const R=e.id,Y=de=>de!=null&&de.conversation_id?{conversation_id:String(de.conversation_id),instagram_user_id:String(de.instagram_user_id||""),peer_username:de.peer_username!=null?String(de.peer_username):null,peer_name:de.peer_name!=null?String(de.peer_name):null,peer_profile_picture_url:de.peer_profile_picture_url!=null?String(de.peer_profile_picture_url):null,assigned_user_id:de.assigned_user_id!=null?String(de.assigned_user_id):null,lead_status:de.lead_status!=null?String(de.lead_status):null,last_message_at:de.last_message_at!=null?String(de.last_message_at):null,last_message_text:de.last_message_text!=null?String(de.last_message_text):null,ai_phase_updated_at:de.ai_phase_updated_at!=null?String(de.ai_phase_updated_at):null,ai_phase_confidence:de.ai_phase_confidence!=null&&Number.isFinite(Number(de.ai_phase_confidence))?Number(de.ai_phase_confidence):null,ai_temperature_confidence:de.ai_temperature_confidence!=null&&Number.isFinite(Number(de.ai_temperature_confidence))?Number(de.ai_temperature_confidence):null,ai_phase_reason:de.ai_phase_reason!=null?String(de.ai_phase_reason):null,ai_phase_mode:de.ai_phase_mode==="shadow"||de.ai_phase_mode==="enforce"?de.ai_phase_mode:null,ai_phase_last_run_source:de.ai_phase_last_run_source==="incremental"||de.ai_phase_last_run_source==="catchup"||de.ai_phase_last_run_source==="backfill"||de.ai_phase_last_run_source==="manual_rephase"?de.ai_phase_last_run_source:null}:null,Se=de=>{const G=de.last_message_at?Date.parse(String(de.last_message_at)):0;return Number.isFinite(G)?G:0},Re=z.channel(`leads:${R}`).on("postgres_changes",{event:"*",schema:"public",table:"instagram_threads",filter:`workspace_id=eq.${R}`},de=>{const G=String((de==null?void 0:de.eventType)||""),ue=G==="DELETE"?de==null?void 0:de.old:de==null?void 0:de.new,he=Y(ue);if(he){if(G==="DELETE"){a(Z=>Z.filter(ge=>ge.conversation_id!==he.conversation_id)),setSelectedConversationIds(Z=>Z.filter(ge=>ge!==he.conversation_id)),c(Z=>{if(!(he.conversation_id in Z))return Z;const ge={...Z};return delete ge[he.conversation_id],ge}),d(Z=>{if(!(he.conversation_id in Z))return Z;const ge={...Z};return delete ge[he.conversation_id],ge});return}if(Ia(he.lead_status)==="removed"){a(Z=>Z.filter(ge=>ge.conversation_id!==he.conversation_id)),setSelectedConversationIds(Z=>Z.filter(ge=>ge!==he.conversation_id)),d(Z=>{if(!(he.conversation_id in Z))return Z;const ge={...Z};return delete ge[he.conversation_id],ge});return}a(Z=>{const ge=Z.findIndex(Ee=>Ee.conversation_id===he.conversation_id),Ie=ge>=0?[...Z.slice(0,ge),{...Z[ge],...he},...Z.slice(ge+1)]:[...Z,he];return Ie.sort((Ee,We)=>Se(We)-Se(Ee)),Ie})}}).on("postgres_changes",{event:"*",schema:"public",table:"instagram_conversation_tags",filter:`workspace_id=eq.${R}`},de=>{const G=String((de==null?void 0:de.eventType)||""),ue=G==="DELETE"?de==null?void 0:de.old:de==null?void 0:de.new,he=ue!=null&&ue.conversation_id?String(ue.conversation_id):"",Z=ue!=null&&ue.tag_id?String(ue.tag_id):"";if(!(!he||!Z)&&(c(ge=>{const Ie=new Set(ge[he]||[]);return G==="DELETE"?Ie.delete(Z):Ie.add(Z),{...ge,[he]:Array.from(Ie)}}),ie.includes(Z))){const ge=Ia((ue==null?void 0:ue.source)||"");G!=="DELETE"&&ge&&ge!=="ai"&&ge!=="retag"?d(Ie=>({...Ie,[he]:!0})):q(he)}}).on("postgres_changes",{event:"*",schema:"public",table:"instagram_tags",filter:`workspace_id=eq.${R}`},de=>{const G=String((de==null?void 0:de.eventType)||""),ue=G==="DELETE"?de==null?void 0:de.old:de==null?void 0:de.new,he=ue!=null&&ue.id?String(ue.id):"";if(!he)return;if(G==="DELETE"){o(ge=>ge.filter(Ie=>Ie.id!==he));return}const Z={id:he,name:String((ue==null?void 0:ue.name)||"Tag"),color:(ue==null?void 0:ue.color)!=null?String(ue.color):null,icon:(ue==null?void 0:ue.icon)!=null?String(ue.icon):null};o(ge=>{const Ie=ge.findIndex(Ee=>Ee.id===he);return Ie>=0?[...ge.slice(0,Ie),{...ge[Ie],...Z},...ge.slice(Ie+1)]:[...ge,Z]})}).subscribe();return()=>{z.removeChannel(Re)}},[e==null?void 0:e.id,ie,q]),h.useEffect(()=>{if(!(e!=null&&e.id)||t!=="setter")return;const R=e.id;H.current!==R&&(H.current=R,D.current=Date.now()-1e4);let Y=!1;const Se=Z=>Z!=null&&Z.conversation_id?{conversation_id:String(Z.conversation_id),instagram_user_id:String(Z.instagram_user_id||""),peer_username:Z.peer_username!=null?String(Z.peer_username):null,peer_name:Z.peer_name!=null?String(Z.peer_name):null,peer_profile_picture_url:Z.peer_profile_picture_url!=null?String(Z.peer_profile_picture_url):null,assigned_user_id:Z.assigned_user_id!=null?String(Z.assigned_user_id):null,lead_status:Z.lead_status!=null?String(Z.lead_status):null,last_message_at:Z.last_message_at!=null?String(Z.last_message_at):null,last_message_text:Z.last_message_text!=null?String(Z.last_message_text):null,ai_phase_updated_at:Z.ai_phase_updated_at!=null?String(Z.ai_phase_updated_at):null,ai_phase_confidence:Z.ai_phase_confidence!=null&&Number.isFinite(Number(Z.ai_phase_confidence))?Number(Z.ai_phase_confidence):null,ai_temperature_confidence:Z.ai_temperature_confidence!=null&&Number.isFinite(Number(Z.ai_temperature_confidence))?Number(Z.ai_temperature_confidence):null,ai_phase_reason:Z.ai_phase_reason!=null?String(Z.ai_phase_reason):null,ai_phase_mode:Z.ai_phase_mode==="shadow"||Z.ai_phase_mode==="enforce"?Z.ai_phase_mode:null,ai_phase_last_run_source:Z.ai_phase_last_run_source==="incremental"||Z.ai_phase_last_run_source==="catchup"||Z.ai_phase_last_run_source==="backfill"||Z.ai_phase_last_run_source==="manual_rephase"?Z.ai_phase_last_run_source:null}:null,Re=Z=>{const ge=Z.last_message_at?Date.parse(String(Z.last_message_at)):0;return Number.isFinite(ge)?ge:0},de=async()=>{if(!Y&&!U.current){U.current=!0;try{const Z=new Date(D.current).toISOString(),ge=await z.from("instagram_threads").select("conversation_id,instagram_user_id,peer_username,peer_name,peer_profile_picture_url,assigned_user_id,lead_status,last_message_at,last_message_text,ai_phase_updated_at,ai_phase_confidence,ai_temperature_confidence,ai_phase_reason,ai_phase_mode,ai_phase_last_run_source,updated_at").eq("workspace_id",R).gt("updated_at",Z).order("updated_at",{ascending:!1,nullsFirst:!1}).limit(250);if(ge.error)return;const Ie=Array.isArray(ge.data)?ge.data:[];if(Ie.length===0)return;let Ee=D.current;const We=[],Oe=[];for(const rt of Ie){const nt=rt!=null&&rt.updated_at?String(rt.updated_at):"";if(nt){const ht=Date.parse(nt);Number.isFinite(ht)&&ht>Ee&&(Ee=ht)}const Gt=Se(rt);Gt&&Ia(Gt.lead_status)!=="removed"&&(We.push(Gt),Oe.push(String(Gt.conversation_id)))}if(We.length===0)return;D.current=Ee,a(rt=>{const nt=new Map;for(const ht of rt)nt.set(String(ht.conversation_id),ht);for(const ht of We){const dt=String(ht.conversation_id),gt=nt.get(dt);nt.set(dt,gt?{...gt,...ht}:ht)}const Gt=Array.from(nt.values());return Gt.sort((ht,dt)=>Re(dt)-Re(ht)),Gt});const Fe=Array.from(new Set(Oe)).slice(0,250);if(Fe.length>0){const rt=await z.from("instagram_conversation_tags").select("conversation_id,tag_id,source").eq("workspace_id",R).in("conversation_id",Fe);if(!rt.error){const nt=Array.isArray(rt.data)?rt.data:[];c(dt=>{const gt={...dt};for(const It of nt){const Qt=String((It==null?void 0:It.conversation_id)||""),Nn=String((It==null?void 0:It.tag_id)||"");if(!Qt||!Nn)continue;const Br=new Set(gt[Qt]||[]);Br.add(Nn),gt[Qt]=Array.from(Br)}return gt});const Gt=new Set(ie),ht={};for(const dt of nt){const gt=String((dt==null?void 0:dt.conversation_id)||""),It=String((dt==null?void 0:dt.tag_id)||"");if(!gt||!It||!Gt.has(It))continue;const Qt=Ia((dt==null?void 0:dt.source)||"");Qt&&Qt!=="ai"&&Qt!=="retag"&&(ht[gt]=!0)}d(dt=>{const gt={...dt};for(const It of Fe)ht[It]?gt[It]=!0:delete gt[It];return gt})}}}finally{U.current=!1}}},G=setTimeout(de,1200),ue=setInterval(()=>{document.visibilityState==="visible"&&de()},3500),he=()=>de();return window.addEventListener("focus",he),()=>{Y=!0,clearTimeout(G),clearInterval(ue),window.removeEventListener("focus",he)}},[e==null?void 0:e.id,t,ie]);const me=h.useMemo(()=>{const R=Date.now(),Y=24*60*60*1e3,Se=g==="today"?new Date(new Date().toDateString()).getTime():g==="yesterday"?new Date(new Date(R-Y).toDateString()).getTime():g==="last7"?R-7*Y:g==="last30"?R-30*Y:0,Re=C.trim().toLowerCase();return n.filter(de=>{const G=String(de.conversation_id||""),ue=l[G]||[];if(Se){const he=de.last_message_at?Date.parse(String(de.last_message_at)):0;if(!he||he<Se)return!1}if(y==="unassigned"){if(de.assigned_user_id)return!1}else if(y!=="all"&&String(de.assigned_user_id||"")!==y)return!1;if(x!=="all"&&O_(de,ue,B)!==x||S!=="all"&&T_(ue,B)!==S)return!1;if(Re){const he=A_(de).toLowerCase(),Z=P_(de).toLowerCase(),ge=String(de.last_message_text||"").toLowerCase();if(!he.includes(Re)&&!Z.includes(Re)&&!ge.includes(Re))return!1}return!0})},[n,g,y,x,S,C,l,B]),Q=me.length,te=Math.max(1,Math.ceil(Q/N)),Ne=Math.min(P,te-1),je=me.slice(Ne*N,Ne*N+N);h.useEffect(()=>{P!==Ne&&T(Ne)},[P,Ne]);const J=()=>{var ue,he,Z;const R=me,Y=[];Y.push(["lead_name","instagram_handle","phase","temperature","assigned_to","last_interacted"].join(","));for(const ge of R){const Ie=String(ge.conversation_id||""),Ee=l[Ie]||[],We=O_(ge,Ee,B),Oe=T_(Ee,B),Fe=((ue=ne[We])==null?void 0:ue.label)||We,rt=ge.assigned_user_id?((he=M[String(ge.assigned_user_id)])==null?void 0:he.name)||"Team member":"Unassigned",nt=ge.last_message_at?new Date(String(ge.last_message_at)).toISOString():"";Y.push([Uu(A_(ge)),Uu(P_(ge)),Uu(Fe),Uu(Oe?((Z=Uh[Oe])==null?void 0:Z.label)||Oe:""),Uu(rt),Uu(nt)].join(","))}const Se=Y.join(`
`),Re=new Blob([Se],{type:"text/csv;charset=utf-8"}),de=URL.createObjectURL(Re),G=document.createElement("a");G.href=de,G.download=`leads-${new Date().toISOString().slice(0,10)}.csv`,G.click(),URL.revokeObjectURL(de)};return s.jsx(Er,{children:s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4 mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"headline-domaine text-[36px] font-medium",children:"Leads"}),s.jsx("p",{className:"text-sm text-white/45 mt-1",children:"Track, tag, and assign your inbound leads"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Gi,{children:[s.jsx(E7,{asChild:!0,children:s.jsx(ze,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-xl text-white/60 hover:text-white hover:bg-white/10","aria-label":"Filter leads",title:"Filter leads",children:s.jsx($D,{className:"h-4 w-4"})})}),s.jsxs(yi,{className:"max-w-6xl w-[92vw] h-[82vh] overflow-y-auto",children:[s.jsx(xi,{children:s.jsx(bi,{children:"Filter Leads (CSV)"})}),s.jsx(PMe,{})]})]}),s.jsx(ze,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-xl text-white/60 hover:text-white hover:bg-white/10",onClick:J,disabled:me.length===0,"aria-label":"Export as CSV",title:"Export as CSV",children:s.jsx(ID,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsxs("button",{type:"button",className:"h-11 rounded-2xl bg-black border border-white/10 pl-4 pr-3 text-[15px] font-medium text-white/85 hover:bg-white/[0.03] transition-colors inline-flex items-center gap-2",children:[s.jsx("span",{children:g==="all"?"All time":g==="today"?"Today":g==="yesterday"?"Yesterday":g==="last7"?"Last 7 days":"Last 30 days"}),s.jsx(oi,{className:"h-4 w-4 text-white/45"})]})}),s.jsx(Hr,{align:"start",className:"min-w-[180px] rounded-2xl border border-white/10 bg-black p-1",children:s.jsxs(Ra,{value:g,onValueChange:R=>{b(R),T(0)},children:[s.jsx(er,{value:"all",className:"rounded-xl text-[13px]",children:"All time"}),s.jsx(er,{value:"today",className:"rounded-xl text-[13px]",children:"Today"}),s.jsx(er,{value:"yesterday",className:"rounded-xl text-[13px]",children:"Yesterday"}),s.jsx(er,{value:"last7",className:"rounded-xl text-[13px]",children:"Last 7 days"}),s.jsx(er,{value:"last30",className:"rounded-xl text-[13px]",children:"Last 30 days"})]})})]}),s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsxs("button",{type:"button",className:"h-11 rounded-2xl bg-black border border-white/10 pl-4 pr-3 text-[15px] font-medium text-white/85 hover:bg-white/[0.03] transition-colors inline-flex items-center gap-2",children:[s.jsx("span",{children:y==="all"?"All users":y==="unassigned"?"Unassigned":(()=>{const R=M[String(y)],Y=(R==null?void 0:R.role)==="setter"?" [S]":(R==null?void 0:R.role)==="owner"?" [O]":"";return`${(R==null?void 0:R.name)||"Team member"}${Y}`})()}),s.jsx(oi,{className:"h-4 w-4 text-white/45"})]})}),s.jsx(Hr,{align:"start",className:"min-w-[200px] rounded-2xl border border-white/10 bg-black p-1",children:s.jsxs(Ra,{value:y,onValueChange:R=>{w(R),T(0)},children:[s.jsx(er,{value:"all",className:"rounded-xl text-[13px]",children:"All users"}),s.jsx(er,{value:"unassigned",className:"rounded-xl text-[13px]",children:"Unassigned"}),s.jsx(di,{className:"bg-white/10"}),f.map(R=>{const Y=String(R.display_name||"Team member"),Se=R.role==="setter"?" [S]":R.role==="owner"?" [O]":"";return s.jsxs(er,{value:String(R.user_id),className:"rounded-xl text-[13px]",children:[Y,Se]},String(R.user_id))})]})})]}),s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsxs("button",{type:"button",className:"h-11 rounded-2xl bg-black border border-white/10 pl-4 pr-3 text-[15px] font-medium text-white/85 hover:bg-white/[0.03] transition-colors inline-flex items-center gap-2",children:[s.jsx("span",{children:x==="all"?"Phase":((oe=ne[x])==null?void 0:oe.label)||"Phase"}),s.jsx(oi,{className:"h-4 w-4 text-white/45"})]})}),s.jsx(Hr,{align:"start",className:"min-w-[200px] rounded-2xl border border-white/10 bg-black p-1",children:s.jsxs(Ra,{value:x,onValueChange:R=>{_(R),T(0)},children:[s.jsx(er,{value:"all",className:"rounded-xl text-[13px]",children:"Phase: All"}),s.jsx(di,{className:"bg-white/10"}),_y.map(R=>{const Y=ne[R],Se=E_(Y.iconName,Y.label);return s.jsx(er,{value:R,className:"rounded-xl text-[13px]",children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{className:"h-6 w-6 rounded-lg border border-white/10 inline-flex items-center justify-center",style:{backgroundColor:nc(Y.color,.16)},children:s.jsx(Se,{className:"h-3.5 w-3.5",style:{color:Y.color}})}),Y.label]})},R)})]})})]}),s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsxs("button",{type:"button",className:"h-11 rounded-2xl bg-black border border-white/10 pl-4 pr-3 text-[15px] font-medium text-white/85 hover:bg-white/[0.03] transition-colors inline-flex items-center gap-2",children:[s.jsx("span",{children:S==="all"?"Temperature":((Ce=Uh[S])==null?void 0:Ce.label)||"Temperature"}),s.jsx(oi,{className:"h-4 w-4 text-white/45"})]})}),s.jsx(Hr,{align:"start",className:"min-w-[200px] rounded-2xl border border-white/10 bg-black p-1",children:s.jsxs(Ra,{value:S,onValueChange:R=>{k(R),T(0)},children:[s.jsx(er,{value:"all",className:"rounded-xl text-[13px]",children:"Temperature: All"}),s.jsx(di,{className:"bg-white/10"}),["hot","warm","cold"].map(R=>{const Y=Uh[R],Se=Y.icon;return s.jsx(er,{value:R,className:"rounded-xl text-[13px]",children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(Se,{className:"h-4 w-4 fill-current",style:{color:Y.color}}),Y.label]})},R)})]})})]})]}),s.jsxs("div",{className:"relative w-full sm:w-[320px]",children:[s.jsx(zx,{className:"h-4 w-4 text-white/40 absolute left-3 top-1/2 -translate-y-1/2"}),s.jsx("input",{value:C,onChange:R=>{j(R.target.value),T(0)},placeholder:"Search leads by name, handle, or message...",className:"w-full h-11 pl-9 pr-3 rounded-2xl bg-black border border-white/10 text-sm text-white/80 placeholder:text-white/30 focus:outline-none"})]})]}),s.jsx("div",{className:"mt-6 rounded-2xl border border-white/10 bg-black/30 overflow-hidden",children:p?s.jsx("div",{className:"p-10 text-center text-sm text-white/55",children:"Loading leads"}):je.length===0?s.jsxs("div",{className:"p-10 text-center",children:[s.jsx("div",{className:"text-sm text-white/75",children:"No leads found."}),s.jsx("div",{className:"text-xs text-white/35 mt-2",children:"Try adjusting filters or connect Instagram to start receiving leads."})]}):s.jsxs(rg,{className:"w-full",children:[s.jsx(ng,{className:"bg-black/40",children:s.jsxs(bo,{className:"border-white/8",children:[s.jsx(dn,{className:"text-white/55",children:"Lead name"}),s.jsx(dn,{className:"text-white/55",children:"Phase"}),s.jsx(dn,{className:"text-white/55",children:"Temperature"}),s.jsx(dn,{className:"text-white/55",children:"Assigned to"}),s.jsx(dn,{className:"text-white/55 text-right",children:"Interacted"})]})}),s.jsx(ag,{children:je.map(R=>{var Nn,Br;const Y=String(R.conversation_id||""),Se=l[Y]||[],Re=O_(R,Se,B),de=ne[Re],G=E_(de==null?void 0:de.iconName,de==null?void 0:de.label),ue=T_(Se,B),he=ue?Uh[ue]:null,Z=he==null?void 0:he.icon,ge=R.ai_phase_mode?String(R.ai_phase_mode):"n/a",Ie=R.ai_phase_confidence!=null&&Number.isFinite(Number(R.ai_phase_confidence))?`${Number(R.ai_phase_confidence)}%`:"",Ee=R.ai_temperature_confidence!=null&&Number.isFinite(Number(R.ai_temperature_confidence))?`${Number(R.ai_temperature_confidence)}%`:"",We=String(R.ai_phase_reason||"").trim(),Oe=[`AI mode: ${ge}`,`Phase confidence: ${Ie}`,We?`Reason: ${We}`:"Reason: "].join("\\n"),Fe=[`AI mode: ${ge}`,`Temperature confidence: ${Ee}`,We?`Reason: ${We}`:"Reason: "].join("\\n"),rt=R.assigned_user_id?((Nn=M[String(R.assigned_user_id)])==null?void 0:Nn.name)||"Team member":"Unassigned",nt=R.assigned_user_id&&((Br=M[String(R.assigned_user_id)])==null?void 0:Br.role)||"",Gt=nt==="setter"?" [S]":nt==="owner"?" [O]":"",ht=R.last_message_at?new Date(String(R.last_message_at)):null,dt=ht?AMe(ht):"",gt=A_(R),It=P_(R),Qt=gt.slice(0,1).toUpperCase()||"?";return s.jsxs(bo,{className:"border-white/8 hover:bg-white/[0.03] cursor-pointer",onClick:nr=>{const nn=nr.target;nn&&nn.closest('button, a, input, textarea, select, [role^="menuitem"]')||L(`/messages?conversation=${encodeURIComponent(Y)}`)},children:[s.jsx(fn,{children:s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsxs(_w,{className:"h-8 w-8",children:[s.jsx(Sw,{src:R.peer_profile_picture_url||void 0,alt:gt}),s.jsx(jw,{className:"text-white/70 text-xs",children:Qt})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-sm text-white/85 truncate",children:gt}),It?s.jsx("div",{className:"text-xs text-white/35 truncate",children:It}):null]})]})}),s.jsx(fn,{children:s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsxs("button",{type:"button",className:"h-9 px-2 rounded-xl inline-flex items-center gap-2 text-sm text-white/80 hover:bg-white/[0.04] transition-colors","aria-label":"Change phase",title:Oe,children:[de&&G?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"h-6 w-6 rounded-lg border border-white/10 inline-flex items-center justify-center",style:{backgroundColor:nc(de.color,.16)},children:s.jsx(G,{className:"h-3.5 w-3.5",style:{color:de.color}})}),s.jsx("span",{className:"whitespace-nowrap",children:de.label})]}):s.jsx("span",{className:"text-sm text-white/35",children:""}),s.jsx(oi,{className:"h-3.5 w-3.5 text-white/40"})]})}),s.jsx(Hr,{align:"start",className:"min-w-[220px] rounded-2xl border border-white/10 bg-black p-1",children:s.jsx(Ra,{value:Re,onValueChange:nr=>ye(Y,nr),children:_y.map(nr=>{const nn=ne[nr],ct=E_(nn.iconName,nn.label);return s.jsx(er,{value:nr,className:"rounded-xl text-[13px]",children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{className:"h-6 w-6 rounded-lg border border-white/10 inline-flex items-center justify-center",style:{backgroundColor:nc(nn.color,.16)},children:s.jsx(ct,{className:"h-3.5 w-3.5",style:{color:nn.color}})}),nn.label]})},nr)})})})]})}),s.jsx(fn,{children:s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsxs("button",{type:"button",className:"h-9 px-2 rounded-xl inline-flex items-center gap-2 text-sm text-white/80 hover:bg-white/[0.04] transition-colors","aria-label":"Change temperature",title:Fe,children:[he&&Z?s.jsxs(s.Fragment,{children:[s.jsx(Z,{className:"h-4 w-4 fill-current",style:{color:he.color}}),s.jsx("span",{className:"whitespace-nowrap",children:he.label})]}):s.jsx("span",{className:"text-sm text-white/35",children:""}),s.jsx(oi,{className:"h-3.5 w-3.5 text-white/40"})]})}),s.jsx(Hr,{align:"start",className:"min-w-[220px] rounded-2xl border border-white/10 bg-black p-1",children:s.jsxs(Ra,{value:ue||"none",onValueChange:nr=>_e(Y,nr==="none"?null:nr),children:[s.jsx(er,{value:"none",className:"rounded-xl text-[13px]",children:"No temperature"}),s.jsx(di,{className:"bg-white/10"}),["hot","warm","cold"].map(nr=>{const nn=Uh[nr],ct=nn.icon;return s.jsx(er,{value:nr,className:"rounded-xl text-[13px]",children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(ct,{className:"h-4 w-4 fill-current",style:{color:nn.color}}),nn.label]})},nr)})]})})]})}),s.jsx(fn,{children:s.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-white/80",children:[s.jsx("span",{className:"acq-orb h-6 w-6 text-white/80 text-xs grid place-items-center",style:nt==="owner"?{"--orb-tint":nc("#60a5fa",.16),"--orb-glow":nc("#60a5fa",.42)}:nt==="setter"?{"--orb-tint":nc("#a78bfa",.16),"--orb-glow":nc("#a78bfa",.42)}:{"--orb-tint":"rgba(255,255,255,0.06)","--orb-glow":"rgba(255,255,255,0.18)"},children:(rt||"U").slice(0,1).toUpperCase()}),s.jsxs("span",{className:"truncate max-w-[180px]",children:[rt,Gt]})]})}),s.jsx(fn,{className:"text-right text-sm text-white/75",children:dt||""})]},Y)})})]})}),s.jsxs("div",{className:"mt-4 flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/45",children:["Rows per page",s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsx("button",{type:"button",className:"h-8 rounded-lg bg-black border border-white/10 px-2 text-xs text-white/80 hover:bg-white/[0.03] transition-colors",children:N})}),s.jsx(Hr,{align:"start",className:"min-w-[120px] rounded-2xl border border-white/10 bg-black p-1",children:s.jsx(Ra,{value:String(N),onValueChange:R=>{A(Number(R)||25),T(0)},children:["10","25","50","100"].map(R=>s.jsx(er,{value:R,className:"rounded-xl text-[13px]",children:R},R))})})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ze,{variant:"outline",size:"sm",className:"h-8 px-2 text-xs",onClick:()=>T(R=>Math.max(0,R-1)),disabled:Ne<=0,children:"Prev"}),s.jsx(ze,{variant:"outline",size:"sm",className:"h-8 px-2 text-xs",onClick:()=>T(R=>Math.min(te-1,R+1)),disabled:Ne>=te-1,children:"Next"}),s.jsxs("div",{className:"text-xs text-white/45",children:["Page ",Ne+1," of ",te]})]})]})]})})}const TMe=Lf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Zt({className:e,variant:t,...r}){return s.jsx("div",{className:Pe(TMe({variant:t}),e),...r})}function Zh(e,t){const r=Date.now(),n=t!=null&&t.expires_at?new Date(t.expires_at):null,a=t!=null&&t.created_at?new Date(t.created_at):null;let i="invitation_pending";return e.onboardingCompleted?i="active":e.userId?i="onboarding_pending":t&&(t.accepted_at?i="onboarding_pending":n&&n.getTime()<r?i="invite_expired":i="invitation_pending"),{...e,portalStatus:i,latestInviteSentAt:a,latestInviteExpiresAt:n}}function OMe(e){if(e instanceof Error&&e.message)return e.message;if(typeof e=="object"&&e){const t=e,r=String(t.message||t.error||t.details||"").trim();if(r)return r;try{return JSON.stringify(t)}catch{}}return"Request failed"}function ez(){const{workspace:e}=on(),[t,r]=h.useState([]),[n,a]=h.useState(!0),[i,o]=h.useState(null),l=h.useCallback(async()=>{if(!(e!=null&&e.id)){r([]),a(!1);return}try{a(!0);const{data:f,error:m}=await z.from("clients").select("*").eq("workspace_id",e.id).order("created_at",{ascending:!1});if(m)throw m;let p=new Map;const{data:v,error:g}=await z.from("invites").select("client_id,created_at,expires_at,accepted_at").eq("workspace_id",e.id).not("client_id","is",null).order("created_at",{ascending:!1});if(g)console.warn("Failed to fetch client invite statuses:",g);else for(const y of v||[])y.client_id&&(p.has(y.client_id)||p.set(y.client_id,y));const b=(f||[]).map(y=>{const w=wd(y),x=p.get(w.id)||null;return Zh(w,x)});r(b),o(null)}catch(f){console.error("Error fetching clients:",f),o(f)}finally{a(!1)}},[e==null?void 0:e.id]);return h.useEffect(()=>{l()},[l]),{clients:t,loading:n,error:i,fetchClients:l,createClient:async f=>{var m;if(!(e!=null&&e.id))return{client:null,error:new Error("No workspace")};try{const p=String(f.name||"").trim();if(!p)return{client:null,error:new Error("Client name is required")};const v=((m=f.email)==null?void 0:m.trim())||null,g=Array.isArray(f.questions)&&f.questions.length>0,b=async()=>{const S=(f.questions||[]).map((j,N)=>({question_text:String(j.question_text||"").trim(),question_type:String(j.question_type||"text").trim()||"text",is_required:!0,placeholder:String(j.placeholder||"").trim()||null,question_order:Number.isFinite(Number(j.question_order))?Number(j.question_order):N,options_json:Array.isArray(j.options)?j.options.map(A=>String(A||"").trim()).filter(Boolean):null})).filter(j=>j.question_text.length>0),{data:k,error:C}=await z.functions.invoke("manage-client",{body:{action:"create",workspaceId:e.id,name:p,email:v,questions:S}});if(C){const j=C;let N=String((j==null?void 0:j.message)||"").trim();if(j!=null&&j.context)try{const A=await j.context.clone().json(),P=String((A==null?void 0:A.error)||(A==null?void 0:A.message)||"").trim();P&&(N=P)}catch{}throw new Error(N||"Failed to create client")}if(!(k!=null&&k.success))throw new Error(String((k==null?void 0:k.error)||"Failed to create client"));return wd(k.client)};if(g){const S=await b(),k=Zh(S,null);return r(C=>[k,...C]),{client:k,error:null}}const{data:y,error:w}=await z.from("clients").insert({id:crypto.randomUUID(),workspace_id:e.id,name:p,email:v}).select().single();if(!w&&y){const S=Zh(wd(y),null);return r(k=>[S,...k]),{client:S,error:null}}console.warn("Direct client insert failed, trying manage-client edge function:",w);const x=await b(),_=Zh(x,null);return r(S=>[_,...S]),{client:_,error:null}}catch(p){return console.error("Error creating client:",p),{client:null,error:new Error(OMe(p))}}},updateClient:async(f,m)=>{var p;try{const v={};m.name!==void 0&&(v.name=m.name),m.email!==void 0&&(v.email=m.email),m.phone!==void 0&&(v.phone=m.phone),m.instagramHandle!==void 0&&(v.instagram_handle=m.instagramHandle),m.businessName!==void 0&&(v.business_name=m.businessName),m.goals!==void 0&&(v.goals=m.goals),m.subscriptionStatus!==void 0&&(v.subscription_status=m.subscriptionStatus),m.accessUntil!==void 0&&(v.access_until=((p=m.accessUntil)==null?void 0:p.toISOString())||null);const{error:g}=await z.from("clients").update(v).eq("id",f);if(g)throw g;return r(b=>b.map(y=>y.id===f?{...y,...m}:y)),{error:null}}catch(v){return console.error("Error updating client:",v),{error:v}}},deleteClient:async f=>{if(!(e!=null&&e.id))return{error:new Error("No workspace")};try{const{data:m,error:p}=await z.functions.invoke("manage-client",{body:{action:"delete",workspaceId:e.id,clientId:f}});if(p)throw p;if(!(m!=null&&m.success))throw new Error((m==null?void 0:m.error)||"Failed to delete client");return r(v=>v.filter(g=>g.id!==f)),{error:null}}catch(m){return console.error("Error deleting client:",m),{error:m}}}}}function IMe(e){const[t,r]=h.useState(null),[n,a]=h.useState([]),[i,o]=h.useState([]),[l,c]=h.useState(!0),[u,d]=h.useState(null),f=h.useCallback(async()=>{if(!e){r(null),c(!1);return}try{c(!0);const{data:p,error:v}=await z.from("clients").select("*").eq("id",e).maybeSingle();if(v)throw v;if(!p){r(null),d(new Error("Client not found"));return}const{data:g,error:b}=await z.from("invites").select("client_id,created_at,expires_at,accepted_at").eq("workspace_id",p.workspace_id).eq("client_id",e).order("created_at",{ascending:!1}).limit(1).maybeSingle();b&&console.warn("Failed to fetch latest invite for client:",b);const y=wd(p);r(Zh(y,g||null));const{data:w,error:x}=await z.from("client_tasks").select("*").eq("client_id",e).order("created_at",{ascending:!1});if(x)throw x;a((w||[]).map(DL));const{data:_,error:S}=await z.from("client_files").select("*").eq("client_id",e).order("created_at",{ascending:!1});if(S)throw S;o((_||[]).map(LL)),d(null)}catch(p){console.error("Error fetching client:",p),d(p)}finally{c(!1)}},[e]);return h.useEffect(()=>{f()},[f]),h.useEffect(()=>{if(!e)return;const p=z.channel(`client-detail-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"client_tasks",filter:`client_id=eq.${e}`},()=>{f()}).on("postgres_changes",{event:"*",schema:"public",table:"client_files",filter:`client_id=eq.${e}`},()=>{f()}).subscribe();return()=>{z.removeChannel(p)}},[e,f]),{client:t,tasks:n,files:i,loading:l,error:u,fetchClient:f,updateClient:async p=>{var v;if(!e)return{error:new Error("No client ID")};try{const g={};p.name!==void 0&&(g.name=p.name),p.email!==void 0&&(g.email=p.email),p.phone!==void 0&&(g.phone=p.phone),p.instagramHandle!==void 0&&(g.instagram_handle=p.instagramHandle),p.businessName!==void 0&&(g.business_name=p.businessName),p.goals!==void 0&&(g.goals=p.goals),p.subscriptionStatus!==void 0&&(g.subscription_status=p.subscriptionStatus),p.accessUntil!==void 0&&(g.access_until=((v=p.accessUntil)==null?void 0:v.toISOString())||null);const{error:b}=await z.from("clients").update(g).eq("id",e);if(b)throw b;return r(y=>y?{...y,...p}:null),{error:null}}catch(g){return console.error("Error updating client:",g),{error:g}}},setTasks:a,setFiles:o}}const MMe=[{value:"text",label:"Short text"},{value:"textarea",label:"Long text"},{value:"email",label:"Email"},{value:"phone",label:"Phone number"},{value:"number",label:"Number"},{value:"yes_no",label:"Yes / No"},{value:"select",label:"Dropdown"}],Sy=[{question_text:"What's your business name?",question_type:"text",is_required:!0,placeholder:"Acme Inc.",question_order:0,options:[]},{question_text:"What is your best contact phone number?",question_type:"phone",is_required:!0,placeholder:"+1 (555) 000-0000",question_order:1,options:[]},{question_text:"Main goal for the next 90 days",question_type:"textarea",is_required:!0,placeholder:"Describe your primary goal and current bottleneck.",question_order:2,options:[]}];function RMe(e){const t=String(e||"").trim().toLowerCase();return t==="text"||t==="textarea"||t==="email"||t==="phone"||t==="number"||t==="yes_no"||t==="select"?t:"text"}function tz(e){return Array.isArray(e)?e.map(t=>String(t||"").trim()).filter(Boolean):[]}function dM(e){const t=e.trim();return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function Xv(e){if(e instanceof Error&&e.message)return e.message;if(typeof e=="object"&&e){const t=e,r=String(t.message||t.error||t.details||"").trim();if(r)return r;try{return JSON.stringify(t)}catch{}}return"Unknown error"}function ac(e){return e.map((t,r)=>({...t,question_order:r,options:Array.isArray(t.options)?t.options:[]}))}function $Me(){const e=Xt(),{user:t,profile:r}=Kt(),{workspace:n}=on(),{clients:a,loading:i,createClient:o,deleteClient:l,fetchClients:c}=ez(),[u,d]=h.useState(""),[f,m]=h.useState("all"),[p,v]=h.useState(!1),[g,b]=h.useState(1),[y,w]=h.useState(""),[x,_]=h.useState(""),[S,k]=h.useState(ac(Sy)),[C,j]=h.useState(!1),[N,A]=h.useState(!1),[P,T]=h.useState(null),L=a.filter(ne=>{const ae=u.trim().toLowerCase(),_e=!ae||ne.name.toLowerCase().includes(ae)||(ne.email||"").toLowerCase().includes(ae),pe=f==="all"||ne.portalStatus===f;return _e&&pe}),U=()=>{b(1),w(""),_(""),k(ac(Sy)),v(!0)},D=()=>{const ne=y.trim(),ae=x.trim().toLowerCase();if(!ne){ee.error("Client name is required");return}if(!ae){ee.error("Client email is required");return}if(!dM(ae)){ee.error("Enter a valid email address");return}b(2)},H=()=>{k(ne=>ac([...ne,{question_text:"",question_type:"text",is_required:!0,placeholder:"",question_order:ne.length,options:[]}]))},B=ne=>{if(S.length<=1){ee.error("You need at least one onboarding question");return}k(ae=>ac(ae.filter((_e,pe)=>pe!==ne)))},M=(ne,ae)=>{k(_e=>ac(_e.map((pe,ye)=>{if(ye!==ne)return pe;const ce={...pe,...ae,is_required:!0};return ce.question_type==="yes_no"&&(ce.options=["Yes","No"]),ce.question_type!=="select"&&ce.question_type!=="yes_no"&&(ce.options=[]),ce})))},$=async ne=>{if(!(n!=null&&n.id)||!(n!=null&&n.name)||!(t!=null&&t.id))throw new Error("Workspace context is missing");const{data:ae,error:_e}=await z.functions.invoke("manage-client",{body:{action:"invite",workspaceId:n.id,clientId:ne.clientId,email:ne.email}});if(_e){let te=Xv(_e);const Ne=_e;if(Ne!=null&&Ne.context)try{const je=await Ne.context.clone().json(),J=String((je==null?void 0:je.error)||(je==null?void 0:je.message)||"").trim();J&&(te=J)}catch{}throw new Error(te||"Failed to create invite")}if(!(ae!=null&&ae.success)||!(ae!=null&&ae.inviteToken))throw new Error(String((ae==null?void 0:ae.error)||"Failed to create invite"));const pe=String(ae.inviteToken),ye=String(ae.workspaceName||n.name),ce=String(ae.clientName||ne.clientName),me=String((r==null?void 0:r.full_name)||"").trim()||String((r==null?void 0:r.display_name)||"").trim()||ye,{error:Q}=await z.functions.invoke("send-verification-email",{body:{email:ne.email,type:"client-invite",inviteToken:pe,workspaceName:ye,clientId:ne.clientId,clientName:ce,coachName:me}});if(Q)throw new Error(Xv(Q))},re=async()=>{const ne=y.trim(),ae=x.trim().toLowerCase();if(!ne){ee.error("Client name is required");return}if(!ae||!dM(ae)){ee.error("A valid email is required");return}if(S.find(ye=>!ye.question_text.trim())){ee.error("Every onboarding question needs text");return}if(S.find(ye=>ye.question_type==="select"&&tz(ye.options).length<2)){ee.error("Dropdown questions need at least two options");return}j(!0);try{const{client:ye,error:ce}=await o({name:ne,email:ae,questions:ac(S).map((Q,te)=>{var Ne;return{question_text:Q.question_text.trim(),question_type:Q.question_type,placeholder:((Ne=Q.placeholder)==null?void 0:Ne.trim())||null,question_order:te,options:Q.options}})});if(ce||!ye)throw ce||new Error("Failed to create client");let me=null;try{await $({clientId:ye.id,clientName:ye.name,email:ae})}catch(Q){me=Xv(Q),console.error("Client invite send failed after client creation:",Q)}v(!1),b(1),w(""),_(""),k(ac(Sy)),await c(),me?ee.error(`Client created, but invite failed: ${me}`):ee.success("Invite sent. Client is now visible as Invitation pending.")}catch(ye){console.error("Error creating client flow:",ye);const ce=Xv(ye);ee.error(`Failed to create client: ${ce}`)}finally{j(!1)}},ie=async()=>{if(!P)return;const{error:ne}=await l(P);ne?ee.error("Failed to delete client"):ee.success("Client deleted"),A(!1),T(null)},q=ne=>ne==="active"?s.jsx(Zt,{className:"bg-[#1a3a2a] text-[#4ade80] border-0 rounded-full px-3 py-1 font-medium cursor-default",children:"Active"}):ne==="onboarding_pending"?s.jsx(Zt,{className:"bg-[#3d3520] text-[#fbbf24] border-0 rounded-full px-3 py-1 font-medium cursor-default",children:"Onboarding pending"}):ne==="invite_expired"?s.jsx(Zt,{className:"bg-[#3d1f1f] text-[#f87171] border-0 rounded-full px-3 py-1 font-medium cursor-default",children:"Invite expired"}):s.jsx(Zt,{className:"bg-[#1f2b3d] text-[#60a5fa] border-0 rounded-full px-3 py-1 font-medium cursor-default",children:"Invitation pending"}),K=ne=>{const ae=ne.latestInviteSentAt;return ae&&!Number.isNaN(ae.getTime())?Lt(ae,"MMM d, yyyy"):""};return s.jsx(Er,{children:s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4 mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"headline-domaine text-[36px] font-medium",children:"Clients"}),s.jsx("p",{className:"text-sm text-white/45 mt-1",children:"Manage your clients and onboarding"})]}),s.jsxs(ze,{onClick:U,className:"bg-white text-black hover:bg-white/90 shadow-none",children:[s.jsx(Um,{className:"w-4 h-4 mr-2"}),"Add Client"]})]}),s.jsxs("div",{className:"relative mb-3",children:[s.jsx(Jx,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-white z-10"}),s.jsx("input",{type:"text",value:u,onChange:ne=>d(ne.target.value),className:"w-full pl-11 pr-4 h-10 bg-black border border-border rounded-2xl text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-border",placeholder:"Search..."})]}),s.jsx("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[{value:"all",label:"All clients"},{value:"invitation_pending",label:"Invitation pending"},{value:"onboarding_pending",label:"Onboarding pending"},{value:"active",label:"Active"},{value:"invite_expired",label:"Invite expired"}].map(ne=>s.jsx("button",{type:"button",onClick:()=>m(ne.value),className:`h-10 px-4 rounded-2xl border text-sm font-light inline-flex items-center gap-2 transition-colors ${f===ne.value?"border-white/25 bg-white/[0.06] text-white":"border-white/10 bg-black text-white/85 hover:bg-white/[0.03]"}`,children:s.jsx("span",{children:ne.label})},ne.value))}),i?s.jsx("div",{className:"space-y-2",children:Array.from({length:7}).map((ne,ae)=>s.jsxs("div",{className:`grid grid-cols-[1fr_140px_140px_48px] gap-4 px-5 py-4 items-center ${ae!==6?"border-b-[0.5px] border-border":""}`,children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx($e,{className:"h-9 w-9 rounded-full bg-white/10"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx($e,{className:"h-4 w-40 rounded-xl bg-white/10"}),s.jsx($e,{className:"h-3 w-56 rounded-xl bg-white/[0.06] mt-2"})]})]}),s.jsx($e,{className:"h-7 w-28 rounded-full bg-white/[0.06]"}),s.jsx($e,{className:"h-4 w-24 rounded-xl bg-white/[0.06]"}),s.jsx($e,{className:"h-8 w-8 rounded-xl bg-white/[0.06]"})]},ae))}):L.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[s.jsx(Vc,{className:"w-16 h-16 text-muted-foreground/30 mb-6"}),s.jsx("p",{className:"text-muted-foreground mb-8 text-lg",children:u||f!=="all"?"No clients match your filters":"No clients yet"}),!u&&f==="all"&&s.jsxs(Pf,{size:"sm",onClick:U,children:[s.jsx(Um,{className:"w-4 h-4"}),"Add your first client"]})]}):s.jsx("div",{className:"space-y-2",children:s.jsx("div",{children:L.map((ne,ae)=>s.jsxs("div",{onClick:()=>e(`/clients/${ne.id}`),className:`grid grid-cols-[1fr_140px_140px_48px] gap-4 px-5 py-4 hover:bg-white/[0.02] cursor-pointer transition-colors items-center ${ae!==L.length-1?"border-b-[0.5px] border-border":""}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-9 h-9 acq-orb flex items-center justify-center shrink-0",style:vg("#4ade80"),children:s.jsx(Vc,{className:"w-4 h-4",style:{color:"#4ade80"}})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium text-foreground truncate",children:ne.name}),ne.email&&s.jsx("div",{className:"text-sm text-muted-foreground/50 truncate",children:ne.email})]})]}),s.jsx("div",{children:q(ne.portalStatus)}),s.jsx("div",{className:"text-sm text-muted-foreground/50",children:K(ne)}),s.jsx("div",{children:s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,onClick:_e=>_e.stopPropagation(),children:s.jsx(ze,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground/50 hover:text-foreground rounded-xl",children:s.jsx(uN,{className:"w-4 h-4"})})}),s.jsx(Hr,{align:"end",className:"bg-[#141414] border-border",children:s.jsxs(wr,{onClick:_e=>{_e.stopPropagation(),T(ne.id),A(!0)},className:"text-[#f87171] focus:text-[#f87171] focus:bg-[#3d2626]",children:[s.jsx(Va,{className:"w-4 h-4 mr-2"}),"Delete"]})})]})})]},ne.id))})}),s.jsx(Gi,{open:p,onOpenChange:v,children:s.jsxs(yi,{className:`bg-black border-border rounded-3xl ${g===2?"max-w-3xl":"max-w-xl"}`,children:[s.jsxs(xi,{children:[s.jsx(bi,{children:g===1?"Add New Client":"Customize Client Onboarding"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Step ",g," of 2"]})]}),g===1?s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"client-name",children:"Client Name"}),s.jsx("input",{id:"client-name",placeholder:"John Doe",value:y,onChange:ne=>w(ne.target.value),className:"w-full h-10 px-4 bg-black border border-border rounded-2xl text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-border"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"client-email",children:"Client Email"}),s.jsx("input",{id:"client-email",type:"email",placeholder:"john@example.com",value:x,onChange:ne=>_(ne.target.value),className:"w-full h-10 px-4 bg-black border border-border rounded-2xl text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-border"})]})]}):s.jsxs("div",{className:"space-y-4 py-4 max-h-[52vh] overflow-y-auto pr-1",children:[S.map((ne,ae)=>s.jsx("div",{className:"border border-border rounded-2xl p-4 space-y-3",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(NY,{className:"w-4 h-4 text-muted-foreground mt-2.5 shrink-0"}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ut,{className:"text-xs text-muted-foreground",children:["Question ",ae+1]}),s.jsx("input",{value:ne.question_text,onChange:_e=>M(ae,{question_text:_e.target.value}),placeholder:"Enter your question...",className:"w-full h-10 px-4 bg-black border border-border rounded-2xl text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-border"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{className:"text-xs text-muted-foreground",children:"Input type"}),s.jsxs(Ad,{value:ne.question_type,onValueChange:_e=>M(ae,{question_type:_e}),children:[s.jsx(Dc,{className:"bg-black border-border rounded-2xl h-10",children:s.jsx(Pd,{})}),s.jsx(Lc,{className:"bg-black border-border",children:MMe.map(_e=>s.jsx(ga,{value:_e.value,children:_e.label},_e.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{className:"text-xs text-muted-foreground",children:"Placeholder"}),s.jsx("input",{value:ne.placeholder,onChange:_e=>M(ae,{placeholder:_e.target.value}),placeholder:"Placeholder text...",className:"w-full h-10 px-4 bg-black border border-border rounded-2xl text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-border"})]})]}),ne.question_type==="select"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{className:"text-xs text-muted-foreground",children:"Dropdown options (comma separated)"}),s.jsx("input",{value:ne.options.join(", "),onChange:_e=>M(ae,{options:_e.target.value.split(",").map(pe=>pe.trim()).filter(Boolean)}),placeholder:"Option 1, Option 2, Option 3",className:"w-full h-10 px-4 bg-black border border-border rounded-2xl text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-border"})]}),ne.question_type==="yes_no"&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"This question uses Yes / No automatically."})]}),s.jsx(ze,{variant:"ghost",size:"icon",onClick:()=>B(ae),className:"shrink-0 text-muted-foreground hover:text-red-400 rounded-xl",children:s.jsx(Va,{className:"w-4 h-4"})})]})},ae)),s.jsxs(ze,{variant:"outline",onClick:H,className:"w-full border-dashed border-border rounded-2xl bg-transparent",children:[s.jsx(kl,{className:"w-4 h-4 mr-2"}),"Add Question"]})]}),s.jsx(ch,{children:g===1?s.jsxs(s.Fragment,{children:[s.jsx(ze,{variant:"outline",onClick:()=>v(!1),className:"border-border rounded-xl bg-transparent",children:"Cancel"}),s.jsxs(ze,{onClick:D,className:"bg-white text-black hover:bg-white/90 shadow-none rounded-xl",children:["Next",s.jsx(Ll,{className:"w-4 h-4 ml-2"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs(ze,{variant:"outline",onClick:()=>b(1),className:"border-border rounded-xl bg-transparent",children:[s.jsx(ho,{className:"w-4 h-4 mr-2"}),"Back"]}),s.jsx(ze,{onClick:re,disabled:C,className:"bg-white text-black hover:bg-white/90 shadow-none rounded-xl",children:C?"Creating...":"Create Client & Send Invite"})]})})]})}),s.jsx(Wl,{open:N,onOpenChange:A,children:s.jsxs(To,{className:"bg-[#0a0a0a] border-border rounded-3xl",children:[s.jsxs(Oo,{children:[s.jsx(Mo,{children:"Delete Client"}),s.jsx(Ro,{children:"Are you sure you want to delete this client? This will also delete all their files and tasks. This action cannot be undone."})]}),s.jsxs(Io,{children:[s.jsx(Do,{className:"border-border hover:bg-[#1a1a1a] rounded-2xl",children:"Cancel"}),s.jsx($o,{onClick:ie,className:"bg-[#dc2626] hover:bg-[#b91c1c] border-0 rounded-2xl",children:"Delete"})]})]})})]})})}var Ew="Tabs",[DMe,_3e]=zn(Ew,[cw]),rz=cw(),[LMe,kE]=DMe(Ew),nz=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=lh(l),[f,m]=_s({prop:n,onChange:a,defaultProp:i??"",caller:Ew});return s.jsx(LMe,{scope:r,baseId:qi(),value:f,onValueChange:m,orientation:o,dir:d,activationMode:c,children:s.jsx(ot.div,{dir:d,"data-orientation":o,...u,ref:t})})});nz.displayName=Ew;var az="TabsList",iz=h.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=kE(az,r),o=rz(r);return s.jsx(BB,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(ot.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});iz.displayName=az;var sz="TabsTrigger",oz=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=kE(sz,r),l=rz(r),c=uz(o.baseId,n),u=dz(o.baseId,n),d=n===o.value;return s.jsx(UB,{asChild:!0,...l,focusable:!a,active:d,children:s.jsx(ot.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Ve(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:Ve(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:Ve(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!a&&f&&o.onValueChange(n)})})})});oz.displayName=sz;var lz="TabsContent",cz=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=kE(lz,r),c=uz(l.baseId,n),u=dz(l.baseId,n),d=n===l.value,f=h.useRef(d);return h.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(Wn,{present:a||d,children:({present:m})=>s.jsx(ot.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});cz.displayName=lz;function uz(e,t){return`${e}-trigger-${t}`}function dz(e,t){return`${e}-content-${t}`}var FMe=nz,fz=iz,hz=oz,mz=cz;const BMe=FMe,pz=h.forwardRef(({className:e,...t},r)=>s.jsx(fz,{ref:r,className:Pe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));pz.displayName=fz.displayName;const em=h.forwardRef(({className:e,...t},r)=>s.jsx(hz,{ref:r,className:Pe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));em.displayName=hz.displayName;const tm=h.forwardRef(({className:e,...t},r)=>s.jsx(mz,{ref:r,className:Pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));tm.displayName=mz.displayName;var Rt=function(){return Rt=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Rt.apply(this,arguments)};function UMe(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function gz(e,t,r){for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Ng(e){return e.mode==="multiple"}function Cg(e){return e.mode==="range"}function Aw(e){return e.mode==="single"}var qMe={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function zMe(e,t){return Lt(e,"LLLL y",t)}function WMe(e,t){return Lt(e,"d",t)}function HMe(e,t){return Lt(e,"LLLL",t)}function VMe(e){return"".concat(e)}function KMe(e,t){return Lt(e,"cccccc",t)}function GMe(e,t){return Lt(e,"yyyy",t)}var YMe=Object.freeze({__proto__:null,formatCaption:zMe,formatDay:WMe,formatMonthCaption:HMe,formatWeekNumber:VMe,formatWeekdayName:KMe,formatYearCaption:GMe}),XMe=function(e,t,r){return Lt(e,"do MMMM (EEEE)",r)},QMe=function(){return"Month: "},JMe=function(){return"Go to next month"},ZMe=function(){return"Go to previous month"},eRe=function(e,t){return Lt(e,"cccc",t)},tRe=function(e){return"Week n. ".concat(e)},rRe=function(){return"Year: "},nRe=Object.freeze({__proto__:null,labelDay:XMe,labelMonthDropdown:QMe,labelNext:JMe,labelPrevious:ZMe,labelWeekNumber:tRe,labelWeekday:eRe,labelYearDropdown:rRe});function aRe(){var e="buttons",t=qMe,r=U7,n={},a={},i=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:YMe,labels:nRe,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:o,today:l,mode:"default"}}function iRe(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,i=e.fromDate,o=e.toDate;return n?i=Sa(n):t&&(i=new Date(t,0,1)),a?o=cE(a):r&&(o=new Date(r,11,31)),{fromDate:i?Af(i):void 0,toDate:o?Af(o):void 0}}var vz=h.createContext(void 0);function sRe(e){var t,r=e.initialProps,n=aRe(),a=iRe(r),i=a.fromDate,o=a.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var c;(Aw(r)||Ng(r)||Cg(r))&&(c=r.onSelect);var u=Rt(Rt(Rt({},n),r),{captionLayout:l,classNames:Rt(Rt({},n.classNames),r.classNames),components:Rt({},r.components),formatters:Rt(Rt({},n.formatters),r.formatters),fromDate:i,labels:Rt(Rt({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Rt(Rt({},n.modifiers),r.modifiers),modifiersClassNames:Rt(Rt({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Rt(Rt({},n.styles),r.styles),toDate:o});return s.jsx(vz.Provider,{value:u,children:e.children})}function Ar(){var e=h.useContext(vz);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function yz(e){var t=Ar(),r=t.locale,n=t.classNames,a=t.styles,i=t.formatters.formatCaption;return s.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:r})})}function oRe(e){return s.jsx("svg",Rt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function xz(e){var t,r,n=e.onChange,a=e.value,i=e.children,o=e.caption,l=e.className,c=e.style,u=Ar(),d=(r=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:oRe;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:n,children:i}),s.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function lRe(e){var t,r=Ar(),n=r.fromDate,a=r.toDate,i=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});var f=[];if(A5e(n,a))for(var m=Sa(n),p=n.getMonth();p<=a.getMonth();p++)f.push(j_(m,p));else for(var m=Sa(new Date),p=0;p<=11;p++)f.push(j_(m,p));var v=function(b){var y=Number(b.target.value),w=j_(Sa(e.displayMonth),y);e.onChange(w)},g=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:xz;return s.jsx(g,{name:"months","aria-label":d(),className:c.dropdown_month,style:i.dropdown_month,onChange:v,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:f.map(function(b){return s.jsx("option",{value:b.getMonth(),children:l(b,{locale:o})},b.getMonth())})})}function cRe(e){var t,r=e.displayMonth,n=Ar(),a=n.fromDate,i=n.toDate,o=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,m=[];if(!a)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});for(var p=a.getFullYear(),v=i.getFullYear(),g=p;g<=v;g++)m.push(V4(F7(new Date),g));var b=function(w){var x=V4(Sa(r),Number(w.target.value));e.onChange(x)},y=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:xz;return s.jsx(y,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:b,value:r.getFullYear(),caption:d(r,{locale:o}),children:m.map(function(w){return s.jsx("option",{value:w.getFullYear(),children:d(w,{locale:o})},w.getFullYear())})})}function uRe(e,t){var r=h.useState(e),n=r[0],a=r[1],i=t===void 0?n:t;return[i,a]}function dRe(e){var t=e.month,r=e.defaultMonth,n=e.today,a=t||r||n||new Date,i=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(i&&Fp(i,a)<0){var u=-1*(c-1);a=Yi(i,u)}return o&&Fp(a,o)<0&&(a=o),Sa(a)}function fRe(){var e=Ar(),t=dRe(e),r=uRe(t,e.month),n=r[0],a=r[1],i=function(o){var l;if(!e.disableNavigation){var c=Sa(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[n,i]}function hRe(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,a=Sa(e),i=Sa(Yi(a,n)),o=Fp(i,a),l=[],c=0;c<o;c++){var u=Yi(a,c);l.push(u)}return r&&(l=l.reverse()),l}function mRe(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=Sa(e);if(!r)return Yi(l,o);var c=Fp(r,e);if(!(c<i))return Yi(l,o)}}function pRe(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=Sa(e);if(!r)return Yi(l,-o);var c=Fp(l,r);if(!(c<=0))return Yi(l,-o)}}var bz=h.createContext(void 0);function gRe(e){var t=Ar(),r=fRe(),n=r[0],a=r[1],i=hRe(n,t),o=mRe(n,t),l=pRe(n,t),c=function(f){return i.some(function(m){return dE(f,m)})},u=function(f,m){c(f)||(m&&V7(f,m)?a(Yi(f,1+t.numberOfMonths*-1)):a(f))},d={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return s.jsx(bz.Provider,{value:d,children:e.children})}function Eg(){var e=h.useContext(bz);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function fM(e){var t,r=Ar(),n=r.classNames,a=r.styles,i=r.components,o=Eg().goToMonth,l=function(d){o(Yi(d,e.displayIndex?-e.displayIndex:0))},c=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:yz,u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[s.jsx("div",{className:n.vhidden,children:u}),s.jsx(lRe,{onChange:l,displayMonth:e.displayMonth}),s.jsx(cRe,{onChange:l,displayMonth:e.displayMonth})]})}function vRe(e){return s.jsx("svg",Rt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function yRe(e){return s.jsx("svg",Rt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var yx=h.forwardRef(function(e,t){var r=Ar(),n=r.classNames,a=r.styles,i=[n.button_reset,n.button];e.className&&i.push(e.className);var o=i.join(" "),l=Rt(Rt({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),s.jsx("button",Rt({},e,{ref:t,type:"button",className:o,style:l}))});function xRe(e){var t,r,n=Ar(),a=n.dir,i=n.locale,o=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,f=n.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var m=u(e.previousMonth,{locale:i}),p=[o.nav_button,o.nav_button_previous].join(" "),v=d(e.nextMonth,{locale:i}),g=[o.nav_button,o.nav_button_next].join(" "),b=(t=f==null?void 0:f.IconRight)!==null&&t!==void 0?t:yRe,y=(r=f==null?void 0:f.IconLeft)!==null&&r!==void 0?r:vRe;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(yx,{name:"previous-month","aria-label":m,className:p,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?s.jsx(b,{className:o.nav_icon,style:l.nav_icon}):s.jsx(y,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(yx,{name:"next-month","aria-label":v,className:g,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?s.jsx(y,{className:o.nav_icon,style:l.nav_icon}):s.jsx(b,{className:o.nav_icon,style:l.nav_icon})})]})}function hM(e){var t=Ar().numberOfMonths,r=Eg(),n=r.previousMonth,a=r.nextMonth,i=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(v){return dE(e.displayMonth,v)}),c=l===0,u=l===o.length-1,d=t>1&&(c||!u),f=t>1&&(u||!c),m=function(){n&&i(n)},p=function(){a&&i(a)};return s.jsx(xRe,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:f,nextMonth:a,previousMonth:n,onPreviousClick:m,onNextClick:p})}function bRe(e){var t,r=Ar(),n=r.classNames,a=r.disableNavigation,i=r.styles,o=r.captionLayout,l=r.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:yz,u;return a?u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=s.jsx(fM,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=s.jsxs(s.Fragment,{children:[s.jsx(fM,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(hM,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(hM,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:n.caption,style:i.caption,children:u})}function wRe(e){var t=Ar(),r=t.footer,n=t.styles,a=t.classNames.tfoot;return r?s.jsx("tfoot",{className:a,style:n.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:r})})}):s.jsx(s.Fragment,{})}function _Re(e,t,r){for(var n=r?ru(new Date):Cs(new Date,{locale:e,weekStartsOn:t}),a=[],i=0;i<7;i++){var o=na(n,i);a.push(o)}return a}function SRe(){var e=Ar(),t=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=_Re(a,i,o);return s.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&s.jsx("td",{style:r.head_cell,className:t.head_cell}),u.map(function(d,f){return s.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(d,{locale:a}),children:l(d,{locale:a})},f)})]})}function jRe(){var e,t=Ar(),r=t.classNames,n=t.styles,a=t.components,i=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:SRe;return s.jsx("thead",{style:n.head,className:r.head,children:s.jsx(i,{})})}function kRe(e){var t=Ar(),r=t.locale,n=t.formatters.formatDay;return s.jsx(s.Fragment,{children:n(e.date,{locale:r})})}var NE=h.createContext(void 0);function NRe(e){if(!Ng(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(NE.Provider,{value:t,children:e.children})}return s.jsx(CRe,{initialProps:e.initialProps,children:e.children})}function CRe(e){var t=e.initialProps,r=e.children,n=t.selected,a=t.min,i=t.max,o=function(u,d,f){var m,p;(m=t.onDayClick)===null||m===void 0||m.call(t,u,d,f);var v=!!(d.selected&&a&&(n==null?void 0:n.length)===a);if(!v){var g=!!(!d.selected&&i&&(n==null?void 0:n.length)===i);if(!g){var b=n?gz([],n):[];if(d.selected){var y=b.findIndex(function(w){return la(u,w)});b.splice(y,1)}else b.push(u);(p=t.onSelect)===null||p===void 0||p.call(t,b,u,d,f)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=i&&n.length>i-1,f=n.some(function(m){return la(m,u)});return!!(d&&!f)});var c={selected:n,onDayClick:o,modifiers:l};return s.jsx(NE.Provider,{value:c,children:r})}function CE(){var e=h.useContext(NE);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function ERe(e,t){var r=t||{},n=r.from,a=r.to;return n&&a?la(a,e)&&la(n,e)?void 0:la(a,e)?{from:a,to:void 0}:la(n,e)?void 0:qj(n,e)?{from:e,to:a}:{from:n,to:e}:a?qj(e,a)?{from:a,to:e}:{from:e,to:a}:n?V7(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var EE=h.createContext(void 0);function ARe(e){if(!Cg(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(EE.Provider,{value:t,children:e.children})}return s.jsx(PRe,{initialProps:e.initialProps,children:e.children})}function PRe(e){var t=e.initialProps,r=e.children,n=t.selected,a=n||{},i=a.from,o=a.to,l=t.min,c=t.max,u=function(p,v,g){var b,y;(b=t.onDayClick)===null||b===void 0||b.call(t,p,v,g);var w=ERe(p,n);(y=t.onSelect)===null||y===void 0||y.call(t,w,p,v,g)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(d.range_start=[i],o?(d.range_end=[o],la(i,o)||(d.range_middle=[{after:i,before:o}])):d.range_end=[i]):o&&(d.range_start=[o],d.range_end=[o]),l&&(i&&!o&&d.disabled.push({after:__(i,l-1),before:na(i,l-1)}),i&&o&&d.disabled.push({after:i,before:na(i,l-1)}),!i&&o&&d.disabled.push({after:__(o,l-1),before:na(o,l-1)})),c){if(i&&!o&&(d.disabled.push({before:na(i,-c+1)}),d.disabled.push({after:na(i,c-1)})),i&&o){var f=hs(o,i)+1,m=c-f;d.disabled.push({before:__(i,m)}),d.disabled.push({after:na(o,m)})}!i&&o&&(d.disabled.push({before:na(o,-c+1)}),d.disabled.push({after:na(o,c-1)}))}return s.jsx(EE.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function AE(){var e=h.useContext(EE);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function jy(e){return Array.isArray(e)?gz([],e):e!==void 0?[e]:[]}function TRe(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],a=r[1];t[n]=jy(a)}),t}var Xi;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Xi||(Xi={}));var ORe=Xi.Selected,zs=Xi.Disabled,IRe=Xi.Hidden,MRe=Xi.Today,I_=Xi.RangeEnd,M_=Xi.RangeMiddle,R_=Xi.RangeStart,RRe=Xi.Outside;function $Re(e,t,r){var n,a=(n={},n[ORe]=jy(e.selected),n[zs]=jy(e.disabled),n[IRe]=jy(e.hidden),n[MRe]=[e.today],n[I_]=[],n[M_]=[],n[R_]=[],n[RRe]=[],n);return e.fromDate&&a[zs].push({before:e.fromDate}),e.toDate&&a[zs].push({after:e.toDate}),Ng(e)?a[zs]=a[zs].concat(t.modifiers[zs]):Cg(e)&&(a[zs]=a[zs].concat(r.modifiers[zs]),a[R_]=r.modifiers[R_],a[M_]=r.modifiers[M_],a[I_]=r.modifiers[I_]),a}var wz=h.createContext(void 0);function DRe(e){var t=Ar(),r=CE(),n=AE(),a=$Re(t,r,n),i=TRe(t.modifiers),o=Rt(Rt({},a),i);return s.jsx(wz.Provider,{value:o,children:e.children})}function _z(){var e=h.useContext(wz);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function LRe(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function FRe(e){return!!(e&&typeof e=="object"&&"from"in e)}function BRe(e){return!!(e&&typeof e=="object"&&"after"in e)}function URe(e){return!!(e&&typeof e=="object"&&"before"in e)}function qRe(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function zRe(e,t){var r,n=t.from,a=t.to;if(n&&a){var i=hs(a,n)<0;i&&(r=[a,n],n=r[0],a=r[1]);var o=hs(e,n)>=0&&hs(a,e)>=0;return o}return a?la(a,e):n?la(n,e):!1}function WRe(e){return lE(e)}function HRe(e){return Array.isArray(e)&&e.every(lE)}function VRe(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(WRe(r))return la(e,r);if(HRe(r))return r.includes(e);if(FRe(r))return zRe(e,r);if(qRe(r))return r.dayOfWeek.includes(e.getDay());if(LRe(r)){var n=hs(r.before,e),a=hs(r.after,e),i=n>0,o=a<0,l=qj(r.before,r.after);return l?o&&i:i||o}return BRe(r)?hs(e,r.after)>0:URe(r)?hs(r.before,e)>0:typeof r=="function"?r(e):!1})}function PE(e,t,r){var n=Object.keys(t).reduce(function(i,o){var l=t[o];return VRe(e,l)&&i.push(o),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),r&&!dE(e,r)&&(a.outside=!0),a}function KRe(e,t){for(var r=Sa(e[0]),n=cE(e[e.length-1]),a,i,o=r;o<=n;){var l=PE(o,t),c=!l.disabled&&!l.hidden;if(!c){o=na(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),a||(a=o),o=na(o,1)}return i||a}var GRe=365;function Sz(e,t){var r=t.moveBy,n=t.direction,a=t.context,i=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,u=a.fromDate,d=a.toDate,f=a.locale,m={day:na,week:Uj,month:Yi,year:SOe,startOfWeek:function(b){return a.ISOWeek?ru(b):Cs(b,{locale:f,weekStartsOn:c})},endOfWeek:function(b){return a.ISOWeek?B7(b):uE(b,{locale:f,weekStartsOn:c})}},p=m[r](e,n==="after"?1:-1);n==="before"&&u?p=jOe([u,p]):n==="after"&&d&&(p=kOe([d,p]));var v=!0;if(i){var g=PE(p,i);v=!g.disabled&&!g.hidden}return v?p:l.count>GRe?l.lastFocused:Sz(p,{moveBy:r,direction:n,context:a,modifiers:i,retry:Rt(Rt({},l),{count:l.count+1})})}var jz=h.createContext(void 0);function YRe(e){var t=Eg(),r=_z(),n=h.useState(),a=n[0],i=n[1],o=h.useState(),l=o[0],c=o[1],u=KRe(t.displayMonths,r),d=a??(l&&t.isDateDisplayed(l))?l:u,f=function(){c(a),i(void 0)},m=function(b){i(b)},p=Ar(),v=function(b,y){if(a){var w=Sz(a,{moveBy:b,direction:y,context:p,modifiers:r});la(a,w)||(t.goToDate(w,a),m(w))}},g={focusedDay:a,focusTarget:d,blur:f,focus:m,focusDayAfter:function(){return v("day","after")},focusDayBefore:function(){return v("day","before")},focusWeekAfter:function(){return v("week","after")},focusWeekBefore:function(){return v("week","before")},focusMonthBefore:function(){return v("month","before")},focusMonthAfter:function(){return v("month","after")},focusYearBefore:function(){return v("year","before")},focusYearAfter:function(){return v("year","after")},focusStartOfWeek:function(){return v("startOfWeek","before")},focusEndOfWeek:function(){return v("endOfWeek","after")}};return s.jsx(jz.Provider,{value:g,children:e.children})}function TE(){var e=h.useContext(jz);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function XRe(e,t){var r=_z(),n=PE(e,r,t);return n}var OE=h.createContext(void 0);function QRe(e){if(!Aw(e.initialProps)){var t={selected:void 0};return s.jsx(OE.Provider,{value:t,children:e.children})}return s.jsx(JRe,{initialProps:e.initialProps,children:e.children})}function JRe(e){var t=e.initialProps,r=e.children,n=function(i,o,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,i,o,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,i,i,o,l)},a={selected:t.selected,onDayClick:n};return s.jsx(OE.Provider,{value:a,children:r})}function kz(){var e=h.useContext(OE);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function ZRe(e,t){var r=Ar(),n=kz(),a=CE(),i=AE(),o=TE(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,m=o.focus,p=o.focusMonthBefore,v=o.focusMonthAfter,g=o.focusYearBefore,b=o.focusYearAfter,y=o.focusStartOfWeek,w=o.focusEndOfWeek,x=function(B){var M,$,re,ie;Aw(r)?(M=n.onDayClick)===null||M===void 0||M.call(n,e,t,B):Ng(r)?($=a.onDayClick)===null||$===void 0||$.call(a,e,t,B):Cg(r)?(re=i.onDayClick)===null||re===void 0||re.call(i,e,t,B):(ie=r.onDayClick)===null||ie===void 0||ie.call(r,e,t,B)},_=function(B){var M;m(e),(M=r.onDayFocus)===null||M===void 0||M.call(r,e,t,B)},S=function(B){var M;f(),(M=r.onDayBlur)===null||M===void 0||M.call(r,e,t,B)},k=function(B){var M;(M=r.onDayMouseEnter)===null||M===void 0||M.call(r,e,t,B)},C=function(B){var M;(M=r.onDayMouseLeave)===null||M===void 0||M.call(r,e,t,B)},j=function(B){var M;(M=r.onDayPointerEnter)===null||M===void 0||M.call(r,e,t,B)},N=function(B){var M;(M=r.onDayPointerLeave)===null||M===void 0||M.call(r,e,t,B)},A=function(B){var M;(M=r.onDayTouchCancel)===null||M===void 0||M.call(r,e,t,B)},P=function(B){var M;(M=r.onDayTouchEnd)===null||M===void 0||M.call(r,e,t,B)},T=function(B){var M;(M=r.onDayTouchMove)===null||M===void 0||M.call(r,e,t,B)},L=function(B){var M;(M=r.onDayTouchStart)===null||M===void 0||M.call(r,e,t,B)},U=function(B){var M;(M=r.onDayKeyUp)===null||M===void 0||M.call(r,e,t,B)},D=function(B){var M;switch(B.key){case"ArrowLeft":B.preventDefault(),B.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":B.preventDefault(),B.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":B.preventDefault(),B.stopPropagation(),u();break;case"ArrowUp":B.preventDefault(),B.stopPropagation(),d();break;case"PageUp":B.preventDefault(),B.stopPropagation(),B.shiftKey?g():p();break;case"PageDown":B.preventDefault(),B.stopPropagation(),B.shiftKey?b():v();break;case"Home":B.preventDefault(),B.stopPropagation(),y();break;case"End":B.preventDefault(),B.stopPropagation(),w();break}(M=r.onDayKeyDown)===null||M===void 0||M.call(r,e,t,B)},H={onClick:x,onFocus:_,onBlur:S,onKeyDown:D,onKeyUp:U,onMouseEnter:k,onMouseLeave:C,onPointerEnter:j,onPointerLeave:N,onTouchCancel:A,onTouchEnd:P,onTouchMove:T,onTouchStart:L};return H}function e$e(){var e=Ar(),t=kz(),r=CE(),n=AE(),a=Aw(e)?t.selected:Ng(e)?r.selected:Cg(e)?n.selected:void 0;return a}function t$e(e){return Object.values(Xi).includes(e)}function r$e(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var a=e.modifiersClassNames[n];if(a)r.push(a);else if(t$e(n)){var i=e.classNames["day_".concat(n)];i&&r.push(i)}}),r}function n$e(e,t){var r=Rt({},e.styles.day);return Object.keys(t).forEach(function(n){var a;r=Rt(Rt({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function a$e(e,t,r){var n,a,i,o=Ar(),l=TE(),c=XRe(e,t),u=ZRe(e,c),d=e$e(),f=!!(o.onDayClick||o.mode!=="default");h.useEffect(function(){var k;c.outside||l.focusedDay&&f&&la(l.focusedDay,e)&&((k=r.current)===null||k===void 0||k.focus())},[l.focusedDay,e,r,f,c.outside]);var m=r$e(o,c).join(" "),p=n$e(o,c),v=!!(c.outside&&!o.showOutsideDays||c.hidden),g=(i=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:kRe,b=s.jsx(g,{date:e,displayMonth:t,activeModifiers:c}),y={style:p,className:m,children:b,role:"gridcell"},w=l.focusTarget&&la(l.focusTarget,e)&&!c.outside,x=l.focusedDay&&la(l.focusedDay,e),_=Rt(Rt(Rt({},y),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=x||w?0:-1,n)),u),S={isButton:f,isHidden:v,activeModifiers:c,selectedDays:d,buttonProps:_,divProps:y};return S}function i$e(e){var t=h.useRef(null),r=a$e(e.date,e.displayMonth,t);return r.isHidden?s.jsx("div",{role:"gridcell"}):r.isButton?s.jsx(yx,Rt({name:"day",ref:t},r.buttonProps)):s.jsx("div",Rt({},r.divProps))}function s$e(e){var t=e.number,r=e.dates,n=Ar(),a=n.onWeekNumberClick,i=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!a)return s.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:d});var f=c(Number(t),{locale:l}),m=function(p){a(t,r,p)};return s.jsx(yx,{name:"week-number","aria-label":f,className:o.weeknumber,style:i.weeknumber,onClick:m,children:d})}function o$e(e){var t,r,n=Ar(),a=n.styles,i=n.classNames,o=n.showWeekNumber,l=n.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:i$e,u=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:s$e,d;return o&&(d=s.jsx("td",{className:i.cell,style:a.cell,children:s.jsx(u,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:i.row,style:a.row,children:[d,e.dates.map(function(f){return s.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:s.jsx(c,{displayMonth:e.displayMonth,date:f})},k5e(f))})]})}function mM(e,t,r){for(var n=r!=null&&r.ISOWeek?B7(t):uE(t,r),a=r!=null&&r.ISOWeek?ru(e):Cs(e,r),i=hs(n,a),o=[],l=0;l<=i;l++)o.push(na(a,l));var c=o.reduce(function(u,d){var f=r!=null&&r.ISOWeek?q7(d):W7(d,r),m=u.find(function(p){return p.weekNumber===f});return m?(m.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function l$e(e,t){var r=mM(Sa(e),cE(e),t);if(t!=null&&t.useFixedWeeks){var n=C5e(e,t);if(n<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],o=Uj(i,6-n),l=mM(Uj(i,1),o,t);r.push.apply(r,l)}}return r}function c$e(e){var t,r,n,a=Ar(),i=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,u=a.fixedWeeks,d=a.components,f=a.weekStartsOn,m=a.firstWeekContainsDate,p=a.ISOWeek,v=l$e(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:i,weekStartsOn:f,firstWeekContainsDate:m}),g=(t=d==null?void 0:d.Head)!==null&&t!==void 0?t:jRe,b=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:o$e,y=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:wRe;return s.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&s.jsx(g,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:v.map(function(w){return s.jsx(b,{displayMonth:e.displayMonth,dates:w.dates,weekNumber:w.weekNumber},w.weekNumber)})}),s.jsx(y,{displayMonth:e.displayMonth})]})}function u$e(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var d$e=u$e()?h.useLayoutEffect:h.useEffect,$_=!1,f$e=0;function pM(){return"react-day-picker-".concat(++f$e)}function h$e(e){var t,r=e??($_?pM():null),n=h.useState(r),a=n[0],i=n[1];return d$e(function(){a===null&&i(pM())},[]),h.useEffect(function(){$_===!1&&($_=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function m$e(e){var t,r,n=Ar(),a=n.dir,i=n.classNames,o=n.styles,l=n.components,c=Eg().displayMonths,u=h$e(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,f=[i.month],m=o.month,p=e.displayIndex===0,v=e.displayIndex===c.length-1,g=!p&&!v;a==="rtl"&&(t=[p,v],v=t[0],p=t[1]),p&&(f.push(i.caption_start),m=Rt(Rt({},m),o.caption_start)),v&&(f.push(i.caption_end),m=Rt(Rt({},m),o.caption_end)),g&&(f.push(i.caption_between),m=Rt(Rt({},m),o.caption_between));var b=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:bRe;return s.jsxs("div",{className:f.join(" "),style:m,children:[s.jsx(b,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(c$e,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function p$e(e){var t=Ar(),r=t.classNames,n=t.styles;return s.jsx("div",{className:r.months,style:n.months,children:e.children})}function g$e(e){var t,r,n=e.initialProps,a=Ar(),i=TE(),o=Eg(),l=h.useState(!1),c=l[0],u=l[1];h.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),u(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var d=[a.classNames.root,a.className];a.numberOfMonths>1&&d.push(a.classNames.multiple_months),a.showWeekNumber&&d.push(a.classNames.with_weeknumber);var f=Rt(Rt({},a.styles.root),a.style),m=Object.keys(n).filter(function(v){return v.startsWith("data-")}).reduce(function(v,g){var b;return Rt(Rt({},v),(b={},b[g]=n[g],b))},{}),p=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:p$e;return s.jsx("div",Rt({className:d.join(" "),style:f,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},m,{children:s.jsx(p,{children:o.displayMonths.map(function(v,g){return s.jsx(m$e,{displayIndex:g,displayMonth:v},g)})})}))}function v$e(e){var t=e.children,r=UMe(e,["children"]);return s.jsx(sRe,{initialProps:r,children:s.jsx(gRe,{children:s.jsx(QRe,{initialProps:r,children:s.jsx(NRe,{initialProps:r,children:s.jsx(ARe,{initialProps:r,children:s.jsx(DRe,{children:s.jsx(YRe,{children:t})})})})})})})}function y$e(e){return s.jsx(v$e,Rt({},e,{children:s.jsx(g$e,{initialProps:e})}))}function Pw({className:e,classNames:t,showOutsideDays:r=!0,...n}){return s.jsx(y$e,{showOutsideDays:r,className:Pe("p-3 pointer-events-auto",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium text-white",nav:"space-x-1 flex items-center",nav_button:Pe("h-8 w-8 bg-transparent p-0 text-white/50 hover:text-white hover:bg-white/10 rounded-xl transition-colors flex items-center justify-center"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-white/40 rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:Pe("h-9 w-9 text-center text-sm p-0 relative","[&:has([aria-selected].day-range-end)]:rounded-r-xl","[&:has([aria-selected].day-outside)]:bg-white/5","first:[&:has([aria-selected])]:rounded-l-xl","last:[&:has([aria-selected])]:rounded-r-xl","focus-within:relative focus-within:z-20"),day:Pe("h-9 w-9 p-0 font-normal text-white/70 hover:bg-white/10 hover:text-white rounded-xl transition-colors flex items-center justify-center","aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:Pe("bg-white text-black hover:bg-white hover:text-black focus:bg-white focus:text-black rounded-xl"),day_today:"bg-white/10 text-white",day_outside:"day-outside text-white/30 opacity-50 aria-selected:bg-white/5 aria-selected:text-white/40 aria-selected:opacity-30",day_disabled:"text-white/20 opacity-50",day_range_middle:"aria-selected:bg-white/10 aria-selected:text-white",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>s.jsx(wY,{className:"h-4 w-4"}),IconRight:({...a})=>s.jsx(Gx,{className:"h-4 w-4"})},...n})}Pw.displayName="Calendar";const gM=e=>({name:e.name,email:e.email||"",phone:e.phone||"",instagramHandle:e.instagramHandle||"",subscriptionStatus:e.subscriptionStatus,accessUntil:e.accessUntil});function x$e({client:e,onUpdate:t}){const[r,n]=h.useState(!1),[a,i]=h.useState(gM(e));h.useEffect(()=>{i(gM(e))},[e.name,e.email,e.phone,e.instagramHandle,e.subscriptionStatus,e.accessUntil]);const o=h.useMemo(()=>{var d,f;const u=(((d=a.accessUntil)==null?void 0:d.getTime())||0)===(((f=e.accessUntil)==null?void 0:f.getTime())||0);return!(a.name===e.name&&a.email===(e.email||"")&&a.phone===(e.phone||"")&&a.instagramHandle===(e.instagramHandle||"")&&a.subscriptionStatus===e.subscriptionStatus&&u)},[a.name,a.email,a.phone,a.instagramHandle,a.subscriptionStatus,a.accessUntil,e.name,e.email,e.phone,e.instagramHandle,e.subscriptionStatus,e.accessUntil]),l=async()=>{if(!o)return;n(!0);const{error:u}=await t({name:a.name,email:a.email||null,phone:a.phone||null,instagramHandle:a.instagramHandle||null,subscriptionStatus:a.subscriptionStatus,accessUntil:a.accessUntil});u?ee.error("Failed to save changes"):ee.success("Changes saved"),n(!1)},c=a.subscriptionStatus==="active";return s.jsxs("div",{className:"max-w-2xl space-y-8",children:[s.jsxs("div",{className:"border border-border rounded-3xl p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Contact Information"}),s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"name",children:"Name"}),s.jsx("input",{id:"name",value:a.name,onChange:u=>i({...a,name:u.target.value}),className:"w-full h-10 px-4 bg-black border border-border rounded-2xl text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-border transition-colors"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"email",children:"Email"}),s.jsx("input",{id:"email",type:"email",value:a.email,onChange:u=>i({...a,email:u.target.value}),className:"w-full h-10 px-4 bg-black border border-border rounded-2xl text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-border transition-colors"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"phone",children:"Phone"}),s.jsx("input",{id:"phone",value:a.phone,onChange:u=>i({...a,phone:u.target.value}),className:"w-full h-10 px-4 bg-black border border-border rounded-2xl text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-border transition-colors"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"instagram",children:"Instagram Handle"}),s.jsx("input",{id:"instagram",value:a.instagramHandle,onChange:u=>i({...a,instagramHandle:u.target.value}),placeholder:"@username",className:"w-full h-10 px-4 bg-black border border-border rounded-2xl text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-border transition-colors"})]})]})]}),s.jsxs("div",{className:"border border-border rounded-3xl p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Subscription & Access"}),s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Subscription Status"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:c?"Client has full access to the portal":"Client access is paused"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:Pe("text-sm",c?"text-success":"text-muted-foreground"),children:c?"Active":"Paused"}),s.jsx(jg,{checked:c,onCheckedChange:u=>i({...a,subscriptionStatus:u?"active":"paused"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{children:"Access Until (optional)"}),s.jsxs(gc,{children:[s.jsx(vc,{asChild:!0,children:s.jsxs(ze,{variant:"outline",className:Pe("w-full h-10 justify-start text-left font-normal bg-black border-border hover:bg-black rounded-2xl",!a.accessUntil&&"text-muted-foreground"),children:[s.jsx(xY,{className:"mr-2 h-4 w-4"}),a.accessUntil?Lt(a.accessUntil,"PPP"):"No expiry date set"]})}),s.jsxs(il,{className:"w-auto p-0 bg-[#0a0a0a] border-border rounded-2xl",align:"start",children:[s.jsx(Pw,{mode:"single",selected:a.accessUntil||void 0,onSelect:u=>i({...a,accessUntil:u||null}),initialFocus:!0}),a.accessUntil&&s.jsx("div",{className:"p-2 border-t-[0.5px] border-border",children:s.jsx(ze,{variant:"ghost",size:"sm",className:"w-full rounded-xl",onClick:()=>i({...a,accessUntil:null}),children:"Clear date"})})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"If set, access will be revoked after this date (used for payment integration)"})]})]}),s.jsxs(ze,{onClick:l,disabled:r||!o,className:Pe("font-semibold border shadow-none rounded-xl",o?"bg-white text-black hover:bg-white/90 border-transparent":"bg-black text-white/45 border-border hover:bg-black cursor-not-allowed"),children:[s.jsx(DY,{className:"w-4 h-4 mr-2"}),r?"Saving...":"Save Changes"]})]})}function b$e({client:e}){const[t,r]=h.useState(!0),[n,a]=h.useState([]);h.useEffect(()=>{let l=!0;return(async()=>{r(!0);try{const{data:u,error:d}=await z.from("client_onboarding_questions").select("id,question_text,question_order").eq("client_id",e.id).order("question_order",{ascending:!0});if(d)throw d;const{data:f,error:m}=await z.from("client_onboarding_responses").select("question_id,response_text").eq("client_id",e.id);if(m)throw m;const p=new Map;(f||[]).forEach(g=>{p.set(g.question_id,g.response_text||"")});const v=(u||[]).map(g=>({questionId:g.id,question:g.question_text,answer:p.get(g.id)||"",order:g.question_order||0}));l&&a(v)}catch(u){console.error("Error loading onboarding responses:",u),l&&a([])}finally{l&&r(!1)}})(),()=>{l=!1}},[e.id]);const i=h.useMemo(()=>[{question:"Business Name",answer:e.businessName||""},{question:"Instagram Handle",answer:e.instagramHandle||""},{question:"Phone",answer:e.phone||""},{question:"Goals",answer:e.goals||""}].filter(c=>String(c.answer||"").trim().length>0),[e.businessName,e.instagramHandle,e.phone,e.goals]),o=n.some(l=>String(l.answer||"").trim().length>0);return s.jsxs("div",{className:"max-w-3xl space-y-6",children:[s.jsx("div",{className:`border rounded-lg p-4 flex items-center gap-3 ${e.onboardingCompleted?"border-border bg-success/10":"border-yellow-500/30 bg-yellow-500/10"}`,children:e.onboardingCompleted?s.jsxs(s.Fragment,{children:[s.jsx(Vx,{className:"w-5 h-5 text-success"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-success",children:"Onboarding Complete"}),e.onboardingCompletedAt&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Completed on ",Lt(e.onboardingCompletedAt,"MMMM d, yyyy")]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(Yd,{className:"w-5 h-5 text-yellow-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-yellow-400",children:"Onboarding Pending"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Client has not completed onboarding yet."})]})]})}),e.onboardingCompleted&&s.jsxs("div",{className:"border border-border rounded-lg p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Onboarding Responses"}),t?s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading responses..."}):o?s.jsx("div",{className:"space-y-4",children:n.map(l=>{var c;return s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:l.question}),s.jsx("p",{className:"font-medium whitespace-pre-wrap",children:(c=l.answer)!=null&&c.trim()?l.answer:""})]},l.questionId)})}):i.length>0?s.jsx("div",{className:"space-y-4",children:i.map(l=>s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:l.question}),s.jsx("p",{className:"font-medium whitespace-pre-wrap",children:l.answer})]},l.question))}):s.jsx("p",{className:"text-sm text-muted-foreground",children:"No onboarding answers recorded yet."})]}),!e.onboardingCompleted&&s.jsxs("div",{className:"border border-border rounded-lg p-8 text-center",children:[s.jsx("p",{className:"text-muted-foreground mb-2",children:"Once the client completes onboarding, their responses will appear here."}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Clients are prompted for onboarding during their first portal login."})]})]})}function w$e(e){switch(e){case"image":return s.jsx(EY,{className:"w-4 h-4 text-muted-foreground"});case"video":return s.jsx(dN,{className:"w-4 h-4 text-muted-foreground"});case"spreadsheet":return s.jsx(jY,{className:"w-4 h-4 text-muted-foreground"});case"pdf":return s.jsx(Xx,{className:"w-4 h-4 text-muted-foreground"});default:return s.jsx(SY,{className:"w-4 h-4 text-muted-foreground"})}}function _$e(e){return e?e<1024?`${e} B`:e<1024*1024?`${Math.round(e/1024)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`:""}function Nz({client:e}){const{user:t}=Kt(),r=h.useRef(null),[n,a]=h.useState([]),[i,o]=h.useState([]),[l,c]=h.useState(!0),[u,d]=h.useState(""),[f,m]=h.useState(null),[p,v]=h.useState(!1),[g,b]=h.useState(!1),[y,w]=h.useState(""),[x,_]=h.useState(null),[S,k]=h.useState(""),[C,j]=h.useState(null),[N,A]=h.useState(""),[P,T]=h.useState(null),[L,U]=h.useState(null),D=(J,oe)=>{const Ce=URL.createObjectURL(J),R=document.createElement("a");R.href=Ce,R.download=oe||"download",document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(Ce)},H=h.useCallback(async()=>{try{c(!0);const[{data:J,error:oe},{data:Ce,error:R}]=await Promise.all([z.from("client_folders").select("*").eq("client_id",e.id).order("name",{ascending:!0}),z.from("client_files").select("*").eq("client_id",e.id).order("created_at",{ascending:!1})]);if(oe)throw oe;if(R)throw R;a((J||[]).map(ane)),o((Ce||[]).map(LL))}catch(J){console.error("Error loading drive data:",J),ee.error("Failed to load drive")}finally{c(!1)}},[e.id]);h.useEffect(()=>{H()},[H]),h.useEffect(()=>{const J=()=>{document.visibilityState==="visible"&&H()},oe=()=>void H();return document.addEventListener("visibilitychange",J),window.addEventListener("online",oe),()=>{document.removeEventListener("visibilitychange",J),window.removeEventListener("online",oe)}},[H]),h.useEffect(()=>{const J=z.channel(`client-drive-${e.id}`).on("postgres_changes",{event:"*",schema:"public",table:"client_folders",filter:`client_id=eq.${e.id}`},()=>{H()}).on("postgres_changes",{event:"*",schema:"public",table:"client_files",filter:`client_id=eq.${e.id}`},()=>{H()}).subscribe();return()=>{z.removeChannel(J)}},[e.id,H]);const B=h.useMemo(()=>new Map(n.map(J=>[J.id,J])),[n]),M=h.useMemo(()=>{const J=new Map;for(const oe of n){const Ce=oe.parentFolderId||"__root__",R=J.get(Ce)||[];R.push(oe),J.set(Ce,R)}for(const[oe,Ce]of J.entries())Ce.sort((R,Y)=>R.name.localeCompare(Y.name)),J.set(oe,Ce);return J},[n]),$=h.useCallback(J=>{if(!J)return[];const oe=[];let Ce=J;for(;Ce;){const R=B.get(Ce);if(!R)break;oe.unshift(R),Ce=R.parentFolderId}return oe},[B]),re=h.useMemo(()=>$(f),[f,$]),ie=h.useCallback((J,oe)=>{var R;let Ce=oe;for(;Ce;){if(Ce===J)return!0;Ce=((R=B.get(Ce))==null?void 0:R.parentFolderId)||null}return!1},[B]),q=u.trim().length>0,K=u.trim().toLowerCase(),ne=h.useMemo(()=>q?n.filter(J=>J.name.toLowerCase().includes(K)):M.get(f||"__root__")||[],[q,n,K,M,f]),ae=h.useMemo(()=>q?i.filter(J=>J.filename.toLowerCase().includes(K)):i.filter(J=>(J.folderId||null)===f),[q,i,K,f]),_e=async()=>{const J=y.trim();if(!(!J||!t))try{const{error:oe}=await z.from("client_folders").insert({client_id:e.id,workspace_id:e.workspaceId,parent_folder_id:f,name:J,created_by:t.id});if(oe)throw oe;w(""),b(!1),ee.success("Folder created"),await H()}catch(oe){console.error("Create folder error:",oe),ee.error((oe==null?void 0:oe.message)||"Failed to create folder")}},pe=async()=>{const J=x,oe=S.trim();if(!(!J||!oe))try{const{error:Ce}=await z.from("client_folders").update({name:oe}).eq("id",J);if(Ce)throw Ce;_(null),k(""),ee.success("Folder renamed"),await H()}catch(Ce){console.error("Rename folder error:",Ce),ee.error((Ce==null?void 0:Ce.message)||"Failed to rename folder")}},ye=async()=>{const J=C,oe=N.trim();if(!(!J||!oe))try{const{error:Ce}=await z.from("client_files").update({filename:oe}).eq("id",J);if(Ce)throw Ce;j(null),A(""),ee.success("File renamed"),await H()}catch(Ce){console.error("Rename file error:",Ce),ee.error((Ce==null?void 0:Ce.message)||"Failed to rename file")}},ce=async J=>{const oe=n.some(R=>R.parentFolderId===J),Ce=i.some(R=>R.folderId===J);if(oe||Ce){ee.error("Folder must be empty before deletion");return}try{const{error:R}=await z.from("client_folders").delete().eq("id",J);if(R)throw R;f===J&&m(null),ee.success("Folder deleted"),await H()}catch(R){console.error("Delete folder error:",R),ee.error((R==null?void 0:R.message)||"Failed to delete folder")}},me=async J=>{var oe,Ce,R,Y;if(t){v(!0);try{const Se=Ie=>String(Ie||"").trim().replace(/[\\/]/g,"-").replace(/\s+/g," ").trim().slice(0,180)||"file",Re=async Ie=>{const Ee=String((Ie==null?void 0:Ie.message)||(Ie==null?void 0:Ie.details)||(Ie==null?void 0:Ie.hint)||"").trim(),We=Ie==null?void 0:Ie.context;if(We){try{const Oe=await We.clone().json(),Fe=String((Oe==null?void 0:Oe.error)||(Oe==null?void 0:Oe.message)||"").trim();if(Fe)return Fe}catch{}try{const Oe=String(await We.clone().text()).trim();if(Oe)return Oe}catch{}}return Ee||"Unknown error"};if(J.size>50*1024*1024){ee.error("File must be under 50MB"),v(!1);return}const de=`${e.workspaceId}/${e.id}/${crypto.randomUUID()}-${Se(J.name)}`;let G=de;const ue=await z.storage.from("uploads").upload(de,J,{upsert:!1,contentType:J.type||void 0});if(ue.error){const Ie=String(((oe=ue.error)==null?void 0:oe.message)||((Ce=ue.error)==null?void 0:Ce.error)||((R=ue.error)==null?void 0:R.details)||"").toLowerCase();if(!(Ie.includes("row-level security")||Ie.includes("permission")||Ie.includes("not authorized")||Ie.includes("unauthorized")||Ie.includes("forbidden")))throw new Error(`Upload failed: ${String(((Y=ue.error)==null?void 0:Y.message)||"").trim()||"Unknown storage error"}`);const{data:We,error:Oe}=await eu("client-file-upload-url",{body:{workspaceId:e.workspaceId,clientId:e.id,filename:J.name}});if(Oe)throw new Error(`Upload URL failed: ${await Re(Oe)}`);if(!(We!=null&&We.path)||!(We!=null&&We.token))throw new Error("Failed to create upload URL");G=String(We.path);const{error:Fe}=await z.storage.from("uploads").uploadToSignedUrl(G,We.token,J);if(Fe){const rt=String((Fe==null?void 0:Fe.message)||(Fe==null?void 0:Fe.error)||(Fe==null?void 0:Fe.details)||"").trim();throw new Error(`Upload failed: ${rt||"Unknown storage error"}`)}}const he=J.type;let Z="document";he.startsWith("image/")?Z="image":he.startsWith("video/")?Z="video":he.includes("pdf")?Z="pdf":(he.includes("spreadsheet")||he.includes("csv")||he.includes("excel"))&&(Z="spreadsheet");const{error:ge}=await z.from("client_files").insert({id:crypto.randomUUID(),client_id:e.id,workspace_id:e.workspaceId,folder_id:f,uploaded_by:t.id,filename:J.name,file_url:G,file_type:Z,mime_type:he,size_bytes:J.size,is_video:he.startsWith("video/")});if(ge){const Ie=String((ge==null?void 0:ge.message)||(ge==null?void 0:ge.details)||(ge==null?void 0:ge.hint)||"").trim();throw new Error(`Saving file failed: ${Ie||"Database error"}`)}ee.success("File uploaded"),await H()}catch(Se){console.error("Upload file error:",Se),ee.error(String((Se==null?void 0:Se.message)||"").trim()||"Failed to upload file")}finally{v(!1)}}},Q=async J=>{try{await z.storage.from("uploads").remove([J.fileUrl]);const{error:oe}=await z.from("client_files").delete().eq("id",J.id);if(oe)throw oe;ee.success("File deleted"),await H()}catch(oe){console.error("Delete file error:",oe),ee.error((oe==null?void 0:oe.message)||"Failed to delete file")}},te=async J=>{try{const{data:oe,error:Ce}=await z.storage.from("uploads").download(J.fileUrl);if(!Ce&&oe){D(oe,J.filename);return}const{data:R,error:Y}=await eu("client-file-download-url",{body:{workspaceId:e.workspaceId,clientId:e.id,fileId:J.id}});if(Y||!(R!=null&&R.signedUrl))throw Y||new Error("Failed to create download URL");const Se=await fetch(String(R.signedUrl),{method:"GET"});if(!Se.ok)throw new Error(`Download failed (${Se.status})`);const Re=await Se.blob();D(Re,J.filename)}catch(oe){console.error("Download error:",oe),ee.error("Failed to download file")}},Ne=async(J,oe)=>{try{if(J.type==="folder"){if(J.id===oe)return;if(ie(J.id,oe)){ee.error("Cannot move a folder into itself");return}const{error:Ce}=await z.from("client_folders").update({parent_folder_id:oe}).eq("id",J.id);if(Ce)throw Ce}else{const{error:Ce}=await z.from("client_files").update({folder_id:oe}).eq("id",J.id);if(Ce)throw Ce}ee.success("Moved"),await H()}catch(Ce){console.error("Move item error:",Ce),ee.error((Ce==null?void 0:Ce.message)||"Failed to move item")}},je=(J,oe=0)=>(M.get(J||"__root__")||[]).flatMap(R=>{const Y=f===R.id,Se=L===R.id,Re=s.jsxs("button",{type:"button",onClick:()=>m(R.id),className:`w-full h-8 px-2 rounded-xl text-left text-sm flex items-center gap-2 transition-colors ${Se?"bg-white/[0.10] text-white":Y?"bg-white/[0.08] text-white":"text-white/70 hover:bg-white/[0.04]"}`,style:{paddingLeft:8+oe*14},onDragOver:G=>{!P||q||(G.preventDefault(),G.stopPropagation(),U(R.id))},onDragLeave:()=>{L===R.id&&U(null)},onDrop:G=>{if(!P||q)return;G.preventDefault(),G.stopPropagation();const ue=P;T(null),U(null),Ne(ue,R.id)},children:[s.jsx(hv,{className:"w-4 h-4 shrink-0"}),s.jsx("span",{className:"truncate",children:R.name})]},R.id),de=je(R.id,oe+1);return[Re,...de]});return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[250px_minmax(0,1fr)] gap-4",children:[s.jsxs("div",{className:"border border-border rounded-3xl p-3 bg-black",children:[s.jsxs("div",{className:"mb-3 px-1 flex items-center justify-between",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.14em] text-white/45",children:"Folders"}),s.jsx(ze,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-lg",onClick:()=>{b(!0),w("")},children:s.jsx(kY,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-1 max-h-[60vh] overflow-y-auto pr-1",children:[s.jsxs("button",{type:"button",onClick:()=>m(null),className:`w-full h-8 px-2 rounded-xl text-left text-sm flex items-center gap-2 transition-colors ${L==="__root__"?"bg-white/[0.10] text-white":f===null?"bg-white/[0.08] text-white":"text-white/70 hover:bg-white/[0.04]"}`,onDragOver:J=>{!P||q||(J.preventDefault(),J.stopPropagation(),U("__root__"))},onDragLeave:()=>{L==="__root__"&&U(null)},onDrop:J=>{if(!P||q)return;J.preventDefault(),J.stopPropagation();const oe=P;T(null),U(null),Ne(oe,null)},children:[s.jsx(hv,{className:"w-4 h-4 shrink-0"}),s.jsx("span",{className:"truncate",children:"Root"})]}),je(null)]})]}),s.jsxs("div",{className:"border border-border rounded-3xl p-4 bg-black",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/65",children:[s.jsx("button",{type:"button",onClick:()=>m(null),className:"hover:text-white transition-colors",children:"Root"}),re.map((J,oe)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gx,{className:"w-3.5 h-3.5 text-white/35"}),s.jsx("button",{type:"button",onClick:()=>m(J.id),className:`hover:text-white transition-colors ${oe===re.length-1?"text-white":""}`,children:J.name})]},J.id))]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{ref:r,type:"file",className:"hidden",onChange:J=>{var Ce;const oe=(Ce=J.target.files)==null?void 0:Ce[0];oe&&me(oe),J.target&&(J.target.value="")}}),s.jsxs(ze,{variant:"outline",className:"rounded-xl bg-transparent border-border",onClick:()=>{var J;return(J=r.current)==null?void 0:J.click()},disabled:p,children:[s.jsx(d3,{className:"w-4 h-4 mr-2"}),p?"Uploading...":"Upload"]})]})]}),s.jsxs("div",{className:"relative mb-4",children:[s.jsx(Jx,{className:"w-4 h-4 text-white/45 absolute left-3 top-1/2 -translate-y-1/2"}),s.jsx($r,{value:u,onChange:J=>d(J.target.value),placeholder:"Search files and folders",className:"pl-9 bg-black border-border rounded-2xl h-10"})]}),g&&s.jsxs("div",{className:"mb-3 p-3 border border-border rounded-2xl bg-black/80 flex items-center gap-2",children:[s.jsx($r,{value:y,onChange:J=>w(J.target.value),placeholder:"Folder name",className:"h-9 bg-black border-border rounded-xl",onKeyDown:J=>{J.key==="Enter"&&(J.preventDefault(),_e())},autoFocus:!0}),s.jsx(ze,{size:"sm",className:"bg-white text-black hover:bg-white/90 rounded-xl",onClick:()=>void _e(),children:"Create"}),s.jsx(ze,{size:"sm",variant:"outline",className:"rounded-xl bg-transparent border-border",onClick:()=>b(!1),children:"Cancel"})]}),s.jsx("div",{className:`rounded-2xl min-h-[420px] ${L===(f||"__root__")?"bg-white/[0.03]":""}`,onDragOver:J=>{!P||q||(J.preventDefault(),U(f||"__root__"))},onDragLeave:()=>{L===(f||"__root__")&&U(null)},onDrop:J=>{if(!P||q)return;J.preventDefault();const oe=P;T(null),U(null),Ne(oe,f)},children:l?s.jsx("div",{className:"h-full min-h-[420px] p-4 space-y-2",children:Array.from({length:9}).map((J,oe)=>s.jsxs("div",{className:"h-14 px-3 flex items-center gap-3",children:[s.jsx($e,{className:"h-4 w-4 rounded bg-white/[0.06]"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx($e,{className:"h-4 w-56 rounded-xl bg-white/[0.10]"}),s.jsx($e,{className:"h-3 w-72 rounded-xl bg-white/[0.06] mt-2"})]}),s.jsx($e,{className:"h-8 w-24 rounded-xl bg-white/[0.06]"})]},oe))}):ne.length===0&&ae.length===0?s.jsxs("div",{className:"h-full min-h-[420px] flex flex-col items-center justify-center text-center px-6",children:[s.jsx(hv,{className:"w-10 h-10 text-muted-foreground mb-3"}),s.jsx("p",{className:"text-muted-foreground",children:q?"No results found":"This folder is empty"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:q?"Try another keyword":"Upload files or create a subfolder"})]}):s.jsxs("div",{className:"space-y-0.5",children:[ne.map(J=>{const oe=$(J.parentFolderId).map(R=>R.name).join(" / "),Ce=L===J.id;return s.jsxs("div",{draggable:!q,onDragStart:()=>T({type:"folder",id:J.id}),onDragEnd:()=>{T(null),U(null)},onDragOver:R=>{!P||q||(R.preventDefault(),R.stopPropagation(),U(J.id))},onDrop:R=>{if(!P||q)return;R.preventDefault(),R.stopPropagation();const Y=P;T(null),U(null),Ne(Y,J.id)},className:`h-14 px-3 flex items-center gap-3 rounded-xl transition-colors ${Ce?"bg-white/[0.06]":"hover:bg-white/[0.02]"}`,children:[s.jsx(hv,{className:"w-4 h-4 text-white/70 shrink-0"}),s.jsxs("button",{type:"button",className:"flex-1 text-left min-w-0",onClick:()=>{q&&d(""),m(J.id)},children:[s.jsx("p",{className:"truncate text-sm text-white",children:J.name}),q&&oe?s.jsx("p",{className:"truncate text-xs text-white/45",children:oe}):null]}),s.jsx(ze,{variant:"ghost",size:"sm",className:"h-8 px-2 rounded-lg text-white/55 hover:text-white",onClick:()=>{_(J.id),k(J.name)},children:"Rename"}),s.jsx(ze,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg text-white/55 hover:text-red-400",onClick:()=>void ce(J.id),children:s.jsx(Va,{className:"w-4 h-4"})})]},J.id)}),ae.map(J=>{const oe=$(J.folderId).map(Ce=>Ce.name).join(" / ");return s.jsxs("div",{draggable:!q,onDragStart:()=>T({type:"file",id:J.id}),onDragEnd:()=>{T(null),U(null)},className:"h-14 px-3 flex items-center gap-3 rounded-xl hover:bg-white/[0.02]",children:[w$e(J.fileType),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"truncate text-sm text-white",children:J.filename}),s.jsxs("p",{className:"truncate text-xs text-white/45",children:[_$e(J.sizeBytes),q&&oe?`  ${oe}`:""]})]}),s.jsx(ze,{variant:"ghost",size:"sm",className:"h-8 px-2 rounded-lg text-white/55 hover:text-white",onClick:()=>{j(J.id),A(J.filename)},children:"Rename"}),s.jsx(ze,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg text-white/55 hover:text-white",onClick:()=>void te(J),children:s.jsx(lN,{className:"w-4 h-4"})}),s.jsx(ze,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg text-white/55 hover:text-red-400",onClick:()=>void Q(J),children:s.jsx(Va,{className:"w-4 h-4"})})]},J.id)})]})}),x&&s.jsxs("div",{className:"mt-3 p-3 border border-border rounded-2xl bg-black/80 flex items-center gap-2",children:[s.jsx($r,{value:S,onChange:J=>k(J.target.value),placeholder:"Folder name",className:"h-9 bg-black border-border rounded-xl",onKeyDown:J=>{J.key==="Enter"&&(J.preventDefault(),pe())},autoFocus:!0}),s.jsx(ze,{size:"sm",className:"bg-white text-black hover:bg-white/90 rounded-xl",onClick:()=>void pe(),children:"Save"}),s.jsx(ze,{size:"sm",variant:"outline",className:"rounded-xl bg-transparent border-border",onClick:()=>{_(null),k("")},children:"Cancel"})]}),C&&s.jsxs("div",{className:"mt-3 p-3 border border-border rounded-2xl bg-black/80 flex items-center gap-2",children:[s.jsx($r,{value:N,onChange:J=>A(J.target.value),placeholder:"File name",className:"h-9 bg-black border-border rounded-xl",onKeyDown:J=>{J.key==="Enter"&&(J.preventDefault(),ye())},autoFocus:!0}),s.jsx(ze,{size:"sm",className:"bg-white text-black hover:bg-white/90 rounded-xl",onClick:()=>void ye(),children:"Save"}),s.jsx(ze,{size:"sm",variant:"outline",className:"rounded-xl bg-transparent border-border",onClick:()=>{j(null),A("")},children:"Cancel"})]})]})]})}function S$e({client:e}){return s.jsx(Nz,{client:e})}function j$e({client:e,open:t,onOpenChange:r,onTaskAdded:n}){const{user:a}=Kt(),[i,o]=h.useState(!1),[l,c]=h.useState(""),[u,d]=h.useState(""),[f,m]=h.useState(void 0),p=async()=>{if(!l.trim()||!a){ee.error("Please enter a task title");return}o(!0);try{const{error:g}=await z.from("client_tasks").insert({id:crypto.randomUUID(),client_id:e.id,workspace_id:e.workspaceId,created_by:a.id,title:l.trim(),description:u.trim()||null,due_date:f?Lt(f,"yyyy-MM-dd"):null,status:"pending"});if(g)throw g;ee.success("Task created!"),c(""),d(""),m(void 0),n(),r(!1)}catch(g){console.error("Error creating task:",g),ee.error("Failed to create task")}finally{o(!1)}},v=()=>{c(""),d(""),m(void 0),r(!1)};return s.jsx(Gi,{open:t,onOpenChange:v,children:s.jsxs(yi,{className:"bg-[#0a0a0a] border-border rounded-3xl",children:[s.jsxs(xi,{children:[s.jsxs(bi,{className:"flex items-center gap-2",children:[s.jsx(kl,{className:"w-5 h-5"}),"Add Task for ",e.name]}),s.jsxs(Ef,{children:["Create a task that ",e.name," will see in their portal"]})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"taskTitle",children:"Task Title"}),s.jsx("input",{id:"taskTitle",placeholder:"e.g., Complete onboarding questionnaire",value:l,onChange:g=>c(g.target.value),className:"w-full h-10 px-4 bg-black border border-border rounded-2xl text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-border transition-colors"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"taskDescription",children:"Description (optional)"}),s.jsx("textarea",{id:"taskDescription",placeholder:"Add more details about this task...",value:u,onChange:g=>d(g.target.value),className:"w-full px-4 py-3 bg-black border border-border rounded-2xl text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-border transition-colors min-h-[96px] resize-none"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ut,{className:"flex items-center gap-2",children:[s.jsx(mo,{className:"w-4 h-4"}),"Due Date (optional)"]}),s.jsxs(gc,{children:[s.jsx(vc,{asChild:!0,children:s.jsxs(ze,{variant:"outline",className:Pe("w-full justify-start text-left font-normal bg-black border-border hover:bg-white/[0.04] rounded-2xl",!f&&"text-muted-foreground"),children:[s.jsx(mo,{className:"mr-2 h-4 w-4"}),f?Lt(f,"PPP"):"No due date set"]})}),s.jsxs(il,{className:"w-auto p-0 bg-[#0a0a0a] border-border rounded-2xl",align:"start",children:[s.jsx(Pw,{mode:"single",selected:f,onSelect:m,initialFocus:!0}),f&&s.jsx("div",{className:"p-2 border-t-[0.5px] border-border",children:s.jsx(ze,{variant:"ghost",size:"sm",className:"w-full rounded-xl",onClick:()=>m(void 0),children:"Clear date"})})]})]})]})]}),s.jsxs(ch,{children:[s.jsx(ze,{variant:"outline",onClick:v,className:"border-border rounded-xl bg-transparent",children:"Cancel"}),s.jsx(ze,{onClick:p,disabled:i||!l.trim(),className:"bg-white text-black hover:bg-white/90 font-semibold border-0 shadow-none rounded-xl",children:i?"Creating...":"Create Task"})]})]})})}function k$e({client:e,tasks:t,onRefresh:r}){const[n,a]=h.useState(!1),[i,o]=h.useState(null),[l,c]=h.useState(!1),u=p=>{switch(p){case"completed":return s.jsxs(Zt,{variant:"secondary",className:"bg-success/20 text-success border-0",children:[s.jsx(Ha,{className:"w-3 h-3 mr-1"}),"Completed"]});case"in_progress":return s.jsxs(Zt,{variant:"secondary",className:"bg-blue-500/20 text-blue-400 border-0",children:[s.jsx(Yd,{className:"w-3 h-3 mr-1"}),"In Progress"]});default:return s.jsxs(Zt,{variant:"secondary",className:"bg-muted text-muted-foreground border-0",children:[s.jsx(Gd,{className:"w-3 h-3 mr-1"}),"Pending"]})}},d=async(p,v)=>{try{const g={status:v};v==="completed"?g.completed_at=new Date().toISOString():g.completed_at=null;const{error:b}=await z.from("client_tasks").update(g).eq("id",p.id);if(b)throw b;ee.success(`Task marked as ${v.replace("_"," ")}`),r()}catch(g){console.error("Error updating task:",g),ee.error("Failed to update task")}},f=async()=>{if(i){c(!0);try{const{error:p}=await z.from("client_tasks").delete().eq("id",i.id);if(p)throw p;ee.success("Task deleted"),o(null),r()}catch(p){console.error("Delete error:",p),ee.error("Failed to delete task")}finally{c(!1)}}},m=[...t].sort((p,v)=>{const g={pending:0,in_progress:1,completed:2};return g[p.status]-g[v.status]});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Tasks"}),s.jsxs(ze,{onClick:()=>a(!0),className:"bg-white text-black hover:bg-white/90 font-semibold border-0 shadow-none rounded-full",children:[s.jsx(kl,{className:"w-4 h-4 mr-2"}),"Add Task"]})]}),t.length===0?s.jsxs("div",{className:"border border-border rounded-3xl p-8 text-center",children:[s.jsx(Kx,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground mb-2",children:"No tasks created yet"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Create tasks for ",e.name," to complete"]})]}):s.jsx("div",{className:"space-y-3",children:m.map(p=>s.jsx("div",{className:`border border-border rounded-3xl p-4 hover:bg-sidebar-accent transition-colors ${p.status==="completed"?"opacity-60":""}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h4",{className:`font-medium ${p.status==="completed"?"line-through":""}`,children:p.title}),u(p.status)]}),p.description&&s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:p.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[p.dueDate&&s.jsxs("span",{children:["Due: ",Lt(p.dueDate,"MMM d, yyyy")]}),p.completedAt&&s.jsxs("span",{children:["Completed: ",Lt(p.completedAt,"MMM d, yyyy")]})]})]}),s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsx(ze,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(uN,{className:"w-4 h-4"})})}),s.jsxs(Hr,{align:"end",className:"bg-popover border-border",children:[p.status!=="pending"&&s.jsxs(wr,{onClick:()=>d(p,"pending"),children:[s.jsx(Gd,{className:"w-4 h-4 mr-2"}),"Mark as Pending"]}),p.status!=="in_progress"&&s.jsxs(wr,{onClick:()=>d(p,"in_progress"),children:[s.jsx(Yd,{className:"w-4 h-4 mr-2"}),"Mark as In Progress"]}),p.status!=="completed"&&s.jsxs(wr,{onClick:()=>d(p,"completed"),children:[s.jsx(Ha,{className:"w-4 h-4 mr-2"}),"Mark as Completed"]}),s.jsx(di,{}),s.jsxs(wr,{onClick:()=>o(p),className:"text-destructive focus:text-destructive",children:[s.jsx(Va,{className:"w-4 h-4 mr-2"}),"Delete Task"]})]})]})]})},p.id))}),s.jsx(j$e,{client:e,open:n,onOpenChange:a,onTaskAdded:r}),s.jsx(Wl,{open:!!i,onOpenChange:()=>o(null),children:s.jsxs(To,{className:"bg-card border-border rounded-3xl",children:[s.jsxs(Oo,{children:[s.jsx(Mo,{children:"Delete task?"}),s.jsxs(Ro,{children:['This will permanently delete "',i==null?void 0:i.title,'".']})]}),s.jsxs(Io,{children:[s.jsx(Do,{className:"rounded-full",children:"Cancel"}),s.jsx($o,{onClick:f,disabled:l,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90 rounded-full",children:l?"Deleting...":"Delete"})]})]})})]})}function N$e(){const{id:e}=db(),t=Xt(),{client:r,tasks:n,files:a,loading:i,error:o,updateClient:l,fetchClient:c}=IMe(e),[u,d]=h.useState("overview");if(i)return s.jsx(Er,{children:s.jsxs("div",{className:"p-8",children:[s.jsx("div",{className:"mb-6",children:s.jsx($e,{className:"h-10 w-32 rounded-2xl bg-white/[0.06]"})}),s.jsxs("div",{className:"flex items-start justify-between gap-6 mb-8",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx($e,{className:"h-16 w-16 rounded-full bg-white/[0.06]"}),s.jsxs("div",{children:[s.jsx($e,{className:"h-8 w-56 rounded-2xl bg-white/10"}),s.jsx($e,{className:"h-4 w-72 rounded-xl bg-white/[0.06] mt-2"})]})]}),s.jsx($e,{className:"h-10 w-32 rounded-2xl bg-white/[0.06]"})]}),s.jsx("div",{className:"flex items-center gap-2 mb-6",children:Array.from({length:4}).map((p,v)=>s.jsx($e,{className:"h-9 w-28 rounded-2xl bg-white/[0.06]"},v))}),s.jsx($e,{className:"h-[420px] w-full rounded-3xl bg-white/[0.04]"})]})});if(o||!r)return s.jsx(Er,{children:s.jsxs("div",{className:"p-8",children:[s.jsxs(ze,{variant:"ghost",onClick:()=>t("/clients"),className:"mb-4 rounded-2xl",children:[s.jsx(ho,{className:"w-4 h-4 mr-2"}),"Back to Clients"]}),s.jsx("div",{className:"text-muted-foreground",children:"Client not found"})]})});const f=()=>{const p=r.name.charAt(0).toUpperCase();return s.jsx("div",{className:"w-16 h-16 acq-orb flex items-center justify-center text-2xl font-medium text-[#9a9a9a]",style:vg("#9ca3af"),children:p})},m=()=>{const p=new Date,v=r.subscriptionStatus==="paused",g=r.accessUntil&&r.accessUntil<p;return v||g?s.jsx(Zt,{variant:"secondary",className:"bg-red-500/20 text-red-400 border-0 rounded-full",children:v?"Paused":"Expired"}):s.jsx(Zt,{variant:"secondary",className:"bg-success/20 text-success border-0 rounded-full",children:"Active"})};return s.jsx(Er,{children:s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(ze,{variant:"ghost",onClick:()=>t("/clients"),className:"mb-4 -ml-2 rounded-2xl",children:[s.jsx(ho,{className:"w-4 h-4 mr-2"}),"Back to Clients"]}),s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[f(),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h1",{className:"headline-domaine text-[36px] font-normal",children:r.name}),m()]}),r.email&&s.jsx("p",{className:"text-muted-foreground",children:r.email}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Added ",Lt(r.latestInviteSentAt||r.createdAt,"MMMM d, yyyy")]})]})]}),r.userId&&s.jsx(Zt,{variant:"secondary",className:"bg-success/20 text-success border-0 rounded-full",children:"Portal Access Enabled"})]})]}),s.jsxs(BMe,{value:u,onValueChange:d,children:[s.jsxs(pz,{className:"bg-transparent border-b-[0.5px] border-border rounded-none w-full justify-start gap-0 h-auto p-0 mb-8",children:[s.jsxs(em,{value:"overview",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-border data-[state=active]:bg-transparent data-[state=active]:translate-y-[2px] px-4 py-3",children:[s.jsx(f3,{className:"w-4 h-4 mr-2"}),"Overview"]}),s.jsxs(em,{value:"onboarding",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-border data-[state=active]:bg-transparent data-[state=active]:translate-y-[2px] px-4 py-3",children:[s.jsx(HY,{className:"w-4 h-4 mr-2"}),"Onboarding"]}),s.jsxs(em,{value:"files",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-border data-[state=active]:bg-transparent data-[state=active]:translate-y-[2px] px-4 py-3",children:[s.jsx(VY,{className:"w-4 h-4 mr-2"}),"Files",a.length>0&&s.jsx(Zt,{variant:"secondary",className:"ml-2 bg-muted text-muted-foreground",children:a.length})]}),s.jsxs(em,{value:"tasks",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-border data-[state=active]:bg-transparent data-[state=active]:translate-y-[2px] px-4 py-3",children:[s.jsx(KY,{className:"w-4 h-4 mr-2"}),"Tasks",n.length>0&&s.jsx(Zt,{variant:"secondary",className:"ml-2 bg-muted text-muted-foreground",children:n.length})]})]}),s.jsx(tm,{value:"overview",className:"mt-0",children:s.jsx(x$e,{client:r,onUpdate:l})}),s.jsx(tm,{value:"onboarding",className:"mt-0",children:s.jsx(b$e,{client:r})}),s.jsx(tm,{value:"files",className:"mt-0",children:s.jsx(S$e,{client:r,files:a,onRefresh:c})}),s.jsx(tm,{value:"tasks",className:"mt-0",children:s.jsx(k$e,{client:r,tasks:n,onRefresh:c})})]})]})})}function C$e(){const e=Xt(),{user:t,loading:r}=Kt(),{userRole:n,loading:a}=on(),{portalRole:i,loading:o}=Qi();return h.useEffect(()=>{try{sessionStorage.setItem("acq_signin_intent","setter")}catch{}if(r||a)return;if(!t){e("/auth",{replace:!0});return}ya(t.id);const c=yo(t.id)||xo(t.user_metadata)||n==="setter"||i==="setter";if(!o&&!c){e("/dashboard",{replace:!0});return}e("/setter-portal/messages",{replace:!0})},[r,a,o,t,n,i,e]),s.jsx(UN,{})}function E$e(){const e=Xt(),[t,r]=h.useState(""),[n,a]=h.useState(""),[i,o]=h.useState(!1),[l,c]=h.useState(!1),u=async f=>{var m;if(f.preventDefault(),!t.trim()){ee.error("Please enter your email");return}if(!n.trim()){ee.error("Please enter your password");return}c(!0);try{try{sessionStorage.setItem("acq_signin_intent","setter")}catch{}const{data:p,error:v}=await z.auth.signInWithPassword({email:t.trim().toLowerCase(),password:n});if(v){console.error("Login error:",v),ee.error(v.message||"Invalid email or password");return}ya(((m=p==null?void 0:p.user)==null?void 0:m.id)||null),ee.success("Welcome back!"),e("/setter-portal/messages")}catch(p){console.error("Login error:",p),ee.error("Something went wrong. Please try again.")}finally{c(!1)}},d=n.trim().length>0;return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-sm",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Bm,{className:"w-6 h-6 text-blue-400"})}),s.jsx("h1",{className:"text-2xl font-medium mb-2",children:"Appointment Setter Portal"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Sign in with your email and password to access your portal"})]}),s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"email",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(Xp,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx($r,{id:"email",type:"email",placeholder:"you@example.com",value:t,onChange:f=>r(f.target.value),className:"bg-transparent border-border pl-10",autoComplete:"email"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Bm,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx($r,{id:"password",type:i?"text":"password",placeholder:"Your password",value:n,onChange:f=>a(f.target.value),className:"bg-transparent border-border pl-10 pr-10",autoComplete:"current-password"}),s.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:i?s.jsx(Fm,{className:"w-4 h-4"}):s.jsx(Xd,{className:"w-4 h-4"})})]})]}),s.jsxs(ze,{type:"submit",disabled:l||!d,className:"w-full bg-blue-500 text-white hover:bg-blue-600 font-medium rounded-xl",children:[l?"Signing in...":"Access Portal",s.jsx(Ll,{className:"w-4 h-4 ml-2"})]})]}),s.jsx("div",{className:"mt-8 text-center",children:s.jsxs("p",{className:"text-muted-foreground text-sm",children:["Need help signing in?"," ",s.jsx("a",{href:"mailto:support@theacq.app",className:"text-blue-400 hover:underline",children:"support@theacq.app"})]})}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(Ml,{to:"/auth",className:"text-muted-foreground text-sm hover:text-foreground",children:" Back to main login"})})]})})}const A$e=Lf("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-border text-destructive dark:border-border [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Cz=h.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:Pe(A$e({variant:t}),e),...r}));Cz.displayName="Alert";const P$e=h.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:Pe("mb-1 font-medium leading-none tracking-tight",e),...t}));P$e.displayName="AlertTitle";const Ez=h.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Pe("text-sm [&_p]:leading-relaxed",e),...t}));Ez.displayName="AlertDescription";function T$e(e){const t=[];return e.length<7&&t.push("At least 7 characters"),/[A-Z]/.test(e)||t.push("One uppercase letter"),/[a-z]/.test(e)||t.push("One lowercase letter"),/[0-9]/.test(e)||t.push("One number"),/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e)||t.push("One symbol (!@#$%^&*...)"),{valid:t.length===0,errors:t}}function O$e({onComplete:e,isSubmitting:t,role:r}){const[n,a]=h.useState(""),[i,o]=h.useState(""),[l,c]=h.useState("create"),[u,d]=h.useState(""),[f,m]=h.useState(!1),[p,v]=h.useState(!1),g=T$e(n),b=r==="client"?"Client":"Appointment Setter",y=()=>{if(!g.valid){d("Please meet all requirements");return}d(""),c("confirm")},w=async()=>{if(i!==n){d("Codes do not match. Please try again."),o("");return}d(""),await e(n)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Bm,{className:"w-6 h-6 text-primary"})}),s.jsx("h1",{className:"text-2xl font-medium mb-2",children:l==="create"?"Create Your Secure Code":"Confirm Your Code"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:l==="create"?`Choose a secure code to access your ${b.toLowerCase()} portal`:"Enter your code again to confirm"})]}),s.jsxs(Cz,{className:"border-amber-500/50 bg-amber-500/10",children:[s.jsx(vY,{className:"h-4 w-4 text-amber-500"}),s.jsxs(Ez,{className:"text-amber-200 text-sm",children:[s.jsx("strong",{children:"Important:"})," Save this code somewhere safe (notes app, password manager). You'll need it to log back in."]})]}),l==="create"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"code",children:"Your Secure Code"}),s.jsxs("div",{className:"relative",children:[s.jsx($r,{id:"code",type:f?"text":"password",value:n,onChange:x=>{a(x.target.value),d("")},placeholder:"Enter your secure code",className:"bg-transparent border-border pr-10",autoComplete:"new-password"}),s.jsx("button",{type:"button",onClick:()=>m(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:f?s.jsx(Fm,{className:"w-4 h-4"}):s.jsx(Xd,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("p",{className:"text-muted-foreground mb-2",children:"Requirements:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[s.jsx(qh,{met:n.length>=7,label:"7+ characters"}),s.jsx(qh,{met:/[A-Z]/.test(n),label:"Uppercase letter"}),s.jsx(qh,{met:/[a-z]/.test(n),label:"Lowercase letter"}),s.jsx(qh,{met:/[0-9]/.test(n),label:"Number"}),s.jsx(qh,{met:/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(n),label:"Symbol"})]})]})]}),l==="confirm"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"confirmCode",children:"Re-enter Your Code"}),s.jsxs("div",{className:"relative",children:[s.jsx($r,{id:"confirmCode",type:p?"text":"password",value:i,onChange:x=>{o(x.target.value),d("")},placeholder:"Re-enter your secure code",className:"bg-transparent border-border pr-10",autoComplete:"new-password"}),s.jsx("button",{type:"button",onClick:()=>v(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:p?s.jsx(Fm,{className:"w-4 h-4"}):s.jsx(Xd,{className:"w-4 h-4"})})]})]}),u&&s.jsx("p",{className:"text-red-400 text-sm text-center",children:u}),s.jsxs("div",{className:"flex gap-3",children:[l==="confirm"&&s.jsx(ze,{variant:"outline",onClick:()=>{c("create"),o(""),d("")},className:"flex-1 rounded-xl",children:"Back"}),l==="create"?s.jsxs(ze,{onClick:y,disabled:!g.valid,className:"flex-1 bg-white text-black hover:bg-white/90 font-medium rounded-xl",children:["Continue",s.jsx(Ll,{className:"w-4 h-4 ml-2"})]}):s.jsxs(ze,{onClick:w,disabled:i.length<7||t,className:"flex-1 bg-white text-black hover:bg-white/90 font-medium rounded-xl",children:[t?"Setting up...":"Confirm Code",s.jsx(Ha,{className:"w-4 h-4 ml-2"})]})]})]})}function qh({met:e,label:t}){return s.jsxs("div",{className:`flex items-center gap-2 ${e?"text-green-400":"text-muted-foreground"}`,children:[e?s.jsx(Ha,{className:"w-3 h-3"}):s.jsx("div",{className:"w-3 h-3 rounded-full border border-current"}),s.jsx("span",{children:t})]})}const vM=new Set;function I$e(e){const t=e;return String((t==null?void 0:t.message)||(t==null?void 0:t.details)||(t==null?void 0:t.hint)||e||"").toLowerCase()}function M$e(e){const t=e,r=String((t==null?void 0:t.code)||"").trim(),n=I$e(e);return r==="42703"?!0:n.includes("setter_codes")?n.includes("does not exist")||n.includes("column")||n.includes("schema cache"):!1}function yM(e,t){if(!M$e(t))return!1;const r=String(e||"unknown").trim()||"unknown";return vM.has(r)||(vM.add(r),console.warn(`[setter_codes:${r}] Schema mismatch detected. Falling back without noisy retries.`,t)),!0}async function R$e(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function $$e(){const e=Xt(),{user:t,loading:r}=Kt(),{portalRole:n,workspaceId:a,loading:i}=Qi(),[o,l]=h.useState(0),[c,u]=h.useState(!1),[d,f]=h.useState(!1),[m,p]=h.useState(!0);h.useEffect(()=>{if(!(r||i)){if(!t){e("/auth");return}if(n!=="setter"){e(n==="client"?"/portal":"/dashboard");return}}},[t,r,i,n,e]),h.useEffect(()=>{t!=null&&t.id&&a&&v()},[t==null?void 0:t.id,a]);const v=async()=>{if(!(!t||!a)){p(!0);try{const{data:y,error:w}=await z.from("setter_codes").select("id").eq("user_id",t.id).eq("workspace_id",a).maybeSingle();if(yM("check-existing",w))return;!w&&y&&e("/setter-portal/messages")}catch(y){console.error("Error checking code:",y)}finally{p(!1)}}},g=async y=>{if(!(!t||!a)){f(!0);try{const w=await R$e(y),{data:x,error:_}=await z.from("setter_codes").select("id").eq("code_hash",w).maybeSingle();if(_){if(yM("check-uniqueness",_)){ee.error("Secure code checks are temporarily unavailable. Please retry in a moment."),f(!1);return}console.error("Error checking code uniqueness:",_)}const{data:S}=await z.from("client_pins").select("id").eq("pin_hash",w).maybeSingle();if(x||S){ee.error("This code is already in use. Please choose a different code."),f(!1);return}const{error:k}=await z.from("setter_codes").upsert({user_id:t.id,workspace_id:a,code_hash:w,email:t.email||""},{onConflict:"user_id,workspace_id"});if(k){console.error("Error saving code:",k),ee.error("Failed to save code. Please try again.");return}ee.success("Secure code saved! Remember to save it somewhere safe."),u(!0),l(1)}catch(w){console.error("Code setup error:",w),ee.error("Something went wrong")}finally{f(!1)}}},b=()=>{e("/setter-portal/messages")};return r||i||m?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"flex gap-1 mb-8",children:[s.jsx($e,{className:"h-1 flex-1 rounded-full bg-white/[0.10]"}),s.jsx($e,{className:"h-1 flex-1 rounded-full bg-white/[0.06]"})]}),s.jsxs("div",{className:"space-y-4 text-center",children:[s.jsx($e,{className:"h-7 w-56 rounded-2xl bg-white/10 mx-auto"}),s.jsx($e,{className:"h-4 w-80 rounded-xl bg-white/[0.06] mx-auto"}),s.jsxs("div",{className:"mt-6 space-y-3 text-left",children:[s.jsx($e,{className:"h-4 w-24 rounded-xl bg-white/[0.06]"}),s.jsx($e,{className:"h-12 w-full rounded-2xl bg-white/[0.06]"}),s.jsx($e,{className:"h-4 w-28 rounded-xl bg-white/[0.06] mt-4"}),s.jsx($e,{className:"h-12 w-full rounded-2xl bg-white/[0.06]"})]}),s.jsx("div",{className:"pt-4 flex justify-end",children:s.jsx($e,{className:"h-11 w-36 rounded-2xl bg-white/10"})})]})]})}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsx("div",{className:"flex gap-1 mb-8",children:[0,1].map(y=>s.jsx("div",{className:`h-1 flex-1 rounded-full transition-colors ${y<=o?"bg-blue-500":"bg-border"}`},y))}),o===0&&!c&&s.jsx(O$e,{onComplete:g,isSubmitting:d,role:"setter"}),o===1&&s.jsxs("div",{className:"space-y-6 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-green-500/10 rounded-full flex items-center justify-center mx-auto",children:s.jsx(Vx,{className:"w-8 h-8 text-green-500"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-medium mb-2",children:"You're all set!"}),s.jsx("p",{className:"text-muted-foreground",children:"Your secure code has been saved. You can now access your Appointment Setter portal."})]}),s.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 text-left",children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:"What you can do:"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsx("li",{children:" View and respond to Instagram DMs"}),s.jsx("li",{children:" Filter and qualify leads"}),s.jsx("li",{children:" Complete assigned tasks"})]})]}),s.jsx(ze,{onClick:b,className:"w-full bg-blue-500 text-white hover:bg-blue-600 font-medium rounded-xl",children:"Go to Portal"})]})]})})}function D$e(){const e=Xt(),[t]=Vf(),[r,n]=h.useState("loading"),[a,i]=h.useState("");h.useEffect(()=>{o()},[]);const o=async()=>{try{try{sessionStorage.setItem("acq_signin_intent","setter")}catch{}const l=t.get("token"),{data:{session:c},error:u}=await z.auth.getSession();if(u){console.error("Session error:",u),i("Failed to verify your session. Please try again."),n("error");return}if(!c){const d=new URLSearchParams(window.location.hash.substring(1)),f=d.get("access_token"),m=d.get("refresh_token");if(f&&m){const{error:p}=await z.auth.setSession({access_token:f,refresh_token:m});if(p){console.error("Error setting session:",p),i("Failed to sign in. Please try again."),n("error");return}}else{i("No valid session found. Please use the link from your email."),n("error");return}}if(l){const{data:{user:d}}=await z.auth.getUser();if(d){ya(d.id);const{data:f,error:m}=await z.functions.invoke("accept-invite",{body:{token:l,userId:d.id}});m?console.error("Error accepting invite:",m):f!=null&&f.success&&console.log("Invite accepted successfully")}}else{const{data:{user:d}}=await z.auth.getUser();ya((d==null?void 0:d.id)||null)}n("success"),ee.success("Welcome! Let's set up your secure code."),setTimeout(()=>{e("/setter-portal/onboarding")},1e3)}catch(l){console.error("Callback error:",l),i("Something went wrong. Please try again."),n("error")}};return r==="loading"?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-border border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Verifying your access..."})]})}):r==="error"?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsxs("div",{className:"text-center max-w-sm",children:[s.jsx("div",{className:"w-12 h-12 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-red-500 text-xl",children:"!"})}),s.jsx("h2",{className:"text-lg font-medium mb-2",children:"Something went wrong"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:a}),s.jsx("button",{onClick:()=>e("/auth"),className:"text-blue-400 hover:underline text-sm",children:"Go to login"})]})}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-green-500 text-xl",children:""})}),s.jsx("p",{className:"text-muted-foreground",children:"Redirecting to setup..."})]})})}function L$e(){const e=Xt(),{signIn:t}=Kt(),[r,n]=h.useState(""),[a,i]=h.useState(""),[o,l]=h.useState(!1),[c,u]=h.useState(!1),d=async f=>{f.preventDefault();const m=r.trim().toLowerCase();if(!m){ee.error("Please enter your email");return}if(!a){ee.error("Please enter your password");return}u(!0);const{error:p}=await t(m,a);if(p){ee.error("Invalid email or password"),u(!1);return}ee.success("Welcome back"),e("/portal"),u(!1)};return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-sm",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-12 h-12 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Bm,{className:"w-6 h-6 text-green-400"})}),s.jsx("h1",{className:"text-2xl font-medium mb-2",children:"Client Portal"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Sign in to access your meetings, drive, and tasks"})]}),s.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"email",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(Xp,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx($r,{id:"email",type:"email",placeholder:"you@example.com",value:r,onChange:f=>n(f.target.value),className:"bg-transparent border-border pl-10",autoComplete:"email"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Bm,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx($r,{id:"password",type:o?"text":"password",placeholder:"",value:a,onChange:f=>i(f.target.value),className:"bg-transparent border-border pl-10 pr-10",autoComplete:"current-password"}),s.jsx("button",{type:"button",onClick:()=>l(f=>!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:o?s.jsx(Fm,{className:"w-4 h-4"}):s.jsx(Xd,{className:"w-4 h-4"})})]})]}),s.jsxs(ze,{type:"submit",disabled:c||!r.trim()||!a,className:"w-full bg-white text-black hover:bg-white/90 font-medium rounded-xl",children:[c?"Signing in...":"Access Portal",s.jsx(Ll,{className:"w-4 h-4 ml-2"})]})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx(Ml,{to:"/auth",className:"text-muted-foreground text-sm hover:text-foreground",children:" Back to main login"})})]})})}function F$e(){const[e,t]=h.useState(""),[r,n]=h.useState(!1),[a,i]=h.useState(!1),o=async l=>{if(l.preventDefault(),!e.trim()){ee.error("Please enter your email");return}n(!0);try{const{data:c,error:u}=await z.functions.invoke("resend-client-magic-link",{body:{email:e.trim().toLowerCase()}});if(u){console.error("Error:",u),ee.error("Failed to send link. Please try again."),n(!1);return}if(!c.success){ee.success("If an account exists, we've sent a new access link"),i(!0);return}ee.success("Check your email for a new access link!"),i(!0)}catch(c){console.error("Error:",c),ee.error("Something went wrong. Please try again.")}finally{n(!1)}};return a?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-sm text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Xp,{className:"w-6 h-6 text-green-500"})}),s.jsx("h1",{className:"text-2xl font-medium mb-2",children:"Check Your Email"}),s.jsx("p",{className:"text-muted-foreground text-sm mb-8",children:"If an account exists with that email, we've sent a new access link. Check your inbox (and spam folder)."}),s.jsx(Ml,{to:"/portal/login",children:s.jsxs(ze,{variant:"outline",className:"rounded-xl",children:[s.jsx(ho,{className:"w-4 h-4 mr-2"}),"Back to login"]})})]})}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-sm",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-2xl font-medium mb-2",children:"Forgot Your PIN?"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Enter your email and we'll send you a new access link"})]}),s.jsxs("form",{onSubmit:o,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"email",children:"Email"}),s.jsx($r,{id:"email",type:"email",placeholder:"you@example.com",value:e,onChange:l=>t(l.target.value),className:"bg-transparent border-border",autoComplete:"email"})]}),s.jsxs(ze,{type:"submit",disabled:r||!e.trim(),className:"w-full bg-white text-black hover:bg-white/90 font-medium rounded-xl",children:[r?"Sending...":"Send Access Link",s.jsx(Zx,{className:"w-4 h-4 ml-2"})]})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs(Ml,{to:"/portal/login",className:"text-muted-foreground text-sm hover:text-foreground",children:[s.jsx(ho,{className:"w-4 h-4 inline mr-1"}),"Back to login"]})})]})})}function B$e(){return s.jsx(fc,{to:"/portal/meetings",replace:!0})}function xM(){return Sy.map((e,t)=>({id:`default-${t+1}`,question_text:e.question_text,question_type:e.question_type,is_required:e.is_required,placeholder:e.placeholder,question_order:e.question_order,options:[...e.options||[]]}))}function U$e(e){return!e.startsWith("default-")}function q$e(){const e=Xt(),{user:t,loading:r}=Kt(),{portalRole:n,client:a,loading:i,updateClient:o}=Qi(),[l,c]=h.useState(0),[u,d]=h.useState(!1),[f,m]=h.useState([]),[p,v]=h.useState({}),[g,b]=h.useState(!0);h.useEffect(()=>{if(!(r||i)){if(!t){e("/portal/login");return}if(n!=="client"){e("/dashboard");return}a!=null&&a.onboardingCompleted&&e("/portal")}},[t,r,i,n,a,e]),h.useEffect(()=>{a!=null&&a.id&&y()},[a==null?void 0:a.id]);const y=async()=>{if(a){b(!0);try{const{data:N,error:A}=await z.from("client_onboarding_questions").select("*").eq("client_id",a.id).order("question_order",{ascending:!0});if(A)throw A;const P=N&&N.length>0?N.map(D=>({id:D.id,question_text:D.question_text,question_type:RMe(D.question_type),is_required:D.is_required,placeholder:D.placeholder||"",question_order:D.question_order,options:tz(D.options_json)})):xM();m(P);const{data:T,error:L}=await z.from("client_onboarding_responses").select("question_id,response_text").eq("client_id",a.id);if(L)throw L;const U={};(T||[]).forEach(D=>{D.question_id&&(U[D.question_id]=D.response_text||"")}),v(U),c(0)}catch(N){console.error("Error loading client onboarding questions:",N),m(xM()),v({})}finally{b(!1)}}},w=f[l]||null,x=f.length,_=l===x-1,S=h.useMemo(()=>w?w.is_required?String(p[w.id]||"").trim().length>0:!0:!1,[w,p]),k=(N,A)=>{v(P=>({...P,[N]:A}))},C=async()=>{if(a){d(!0);try{const N=f.filter(T=>U$e(T.id)).map(T=>({client_id:a.id,question_id:T.id,workspace_id:a.workspaceId,response_text:p[T.id]||null}));if(N.length>0){const{error:T}=await z.from("client_onboarding_responses").upsert(N,{onConflict:"client_id,question_id"});if(T)throw T}const A={onboardingCompleted:!0};for(const T of f){const L=String(p[T.id]||"").trim(),U=T.question_text.toLowerCase();if(!A.businessName&&U.includes("business")){A.businessName=L||null;continue}if(!A.instagramHandle&&U.includes("instagram")){A.instagramHandle=L||null;continue}if(!A.phone&&T.question_type==="phone"){A.phone=L||null;continue}if(!A.goals&&(T.question_type==="textarea"||U.includes("goal"))){A.goals=L||null;continue}}const{error:P}=await o(A);if(P){ee.error("Failed to save onboarding data");return}ee.success("Onboarding complete"),e("/portal")}catch(N){console.error("Onboarding error:",N),ee.error("Something went wrong while saving your onboarding")}finally{d(!1)}}},j=()=>{if(!w)return null;const N=p[w.id]||"";if(w.question_type==="textarea")return s.jsx(kg,{id:w.id,placeholder:w.placeholder,value:N,onChange:A=>k(w.id,A.target.value),className:"bg-transparent border-border min-h-[120px]"});if(w.question_type==="phone")return s.jsx($r,{id:w.id,type:"tel",placeholder:w.placeholder,value:N,onChange:A=>k(w.id,A.target.value),className:"bg-transparent border-border"});if(w.question_type==="email")return s.jsx($r,{id:w.id,type:"email",placeholder:w.placeholder||"you@example.com",value:N,onChange:A=>k(w.id,A.target.value),className:"bg-transparent border-border"});if(w.question_type==="number")return s.jsx($r,{id:w.id,type:"number",placeholder:w.placeholder||"0",value:N,onChange:A=>k(w.id,A.target.value),className:"bg-transparent border-border"});if(w.question_type==="yes_no")return s.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Yes","No"].map(A=>{const P=N.toLowerCase()===A.toLowerCase();return s.jsx("button",{type:"button",onClick:()=>k(w.id,A),className:`h-11 rounded-2xl border text-sm transition-colors ${P?"bg-white text-black border-white":"bg-transparent text-foreground border-border hover:bg-muted/30"}`,children:A},A)})});if(w.question_type==="select"){const A=w.options.length>0?w.options:["Option 1"];return s.jsxs(Ad,{value:N,onValueChange:P=>k(w.id,P),children:[s.jsx(Dc,{className:"bg-transparent border-border",children:s.jsx(Pd,{placeholder:w.placeholder||"Select an option"})}),s.jsx(Lc,{className:"bg-black border-border",children:A.map(P=>s.jsx(ga,{value:P,children:P},P))})]})}return s.jsx($r,{id:w.id,placeholder:w.placeholder,value:N,onChange:A=>k(w.id,A.target.value),className:"bg-transparent border-border"})};return r||i||g?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}):!a||f.length===0||!w?null:s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsx("div",{className:"flex gap-1 mb-8",children:Array.from({length:x}).map((N,A)=>s.jsx("div",{className:`h-1 flex-1 rounded-full transition-colors ${A<=l?"bg-white":"bg-border"}`},A))}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-2xl font-medium mb-2",children:w.question_text}),w.is_required&&s.jsx("p",{className:"text-muted-foreground text-sm",children:"Required"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:w.id,className:"sr-only",children:w.question_text}),j()]}),s.jsxs("div",{className:"flex gap-3",children:[l>0&&s.jsxs(ze,{variant:"outline",onClick:()=>c(N=>N-1),className:"flex-1 rounded-xl",children:[s.jsx(ho,{className:"w-4 h-4 mr-2"}),"Back"]}),_?s.jsxs(ze,{onClick:C,disabled:u||!S,className:"flex-1 bg-white text-black hover:bg-white/90 font-medium rounded-xl",children:[u?"Completing...":"Complete Setup",s.jsx(Vx,{className:"w-4 h-4 ml-2"})]}):s.jsxs(ze,{onClick:()=>c(N=>N+1),disabled:!S,className:`${l===0?"w-full":"flex-1"} bg-white text-black hover:bg-white/90 font-medium rounded-xl`,children:["Continue",s.jsx(Ll,{className:"w-4 h-4 ml-2"})]})]})]})]})})}function D_({icon:e,label:t,active:r,onClick:n,disabled:a}){return s.jsxs("button",{onClick:n,disabled:a,className:Pe("flex items-center gap-3 w-full px-3 py-2 rounded-lg transition-all duration-200 text-sm","text-muted-foreground hover:text-foreground hover:bg-sidebar-accent",r&&"bg-sidebar-accent text-foreground",a&&"opacity-50 cursor-not-allowed hover:bg-transparent"),children:[s.jsx(e,{className:"w-4 h-4 shrink-0",strokeWidth:2}),s.jsx("span",{children:t})]})}function IE({children:e,client:t}){const r=Xt(),n=Hn(),{signOut:a}=Kt(),i=l=>n.pathname===l,o=async()=>{await a(),r("/portal/login")};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsxs("div",{className:"fixed left-0 top-0 h-screen w-56 bg-sidebar border-r-[0.5px] border-sidebar-border flex flex-col py-4 z-50",children:[s.jsx("div",{className:"px-3 mb-6",children:s.jsxs("div",{className:"px-3 py-2",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:t.businessName||t.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Client Portal"})]})}),s.jsxs("nav",{className:"flex-1 px-3 space-y-1",children:[s.jsx(D_,{icon:mo,label:"Meetings",active:i("/portal/meetings"),onClick:()=>r("/portal/meetings")}),s.jsx(D_,{icon:Kx,label:"Tasks",active:i("/portal/tasks"),onClick:()=>r("/portal/tasks")}),s.jsx(D_,{icon:Xx,label:"Drive",active:i("/portal/files"),onClick:()=>r("/portal/files")})]}),s.jsx("div",{className:"px-3 mt-auto",children:s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsxs("button",{className:"flex items-center gap-3 w-full px-3 py-2 rounded-lg transition-all duration-200 hover:bg-sidebar-accent",children:[s.jsx("div",{className:"w-7 h-7 rounded-full bg-muted flex items-center justify-center shrink-0",children:s.jsx(eb,{className:"w-3.5 h-3.5 text-muted-foreground"})}),s.jsx("span",{className:"text-sm text-muted-foreground truncate",children:t.name})]})}),s.jsx(Hr,{side:"right",align:"end",className:"w-48 bg-popover",children:s.jsxs(wr,{onClick:o,className:"text-red-400 focus:text-red-400 hover:bg-red-500/20 data-[highlighted]:bg-red-500/20 data-[highlighted]:text-red-200",children:[s.jsx(Qx,{className:"w-4 h-4 mr-2"}),"Log out"]})})]})})]}),s.jsx("main",{className:"ml-56 min-h-screen bg-background",children:e})]})}function ME({reason:e}){const t=Xt(),{signOut:r}=Kt(),n=async()=>{await r(),t("/auth")};return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center mx-auto mb-6",children:s.jsx(BY,{className:"w-8 h-8 text-red-400"})}),s.jsx("h1",{className:"text-2xl font-bold mb-3",children:"Access Paused"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:e==="expired"?"Your access period has ended. Please contact the ACQ team to renew your subscription.":"Your access has been paused. Please contact the ACQ team to continue."}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs(ze,{onClick:()=>window.open("mailto:support@theacq.app","_blank"),className:"w-full bg-white text-black hover:bg-white/90 font-semibold",children:[s.jsx(Xp,{className:"w-4 h-4 mr-2"}),"Contact ACQ Team"]}),s.jsxs(ze,{variant:"destructive",onClick:n,className:"w-full",children:[s.jsx(Qx,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})})}function z$e(){return s.jsxs(s.Fragment,{children:[s.jsx($e,{className:"h-9 w-40 rounded-2xl bg-white/10"}),s.jsx($e,{className:"h-4 w-72 rounded-xl bg-white/[0.06] mt-3"}),s.jsx("div",{className:"mt-8 space-y-3",children:Array.from({length:6}).map((e,t)=>s.jsx($e,{className:"h-16 w-full rounded-2xl bg-white/[0.06]"},t))})]})}function RE(){return s.jsx("div",{className:"min-h-screen bg-background",children:s.jsx("div",{className:"p-8",children:s.jsx(z$e,{})})})}function W$e(){const e=Xt(),{user:t,loading:r}=Kt(),{portalRole:n,client:a,loading:i,isAccessBlocked:o,blockReason:l}=Qi(),[c,u]=h.useState([]),[d,f]=h.useState(!0),m=h.useCallback(async()=>{if(a)try{const{data:y,error:w}=await z.from("client_tasks").select("*").eq("client_id",a.id).order("created_at",{ascending:!1});if(w)throw w;u((y||[]).map(DL))}catch(y){console.error("Error fetching tasks:",y)}finally{f(!1)}},[a]);h.useEffect(()=>{if(!(r||i)){if(!t){e("/portal/login");return}if(n!=="client"){e("/dashboard");return}if(a&&!a.onboardingCompleted){e("/portal/onboarding");return}m()}},[t,r,i,n,a,e,m]),h.useEffect(()=>{if(!(a!=null&&a.id))return;const y=z.channel(`portal-tasks-${a.id}`).on("postgres_changes",{event:"*",schema:"public",table:"client_tasks",filter:`client_id=eq.${a.id}`},()=>{m()}).subscribe();return()=>{z.removeChannel(y)}},[a==null?void 0:a.id,m]),h.useEffect(()=>{const y=()=>{document.visibilityState==="visible"&&m()},w=()=>void m();return document.addEventListener("visibilitychange",y),window.addEventListener("online",w),()=>{document.removeEventListener("visibilitychange",y),window.removeEventListener("online",w)}},[m]);const p=async(y,w)=>{try{const x={status:w};w==="completed"&&(x.completed_at=new Date().toISOString());const{error:_}=await z.from("client_tasks").update(x).eq("id",y.id);if(_)throw _;ee.success(`Task marked as ${w.replace("_"," ")}`),m()}catch(x){console.error("Error updating task:",x),ee.error("Failed to update task")}},v=y=>{switch(y){case"completed":return s.jsxs(Zt,{variant:"secondary",className:"bg-success/20 text-success border-0",children:[s.jsx(Ha,{className:"w-3 h-3 mr-1"}),"Completed"]});case"in_progress":return s.jsxs(Zt,{variant:"secondary",className:"bg-blue-500/20 text-blue-400 border-0",children:[s.jsx(Yd,{className:"w-3 h-3 mr-1"}),"In Progress"]});default:return s.jsxs(Zt,{variant:"secondary",className:"bg-muted text-muted-foreground border-0",children:[s.jsx(Gd,{className:"w-3 h-3 mr-1"}),"Pending"]})}};if(r||i)return s.jsx(RE,{});if(o)return s.jsx(ME,{reason:l});if(!a)return null;const g=[...c].sort((y,w)=>{const x={pending:0,in_progress:1,completed:2};return x[y.status]-x[w.status]}),b=c.filter(y=>y.status==="pending").length;return s.jsx(IE,{client:a,children:s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-[36px] font-bold mb-2",children:"Your Tasks"}),s.jsx("p",{className:"text-muted-foreground",children:b>0?`${b} task${b!==1?"s":""} pending`:"All caught up!"})]}),d?s.jsx("div",{className:"space-y-3",children:Array.from({length:8}).map((y,w)=>s.jsx("div",{className:"border border-border rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx($e,{className:"h-4 w-64 rounded-xl bg-white/[0.10]"}),s.jsx($e,{className:"h-3 w-80 rounded-xl bg-white/[0.06] mt-2"}),s.jsx($e,{className:"h-3 w-44 rounded-xl bg-white/[0.06] mt-3"})]}),s.jsx($e,{className:"h-8 w-8 rounded-full bg-white/[0.06]"})]})},w))}):c.length===0?s.jsxs("div",{className:"border border-border rounded-lg p-8 text-center",children:[s.jsx(Kx,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"No tasks assigned yet"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Your coach will add tasks here when ready"})]}):s.jsx("div",{className:"space-y-3",children:g.map(y=>s.jsx("div",{className:`border border-border rounded-lg p-4 hover:bg-sidebar-accent transition-colors ${y.status==="completed"?"opacity-60":""}`,children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h4",{className:`font-medium ${y.status==="completed"?"line-through":""}`,children:y.title}),v(y.status)]}),y.description&&s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:y.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[y.dueDate&&s.jsxs("span",{children:["Due: ",Lt(y.dueDate,"MMM d, yyyy")]}),y.completedAt&&s.jsxs("span",{children:["Completed: ",Lt(y.completedAt,"MMM d, yyyy")]})]})]}),y.status!=="completed"&&s.jsx("button",{onClick:()=>p(y,"completed"),className:"shrink-0 w-8 h-8 rounded-full border-2 border-border hover:border-border hover:bg-success/10 transition-colors flex items-center justify-center",title:"Mark as complete",children:s.jsx(Ha,{className:"w-4 h-4 text-muted-foreground hover:text-success"})})]})},y.id))})]})})}function H$e(){const e=Xt(),{user:t,loading:r}=Kt(),{portalRole:n,client:a,loading:i,isAccessBlocked:o,blockReason:l}=Qi();return h.useEffect(()=>{if(!(r||i)){if(!t){e("/portal/login");return}if(n!=="client"){e("/dashboard");return}a&&!a.onboardingCompleted&&e("/portal/onboarding")}},[t,r,i,n,a,e]),r||i?s.jsx(RE,{}):o?s.jsx(ME,{reason:l}):a?s.jsx(IE,{client:a,children:s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-[36px] font-bold mb-2",children:"Drive"}),s.jsx("p",{className:"text-muted-foreground",children:"Shared files and folders synced with your coach."})]}),s.jsx(Nz,{client:a})]})}):null}function V$e(){const e=Xt(),{user:t,loading:r}=Kt(),{portalRole:n,client:a,loading:i,isAccessBlocked:o,blockReason:l}=Qi(),[c,u]=h.useState([]),[d,f]=h.useState(!0),[m,p]=h.useState("upcoming"),v=h.useCallback(async()=>{if(a)try{const{data:b,error:y}=await z.from("meetings").select("id,title,start_time,end_time,location,meeting_link,status,outcome_status").eq("client_id",a.id).not("google_event_id","is",null).not("meeting_link","is",null).order("start_time",{ascending:!0});if(y)throw y;u((b||[]).map(w=>({id:w.id,title:w.title||"Meeting",startTime:new Date(w.start_time),endTime:new Date(w.end_time),location:w.location||null,meetingLink:w.meeting_link||null,status:w.status||"scheduled",outcomeStatus:w.outcome_status||"pending"})))}catch(b){console.error("Error fetching portal meetings:",b)}finally{f(!1)}},[a]);h.useEffect(()=>{if(!(r||i)){if(!t){e("/portal/login");return}if(n!=="client"){e("/dashboard");return}if(a&&!a.onboardingCompleted){e("/portal/onboarding");return}v()}},[t,r,i,n,a,e,v]),h.useEffect(()=>{if(!(a!=null&&a.id))return;const b=z.channel(`portal-meetings-${a.id}`).on("postgres_changes",{event:"*",schema:"public",table:"meetings",filter:`client_id=eq.${a.id}`},()=>{v()}).subscribe();return()=>{z.removeChannel(b)}},[a==null?void 0:a.id,v]),h.useEffect(()=>{const b=()=>{document.visibilityState==="visible"&&v()},y=()=>void v();return document.addEventListener("visibilitychange",b),window.addEventListener("online",y),()=>{document.removeEventListener("visibilitychange",b),window.removeEventListener("online",y)}},[v]);const g=h.useMemo(()=>{const b=new Date;return m==="upcoming"?c.filter(y=>y.startTime>=b&&y.status!=="cancelled"):c.filter(y=>y.startTime<b||y.status==="cancelled").sort((y,w)=>w.startTime.getTime()-y.startTime.getTime())},[m,c]);return r||i?s.jsx(RE,{}):o?s.jsx(ME,{reason:l}):a?s.jsx(IE,{client:a,children:s.jsxs("div",{className:"p-8",children:[s.jsx("div",{className:"mb-8 flex items-start justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-[36px] font-bold mb-2",children:"Meetings"}),s.jsx("p",{className:"text-muted-foreground",children:c.length>0?`${c.length} total meeting${c.length!==1?"s":""}`:"No meetings scheduled yet"})]})}),s.jsx("div",{className:"mb-5 flex items-center gap-2",children:["upcoming","past"].map(b=>s.jsx("button",{type:"button",onClick:()=>p(b),className:`h-8 px-3.5 rounded-xl transition-colors text-[13px] font-semibold tracking-[0.02em] ${m===b?"bg-[#1b1f21] text-white":"bg-transparent text-[#a1a4a5]"}`,children:b==="upcoming"?"Upcoming":"Past"},b))}),d?s.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((b,y)=>s.jsx("div",{className:"border border-border rounded-2xl p-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx($e,{className:"h-4 w-56 rounded-xl bg-white/[0.10]"}),s.jsx($e,{className:"h-3 w-72 rounded-xl bg-white/[0.06] mt-2"}),s.jsx($e,{className:"h-3 w-44 rounded-xl bg-white/[0.06] mt-2"})]}),s.jsx($e,{className:"h-8 w-20 rounded-xl bg-white/[0.06]"})]})},y))}):g.length===0?s.jsxs("div",{className:"border border-border rounded-lg p-8 text-center",children:[s.jsx(mo,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:m==="upcoming"?"No upcoming meetings":"No past meetings"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Meetings created by your coach for this client will appear here."})]}):s.jsx("div",{className:"space-y-3",children:g.map(b=>{const y=b.status==="cancelled"||b.outcomeStatus==="cancelled",w=b.outcomeStatus==="completed",x=b.outcomeStatus==="no_show",_=b.outcomeStatus==="rescheduled";return s.jsx("div",{className:"border border-border rounded-2xl p-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:`font-semibold ${y?"line-through text-muted-foreground":""}`,children:b.title}),w?s.jsx(Zt,{className:"bg-[#133a2a] text-[#86efac] border-0 rounded-full px-2 py-0.5",children:"Completed"}):x?s.jsx(Zt,{className:"bg-[#3c2616] text-[#fb923c] border-0 rounded-full px-2 py-0.5",children:"No show"}):_?s.jsx(Zt,{className:"bg-[#1f2f3c] text-[#7dd3fc] border-0 rounded-full px-2 py-0.5",children:"Rescheduled"}):null,y?s.jsx(Zt,{className:"bg-[#3d1f1f] text-[#f87171] border-0 rounded-full px-2 py-0.5",children:"Cancelled"}):null]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[Lt(b.startTime,"EEE, MMM d  h:mm a")," - ",Lt(b.endTime,"h:mm a")]}),b.location&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:b.location})]}),!y&&b.meetingLink&&s.jsxs("a",{href:b.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs px-3 py-1.5 rounded-xl border border-border hover:bg-sidebar-accent transition-colors",children:["Join",s.jsx(Yx,{className:"w-3.5 h-3.5"})]})]})},b.id)})})]})}):null}function K$e(){const[e]=Vf(),t=Xt(),{user:r,profile:n}=Kt(),[a,i]=h.useState(!0),[o,l]=h.useState(null),c=e.get("clientId");return h.useEffect(()=>{(async()=>{if(!r){const{data:{session:d}}=await z.auth.getSession();if(!d){const f=new URLSearchParams(window.location.hash.substring(1)),m=f.get("access_token"),p=f.get("refresh_token");if(m&&p){const{error:v}=await z.auth.setSession({access_token:m,refresh_token:p});if(v){console.error("Error setting session:",v),l("Failed to authenticate. Please try the link again."),i(!1);return}}else{l("Invalid magic link. Please request a new one."),i(!1);return}}}if(r&&c){const{data:d}=await z.from("portal_roles").select("*").eq("user_id",r.id).eq("role","client").maybeSingle();if(d){const{data:f}=await z.from("clients").select("onboarding_completed").eq("id",c).maybeSingle();f!=null&&f.onboarding_completed?(ee.success("Welcome back!"),t("/portal")):(ee.success("Welcome! Let's get you set up."),t("/portal/onboarding"))}else ee.success("Welcome!"),t("/portal")}else r&&t("/portal");i(!1)})()},[r,c,t]),o?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs("div",{className:"text-center max-w-sm",children:[s.jsx("h1",{className:"text-xl font-medium mb-4",children:"Link Expired"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:o}),s.jsx("button",{onClick:()=>t("/portal/login"),className:"px-6 py-3 bg-white text-black rounded-xl font-medium hover:bg-white/90 transition-colors",children:"Go to Login"})]})}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Signing you in..."})]})})}function G$e(){return{connectGoogleCalendar:h.useCallback(async()=>{const{error:t}=await z.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/calendar-callback`,scopes:"https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events",queryParams:{access_type:"offline",prompt:"consent",include_granted_scopes:"true"}}});return{error:t}},[])}}function Y$e(){const{user:e}=Kt(),{workspace:t,userRole:r}=on(),[n,a]=h.useState([]),[i,o]=h.useState(!0),[l,c]=h.useState(!1),[u,d]=h.useState(!1),f=h.useCallback(async()=>{if(!(t!=null&&t.id)){a([]),o(!1);return}try{let x=z.from("meetings").select("*").eq("workspace_id",t.id).not("google_event_id","is",null).not("meeting_link","is",null);r==="setter"&&(e!=null&&e.id)&&(x=x.or(`assigned_to.eq.${e.id},created_by.eq.${e.id}`));const{data:_,error:S}=await x.order("start_time",{ascending:!0});if(S){console.error("Error fetching meetings:",S);return}a(_||[])}catch(x){console.error("Error:",x)}finally{o(!1)}},[t==null?void 0:t.id,r,e==null?void 0:e.id]);h.useEffect(()=>{f()},[f]);const m=h.useCallback(async x=>{const _=!!(x!=null&&x.silent);if(!(t!=null&&t.id))return _||ee.error("No workspace selected"),!1;c(!0);try{const{data:{session:S}}=await z.auth.getSession();if(!S)return _||ee.error("Please sign in again"),c(!1),!1;const k=await fetch("https://efpagcbqixencqosalgr.supabase.co/functions/v1/google-calendar",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S.access_token}`},body:JSON.stringify({action:"sync-workspace-events",workspaceId:t.id,providerToken:S.provider_token,providerRefreshToken:S.provider_refresh_token,timeMin:x==null?void 0:x.timeMin,timeMax:x==null?void 0:x.timeMax})}),C=await k.json().catch(()=>({}));return!k.ok||(C==null?void 0:C.error)==="token_expired"?((C==null?void 0:C.error)==="token_expired"?(d(!0),_||ee.error("Google Calendar needs a reconnect to continue syncing.")):_||ee.error(String((C==null?void 0:C.error)||"Failed to sync meetings")),c(!1),!1):(d(!1),await f(),!0)}catch(S){return console.error("Sync error:",S),_||ee.error("An error occurred during sync"),!1}finally{c(!1)}},[t==null?void 0:t.id,f]);h.useEffect(()=>{if(!(t!=null&&t.id)||r==="setter")return;let x=!1;const _=async()=>{x||await m({silent:!0})};_();const S=window.setInterval(()=>{_()},1e5),k=()=>{document.visibilityState==="visible"&&_()},C=()=>{_()};return document.addEventListener("visibilitychange",k),window.addEventListener("online",C),()=>{x=!0,window.clearInterval(S),document.removeEventListener("visibilitychange",k),window.removeEventListener("online",C)}},[t==null?void 0:t.id,r,m]);const p=h.useCallback(async x=>{var _;if(!(!(t!=null&&t.id)||!x))try{const{data:S,error:k}=await z.from("instagram_tags").select("id").eq("workspace_id",t.id).ilike("name","Call booked").limit(1);if(k){console.warn("Failed to load Call booked tag:",k);return}let C=Array.isArray(S)&&((_=S[0])!=null&&_.id)?String(S[0].id):"";if(!C){const{data:N,error:A}=await z.from("instagram_tags").insert({workspace_id:t.id,name:"Call booked",color:"#9ca3af",icon:"phone-call",prompt:"A call has been booked with this lead.",created_by:(e==null?void 0:e.id)||null}).select("id").single();if(A){console.warn("Failed creating Call booked tag:",A);return}C=String((N==null?void 0:N.id)||"")}if(!C)return;const{error:j}=await z.from("instagram_conversation_tags").upsert({workspace_id:t.id,conversation_id:x,tag_id:C,source:"manual",created_by:(e==null?void 0:e.id)||null},{onConflict:"workspace_id,conversation_id,tag_id"});j&&console.warn("Failed to map Call booked tag to conversation:",j)}catch(S){console.warn("Call booked tag automation failed:",S)}},[t==null?void 0:t.id,e==null?void 0:e.id]),v=h.useCallback(async x=>{if(!(t!=null&&t.id))return ee.error("No workspace selected"),null;try{const{data:{user:_}}=await z.auth.getUser();if(!_)return ee.error("Please sign in"),null;let S=null,k=x.meeting_link||null,C=null;if(x.sync_to_google||x.add_google_meet)try{const{data:{session:P}}=await z.auth.getSession();if(P){const T=await fetch("https://efpagcbqixencqosalgr.supabase.co/functions/v1/google-calendar",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${P.access_token}`},body:JSON.stringify({action:"create-event",workspaceId:t.id,providerToken:P.provider_token,providerRefreshToken:P.provider_refresh_token,addMeet:x.add_google_meet,attendees:x.attendee_emails||[],event:{summary:x.title,description:x.description,location:x.location,start:{dateTime:x.start_time,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},end:{dateTime:x.end_time,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}}})});if(T.ok){const L=await T.json();S=L.googleEventId||null,L.meetLink&&(k=L.meetLink)}else{const L=await T.json().catch(()=>({}));C=String((L==null?void 0:L.error)||(L==null?void 0:L.message)||"").trim()||`Google Calendar sync failed (${T.status})`,console.warn("Failed to sync to Google Calendar:",C)}}}catch(P){C="Google Calendar sync failed",console.warn("Google Calendar sync failed:",P)}if((x.sync_to_google||x.add_google_meet)&&!S)return ee.error(C?`Google Calendar sync failed: ${C}`:"Google Calendar sync failed. Reconnect Google Calendar to sync meetings."),null;const{data:j,error:N}=await z.from("meetings").insert({workspace_id:t.id,created_by:_.id,title:x.title,description:x.description||null,start_time:x.start_time,end_time:x.end_time,client_id:x.client_id||null,conversation_id:x.conversation_id||null,assigned_to:x.assigned_to||null,location:x.location||null,meeting_link:k,google_event_id:S,outcome_status:"pending"}).select("*").single();if(N)return console.error("Error creating meeting:",N),ee.error(String((N==null?void 0:N.message)||"Failed to create meeting")),null;const A=j;return a(P=>[...P,A].sort((T,L)=>new Date(T.start_time).getTime()-new Date(L.start_time).getTime())),A.conversation_id&&await p(A.conversation_id),ee.success("Meeting created and synced to Google Calendar"),A}catch(_){return console.error("Error:",_),ee.error("An error occurred"),null}},[t==null?void 0:t.id,p]),g=h.useCallback(async(x,_,S,k=!0)=>{if(!(t!=null&&t.id))return!1;try{const{error:C}=await z.rpc("apply_meeting_outcome",{p_workspace_id:t.id,p_meeting_id:x,p_outcome:_,p_notes:S||null,p_create_followup:k});if(C)throw C;return await f(),ee.success("Meeting outcome saved"),!0}catch(C){return console.error("Failed to apply meeting outcome:",C),ee.error(String((C==null?void 0:C.message)||"Failed to save meeting outcome")),!1}},[t==null?void 0:t.id,f]),b=h.useCallback(async(x,_)=>{const S=new Date().toISOString(),k=_==="24h"?{reminder_24h_sent_at:S}:{reminder_1h_sent_at:S},{error:C}=await z.from("meetings").update(k).eq("id",x);return C?(console.warn("Failed to mark meeting reminder sent:",C),!1):(a(j=>j.map(N=>N.id===x?{...N,...k}:N)),!0)},[]),y=h.useCallback(async x=>{try{const _=n.find(k=>k.id===x);if(_!=null&&_.google_event_id&&(t!=null&&t.id))try{const{data:{session:k}}=await z.auth.getSession();k&&await fetch("https://efpagcbqixencqosalgr.supabase.co/functions/v1/google-calendar",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k.access_token}`},body:JSON.stringify({action:"delete-event",workspaceId:t.id,providerToken:k.provider_token,providerRefreshToken:k.provider_refresh_token,googleEventId:_.google_event_id})})}catch(k){console.warn("Failed to delete from Google Calendar:",k)}const{error:S}=await z.from("meetings").delete().eq("id",x);return S?(console.error("Error deleting meeting:",S),ee.error("Failed to delete meeting"),!1):(a(k=>k.filter(C=>C.id!==x)),ee.success("Meeting deleted"),!0)}catch(_){return console.error("Error:",_),ee.error("An error occurred"),!1}},[n,t==null?void 0:t.id]),w=h.useCallback(async x=>await g(x,"cancelled",void 0,!1)&&n.find(k=>k.id===x)||null,[g,n]);return{meetings:n,isLoading:i,isSyncing:l,needsCalendarReconnect:u,createMeeting:v,deleteMeeting:y,cancelMeeting:w,applyOutcome:g,markReminderSent:b,syncFromGoogleCalendar:m,refetch:f}}function X$e({clients:e,leads:t=[],teamMembers:r=[],onCreateMeeting:n,trigger:a,defaultDate:i,defaultConversationId:o,open:l,onOpenChange:c,isCalendarConnected:u=!1}){const[d,f]=h.useState(!1),m=l??d,p=c??f,[v,g]=h.useState(!1),[b,y]=h.useState(i),[w,x]=h.useState(""),[_,S]=h.useState({title:"",description:"",startTime:"09:00",endTime:"10:00",clientId:"",conversationId:"",assignedTo:""});h.useEffect(()=>{i&&m&&y(i)},[i,m]),h.useEffect(()=>{!m||!o||S(j=>{const N=t.find(A=>A.conversation_id===o);return j.conversationId===o?!j.assignedTo&&(N!=null&&N.assigned_user_id)?{...j,assignedTo:N.assigned_user_id}:j:{...j,conversationId:o,assignedTo:(N==null?void 0:N.assigned_user_id)||j.assignedTo}})},[m,o,t]);const k=t.filter(j=>{const N=w.trim().toLowerCase();if(!N)return!0;const A=String(j.peer_name||"").toLowerCase(),P=String(j.peer_username||"").toLowerCase();return A.includes(N)||P.includes(N)}),C=async j=>{if(j.preventDefault(),!(!_.title||!b||!_.startTime||!_.endTime)){g(!0);try{const N=Lt(b,"yyyy-MM-dd"),A=`${N}T${_.startTime}:00`,P=`${N}T${_.endTime}:00`,T=e.find(D=>D.id===_.clientId),L=[];T!=null&&T.email&&L.push(T.email),await n({title:_.title,description:_.description||void 0,start_time:new Date(A).toISOString(),end_time:new Date(P).toISOString(),client_id:_.clientId==="none"?null:_.clientId||null,assigned_to:_.assignedTo==="none"?null:_.assignedTo||null,conversation_id:_.conversationId==="none"?null:_.conversationId||null,add_google_meet:!0,sync_to_google:!0,attendee_emails:L})&&(p(!1),y(void 0),S({title:"",description:"",startTime:"09:00",endTime:"10:00",clientId:"",conversationId:"",assignedTo:""}),x(""))}finally{g(!1)}}};return s.jsxs(Gi,{open:m,onOpenChange:p,children:[s.jsx(E7,{asChild:!0,children:a||s.jsxs(ze,{className:"bg-white text-black hover:bg-white/90 shadow-none",children:[s.jsx(kl,{className:"w-4 h-4"}),"New Meeting"]})}),s.jsxs(yi,{className:"sm:max-w-3xl max-h-[90vh] overflow-y-auto bg-black border-border rounded-3xl",children:[s.jsx(xi,{children:s.jsxs(bi,{className:"flex items-center gap-2 font-medium",children:[s.jsx(mo,{className:"w-5 h-5"}),"Schedule Meeting"]})}),s.jsxs("form",{onSubmit:C,className:"space-y-5",children:[s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"title",className:"text-white/60 text-xs uppercase tracking-wider",children:"Meeting Title *"}),s.jsx("input",{id:"title",value:_.title,onChange:j=>S(N=>({...N,title:j.target.value})),placeholder:"Meeting title",required:!0,className:"w-full px-4 py-2.5 bg-[#151618] border border-border rounded-2xl text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-border transition-colors"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"client",className:"text-white/60 text-xs uppercase tracking-wider",children:"Assign to (Client / Lead)"}),s.jsxs(Ad,{value:_.clientId,onValueChange:j=>S(N=>({...N,clientId:j})),children:[s.jsx(Dc,{className:"bg-[#151618] border-border rounded-2xl h-10",children:s.jsx(Pd,{placeholder:"Select from clients"})}),s.jsxs(Lc,{className:"bg-[#151618] border-border rounded-xl",children:[s.jsx(ga,{value:"none",children:"No lead"}),e.map(j=>s.jsx(ga,{value:j.id,children:j.name},j.id))]})]}),s.jsx("p",{className:"text-xs text-white/30",children:"Leads available once Meta API connected"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"lead-search",className:"text-white/60 text-xs uppercase tracking-wider",children:"Linked lead conversation"}),s.jsx("input",{id:"lead-search",value:w,onChange:j=>x(j.target.value),placeholder:"Search lead by name or @handle",className:"w-full px-4 py-2.5 bg-[#151618] border border-border rounded-2xl text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-border transition-colors"}),s.jsxs(Ad,{value:_.conversationId,onValueChange:j=>{S(N=>{const A=t.find(P=>P.conversation_id===j);return{...N,conversationId:j,assignedTo:(A==null?void 0:A.assigned_user_id)||N.assignedTo}})},children:[s.jsx(Dc,{className:"bg-[#151618] border-border rounded-2xl h-10",children:s.jsx(Pd,{placeholder:"Link a lead conversation (optional)"})}),s.jsxs(Lc,{className:"bg-[#151618] border-border rounded-xl max-h-64",children:[s.jsx(ga,{value:"none",children:"No linked lead"}),k.map(j=>{const N=j.peer_name||(j.peer_username?`@${j.peer_username}`:j.instagram_user_id),A=j.peer_username?`@${j.peer_username}`:j.instagram_user_id;return s.jsxs(ga,{value:j.conversation_id,children:[N,"  ",A]},j.conversation_id)})]})]}),s.jsx("p",{className:"text-xs text-white/30",children:"Linking enables reminders, outcomes, and follow-up automation from inbox data."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"assignedTo",className:"text-white/60 text-xs uppercase tracking-wider",children:"Assign to (Closer)"}),s.jsxs(Ad,{value:_.assignedTo,onValueChange:j=>S(N=>({...N,assignedTo:j})),children:[s.jsx(Dc,{className:"bg-[#151618] border-border rounded-2xl h-10",children:s.jsx(Pd,{placeholder:"Select closer"})}),s.jsxs(Lc,{className:"bg-[#151618] border-border rounded-xl",children:[s.jsx(ga,{value:"none",children:"Unassigned"}),r.map(j=>s.jsxs(ga,{value:j.user_id,children:[j.display_name||"Team Member"," ",j.role==="owner"&&"(Owner)"]},j.id))]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"startTime",className:"text-white/60 text-xs uppercase tracking-wider",children:"Start Time *"}),s.jsx("input",{id:"startTime",type:"time",value:_.startTime,onChange:j=>S(N=>({...N,startTime:j.target.value})),required:!0,className:"time-input w-full px-4 py-2.5 bg-[#151618] border border-border rounded-2xl text-sm text-foreground focus:outline-none focus:border-border transition-colors"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"endTime",className:"text-white/60 text-xs uppercase tracking-wider",children:"End Time *"}),s.jsx("input",{id:"endTime",type:"time",value:_.endTime,onChange:j=>S(N=>({...N,endTime:j.target.value})),required:!0,className:"time-input w-full px-4 py-2.5 bg-[#151618] border border-border rounded-2xl text-sm text-foreground focus:outline-none focus:border-border transition-colors"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"description",className:"text-white/60 text-xs uppercase tracking-wider",children:"Description"}),s.jsx(kg,{id:"description",value:_.description,onChange:j=>S(N=>({...N,description:j.target.value})),placeholder:"Meeting agenda, notes...",rows:3,className:"bg-[#151618] border-border rounded-2xl resize-none"})]})]}),s.jsxs("div",{className:"w-[300px] flex flex-col",children:[s.jsx(Ut,{className:"text-white/60 text-xs uppercase tracking-wider mb-2",children:"Date *"}),s.jsx("div",{className:"bg-black border border-border rounded-2xl p-2 flex-1",children:s.jsx(Pw,{mode:"single",selected:b,onSelect:y,className:"pointer-events-auto w-full [&_.rdp-months]:w-full [&_.rdp-month]:w-full [&_.rdp-table]:w-full [&_.rdp-head_th]:w-[40px] [&_.rdp-cell]:w-[40px] [&_.rdp-day]:w-[36px] [&_.rdp-day]:h-[36px]"})})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx(ze,{type:"button",variant:"outline",onClick:()=>p(!1),className:"border-border hover:bg-[#1a1a1a] rounded-xl font-medium",children:"Cancel"}),s.jsx(ze,{type:"submit",disabled:v,className:"bg-white text-black hover:bg-white/90 font-semibold border-0 shadow-none rounded-xl",children:v?s.jsxs(s.Fragment,{children:[s.jsx(bn,{className:"w-4 h-4 animate-spin mr-2"}),"Creating..."]}):"Create Meeting"})]})]})]})]})}function Q$e({meeting:e,onCancel:t,onDelete:r,onClick:n,readOnly:a=!1}){var v;const i=new Date(e.start_time),o=new Date(e.end_time),l=e.outcome_status==="completed",c=e.outcome_status==="no_show",u=e.outcome_status==="rescheduled",d=e.status==="cancelled"||e.outcome_status==="cancelled",f=Lt(i,"EEEE d MMMM yyyy"),m=()=>d?s.jsx(Zt,{variant:"destructive",className:"text-xs",children:"Cancelled"}):c?s.jsx(Zt,{className:"text-xs bg-[#3c2616] text-[#fb923c] border-0",children:"No show"}):u?s.jsx(Zt,{className:"text-xs bg-[#1f2f3c] text-[#7dd3fc] border-0",children:"Rescheduled"}):l?s.jsx(Zt,{variant:"secondary",className:"text-xs",children:"Completed"}):E5e(o)?s.jsx(Zt,{className:"text-xs bg-[#2d2415] text-[#fbbf24] border-0",children:"Needs outcome"}):K7(i)?s.jsx(Zt,{className:"text-xs bg-white/10 text-white border-border",children:"Today"}):null,p=g=>{g.target.closest('button, a, [role="menuitem"]')||n==null||n(e)};return s.jsxs("div",{onClick:p,className:`relative w-full rounded-2xl p-6 overflow-hidden cursor-pointer transition-colors duration-200 hover:bg-white/[0.03] bg-black ${d?"opacity-60":""}`,children:[s.jsx("div",{className:"absolute inset-0 rounded-2xl pointer-events-none",style:{background:`linear-gradient(155deg, 
            rgba(255, 255, 255, 0.16) 0%, 
            rgba(255, 255, 255, 0.10) 20%, 
            rgba(255, 255, 255, 0.06) 40%, 
            rgba(255, 255, 255, 0.035) 60%,
            rgba(255, 255, 255, 0.02) 80%,
            rgba(255, 255, 255, 0.008) 95%,
            transparent 100%
          )`,padding:"1px",WebkitMask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",WebkitMaskComposite:"xor",maskComposite:"exclude"}}),s.jsxs("div",{className:"relative z-10 flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:`text-xl text-white ${d?"line-through opacity-50":""}`,style:{fontFamily:"'Inter', sans-serif",fontWeight:500,letterSpacing:"0.005em"},children:((v=e.client)==null?void 0:v.name)||e.title}),m()]}),s.jsx("p",{className:"text-xs text-white/35 mb-3",style:{fontFamily:"'Inter', sans-serif"},children:f}),e.client&&e.title!==e.client.name&&s.jsx("p",{className:"text-white/60 text-sm mb-3",style:{fontFamily:"'Inter', sans-serif"},children:e.title}),s.jsxs("div",{className:"flex flex-wrap items-center gap-x-5 gap-y-2 text-sm text-white/50",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Yd,{className:"w-4 h-4",strokeWidth:2}),Lt(i,"h:mm a")," - ",Lt(o,"h:mm a")]}),e.location&&s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(l3,{className:"w-4 h-4",strokeWidth:2}),e.location]}),e.meeting_link&&s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(dN,{className:"w-4 h-4",strokeWidth:2}),"Google Meet"]})]}),e.description&&s.jsx("p",{className:"text-sm text-white/40 mt-4 line-clamp-2",style:{fontFamily:"'Inter', sans-serif"},children:e.description})]}),a?null:s.jsx("div",{className:"flex items-center gap-2 shrink-0",children:s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsx(ze,{variant:"ghost",size:"icon",className:"h-8 w-8 text-white/40 hover:text-white hover:bg-white/10",onClick:g=>g.stopPropagation(),children:s.jsx(c3,{className:"w-4 h-4"})})}),s.jsxs(Hr,{align:"end",className:"rounded-xl",children:[!d&&!l&&s.jsxs(wr,{onClick:()=>t(e.id),className:"rounded-lg",children:[s.jsx(fN,{className:"w-4 h-4 mr-2"}),"Cancel Meeting"]}),s.jsxs(wr,{onClick:()=>r(e.id),className:"text-destructive focus:text-destructive rounded-lg",children:[s.jsx(Va,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]}),e.meeting_link&&!d&&s.jsx("div",{className:"relative z-10 mt-5",children:s.jsx(ze,{size:"sm",className:"w-full rounded-xl bg-white/5 text-white transition-all duration-300 hover:bg-white hover:text-black border-0 shadow-none",style:{fontFamily:"'Inter', sans-serif",fontWeight:500},asChild:!0,children:s.jsxs("a",{href:e.meeting_link,target:"_blank",rel:"noopener noreferrer",onClick:g=>g.stopPropagation(),children:[s.jsx(Yx,{className:"w-4 h-4 mr-1.5"}),"Join"]})})})]})}function J$e({meetings:e,onCancel:t,onDelete:r,onMeetingClick:n,filter:a,readOnly:i=!1}){const o=h.useMemo(()=>{const l=new Date,c=e.filter(d=>!!d.google_event_id&&!!d.meeting_link);let u=c;return a==="upcoming"?u=c.filter(d=>new Date(d.end_time)>=l&&d.status!=="cancelled"):a==="past"&&(u=c.filter(d=>new Date(d.end_time)<l||d.status==="cancelled")),u.sort((d,f)=>{const m=new Date(d.start_time).getTime(),p=new Date(f.start_time).getTime();return a==="past"?p-m:m-p})},[e,a]);return o.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:s.jsx(mo,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("h3",{className:"font-medium text-lg mb-1",children:"No meetings"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:a==="upcoming"?"No upcoming meetings scheduled":a==="past"?"No past meetings":"No meetings yet. Create your first meeting!"})]}):s.jsx("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:grid-cols-3",children:o.map(l=>s.jsx(Q$e,{meeting:l,onCancel:t,onDelete:r,onClick:n,readOnly:i},l.id))})}const Z$e=iE,eDe=sE,Az=h.forwardRef(({className:e,...t},r)=>s.jsx(yg,{className:Pe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));Az.displayName=yg.displayName;const tDe=Lf("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b-[0.5px] data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t-[0.5px] data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r-[0.5px] data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l-[0.5px] data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Pz=h.forwardRef(({side:e="right",className:t,children:r,...n},a)=>s.jsxs(eDe,{children:[s.jsx(Az,{}),s.jsxs(xg,{ref:a,className:Pe(tDe({side:e}),t),...n,children:[r,s.jsxs(gw,{className:"absolute right-4 top-4 p-1 text-white/60 hover:text-white transition-colors focus:outline-none disabled:pointer-events-none",children:[s.jsx(Bf,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Pz.displayName=xg.displayName;const Tz=({className:e,...t})=>s.jsx("div",{className:Pe("flex flex-col space-y-2 text-center sm:text-left",e),...t});Tz.displayName="SheetHeader";const Oz=h.forwardRef(({className:e,...t},r)=>s.jsx(bg,{ref:r,className:Pe("text-lg font-semibold text-foreground",e),...t}));Oz.displayName=bg.displayName;const rDe=h.forwardRef(({className:e,...t},r)=>s.jsx(wg,{ref:r,className:Pe("text-sm text-muted-foreground",e),...t}));rDe.displayName=wg.displayName;var nDe="Separator",bM="horizontal",aDe=["horizontal","vertical"],Iz=h.forwardRef((e,t)=>{const{decorative:r,orientation:n=bM,...a}=e,i=iDe(n)?n:bM,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(ot.div,{"data-orientation":i,...l,...a,ref:t})});Iz.displayName=nDe;function iDe(e){return aDe.includes(e)}var Mz=Iz;const Zj=h.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},a)=>s.jsx(Mz,{ref:a,decorative:r,orientation:t,className:Pe("shrink-0 bg-border",t==="horizontal"?"h-[0.5px] w-full":"h-full w-[0.5px]",e),...n}));Zj.displayName=Mz.displayName;function sDe({meeting:e,open:t,onOpenChange:r,onCancel:n,onDelete:a,assignee:i,readOnly:o=!1}){if(!e)return null;const l=H4(e.start_time),c=H4(e.end_time),u=e.status==="cancelled",d=c<new Date,f=()=>{e.meeting_link&&(navigator.clipboard.writeText(e.meeting_link),ee.success("Meeting link copied!"))},m=()=>{const p=`You're invited to: ${e.title}
    
 Date: ${Lt(l,"EEEE, MMMM d, yyyy")}
 Time: ${Lt(l,"h:mm a")} - ${Lt(c,"h:mm a")}
${e.location?` Location: ${e.location}`:""}
${e.meeting_link?` Join: ${e.meeting_link}`:""}
${e.description?`
 Description:
${e.description}`:""}`;navigator.clipboard.writeText(p),ee.success("Invite copied to clipboard!")};return s.jsx(Z$e,{open:t,onOpenChange:r,children:s.jsxs(Pz,{className:"w-full sm:max-w-md overflow-y-auto",children:[s.jsx(Tz,{className:"pb-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx(Oz,{className:`text-xl ${u?"line-through text-muted-foreground":""}`,children:e.title}),u&&s.jsx(Zt,{variant:"destructive",children:"Cancelled"}),d&&!u&&s.jsx(Zt,{variant:"secondary",children:"Completed"})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(mo,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:Lt(l,"EEEE, MMMM d, yyyy")}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[Lt(l,"h:mm a")," - ",Lt(c,"h:mm a")]})]})]}),e.client&&s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(eb,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Client"}),s.jsx("div",{className:"font-medium",children:e.client.name}),e.client.email&&s.jsx("div",{className:"text-sm text-muted-foreground",children:e.client.email})]})]}),i&&s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Vc,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Assigned to"}),s.jsx("div",{className:"font-medium",children:i.display_name||"Team Member"})]})]}),e.location&&s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(l3,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Location"}),s.jsx("div",{className:"font-medium",children:e.location})]})]}),e.meeting_link&&s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(dN,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Meeting Link"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ze,{variant:"outline",size:"sm",asChild:!0,className:"flex-1",children:s.jsxs("a",{href:e.meeting_link,target:"_blank",rel:"noopener noreferrer",children:[s.jsx(Yx,{className:"w-4 h-4 mr-2"}),"Join Meeting"]})}),s.jsx(ze,{variant:"outline",size:"icon",onClick:f,children:s.jsx(Yy,{className:"w-4 h-4"})})]})]})]}),e.description&&s.jsxs(s.Fragment,{children:[s.jsx(Zj,{}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Description"}),s.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.description})]})]}),s.jsx(Zj,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ze,{variant:"outline",className:"w-full justify-start",onClick:m,children:[s.jsx(Yy,{className:"w-4 h-4 mr-2"}),"Copy Invite to Clipboard"]}),!o&&!u&&!d&&s.jsxs(ze,{variant:"outline",className:"w-full justify-start text-amber-600 hover:text-amber-700",onClick:()=>{n(e.id),r(!1)},children:[s.jsx(fN,{className:"w-4 h-4 mr-2"}),"Cancel Meeting"]}),o?null:s.jsxs(ze,{variant:"outline",className:"w-full justify-start text-destructive hover:text-destructive",onClick:()=>{a(e.id),r(!1)},children:[s.jsx(Va,{className:"w-4 h-4 mr-2"}),"Delete Meeting"]})]})]})]})})}function oDe({rows:e=8,showSearch:t=!0,showFilters:r=!0}){return s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4 mb-8",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx($e,{className:"h-9 w-44 rounded-2xl bg-white/10"}),s.jsx($e,{className:"h-4 w-72 rounded-xl bg-white/[0.06] mt-3"})]}),s.jsx($e,{className:"h-10 w-32 rounded-2xl bg-white/10"})]}),t?s.jsx("div",{className:"mb-3",children:s.jsx($e,{className:"h-10 w-full rounded-2xl bg-white/[0.06]"})}):null,r?s.jsx("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:Array.from({length:5}).map((n,a)=>s.jsx($e,{className:"h-10 w-36 rounded-2xl bg-white/[0.06]"},a))}):null,s.jsx("div",{className:"space-y-2",children:Array.from({length:e}).map((n,a)=>s.jsx("div",{className:"border border-white/8 rounded-2xl p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx($e,{className:"h-9 w-9 rounded-full bg-white/10"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx($e,{className:"h-4 w-40 rounded-xl bg-white/10"}),s.jsx($e,{className:"h-3 w-64 rounded-xl bg-white/[0.06] mt-2"})]}),s.jsx($e,{className:"h-7 w-24 rounded-full bg-white/[0.06]"})]})},a))})]})}const lDe="/assets/google-calendar-logo-BPad7MYT.png";function cDe(){const e=Xt(),[t,r]=Vf(),{connectGoogleCalendar:n}=G$e(),{workspace:a,userRole:i}=on(),{meetings:o,isLoading:l,isSyncing:c,needsCalendarReconnect:u,createMeeting:d,cancelMeeting:f,deleteMeeting:m,applyOutcome:p,syncFromGoogleCalendar:v}=Y$e(),[g,b]=h.useState(!1),[y,w]=h.useState(!0),[x,_]=h.useState(null),[S,k]=h.useState([]),[C,j]=h.useState([]),[N,A]=h.useState([]),[P,T]=h.useState([]),[L,U]=h.useState(null),[D,H]=h.useState(!1),[B,M]=h.useState("upcoming"),[$,re]=h.useState(!1),[ie,q]=h.useState(!1),[K,ne]=h.useState(null),[ae,_e]=h.useState("completed"),[pe,ye]=h.useState(""),[ce,me]=h.useState(!0),[Q,te]=h.useState(!1),Ne=i==="setter",je=t.get("create")==="1",J=t.get("conversation"),oe=h.useCallback(()=>{const xe=new URLSearchParams(t);xe.delete("create"),xe.delete("conversation"),r(xe,{replace:!0})},[t,r]),Ce=h.useCallback(xe=>{re(xe),!xe&&je&&oe()},[oe,je]);h.useEffect(()=>{je&&re(!0)},[je]),h.useEffect(()=>{Ne&&e("/messages",{replace:!0})},[Ne,e]);const R=h.useCallback(async()=>{if(!(a!=null&&a.id)){w(!1);return}try{const[{data:xe,error:et},{data:Wt,error:Jt},{data:ur,error:mr},{data:Ur,error:ke},{data:Je,error:wt}]=await Promise.all([z.from("connected_google_calendars").select("*").eq("workspace_id",a.id).limit(1).maybeSingle(),z.from("clients").select("id, name, email").eq("workspace_id",a.id).order("name"),z.from("workspace_members").select("id, user_id, display_name, role").eq("workspace_id",a.id).order("created_at"),z.from("instagram_threads").select("conversation_id,instagram_user_id,peer_username,peer_name,assigned_user_id,is_spam,lead_status").eq("workspace_id",a.id).order("last_message_at",{ascending:!1,nullsFirst:!1}).order("created_at",{ascending:!1}).limit(500),z.from("instagram_alerts").select("id,conversation_id,alert_type,status,overdue_minutes,recommended_action").eq("workspace_id",a.id).eq("status","open").eq("alert_type","no_show_followup").order("created_at",{ascending:!1})]);et&&et.code!=="PGRST116"&&console.error("Error fetching calendar:",et),Jt&&console.error("Error fetching clients:",Jt),mr&&console.error("Error fetching team members:",mr),ke&&console.error("Error fetching lead threads:",ke),wt&&console.error("Error fetching no-show alerts:",wt),_(xe||null),k(Wt||[]),A(ur||[]),j((Array.isArray(Ur)?Ur:[]).filter(_t=>!(_t!=null&&_t.is_spam)).filter(_t=>String((_t==null?void 0:_t.lead_status)||"open")!=="removed").map(_t=>({conversation_id:String((_t==null?void 0:_t.conversation_id)||""),instagram_user_id:String((_t==null?void 0:_t.instagram_user_id)||""),peer_username:_t!=null&&_t.peer_username?String(_t.peer_username):null,peer_name:_t!=null&&_t.peer_name?String(_t.peer_name):null,assigned_user_id:_t!=null&&_t.assigned_user_id?String(_t.assigned_user_id):null})).filter(_t=>_t.conversation_id.length>0)),T(Array.isArray(Je)?Je:[])}catch(xe){console.error("Error:",xe)}finally{w(!1)}},[a==null?void 0:a.id]);h.useEffect(()=>{R()},[R]),h.useEffect(()=>{if(!(a!=null&&a.id))return;const xe=z.channel(`meetings-alerts-${a.id}`).on("postgres_changes",{event:"*",schema:"public",table:"instagram_alerts",filter:`workspace_id=eq.${a.id}`},()=>{R()}).subscribe();return()=>{z.removeChannel(xe)}},[a==null?void 0:a.id,R]);const Y=h.useCallback(async()=>{await R()},[R]),Se=async()=>{if(!Ne){b(!0);try{const{error:xe}=await n();xe&&(ee.error("Failed to start Google Calendar connection"),console.error("OAuth error:",xe))}catch(xe){ee.error("An error occurred"),console.error("Error:",xe)}finally{b(!1)}}},Re=async()=>{if(!Ne&&!(!x||!(a!=null&&a.id)))try{const{data:{session:xe}}=await z.auth.getSession();if(!xe){ee.error("Please sign in again");return}(await fetch("https://efpagcbqixencqosalgr.supabase.co/functions/v1/google-calendar",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${xe.access_token}`},body:JSON.stringify({action:"disconnect",calendarDbId:x.id,workspaceId:a.id})})).ok?(_(null),ee.success("Google Calendar disconnected"),await Y()):ee.error("Failed to disconnect calendar")}catch(xe){ee.error("An error occurred"),console.error("Error:",xe)}},de=async()=>{if(Ne)return;await v()&&(await Y(),ee.success("Calendar synced"))},G=async xe=>{await f(xe)},ue=async xe=>{await m(xe)},he=xe=>{U(xe),H(!0)},Z=new Date,ge=new Date(Z.getTime()+7*24*60*60*1e3),Ie=new Date(Z.getTime()-30*24*60*60*1e3),Ee=h.useMemo(()=>o.filter(xe=>!!xe.google_event_id&&!!xe.meeting_link),[o]),We=h.useMemo(()=>Ee.filter(xe=>new Date(xe.end_time)>=Z&&xe.status!=="cancelled").sort((xe,et)=>new Date(xe.start_time).getTime()-new Date(et.start_time).getTime()),[Ee,Z]),Oe=h.useMemo(()=>We.slice(0,8),[We]),Fe=h.useMemo(()=>Ee.filter(xe=>{const et=new Date(xe.start_time);return et>=Z&&et<=ge&&xe.status!=="cancelled"}).length,[Ee,Z,ge]),rt=h.useMemo(()=>{const xe=[];for(const et of We){if(et.outcome_status!=="pending")continue;const Wt=new Date(et.start_time),Jt=Wt.getTime()-Z.getTime();Jt<=0||(Jt<=24*60*60*1e3&&Jt>60*60*1e3&&!et.reminder_24h_sent_at?xe.push({meeting:et,kind:"24h",dueAt:new Date(Wt.getTime()-24*60*60*1e3)}):Jt<=60*60*1e3&&!et.reminder_1h_sent_at&&xe.push({meeting:et,kind:"1h",dueAt:new Date(Wt.getTime()-60*60*1e3)}))}return xe.sort((et,Wt)=>new Date(et.meeting.start_time).getTime()-new Date(Wt.meeting.start_time).getTime())},[We,Z]),nt=h.useMemo(()=>Ee.filter(xe=>new Date(xe.end_time)<Z&&xe.outcome_status==="pending"&&xe.status!=="cancelled").sort((xe,et)=>new Date(et.end_time).getTime()-new Date(xe.end_time).getTime()),[Ee,Z]),Gt=h.useMemo(()=>Ee.filter(xe=>["completed","no_show","rescheduled"].includes(xe.outcome_status)).filter(xe=>!xe.follow_up_task_id).sort((xe,et)=>new Date(et.start_time).getTime()-new Date(xe.start_time).getTime()),[Ee]),ht=h.useMemo(()=>{const et=Ee.filter(mr=>new Date(mr.start_time)>=Ie).filter(mr=>mr.outcome_status==="completed"||mr.outcome_status==="no_show"),Wt=et.filter(mr=>mr.outcome_status==="completed").length,Jt=et.filter(mr=>mr.outcome_status==="no_show").length,ur=et.length>0?Math.round(Wt/et.length*100):0;return{completed:Wt,noShows:Jt,rate:ur,finalizedCount:et.length}},[Ee,Ie]),dt=P.length,gt=h.useCallback(xe=>xe.outcome_status==="completed"?s.jsx(Zt,{className:"bg-[#133a2a] text-[#86efac] border-0",children:"Completed"}):xe.outcome_status==="no_show"?s.jsx(Zt,{className:"bg-[#3c2616] text-[#fb923c] border-0",children:"No show"}):xe.outcome_status==="rescheduled"?s.jsx(Zt,{className:"bg-[#1f2f3c] text-[#7dd3fc] border-0",children:"Rescheduled"}):xe.status==="cancelled"||xe.outcome_status==="cancelled"?s.jsx(Zt,{className:"bg-[#3d1f1f] text-[#f87171] border-0",children:"Cancelled"}):K7(new Date(xe.start_time))?s.jsx(Zt,{className:"bg-white/10 text-white border-border",children:"Today"}):s.jsx(Zt,{className:"bg-white/[0.06] text-white/80 border-0",children:"Scheduled"}),[]),It=h.useCallback((xe,et)=>{var mr;const Wt=new Date(xe.start_time),Jt=Lt(Wt,"EEEE, MMM d"),ur=Lt(Wt,"h:mm a");return(mr=xe.client)!=null&&mr.name||xe.title,et==="24h"?`Quick reminder for our call tomorrow (${Jt} at ${ur}). ${xe.meeting_link||""}`.trim():`Quick reminder: our call starts in about 1 hour (${ur}). ${xe.meeting_link||""}`.trim()},[]),Qt=h.useCallback((xe,et,Wt,Jt)=>{if(!xe){ee.error("No linked lead conversation on this meeting yet.");return}const ur=new URLSearchParams;ur.set("conversation",String(xe)),et&&ur.set("msg",et),Wt&&Jt&&(ur.set("reminderMeeting",Wt),ur.set("reminderKind",Jt)),e(`/messages?${ur.toString()}`)},[e]),Nn=h.useCallback(async xe=>{const et=new Date(xe.start_time),Wt=new Date(xe.end_time),Jt=`You're invited to: ${xe.title}

Date: ${Lt(et,"EEEE, MMMM d, yyyy")}
Time: ${Lt(et,"h:mm a")} - ${Lt(Wt,"h:mm a")}
${xe.location?`Location: ${xe.location}`:""}
${xe.meeting_link?`Join: ${xe.meeting_link}`:""}
${xe.description?`
Notes: ${xe.description}`:""}`.trim();try{await navigator.clipboard.writeText(Jt),ee.success("Invite copied")}catch{ee.error("Copy failed")}},[]),Br=h.useCallback((xe,et)=>{ne(xe),_e(et||xe.outcome_status||"completed"),ye(xe.outcome_notes||""),me(!0),q(!0)},[]),nr=h.useCallback(async()=>{if(K){te(!0);try{await p(K.id,ae,pe,ce)&&(q(!1),await Y())}finally{te(!1)}}},[K,p,ae,pe,ce,Y]);if(y||l)return s.jsx(Er,{children:s.jsx(oDe,{rows:7,showFilters:!1})});const ct=xe=>{if(!xe.assigned_to)return null;const et=N.find(Wt=>Wt.user_id===xe.assigned_to);return et?{display_name:et.display_name,user_id:et.user_id}:null};return!x&&!Ne?s.jsx(Er,{children:s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[s.jsx("p",{className:"text-muted-foreground/60 mb-8 text-sm text-center max-w-md",children:"Connect your Google Calendar to create meetings, add Google Meet links, and keep everything synced"}),s.jsxs(Pf,{size:"sm",onClick:Se,disabled:g,children:[g?s.jsx(bn,{className:"w-4 h-4 animate-spin"}):s.jsx("img",{src:lDe,alt:"Google Calendar",className:"w-4 h-4"}),g?"Connecting...":"Connect Google Calendar"]})]})})}):s.jsx(Er,{children:s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4 mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-[36px] font-medium",children:"Meetings"}),s.jsx("p",{className:"text-sm text-white/45 mt-1",children:"Revenue call command center"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:de,disabled:c,className:"h-9 px-4 rounded-xl bg-white text-black text-[13px] font-semibold hover:bg-white/90 disabled:opacity-60 disabled:cursor-not-allowed",children:c?"Syncing...":"Sync"}),Ne?null:s.jsxs(s.Fragment,{children:[s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsx(ze,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-xl text-white/60 hover:text-white hover:bg-white/10",children:s.jsx(c3,{className:"h-4 w-4"})})}),s.jsxs(Hr,{align:"end",className:"rounded-xl min-w-[220px]",children:[s.jsx(zU,{className:"text-xs text-white/60",children:"Google Calendar"}),s.jsxs(wr,{disabled:!0,className:"text-sm text-white/80",children:[s.jsx(mo,{className:"h-4 w-4 mr-2 text-white/60"}),(x==null?void 0:x.summary)||(x==null?void 0:x.calendar_id)||"Not connected"]}),x!=null&&x.last_synced_at?s.jsxs(wr,{disabled:!0,className:"text-xs text-white/45",children:["Last synced ",Lt(new Date(x.last_synced_at),"MMM d, h:mm a")]}):null,(x==null?void 0:x.last_sync_status)==="error"&&(x!=null&&x.last_sync_error)?s.jsxs(wr,{disabled:!0,className:"text-xs text-red-300/80",children:["Last error: ",x.last_sync_error]}):null,s.jsx(di,{}),x?s.jsxs(s.Fragment,{children:[s.jsx(wr,{onClick:de,disabled:c,children:"Sync now"}),s.jsxs(wr,{onClick:Re,className:"text-red-400 focus:text-red-400 hover:bg-red-500/20 data-[highlighted]:bg-red-500/20 data-[highlighted]:text-red-200",children:[s.jsx(Qx,{className:"h-4 w-4 mr-2"}),"Sign out"]})]}):s.jsx(wr,{onClick:Se,children:"Connect Google Calendar"})]})]}),s.jsx(X$e,{open:$,onOpenChange:Ce,clients:S,leads:C,teamMembers:N,onCreateMeeting:async xe=>{const et=await d(xe);return et&&await Y(),et},defaultDate:new Date,defaultConversationId:J,isCalendarConnected:!!x})]})]})]}),!Ne&&x&&u?s.jsxs("div",{className:"mb-6 rounded-2xl border border-white/10 bg-white/[0.02] p-4 flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-white/90",children:"Google Calendar needs reconnect"}),s.jsx("div",{className:"mt-1 text-xs text-white/45",children:"Your Google session expired. Reconnect to keep meetings synced."})]}),s.jsx("button",{type:"button",className:"h-8 px-3.5 rounded-xl bg-white text-black text-[13px] font-semibold hover:bg-white/90 disabled:opacity-60",onClick:Se,disabled:g,children:"Reconnect"})]}):null,s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-3 mb-6",children:[s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-[0.12em] text-white/45",children:"Upcoming 7d"}),s.jsx("div",{className:"mt-2 text-[28px] leading-none font-semibold",children:Fe}),s.jsx("div",{className:"mt-2 text-xs text-white/40",children:"Google-linked joinable calls"})]}),s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-[0.12em] text-white/45",children:"Due reminders"}),s.jsx("div",{className:"mt-2 text-[28px] leading-none font-semibold",children:rt.length}),s.jsx("div",{className:"mt-2 text-xs text-white/40",children:"24h + 1h reminder queue"})]}),s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-[0.12em] text-white/45",children:"Show-up rate (30d)"}),s.jsxs("div",{className:"mt-2 text-[28px] leading-none font-semibold",children:[ht.rate,"%"]}),s.jsxs("div",{className:"mt-2 text-xs text-white/40",children:[ht.completed," completed  ",ht.noShows," no-show"]})]}),s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black p-4",children:[s.jsx("div",{className:"text-xs uppercase tracking-[0.12em] text-white/45",children:"Open no-show follow-ups"}),s.jsx("div",{className:"mt-2 text-[28px] leading-none font-semibold",children:dt}),s.jsx("div",{className:"mt-2 text-xs text-white/40",children:"Active alerts from no-show outcomes"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-5 mb-8",children:[s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black p-5",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Today & Next"}),s.jsx("p",{className:"text-xs text-white/45 mt-1",children:"Timeline for your next joinable calls"})]})}),Oe.length===0?s.jsx("div",{className:"text-sm text-white/45 py-8 text-center",children:"No upcoming joinable calls"}):s.jsx("div",{className:"space-y-3",children:Oe.map(xe=>s.jsx("div",{className:"rounded-xl border border-white/10 px-4 py-3 bg-black/60",children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"text-sm font-medium text-white truncate",children:xe.title}),gt(xe)]}),s.jsxs("div",{className:"text-xs text-white/45 mt-1",children:[Lt(new Date(xe.start_time),"EEE, MMM d  h:mm a")," - ",Lt(new Date(xe.end_time),"h:mm a")]})]}),s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[s.jsxs("button",{type:"button",className:"h-8 px-3 rounded-lg border border-white/10 text-[12px] text-white/75 hover:bg-white/[0.06]",onClick:()=>Nn(xe),children:[s.jsx(Yy,{className:"h-3.5 w-3.5 mr-1 inline-block"}),"Invite"]}),xe.conversation_id?s.jsxs("button",{type:"button",className:"h-8 px-3 rounded-lg border border-white/10 text-[12px] text-white/75 hover:bg-white/[0.06]",onClick:()=>Qt(xe.conversation_id),children:[s.jsx(cN,{className:"h-3.5 w-3.5 mr-1 inline-block"}),"Lead"]}):null,xe.meeting_link?s.jsxs("a",{href:xe.meeting_link,target:"_blank",rel:"noopener noreferrer",className:"h-8 px-3 rounded-lg bg-white/[0.06] text-[12px] text-white hover:bg-white hover:text-black inline-flex items-center",children:[s.jsx(Yx,{className:"h-3.5 w-3.5 mr-1"}),"Join"]}):null]})]})},xe.id))})]}),s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black p-5",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Action Queue"}),s.jsx("p",{className:"text-xs text-white/45 mt-1",children:"Reminders, outcomes, and follow-ups to clear next"})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-[0.12em] text-white/45 mb-2",children:"Needs reminder"}),rt.length===0?s.jsx("div",{className:"text-xs text-white/35",children:"No reminders due"}):s.jsx("div",{className:"space-y-2",children:rt.slice(0,4).map(xe=>s.jsx("div",{className:"rounded-xl border border-white/10 px-3 py-2.5",children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-sm text-white/90 truncate",children:xe.meeting.title}),s.jsxs("div",{className:"text-xs text-white/45 mt-1",children:[xe.kind==="24h"?"24h reminder":"1h reminder","  ",Lt(new Date(xe.meeting.start_time),"EEE, h:mm a")]})]}),s.jsx("button",{type:"button",className:"h-8 px-3 rounded-lg bg-white text-black text-[12px] font-semibold hover:bg-white/90",onClick:()=>Qt(xe.meeting.conversation_id,It(xe.meeting,xe.kind),xe.meeting.id,xe.kind),children:"Send in DM"})]})},`${xe.meeting.id}-${xe.kind}`))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-[0.12em] text-white/45 mb-2",children:"Needs outcome"}),nt.length===0?s.jsx("div",{className:"text-xs text-white/35",children:"All recent meetings are updated"}):s.jsx("div",{className:"space-y-2",children:nt.slice(0,4).map(xe=>s.jsx("div",{className:"rounded-xl border border-white/10 px-3 py-2.5",children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-sm text-white/90 truncate",children:xe.title}),s.jsxs("div",{className:"text-xs text-white/45 mt-1",children:["Ended ",Lt(new Date(xe.end_time),"EEE, MMM d  h:mm a")]})]}),s.jsx("button",{type:"button",className:"h-8 px-3 rounded-lg border border-white/10 text-[12px] text-white/85 hover:bg-white/[0.06]",onClick:()=>Br(xe,"completed"),children:"Mark outcome"})]})},xe.id))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-[0.12em] text-white/45 mb-2",children:"Needs follow-up"}),Gt.length===0&&P.length===0?s.jsx("div",{className:"text-xs text-white/35",children:"No follow-up gaps detected"}):s.jsxs("div",{className:"space-y-2",children:[Gt.slice(0,4).map(xe=>s.jsx("div",{className:"rounded-xl border border-white/10 px-3 py-2.5",children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-sm text-white/90 truncate",children:xe.title}),s.jsxs("div",{className:"text-xs text-white/45 mt-1",children:["Outcome: ",xe.outcome_status.replace("_"," ")]})]}),s.jsx("button",{type:"button",className:"h-8 px-3 rounded-lg border border-white/10 text-[12px] text-white/85 hover:bg-white/[0.06]",onClick:()=>Br(xe,xe.outcome_status),children:"Review"})]})},xe.id)),P.slice(0,3).map(xe=>s.jsx("div",{className:"rounded-xl border border-orange-300/20 bg-orange-500/[0.05] px-3 py-2.5",children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-sm text-orange-100 truncate",children:"No-show follow-up alert"}),s.jsx("div",{className:"text-xs text-orange-200/70 mt-1",children:xe.recommended_action||"Send a recovery message and offer a new slot."})]}),s.jsx("button",{type:"button",className:"h-8 px-3 rounded-lg border border-orange-300/30 text-[12px] text-orange-100 hover:bg-orange-500/20",onClick:()=>Qt(xe.conversation_id),children:"Open lead"})]})},xe.id))]})]})]})]})]}),s.jsx("div",{className:"-ml-2 flex items-center gap-2 mb-6",children:["upcoming","past"].map(xe=>{const et=B===xe;return s.jsx("button",{onClick:()=>M(xe),className:`h-8 px-3.5 rounded-xl transition-colors text-[13px] font-semibold tracking-[0.02em] ${et?"bg-[#1b1f21] text-white":"bg-transparent text-[#a1a4a5]"}`,children:xe.charAt(0).toUpperCase()+xe.slice(1)},xe)})}),s.jsx(J$e,{meetings:o,onCancel:G,onDelete:ue,onMeetingClick:he,filter:B,readOnly:Ne}),s.jsx(sDe,{meeting:L,open:D,onOpenChange:H,onCancel:G,onDelete:ue,assignee:L?ct(L):null,readOnly:Ne}),s.jsx(Gi,{open:ie,onOpenChange:q,children:s.jsxs(yi,{className:"sm:max-w-xl rounded-2xl border border-white/10 bg-black",children:[s.jsx(xi,{children:s.jsx(bi,{children:"Mark meeting outcome"})}),K?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/[0.02] p-3",children:[s.jsx("div",{className:"text-sm text-white/90",children:K.title}),s.jsx("div",{className:"text-xs text-white/45 mt-1",children:Lt(new Date(K.start_time),"EEE, MMM d  h:mm a")})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>_e("completed"),className:`h-9 rounded-xl border text-[12px] ${ae==="completed"?"border-emerald-300/40 bg-emerald-500/20 text-emerald-200":"border-white/10 text-white/80 hover:bg-white/[0.05]"}`,children:[s.jsx(bY,{className:"h-3.5 w-3.5 mr-1 inline-block"}),"Completed"]}),s.jsxs("button",{type:"button",onClick:()=>_e("no_show"),className:`h-9 rounded-xl border text-[12px] ${ae==="no_show"?"border-orange-300/40 bg-orange-500/20 text-orange-200":"border-white/10 text-white/80 hover:bg-white/[0.05]"}`,children:[s.jsx(qY,{className:"h-3.5 w-3.5 mr-1 inline-block"}),"No show"]}),s.jsxs("button",{type:"button",onClick:()=>_e("rescheduled"),className:`h-9 rounded-xl border text-[12px] ${ae==="rescheduled"?"border-sky-300/40 bg-sky-500/20 text-sky-200":"border-white/10 text-white/80 hover:bg-white/[0.05]"}`,children:[s.jsx($Y,{className:"h-3.5 w-3.5 mr-1 inline-block"}),"Rescheduled"]}),s.jsxs("button",{type:"button",onClick:()=>_e("cancelled"),className:`h-9 rounded-xl border text-[12px] ${ae==="cancelled"?"border-red-300/40 bg-red-500/20 text-red-200":"border-white/10 text-white/80 hover:bg-white/[0.05]"}`,children:[s.jsx(fN,{className:"h-3.5 w-3.5 mr-1 inline-block"}),"Cancelled"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"meeting-outcome-notes",className:"text-white/70 text-xs uppercase tracking-[0.12em]",children:"Notes"}),s.jsx(kg,{id:"meeting-outcome-notes",value:pe,onChange:xe=>ye(xe.target.value),placeholder:"What happened on the call?",rows:4,className:"rounded-xl border-white/10 bg-black"})]}),s.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/[0.02] p-3 flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-white/85",children:"Create follow-up task"}),s.jsx("div",{className:"text-xs text-white/45 mt-1",children:"Automatically create the next best action task"})]}),s.jsx(jg,{checked:ce,onCheckedChange:me})]}),s.jsxs("div",{className:"flex items-center justify-end gap-2 pt-1",children:[s.jsx("button",{type:"button",className:"h-9 px-4 rounded-xl border border-white/10 text-sm text-white/80 hover:bg-white/[0.04]",onClick:()=>q(!1),children:"Cancel"}),s.jsx("button",{type:"button",className:"h-9 px-4 rounded-xl bg-white text-black text-sm font-semibold hover:bg-white/90 disabled:opacity-60",onClick:nr,disabled:Q,children:Q?"Saving...":"Save outcome"})]})]}):null]})})]})})}function uDe(){return s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4 mb-8",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx($e,{className:"h-9 w-40 rounded-2xl bg-white/10"}),s.jsx($e,{className:"h-4 w-72 rounded-xl bg-white/[0.06] mt-3"})]}),s.jsx($e,{className:"h-10 w-36 rounded-2xl bg-white/10"})]}),s.jsxs("div",{className:"flex gap-6",children:[s.jsx("div",{className:"w-[260px] shrink-0 hidden md:block",children:s.jsxs("div",{className:"border border-white/10 rounded-3xl p-4 bg-black",children:[s.jsx($e,{className:"h-9 w-full rounded-2xl bg-white/[0.06]"}),s.jsx("div",{className:"mt-4 space-y-2",children:Array.from({length:8}).map((e,t)=>s.jsxs("div",{className:"flex items-center gap-3 px-3 py-2.5 rounded-xl",children:[s.jsx($e,{className:"h-8 w-8 rounded-full bg-white/10"}),s.jsx($e,{className:"h-4 w-32 rounded-xl bg-white/[0.08]"})]},t))})]})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("div",{className:"space-y-2",children:Array.from({length:10}).map((e,t)=>s.jsx("div",{className:"border border-white/10 rounded-2xl p-4 bg-black",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx($e,{className:"h-5 w-5 rounded-full bg-white/10 mt-0.5"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx($e,{className:"h-4 w-64 rounded-xl bg-white/[0.08]"}),s.jsx($e,{className:"h-3 w-80 rounded-xl bg-white/[0.06] mt-2"}),s.jsx($e,{className:"h-3 w-40 rounded-xl bg-white/[0.06] mt-3"})]}),s.jsx($e,{className:"h-7 w-24 rounded-full bg-white/[0.06]"})]})},t))})})]})]})}function dDe(){var ie;const e=Xt(),{user:t}=Kt(),{workspace:r,userRole:n}=on(),{clients:a}=ez(),[i,o]=h.useState([]),[l,c]=h.useState(!0),[u,d]=h.useState("all"),[f,m]=h.useState(!1),[p,v]=h.useState(null),[g,b]=h.useState(""),[y,w]=h.useState(""),[x,_]=h.useState(""),[S,k]=h.useState(!1),C=n==="setter",j=h.useCallback(async()=>{var q,K,ne;if(r!=null&&r.id)try{if(C){if(!(t!=null&&t.id))return;const ae=await z.from("setter_tasks").select("*").eq("workspace_id",r.id).eq("setter_id",t.id).order("created_at",{ascending:!1});if(ae.error){const pe=`${((q=ae.error)==null?void 0:q.message)||""} ${((K=ae.error)==null?void 0:K.details)||""} ${((ne=ae.error)==null?void 0:ne.hint)||""}`.toLowerCase();if(pe.includes("setter_tasks")&&pe.includes("workspace_id")&&(pe.includes("does not exist")||pe.includes("schema cache"))){const ye=await z.from("setter_tasks").select("*").eq("setter_id",t.id).order("created_at",{ascending:!1});if(ye.error)throw ye.error;const ce=(Array.isArray(ye.data)?ye.data:[]).map(me=>({...me,client_id:null}));o(ce);return}throw ae.error}const _e=(Array.isArray(ae.data)?ae.data:[]).map(pe=>({...pe,client_id:null}));o(_e)}else{const{data:ae,error:_e}=await z.from("client_tasks").select("*").eq("workspace_id",r.id).order("created_at",{ascending:!1});if(_e)throw _e;o(ae||[])}}catch(ae){console.error("Error fetching tasks:",ae)}finally{c(!1)}},[r==null?void 0:r.id,C,t==null?void 0:t.id]);h.useEffect(()=>{j()},[j]),h.useEffect(()=>{C&&u!=="all"&&d("all")},[C,u]);const N=async(q,K)=>{var ne,ae,_e;try{const pe={status:K};K==="completed"?pe.completed_at=new Date().toISOString():pe.completed_at=null;const ye=C?"setter_tasks":"client_tasks",ce=await z.from(ye).update(pe).eq("id",q.id);if(ce.error){const me=`${((ne=ce.error)==null?void 0:ne.message)||""} ${((ae=ce.error)==null?void 0:ae.details)||""} ${((_e=ce.error)==null?void 0:_e.hint)||""}`.toLowerCase();if(me.includes(ye)&&me.includes("completed_at")&&(me.includes("does not exist")||me.includes("schema cache"))){const te=await z.from(ye).update({status:K}).eq("id",q.id);if(te.error)throw te.error}else throw ce.error}ee.success(`Task marked as ${K.replace("_"," ")}`),j()}catch(pe){console.error("Error updating task:",pe),ee.error("Failed to update task")}},A=async()=>{if(!C&&p)try{const{error:q}=await z.from("client_tasks").delete().eq("id",p);if(q)throw q;ee.success("Task deleted"),j()}catch(q){console.error("Error deleting task:",q),ee.error("Failed to delete task")}finally{v(null)}},P=async()=>{if(C){ee.error("Setters cannot create tasks.");return}if(!g.trim()||!t||!r){ee.error("Please enter a task title");return}k(!0);try{const q=u!=="all"&&u!=="my-tasks"?u:null,{error:K}=await z.from("client_tasks").insert({id:crypto.randomUUID(),workspace_id:r.id,created_by:t.id,title:g.trim(),description:y.trim()||null,due_date:x||null,status:"pending",client_id:q});if(K)throw K;ee.success("Task created!"),b(""),w(""),_(""),m(!1),j()}catch(q){console.error("Error creating task:",q),ee.error("Failed to create task")}finally{k(!1)}},T=q=>{switch(q){case"completed":return s.jsxs(Zt,{variant:"secondary",className:"bg-[#1a3a2a] text-[#4ade80] border-0",children:[s.jsx(Ha,{className:"w-3 h-3 mr-1"}),"Done"]});case"in_progress":return s.jsxs(Zt,{variant:"secondary",className:"bg-blue-500/20 text-blue-400 border-0",children:[s.jsx(Yd,{className:"w-3 h-3 mr-1"}),"In Progress"]});default:return s.jsxs(Zt,{variant:"secondary",className:"bg-muted text-muted-foreground border-0",children:[s.jsx(Gd,{className:"w-3 h-3 mr-1"}),"Pending"]})}},L=q=>{if(!q)return"Personal Task";if(C)return"Lead task";const K=a.find(ne=>ne.id===q);return(K==null?void 0:K.name)||"Unknown Client"},U=q=>{const K=String(q.title||"").trim().toLowerCase();return K==="no-show recovery"?"No-show recovery":K==="post-call follow-up"||K==="reschedule confirmation"?"Meeting follow-up":null},D=u==="all"?i:u==="my-tasks"?i.filter(q=>q.client_id===null):i.filter(q=>q.client_id===u),H=[...D].sort((q,K)=>{const ne={pending:0,in_progress:1,completed:2};return ne[q.status]-ne[K.status]}),B=D.filter(q=>q.status==="pending").length,M=i.filter(q=>q.client_id===null&&q.status!=="completed").length,$=!C&&(u==="my-tasks"||u!=="all"&&u!=="my-tasks"),re=()=>{if(u==="my-tasks")return"Add Personal Task";const q=a.find(K=>K.id===u);return q?`Add Task for ${q.name}`:"Add Task"};return l?s.jsx(Er,{children:s.jsx(uDe,{})}):s.jsx(Er,{children:s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-[36px] font-medium",children:C?"My Tasks":"Tasks"}),s.jsx("p",{className:"text-sm text-white/45 mt-1",children:B>0?`${B} task${B!==1?"s":""} pending  Track tasks and deadlines across your workspace`:"Track tasks and deadlines across your workspace"})]}),C?s.jsx("div",{className:"text-xs text-white/45",children:"View-only except completion"}):null,$&&s.jsxs(ze,{onClick:()=>m(!0),className:"bg-white text-black hover:bg-white/90 font-medium border-0 shadow-none rounded-2xl",children:[s.jsx(kl,{className:"w-4 h-4 mr-2"}),"Add Task"]})]}),s.jsxs("div",{className:"flex gap-6",children:[C?null:s.jsxs("div",{className:"w-64 shrink-0",children:[s.jsx("div",{className:"mb-3",children:s.jsx("p",{className:"text-sm text-muted-foreground px-1",children:"Filter by"})}),s.jsxs("button",{onClick:()=>d("all"),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm transition-colors mb-1 ${u==="all"?"bg-white/[0.08] text-foreground":"text-muted-foreground hover:text-foreground hover:bg-white/[0.04]"}`,children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center",children:s.jsx(Vc,{className:"w-4 h-4"})}),s.jsx("span",{children:"All Tasks"}),s.jsx(Gx,{className:"w-4 h-4 ml-auto opacity-40"})]}),s.jsxs("button",{onClick:()=>d("my-tasks"),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm transition-colors mb-1 ${u==="my-tasks"?"bg-white/[0.08] text-foreground":"text-muted-foreground hover:text-foreground hover:bg-white/[0.04]"}`,children:[s.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center shrink-0",style:{background:"radial-gradient(circle at center, #2A2A2A 0%, #1A1A1A 45%, #0F0F0F 100%)",boxShadow:"inset 0 1px 2px rgba(255,255,255,0.06), inset 0 -2px 4px rgba(0,0,0,0.6)"},children:s.jsx(eb,{className:"w-4 h-4 text-muted-foreground"})}),s.jsx("span",{children:"My Tasks"}),M>0&&s.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-2 py-0.5 rounded-full ml-auto",children:M})]}),s.jsxs("div",{className:"space-y-1 mt-2 border-t-[0.5px] border-border pt-2",children:[s.jsx("p",{className:"text-xs text-muted-foreground/60 px-3 py-1",children:"Clients"}),a.map(q=>{const K=i.filter(ne=>ne.client_id===q.id&&ne.status!=="completed").length;return s.jsxs("button",{onClick:()=>d(q.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm transition-colors ${u===q.id?"bg-white/[0.08] text-foreground":"text-muted-foreground hover:text-foreground hover:bg-white/[0.04]"}`,children:[s.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center shrink-0",style:{background:"radial-gradient(circle at center, #1a3a2a 0%, #152d22 45%, #0d1f17 100%)",boxShadow:"inset 0 1px 2px rgba(74,222,128,0.08), inset 0 -2px 4px rgba(0,0,0,0.6)"},children:s.jsx("span",{className:"text-[#4ade80] text-xs font-medium",children:q.name.charAt(0).toUpperCase()})}),s.jsx("span",{className:"truncate flex-1 text-left",children:q.name}),K>0&&s.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-2 py-0.5 rounded-full",children:K})]},q.id)})]})]}),s.jsx("div",{className:"flex-1",children:l?s.jsx("div",{className:"p-6 space-y-2",children:Array.from({length:8}).map((q,K)=>s.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-xl border border-border",children:[s.jsx($e,{className:"h-5 w-5 rounded-full bg-white/[0.06] mt-0.5"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx($e,{className:"h-4 w-72 rounded-xl bg-white/[0.10]"}),s.jsx($e,{className:"h-3 w-96 rounded-xl bg-white/[0.06] mt-2"}),s.jsx($e,{className:"h-3 w-52 rounded-xl bg-white/[0.06] mt-3"})]})]},K))}):H.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Gd,{className:"w-12 h-12 mx-auto mb-4 opacity-30"}),s.jsx("p",{children:u==="my-tasks"?"No personal tasks yet":u==="all"?"No tasks yet":"No tasks for this client"}),$&&s.jsxs(ze,{onClick:()=>m(!0),variant:"outline",className:"mt-4 rounded-2xl",children:[s.jsx(kl,{className:"w-4 h-4 mr-2"}),re()]})]}):s.jsx("div",{className:"space-y-2",children:H.map(q=>s.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-xl border border-border hover:bg-white/[0.02] transition-colors",children:[s.jsx("button",{onClick:()=>{const K=q.status==="completed"?"pending":"completed";N(q,K)},className:`w-5 h-5 rounded-full border-2 flex items-center justify-center shrink-0 mt-0.5 transition-colors ${q.status==="completed"?"bg-[#4ade80] border-border":"border-border hover:border-border"}`,children:q.status==="completed"&&s.jsx(Ha,{className:"w-3 h-3 text-black"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:`font-medium ${q.status==="completed"?"line-through text-muted-foreground":""}`,children:q.title}),u==="all"&&!C&&s.jsx("button",{onClick:()=>{q.client_id&&e(`/clients/${q.client_id}`)},className:`text-sm mt-0.5 ${q.client_id?"text-muted-foreground hover:text-foreground transition-colors cursor-pointer":"text-muted-foreground/60 cursor-default"}`,children:L(q.client_id)}),q.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:q.description}),U(q)?s.jsx("div",{className:"mt-2 inline-flex items-center h-6 px-2 rounded-lg bg-white/[0.04] text-[11px] text-white/65",children:U(q)}):null]}),s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[T(q.status),C?null:s.jsx(ze,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground/50 hover:text-red-400",onClick:()=>v(q.id),children:s.jsx(Va,{className:"w-4 h-4"})})]})]}),q.due_date&&s.jsxs("p",{className:`text-xs mt-2 ${new Date(q.due_date)<new Date&&q.status!=="completed"?"text-red-400":"text-muted-foreground"}`,children:["Due ",Lt(new Date(q.due_date),"MMM d, yyyy")]})]})]},q.id))})})]}),s.jsx(Gi,{open:f,onOpenChange:m,children:s.jsxs(yi,{className:"bg-[#0a0a0a] border-border rounded-3xl",children:[s.jsxs(xi,{children:[s.jsxs(bi,{className:"flex items-center gap-2",children:[s.jsx(kl,{className:"w-5 h-5"}),re()]}),s.jsx(Ef,{children:u==="my-tasks"?"Create a personal task for yourself":`Create a task ${u!=="all"?`for ${((ie=a.find(q=>q.id===u))==null?void 0:ie.name)||"client"}`:""}`})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"taskTitle",children:"Task Title"}),s.jsx("input",{id:"taskTitle",placeholder:"Enter task title...",value:g,onChange:q=>b(q.target.value),className:"w-full h-10 px-4 bg-black border border-border rounded-2xl text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-border transition-colors"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"taskDescription",children:"Description (optional)"}),s.jsx("textarea",{id:"taskDescription",placeholder:"Add more details...",value:y,onChange:q=>w(q.target.value),rows:3,className:"w-full px-4 py-3 bg-black border border-border rounded-2xl text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-border transition-colors resize-none min-h-[96px]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"taskDueDate",children:"Due Date (optional)"}),s.jsx("input",{id:"taskDueDate",type:"date",value:x,onChange:q=>_(q.target.value),className:"w-full h-10 px-4 bg-black border border-border rounded-2xl text-sm text-foreground placeholder:text-muted-foreground/40 focus:outline-none focus:border-border transition-colors"})]})]}),s.jsxs(ch,{children:[s.jsx(ze,{variant:"outline",onClick:()=>{m(!1),b(""),w(""),_("")},className:"border-border rounded-xl bg-transparent",children:"Cancel"}),s.jsx(ze,{onClick:P,disabled:S||!g.trim(),className:"bg-white text-black hover:bg-white/90 shadow-none rounded-xl",children:S?"Creating...":"Create Task"})]})]})}),s.jsx(Wl,{open:!!p,onOpenChange:()=>v(null),children:s.jsxs(To,{className:"bg-[#0a0a0a] border-border rounded-3xl",children:[s.jsxs(Oo,{children:[s.jsx(Mo,{children:"Delete Task"}),s.jsx(Ro,{children:"Are you sure you want to delete this task? This action cannot be undone."})]}),s.jsxs(Io,{children:[s.jsx(Do,{className:"border-border hover:bg-[#1a1a1a] rounded-2xl",children:"Cancel"}),s.jsx($o,{onClick:A,className:"bg-[#dc2626] hover:bg-[#b91c1c] border-0 rounded-2xl",children:"Delete"})]})]})})]})})}function fDe({open:e,onOpenChange:t}){const[r,n]=h.useState(""),a="setter",[i,o]=h.useState(!1),{workspace:l}=on(),{user:c}=Kt(),u=async f=>{const m=f,p=String((m==null?void 0:m.message)||"").trim(),v=m==null?void 0:m.context;if(!v)return p||"Failed to send invitation";try{const b=await v.clone().json(),y=String((b==null?void 0:b.error)||(b==null?void 0:b.message)||"").trim();if(y)return y}catch{}try{const g=v.clone(),b=String(await g.text()).trim();if(b)return b}catch{}return p||"Failed to send invitation"},d=async f=>{if(f.preventDefault(),!r.trim()){ee.error("Please enter an email address");return}if(!l||!c){ee.error("Unable to send invite. Please try again.");return}o(!0);try{const{error:m}=await z.auth.refreshSession();if(m)throw new Error("Session expired. Please sign in again.");const p=r.trim().toLowerCase(),{data:v,error:g}=await z.functions.invoke("send-setter-invite",{body:{email:p,workspaceId:l.id,workspaceName:l.name,invitedBy:c.id,role:a}});if(g){const b=await u(g);throw new Error(b||"Failed to send invitation")}if(!v.success){const b=String(v.error||"Failed to send invitation").trim();throw new Error(b||"Failed to send invitation")}if(v.emailDelivered===!1&&v.inviteUrl)try{await navigator.clipboard.writeText(v.inviteUrl),ee.warning("Email delivery failed. Invite link copied to clipboard.")}catch{ee.warning(`Email delivery failed. Share this invite link manually: ${v.inviteUrl}`)}else ee.success(`Setter invite sent to ${r}`);n(""),t(!1)}catch(m){console.error("Error sending invite:",m);const p=m instanceof Error&&m.message?m.message:"Something went wrong. Please try again.";ee.error(p)}finally{o(!1)}};return s.jsx(Gi,{open:e,onOpenChange:t,children:s.jsxs(yi,{className:"sm:max-w-md",children:[s.jsxs(xi,{children:[s.jsxs(bi,{className:"flex items-center gap-2",children:[s.jsx(Um,{className:"w-5 h-5"}),"Invite Team Member"]}),s.jsx(Ef,{children:"Invite a setter to this workspace."})]}),s.jsxs("form",{onSubmit:d,className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"member-role",children:"Role"}),s.jsx("select",{id:"member-role",value:a,className:"w-full h-10 px-3 rounded-xl bg-background border border-border text-sm",disabled:!0,children:s.jsx("option",{value:"setter",children:"Setter"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ut,{htmlFor:"setter-email",children:"Email address"}),s.jsxs("div",{className:"relative",children:[s.jsx(Xp,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx($r,{id:"setter-email",type:"email",placeholder:"setter@example.com",value:r,onChange:f=>n(f.target.value),className:"pl-10",autoComplete:"email",disabled:i})]})]}),s.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 text-sm text-muted-foreground",children:[s.jsx("p",{className:"font-medium text-foreground mb-2",children:"What they'll get access to:"}),s.jsxs("ul",{className:"space-y-1",children:[s.jsx("li",{children:" Instagram DMs & Lead Filtering"}),s.jsx("li",{children:" Task Management"}),s.jsx("li",{children:" Workspace inbox assignment"})]})]}),s.jsxs("div",{className:"flex gap-3 pt-2",children:[s.jsx(ze,{type:"button",variant:"outline",onClick:()=>t(!1),className:"flex-1 rounded-xl",disabled:i,children:"Cancel"}),s.jsx(ze,{type:"submit",disabled:i||!r.trim(),className:"flex-1 bg-blue-500 text-white hover:bg-blue-600 rounded-xl",children:i?s.jsxs(s.Fragment,{children:[s.jsx(bn,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):"Send Invitation"})]})]})]})})}const hDe=["new_lead","in_contact","qualified","unqualified","call_booked","won","no_show"];function L_(e){const t=`${(e==null?void 0:e.message)||""} ${(e==null?void 0:e.details)||""} ${(e==null?void 0:e.hint)||""}`,r=t.match(/Could not find the '([^']+)' column/i);if(r!=null&&r[1])return r[1];const n=t.match(/column\s+[a-z_]+\.(\w+)\s+does not exist/i);return n!=null&&n[1]?n[1]:null}function F_(e,t){const n=String((e==null?void 0:e.sender_type)||"").toLowerCase()==="setter"?"setter":"coach",a=(e==null?void 0:e.content)??(e==null?void 0:e.message)??(e==null?void 0:e.text)??(e==null?void 0:e.body)??(e==null?void 0:e.message_text)??(e==null?void 0:e.message_body)??"";return{id:String((e==null?void 0:e.id)||""),workspace_id:e!=null&&e.workspace_id?String(e.workspace_id):t,setter_id:String((e==null?void 0:e.setter_id)||""),sender_id:e!=null&&e.sender_id?String(e.sender_id):void 0,sender_type:n,content:String(a||""),read_at:e!=null&&e.read_at?String(e.read_at):null,created_at:String((e==null?void 0:e.created_at)||new Date().toISOString())}}const $E=e=>String(e||"").trim().toLowerCase(),B_=(e,t)=>{const r=$E(e);return t==="hot"?r==="hot lead"||r==="hot":t==="warm"?r==="warm lead"||r==="warm":r==="cold lead"||r==="cold"};function mDe(e){const t=$E(e);return t?t==="new lead"||t==="new"?"new_lead":t==="in contact"||t==="contacted"?"in_contact":t==="qualified"?"qualified":t==="unqualified"||t==="disqualified"?"unqualified":t==="call booked"||t==="booked call"||t==="call"?"call_booked":t==="won"||t==="closed won"?"won":t==="no show"||t==="noshow"?"no_show":null:null}function wM(e){if(!e)return 0;const r=new Date(String(e)).getTime();return Number.isFinite(r)?r:0}function pDe(e,t){var i;let r=!1,n=!1,a=!1;for(const o of e){const l=((i=t[o])==null?void 0:i.name)||"";B_(l,"hot")&&(r=!0),B_(l,"warm")&&(n=!0),B_(l,"cold")&&(a=!0)}return r?"hot":n?"warm":a?"cold":null}function gDe(e,t,r){var i;const n=$E(e);if(n==="qualified")return"qualified";if(n==="disqualified"||n==="unqualified")return"unqualified";const a=new Set;for(const o of t){const l=mDe((i=r[o])==null?void 0:i.name);l&&a.add(l)}for(const o of hDe)if(a.has(o))return o;return"new_lead"}async function vDe(e,t){const r=t.filter(Boolean);if(r.length===0)return[];const n=200,a=[];for(let i=0;i<r.length;i+=n){const o=r.slice(i,i+n),{data:l,error:c}=await z.from("instagram_conversation_tags").select("conversation_id,tag_id").eq("workspace_id",e).in("conversation_id",o);if(c)throw c;for(const u of Array.isArray(l)?l:[])a.push({conversation_id:String(u.conversation_id),tag_id:String(u.tag_id)})}return a}function Ko(e){return e==null?"":String(e)}function yDe(){const e=Xt(),{workspace:t,userRole:r}=on(),{user:n,profile:a}=Kt(),[i,o]=h.useState([]),[l,c]=h.useState(!0),[u,d]=h.useState(!1),[f,m]=h.useState({}),[p,v]=h.useState(!1),[g,b]=h.useState(!1),[y,w]=h.useState(null),[x,_]=h.useState(null),[S,k]=h.useState([]),[C,j]=h.useState(!1),[N,A]=h.useState(""),[P,T]=h.useState(!1),L=h.useRef(null),[U,D]=h.useState(null),[H,B]=h.useState(""),[M,$]=h.useState(""),[re,ie]=h.useState(""),[q,K]=h.useState(!1),ne=r==="owner",ae=h.useCallback(async()=>{if(t!=null&&t.id){c(!0);try{const{data:Q,error:te}=await z.from("workspace_members").select("*").eq("workspace_id",t.id).eq("role","setter").order("created_at",{ascending:!0});if(te)throw te;const Ne=Q||[],je=Ne.map(R=>String(R.user_id)).filter(Boolean),J={};if(je.length>0){const{data:R,error:Y}=await z.from("profiles").select("id,full_name,display_name,avatar_url").in("id",je);if(Y)console.error("Error fetching profiles:",Y);else for(const Se of R||[])J[String(Se.id)]=Se}const oe=[],Ce=Ne.map(R=>{const Y=String(R.user_id),Se=J[Y]||null,Re=String(R.display_name||"").trim(),de=String((Se==null?void 0:Se.full_name)||"").trim(),G=String((Se==null?void 0:Se.display_name)||"").trim(),ue=de||G;let he=ue||Re||"Appointment Setter";if(Y===(n==null?void 0:n.id)){const Z=String((a==null?void 0:a.full_name)||(a==null?void 0:a.display_name)||"").trim();Z&&(he=Z)}return ue&&ue!==Re&&oe.push({memberId:String(R.id),displayName:ue}),{memberId:String(R.id),userId:Y,name:he,avatarUrl:(Se==null?void 0:Se.avatar_url)||null,joinedAt:String(R.created_at)}});o(Ce),oe.length>0&&Promise.all(oe.map(async R=>{const{error:Y}=await z.from("workspace_members").update({display_name:R.displayName}).eq("id",R.memberId);Y&&console.warn("Failed to sync setter display_name:",R.memberId,Y)})).catch(R=>{console.warn("Failed syncing setter display names:",R)})}catch(Q){console.error("Error fetching setters:",Q),o([])}finally{c(!1)}}},[t==null?void 0:t.id,n==null?void 0:n.id,a==null?void 0:a.full_name,a==null?void 0:a.display_name]),_e=h.useCallback(async()=>{if(t!=null&&t.id&&i.length!==0){d(!0);try{const Q=new Set(i.map(Z=>Z.userId)),te=Array.from(Q),[Ne,je,J]=await Promise.all([z.from("instagram_threads").select("conversation_id,assigned_user_id,lead_status,last_inbound_at,last_outbound_at,is_spam").eq("workspace_id",t.id).neq("lead_status","removed"),z.from("instagram_tags").select("id,name").eq("workspace_id",t.id),z.from("instagram_thread_audit_log").select("actor_user_id,action,created_at").eq("workspace_id",t.id).in("action",["priority_followed_up","unpin","bulk_pin"])]),Ce=(Array.isArray(Ne.data)?Ne.data:[]).filter(Z=>{if(Z!=null&&Z.is_spam)return!1;const ge=Z!=null&&Z.assigned_user_id?String(Z.assigned_user_id):"";return ge?Q.has(ge):!1}),R=Array.isArray(je.data)?je.data:[],Y={};for(const Z of R)Y[String(Z.id)]={id:String(Z.id),name:String(Z.name||"")};const Se=Ce.map(Z=>String(Z.conversation_id)).filter(Boolean),Re=await vDe(t.id,Se),de={};for(const Z of Re){const ge=String(Z.conversation_id);de[ge]||(de[ge]=[]),de[ge].push(String(Z.tag_id))}const G={};for(const Z of Array.isArray(J.data)?J.data:[]){const ge=Z!=null&&Z.actor_user_id?String(Z.actor_user_id):"";!ge||!Q.has(ge)||(G[ge]=(G[ge]||0)+1)}const ue={},he={};for(const Z of te)he[Z]={userId:Z,assignedCount:0,unrepliedCount:0,avgResponseMinutes:null,stageCounts:{new_lead:0,in_contact:0,qualified:0,unqualified:0,call_booked:0,won:0,no_show:0},hotWaitingCount:0,priorityHandledCount:G[Z]||0};for(const Z of Ce){const ge=Z!=null&&Z.assigned_user_id?String(Z.assigned_user_id):"";if(!ge||!he[ge])continue;const Ie=String(Z.conversation_id||""),Ee=de[Ie]||[],We=wM(Z==null?void 0:Z.last_inbound_at),Oe=wM(Z==null?void 0:Z.last_outbound_at),Fe=!!We&&(!Oe||We>Oe),rt=gDe(Z==null?void 0:Z.lead_status,Ee,Y),nt=pDe(Ee,Y);if(he[ge].assignedCount+=1,he[ge].stageCounts[rt]+=1,Fe&&(he[ge].unrepliedCount+=1),Fe&&nt==="hot"&&(he[ge].hotWaitingCount+=1),We&&Oe&&Oe>We){const Gt=Math.max(0,Math.round((Oe-We)/6e4));ue[ge]||(ue[ge]=[]),ue[ge].push(Gt)}}for(const Z of te){const ge=ue[Z]||[];he[Z].avgResponseMinutes=ge.length?Math.round(ge.reduce((Ie,Ee)=>Ie+Ee,0)/ge.length):null}m(he)}catch(Q){console.error("Error fetching setter stats:",Q),m({}),ee.error((Q==null?void 0:Q.message)||"Failed to load setter metrics")}finally{d(!1)}}},[t==null?void 0:t.id,i]);h.useEffect(()=>{t!=null&&t.id&&ae()},[t==null?void 0:t.id,ae]),h.useEffect(()=>{t!=null&&t.id&&i.length!==0&&_e()},[t==null?void 0:t.id,i.length,_e]),h.useEffect(()=>{t!=null&&t.id&&x!=null&&x.userId&&(j(!0),(async()=>{try{const Q=await z.from("setter_messages").select("*").eq("workspace_id",t.id).eq("setter_id",x.userId).order("created_at",{ascending:!0});if(Q.error){if(L_(Q.error)==="workspace_id"){const Ne=await z.from("setter_messages").select("*").eq("setter_id",x.userId).order("created_at",{ascending:!0});if(Ne.error)throw Ne.error;k((Array.isArray(Ne.data)?Ne.data:[]).map(je=>F_(je,t.id)));return}throw Q.error}k((Array.isArray(Q.data)?Q.data:[]).map(te=>F_(te,t.id)))}catch(Q){console.error("Error loading setter chat:",Q),ee.error((Q==null?void 0:Q.message)||"Failed to load chat")}finally{j(!1)}})())},[t==null?void 0:t.id,x==null?void 0:x.userId]),h.useEffect(()=>{if(!(t!=null&&t.id)||!(x!=null&&x.userId))return;const Q=z.channel(`setter_messages:${t.id}:${x.userId}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"setter_messages",filter:`setter_id=eq.${x.userId}`},te=>{const Ne=te==null?void 0:te.new;Ne&&String(Ne.setter_id)===String(x.userId)&&k(je=>{const J=String(Ne.id||"");return J&&je.some(oe=>String(oe.id)===J)?je:[...je,Ne]})}).subscribe();return()=>{z.removeChannel(Q)}},[t==null?void 0:t.id,x==null?void 0:x.userId]),h.useEffect(()=>{const Q=L.current;Q&&(Q.scrollTop=Q.scrollHeight)},[S.length,x==null?void 0:x.userId]);const pe=h.useCallback(async()=>{if(!(t!=null&&t.id)||!(n!=null&&n.id)||!(x!=null&&x.userId))return;const Q=N.trim();if(Q){T(!0);try{const te={setter_id:x.userId,sender_id:n.id,sender_type:"coach"},Ne=["content","message","text","body","message_text","message_body"];let je=null,J=null;for(const Ce of Ne){const R={...te,[Ce]:Q,workspace_id:t.id};for(let Y=0;Y<6;Y+=1){const{data:Se,error:Re}=await z.from("setter_messages").insert(R).select("*").single();if(!Re){je=Se,J=null;break}J=Re;const de=L_(Re);if(de===Ce)break;if(de&&Object.prototype.hasOwnProperty.call(R,de)){delete R[de];continue}break}if(je)break}if(!je)throw J||new Error("Failed to send message");A("");const oe=F_(je,t.id);oe!=null&&oe.id&&k(Ce=>{const R=String(oe.id);return Ce.some(Y=>String(Y.id)===R)?Ce:[...Ce,oe]})}catch(te){console.error("Error sending setter chat message:",te),ee.error((te==null?void 0:te.message)||"Failed to send message")}finally{T(!1)}}},[t==null?void 0:t.id,n==null?void 0:n.id,x==null?void 0:x.userId,N]),ye=h.useCallback(async()=>{if(!(t!=null&&t.id)||!(n!=null&&n.id)||!(U!=null&&U.userId))return;const Q=H.trim();if(!Q){ee.error("Please enter a task title");return}K(!0);try{const te={setter_id:U.userId,title:Q,description:M.trim()||null,due_date:re||null,status:"pending",workspace_id:t.id,created_by:n.id};let Ne=null;for(let je=0;je<6;je+=1){const J=await z.from("setter_tasks").insert(te);if(!J.error){Ne=null;break}Ne=J.error;const oe=L_(J.error);if(oe&&Object.prototype.hasOwnProperty.call(te,oe)){delete te[oe];continue}break}if(Ne)throw Ne;ee.success("Task assigned"),B(""),$(""),ie(""),D(null)}catch(te){console.error("Error creating setter task:",te),ee.error((te==null?void 0:te.message)||"Failed to assign task")}finally{K(!1)}},[t==null?void 0:t.id,n==null?void 0:n.id,U==null?void 0:U.userId,H,M,re]),ce=h.useMemo(()=>i.map(Q=>{const te=f[Q.userId]||null;return{setter:Q,stats:te}}),[i,f]),me=h.useCallback(async()=>{if(!y)return;const{error:Q}=await z.from("workspace_members").delete().eq("id",y.memberId);if(Q){ee.error("Failed to remove setter");return}ee.success("Setter removed"),b(!1),w(null),await ae()},[y,ae]);return s.jsx(Er,{requireOwner:!0,children:s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4 mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"headline-domaine text-[36px] font-medium",children:"Setters"}),s.jsx("p",{className:"text-sm text-white/45 mt-1",children:"Invite setters and manage your team"})]}),ne?s.jsxs(ze,{onClick:()=>v(!0),className:"bg-white text-black hover:bg-white/90 font-semibold border-0 shadow-none rounded-xl",children:[s.jsx(Um,{className:"w-4 h-4 mr-2"}),"Invite Setter"]}):null]}),l?s.jsx("div",{className:"text-muted-foreground text-sm",children:"Loading setters"}):i.length===0?s.jsx("div",{className:"mt-6 rounded-2xl border border-white/10 bg-black/30 overflow-hidden",children:s.jsxs("div",{className:"p-10 text-center",children:[s.jsx("div",{className:"text-sm text-white/75",children:"No setters yet."}),s.jsx("div",{className:"text-xs text-white/35 mt-2",children:"Invite your first appointment setter to get started."}),ne?s.jsx("div",{className:"mt-6",children:s.jsxs(ze,{onClick:()=>v(!0),className:"bg-white text-black hover:bg-white/90 font-semibold border-0 shadow-none rounded-xl",children:[s.jsx(Um,{className:"w-4 h-4 mr-2"}),"Invite Setter"]})}):null]})}):s.jsxs("div",{className:"mt-6 rounded-2xl border border-white/10 bg-black/30 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(rg,{className:"w-full",children:[s.jsx(ng,{className:"bg-black/40",children:s.jsxs(bo,{className:"border-white/8",children:[s.jsx(dn,{className:"text-white/55",children:"Setter"}),s.jsx(dn,{className:"text-white/55",children:"Conversations"}),s.jsx(dn,{className:"text-white/55",children:"Unreplied"}),s.jsx(dn,{className:"text-white/55",children:"Avg response"}),s.jsx(dn,{className:"text-white/55",children:"Qualified"}),s.jsx(dn,{className:"text-white/55",children:"Booked"}),s.jsx(dn,{className:"text-white/55",children:"Won"}),s.jsx(dn,{className:"text-white/55",children:"Hot waiting"}),s.jsx(dn,{className:"text-white/55",children:"Priority handled"}),s.jsx(dn,{className:"text-white/55 text-right",children:"Actions"})]})}),s.jsx(ag,{children:ce.map(({setter:Q,stats:te})=>{const Ne=Q.name.slice(0,1).toUpperCase()||"S",je=Q.joinedAt?Lt(new Date(Q.joinedAt),"MMM d, yyyy"):"",J=te?te.assignedCount:null,oe=te?te.unrepliedCount:null,Ce=te?te.avgResponseMinutes==null?"n/a":`${te.avgResponseMinutes} min`:null,R=te?te.stageCounts.qualified:null,Y=te?te.stageCounts.call_booked:null,Se=te?te.stageCounts.won:null,Re=te?te.hotWaitingCount:null,de=te?te.priorityHandledCount:null;return s.jsxs(bo,{className:"border-white/8 hover:bg-white/[0.03] cursor-pointer",onClick:G=>{const ue=G.target;ue&&ue.closest('button, a, input, textarea, select, [role^="menuitem"]')||e(`/messages?assigned=${encodeURIComponent(Q.userId)}`)},children:[s.jsx(fn,{children:s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsxs(_w,{className:"h-8 w-8",children:[s.jsx(Sw,{src:Q.avatarUrl||void 0,alt:Q.name}),s.jsx(jw,{className:"text-white/70 text-xs",children:Ne})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-sm text-white/85 truncate",children:Q.name}),je?s.jsxs("div",{className:"text-xs text-white/35 truncate",children:["Joined ",je]}):null]})]})}),s.jsx(fn,{className:"text-sm text-white/75",children:Ko(J)}),s.jsx(fn,{className:"text-sm text-white/75",children:Ko(oe)}),s.jsx(fn,{className:"text-sm text-white/75",children:Ko(Ce)}),s.jsx(fn,{className:"text-sm text-white/75",children:Ko(R)}),s.jsx(fn,{className:"text-sm text-white/75",children:Ko(Y)}),s.jsx(fn,{className:"text-sm text-white/75",children:Ko(Se)}),s.jsx(fn,{className:"text-sm text-white/75",children:Ko(Re)}),s.jsx(fn,{className:"text-sm text-white/75",children:Ko(de)}),s.jsx(fn,{className:"text-right",children:s.jsxs(en,{children:[s.jsx(tn,{asChild:!0,children:s.jsx(ze,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-xl text-white/55 hover:text-white hover:bg-white/10","aria-label":"Setter actions",title:"Setter actions",onClick:G=>G.stopPropagation(),children:s.jsx(uN,{className:"h-4 w-4"})})}),s.jsxs(Hr,{align:"end",className:"min-w-[200px] rounded-2xl border border-white/10 bg-black p-1",children:[s.jsxs(wr,{onClick:G=>{G.stopPropagation(),_(Q)},className:"rounded-xl text-[13px]",children:[s.jsx(cN,{className:"h-4 w-4 mr-2 text-white/55"}),"Chat"]}),s.jsxs(wr,{onClick:G=>{G.stopPropagation(),D(Q),B(""),$(""),ie("")},className:"rounded-xl text-[13px]",children:[s.jsx(Kx,{className:"h-4 w-4 mr-2 text-white/55"}),"Assign task"]}),s.jsxs(wr,{onClick:G=>{G.stopPropagation(),e(`/messages?assigned=${encodeURIComponent(Q.userId)}`)},className:"rounded-xl text-[13px]",children:["View inbox",s.jsx(Ll,{className:"h-4 w-4 ml-auto text-white/40"})]}),s.jsxs(wr,{onClick:G=>{G.stopPropagation(),w(Q),b(!0)},className:"rounded-xl text-[13px] text-[#f87171] focus:text-[#f87171] focus:bg-[#3d2626] hover:bg-[#3d2626] data-[highlighted]:bg-[#3d2626]",children:[s.jsx(Va,{className:"h-4 w-4 mr-2"}),"Remove setter"]})]})]})})]},Q.userId)})})]})}),u?s.jsx("div",{className:"p-4 text-xs text-white/40",children:"Loading metrics"}):null]}),s.jsx(fDe,{open:p,onOpenChange:Q=>{v(Q),Q||ae()}}),s.jsx(Wl,{open:g,onOpenChange:b,children:s.jsxs(To,{className:"bg-[#0a0a0a] border-border rounded-3xl",children:[s.jsxs(Oo,{children:[s.jsx(Mo,{children:"Remove Setter"}),s.jsx(Ro,{children:"Are you sure you want to remove this setter? They will lose access to this workspace immediately."})]}),s.jsxs(Io,{children:[s.jsx(Do,{className:"border-border hover:bg-[#1a1a1a] rounded-2xl",children:"Cancel"}),s.jsx($o,{onClick:me,className:"bg-[#dc2626] hover:bg-[#b91c1c] border-0 rounded-2xl",children:"Remove"})]})]})}),s.jsx(Gi,{open:!!x,onOpenChange:Q=>{Q||(_(null),A(""),k([]))},children:s.jsxs(yi,{className:"bg-black border border-white/10 rounded-3xl max-w-2xl",children:[s.jsxs(xi,{children:[s.jsxs(bi,{className:"text-white/90",children:["Chat",x!=null&&x.name?`: ${x.name}`:""]}),s.jsx(Ef,{className:"text-white/45",children:"Messages here are visible to the setter in their Coach tab."})]}),s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/40 overflow-hidden",children:[s.jsx("div",{ref:L,className:"h-[420px] overflow-y-auto p-4 space-y-3",children:C?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex justify-start",children:s.jsx($e,{className:"h-12 w-[62%] max-w-[520px] rounded-2xl bg-white/[0.06]"})}),s.jsx("div",{className:"flex justify-end",children:s.jsx($e,{className:"h-10 w-[50%] max-w-[420px] rounded-2xl bg-white/[0.08]"})}),s.jsx("div",{className:"flex justify-start",children:s.jsx($e,{className:"h-16 w-[70%] max-w-[560px] rounded-2xl bg-white/[0.06]"})})]}):S.length===0?s.jsx("div",{className:"text-sm text-white/40",children:"No messages yet."}):S.map(Q=>{const te=Q.sender_type==="coach";return s.jsx("div",{className:`flex ${te?"justify-end":"justify-start"}`,children:s.jsx("div",{className:`max-w-[75%] rounded-2xl px-3 py-2 text-[13px] leading-relaxed ${te?"bg-white text-black":"bg-white/[0.06] text-white/90 border border-white/10"}`,children:Q.content})},Q.id)})}),s.jsx("div",{className:"p-3 border-t-[0.5px] border-white/10 bg-black",children:s.jsxs("div",{className:"flex items-end gap-3",children:[s.jsx("textarea",{value:N,onChange:Q=>A(Q.target.value),placeholder:"Type a message",rows:1,className:"flex-1 min-w-0 max-h-32 resize-none rounded-2xl bg-black border border-white/10 px-4 py-3 text-[13px] text-white/85 placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-white/10",onKeyDown:Q=>{Q.key==="Enter"&&!Q.shiftKey&&(Q.preventDefault(),pe())}}),s.jsx("button",{type:"button",onClick:pe,disabled:P||!N.trim(),className:"h-11 w-11 rounded-2xl bg-white text-black grid place-items-center disabled:opacity-50","aria-label":"Send",title:"Send",children:s.jsx(Zx,{className:"h-4 w-4"})})]})})]})]})}),s.jsx(Gi,{open:!!U,onOpenChange:Q=>Q?null:D(null),children:s.jsxs(yi,{className:"bg-black border border-white/10 rounded-3xl max-w-xl",children:[s.jsxs(xi,{children:[s.jsxs(bi,{className:"text-white/90",children:["Assign task",U!=null&&U.name?`: ${U.name}`:""]}),s.jsx(Ef,{className:"text-white/45",children:"This task will appear in the setter's Tasks page."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm text-white/70",children:"Task title"}),s.jsx("input",{value:H,onChange:Q=>B(Q.target.value),placeholder:"Enter task title",className:"w-full h-11 rounded-2xl bg-black border border-white/10 px-4 text-[13px] text-white/85 placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-white/10"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm text-white/70",children:"Description (optional)"}),s.jsx("textarea",{value:M,onChange:Q=>$(Q.target.value),placeholder:"Add more detail",rows:3,className:"w-full rounded-2xl bg-black border border-white/10 px-4 py-3 text-[13px] text-white/85 placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-white/10 resize-none"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm text-white/70",children:"Due date (optional)"}),s.jsx("input",{type:"date",value:re,onChange:Q=>ie(Q.target.value),className:"w-full h-11 rounded-2xl bg-black border border-white/10 px-4 text-[13px] text-white/85 focus:outline-none focus:ring-2 focus:ring-white/10"})]})]}),s.jsxs(ch,{children:[s.jsx(ze,{type:"button",variant:"outline",className:"border-white/15 hover:bg-white/[0.03] rounded-2xl",onClick:()=>D(null),children:"Cancel"}),s.jsx(ze,{type:"button",className:"bg-white text-black hover:bg-white/90 border-0 rounded-2xl",disabled:q||!H.trim(),onClick:ye,children:q?"Assigning":"Assign task"})]})]})})]})})}function _M(){const{workspace:e,userRole:t}=on(),{user:r,profile:n}=Kt(),[a,i]=h.useState(!0),[o,l]=h.useState([]),c=t==="setter"||t==="owner",u=h.useCallback(async()=>{if(e!=null&&e.id){i(!0);try{const{data:f,error:m}=await z.from("workspace_members").select("id,user_id,role,display_name,created_at").eq("workspace_id",e.id).eq("role","setter").order("created_at",{ascending:!0});if(m)throw m;const p=f||[],v=p.map(y=>String(y.user_id)).filter(Boolean),g={};if(v.length>0){const{data:y,error:w}=await z.from("profiles").select("id,full_name,display_name,avatar_url").in("id",v);if(w)console.warn("Failed to load setter profiles:",w);else for(const x of y||[])g[String(x.id)]=x}const b=p.map(y=>{const w=String(y.user_id||""),x=g[w]||null,_=String(y.display_name||"").trim(),S=String((x==null?void 0:x.full_name)||"").trim(),k=String((x==null?void 0:x.display_name)||"").trim();let j=S||k||_||"Appointment Setter";if(w&&w===String((r==null?void 0:r.id)||"")){const N=String((n==null?void 0:n.full_name)||(n==null?void 0:n.display_name)||"").trim();N&&(j=N)}return{userId:w,name:j,avatarUrl:x!=null&&x.avatar_url?String(x.avatar_url):null,joinedAt:String(y.created_at||"")}});l(b)}catch(f){console.error("Failed to load setters:",f),ee.error((f==null?void 0:f.message)||"Failed to load setters")}finally{i(!1)}}},[e==null?void 0:e.id,r==null?void 0:r.id,n==null?void 0:n.full_name,n==null?void 0:n.display_name]);h.useEffect(()=>{u()},[u]);const d=h.useMemo(()=>o,[o]);return c?s.jsx(Er,{children:s.jsxs("div",{className:"p-8",children:[s.jsx("div",{className:"flex items-start justify-between gap-4 mb-8",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-[36px] font-medium",children:"Setters"}),s.jsx("p",{className:"text-sm text-white/45 mt-1",children:"Your team roster"})]})}),a?s.jsx("div",{className:"mt-6 rounded-2xl border border-white/10 bg-black/30 overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsx($e,{className:"h-5 w-40 rounded-xl bg-white/[0.08]"}),s.jsx("div",{className:"mt-4 space-y-3",children:Array.from({length:6}).map((f,m)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx($e,{className:"h-9 w-9 rounded-full bg-white/[0.08]"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx($e,{className:"h-4 w-56 rounded-xl bg-white/[0.06]"}),s.jsx($e,{className:"h-3 w-32 rounded-xl bg-white/[0.05] mt-2"})]})]},m))})]})}):d.length===0?s.jsx("div",{className:"mt-6 rounded-2xl border border-white/10 bg-black/30 overflow-hidden",children:s.jsxs("div",{className:"p-10 text-center",children:[s.jsx("div",{className:"text-sm text-white/75",children:"No setters yet."}),s.jsx("div",{className:"text-xs text-white/35 mt-2",children:"Invite a setter from the Team page."})]})}):s.jsx("div",{className:"mt-6 rounded-2xl border border-white/10 bg-black/30 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(rg,{className:"w-full",children:[s.jsx(ng,{className:"bg-black/40",children:s.jsxs(bo,{className:"border-white/8",children:[s.jsx(dn,{className:"text-white/55",children:"Setter"}),s.jsx(dn,{className:"text-white/55",children:"Joined"})]})}),s.jsx(ag,{children:d.map(f=>{const m=(f.name||"S").slice(0,1).toUpperCase(),p=f.joinedAt?Lt(new Date(f.joinedAt),"MMM d, yyyy"):"",v=String(f.userId)===String((r==null?void 0:r.id)||"");return s.jsxs(bo,{className:"border-white/8 hover:bg-white/[0.02]",children:[s.jsx(fn,{className:"py-4",children:s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsxs(_w,{className:"h-9 w-9 border border-white/10 bg-black/40",children:[s.jsx(Sw,{src:f.avatarUrl||void 0,alt:f.name}),s.jsx(jw,{className:"bg-black text-white/70 text-sm",children:m})]}),s.jsx("div",{className:"min-w-0",children:s.jsxs("div",{className:"text-sm font-medium text-white/90 truncate",children:[f.name,v?s.jsx("span",{className:"text-white/40 font-normal",children:" (You)"}):null]})})]})}),s.jsx(fn,{className:"text-sm text-white/55",children:p})]},f.userId)})})]})})})]})}):s.jsx(Er,{children:s.jsx("div",{className:"p-8",children:s.jsx("div",{className:"rounded-3xl border border-white/10 bg-black p-6 text-sm text-white/70",children:"This page is only available to workspace owners and setters."})})})}function xDe(){var p;const{profile:e,updateProfile:t,signOut:r,user:n}=Kt(),[a,i]=h.useState(""),[o,l]=h.useState(!1),[c,u]=h.useState("photo"),[d,f]=h.useState("#2A2A2A");h.useEffect(()=>{e&&(i(e.full_name||e.display_name||""),u(e.avatar_mode||"photo"),f(e.avatar_color||"#2A2A2A"))},[e]);const m=h.useCallback(async()=>{l(!0);const v={},g=String((e==null?void 0:e.full_name)||(e==null?void 0:e.display_name)||"").trim(),b=String(a||"").trim();if(g!==b&&(v.display_name=b||null,v.full_name=b||null),((e==null?void 0:e.avatar_mode)||"photo")!==c&&(v.avatar_mode=c),((e==null?void 0:e.avatar_color)||"#2A2A2A")!==d&&(v.avatar_color=d),Object.keys(v).length===0){l(!1),ee.success("Profile updated");return}const{error:y}=await t(v);if(l(!1),y){const w=String((y==null?void 0:y.message)||"Failed to update profile");ee.error(w);return}ee.success("Profile updated")},[e,a,c,d,t]);return s.jsx(Er,{children:s.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-10",children:[s.jsxs("div",{children:[s.jsx("div",{className:"headline-domaine text-3xl font-semibold text-white",children:"Profile"}),s.jsx("p",{className:"text-sm text-white/45 mt-1",children:"Update your personal info."})]}),s.jsx("div",{className:"mt-8 max-w-[760px]",children:s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black p-6",children:[s.jsx("div",{className:"text-lg font-semibold text-white",children:"Profile"}),s.jsx("div",{className:"mt-1 text-sm text-white/45",children:"Update your personal info."}),s.jsxs("div",{className:"mt-6 space-y-5",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-white/60",children:"Avatar"}),s.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[s.jsx(Dp,{name:a||"User",size:"md",bgColor:d,imageUrl:(e==null?void 0:e.avatar_url)||((p=n==null?void 0:n.user_metadata)==null?void 0:p.avatar_url),mode:c}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",className:Pe("h-9 px-3 rounded-xl border text-[13px] transition-colors",c==="photo"?"border-white/20 bg-white/[0.06] text-white":"border-white/10 text-white/70 hover:text-white hover:bg-white/[0.03]"),onClick:()=>u("photo"),children:"Photo"}),s.jsx("button",{type:"button",className:Pe("h-9 px-3 rounded-xl border text-[13px] transition-colors",c==="letter"?"border-white/20 bg-white/[0.06] text-white":"border-white/10 text-white/70 hover:text-white hover:bg-white/[0.03]"),onClick:()=>u("letter"),children:"Letter"})]}),c==="letter"?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"text-xs text-white/45",children:"Color"}),s.jsx("input",{type:"color",value:d,onChange:v=>f(v.target.value),className:"h-8 w-12 rounded-lg border border-white/10 bg-transparent"}),s.jsx("input",{value:d,onChange:v=>f(v.target.value),className:"h-8 w-28 rounded-lg border border-white/10 bg-transparent px-2 text-xs text-white/75"})]}):null]})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-white/60",children:"Name"}),s.jsx("input",{value:a,onChange:v=>i(v.target.value),placeholder:"Your name",className:"mt-2 h-10 w-full rounded-2xl border border-white/10 bg-transparent px-3 text-sm text-white/80 placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-white/10"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",className:"h-8 px-3.5 rounded-xl bg-white text-black text-[13px] font-semibold hover:bg-white/90 disabled:opacity-60",disabled:o,onClick:m,children:o?s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4 animate-spin"}),"Saving"]}):"Save changes"}),s.jsx("button",{type:"button",className:"h-10 px-4 rounded-2xl border border-white/10 text-sm text-white/60 hover:text-white hover:bg-white/[0.03]",onClick:()=>r(),children:"Sign out"})]})]})]})})]})})}function SM(e){const t=`${(e==null?void 0:e.message)||""} ${(e==null?void 0:e.details)||""} ${(e==null?void 0:e.hint)||""}`,r=t.match(/Could not find the '([^']+)' column/i);if(r!=null&&r[1])return r[1];const n=t.match(/column\s+[a-z_]+\.(\w+)\s+does not exist/i);return n!=null&&n[1]?n[1]:null}function Qv(e,t){const n=String((e==null?void 0:e.sender_type)||"").toLowerCase()==="setter"?"setter":"coach",a=(e==null?void 0:e.content)??(e==null?void 0:e.message)??(e==null?void 0:e.text)??(e==null?void 0:e.body)??(e==null?void 0:e.message_text)??(e==null?void 0:e.message_body)??"";return{id:String((e==null?void 0:e.id)||""),workspace_id:e!=null&&e.workspace_id?String(e.workspace_id):t,setter_id:String((e==null?void 0:e.setter_id)||""),sender_id:e!=null&&e.sender_id?String(e.sender_id):void 0,sender_type:n,content:String(a||""),read_at:e!=null&&e.read_at?String(e.read_at):null,created_at:String((e==null?void 0:e.created_at)||new Date().toISOString())}}function bDe(e){const t=new Date(e);return Number.isFinite(t.getTime())?t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}):""}function wDe(){const{user:e}=Kt(),{workspace:t,userRole:r,members:n}=on(),[a,i]=h.useState([]),[o,l]=h.useState(!0),[c,u]=h.useState(""),[d,f]=h.useState(!1),m=h.useRef(null),p=r==="setter",v=h.useMemo(()=>n.find(_=>_.role==="owner")||null,[n]),[g,b]=h.useState("");h.useEffect(()=>{const _=String((v==null?void 0:v.displayName)||"").trim();if(_){b(_);return}const S=v==null?void 0:v.userId;if(!S){b("Team member");return}let k=!1;return(async()=>{const{data:C,error:j}=await z.from("profiles").select("full_name,display_name").eq("id",S).maybeSingle();if(k)return;if(j){b("Team member");return}const N=String((C==null?void 0:C.full_name)||(C==null?void 0:C.display_name)||"").trim();b(N||"Team member")})(),()=>{k=!0}},[v==null?void 0:v.userId,v==null?void 0:v.displayName]);const y=h.useCallback(async()=>{if(!(!(t!=null&&t.id)||!(e!=null&&e.id)||!p)){l(!0);try{const _=await z.from("setter_messages").select("*").eq("workspace_id",t.id).eq("setter_id",e.id).order("created_at",{ascending:!0});if(_.error){if(SM(_.error)==="workspace_id"){const k=await z.from("setter_messages").select("*").eq("setter_id",e.id).order("created_at",{ascending:!0});if(k.error)throw k.error;i((Array.isArray(k.data)?k.data:[]).map(C=>Qv(C,t.id)));return}throw _.error}i((Array.isArray(_.data)?_.data:[]).map(S=>Qv(S,t.id)))}catch(_){console.error("Error loading setter messages:",_),ee.error((_==null?void 0:_.message)||"Failed to load coach chat")}finally{l(!1)}}},[t==null?void 0:t.id,e==null?void 0:e.id,p]);h.useEffect(()=>{y()},[y]),h.useEffect(()=>{if(!(t!=null&&t.id)||!(e!=null&&e.id)||!p)return;const _=z.channel(`setter_messages:${t.id}:${e.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"setter_messages",filter:`setter_id=eq.${e.id}`},S=>{const k=S==null?void 0:S.new;if(!k||String(k.setter_id)!==String(e.id))return;const C=Qv(k,t.id);i(j=>{const N=String(C.id||"");return N&&j.some(A=>String(A.id)===N)?j:[...j,C]})}).subscribe();return()=>{z.removeChannel(_)}},[t==null?void 0:t.id,e==null?void 0:e.id,p]),h.useEffect(()=>{const _=m.current;_&&(_.scrollTop=_.scrollHeight)},[a.length]);const w=h.useMemo(()=>g||"Team member",[g]),x=h.useCallback(async()=>{if(!(t!=null&&t.id)||!(e!=null&&e.id)||!c.trim()||!p)return;const _=c.trim();f(!0);try{const S={setter_id:e.id,sender_id:e.id,sender_type:"setter"},k=["content","message","text","body","message_text","message_body"];let C=null,j=null;for(const A of k){const P={...S,[A]:_,workspace_id:t.id};for(let T=0;T<6;T+=1){const{data:L,error:U}=await z.from("setter_messages").insert(P).select("*").single();if(!U){C=L,j=null;break}j=U;const D=SM(U);if(D===A)break;if(D&&Object.prototype.hasOwnProperty.call(P,D)){delete P[D];continue}break}if(C)break}if(!C)throw j||new Error("Failed to send message");u("");const N=Qv(C,t.id);N!=null&&N.id&&i(A=>{const P=String(N.id);return A.some(T=>String(T.id)===P)?A:[...A,N]})}catch(S){console.error("Error sending setter message:",S),ee.error((S==null?void 0:S.message)||"Failed to send message")}finally{f(!1)}},[t==null?void 0:t.id,e==null?void 0:e.id,c,p]);return p?s.jsx(Er,{fullWidth:!0,scrollable:!1,children:s.jsx("div",{className:"h-full flex bg-black overflow-hidden",children:s.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[s.jsxs("div",{className:"px-6 pt-5 pb-4 border-b-[0.5px] border-white/10",children:[s.jsx("div",{className:"text-[22px] font-semibold tracking-tight text-white/90",children:w}),s.jsx("div",{className:"text-xs text-white/40 mt-1",children:"Direct messages"})]}),s.jsx("div",{ref:m,className:"flex-1 overflow-y-auto px-6 py-5 space-y-3",children:o?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex justify-start",children:s.jsx($e,{className:"h-12 w-[62%] max-w-[520px] rounded-2xl bg-white/[0.06]"})}),s.jsx("div",{className:"flex justify-end",children:s.jsx($e,{className:"h-10 w-[52%] max-w-[420px] rounded-2xl bg-white/[0.08]"})}),s.jsx("div",{className:"flex justify-start",children:s.jsx($e,{className:"h-16 w-[70%] max-w-[560px] rounded-2xl bg-white/[0.06]"})}),s.jsx("div",{className:"flex justify-end",children:s.jsx($e,{className:"h-12 w-[58%] max-w-[460px] rounded-2xl bg-white/[0.08]"})})]}):a.length===0?s.jsx("div",{className:"text-sm text-white/40",children:"No messages yet."}):a.map(_=>{const S=_.sender_type==="setter",k=bDe(_.created_at);return s.jsx("div",{className:`flex ${S?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[70%] rounded-2xl px-3 py-2 text-[13px] leading-relaxed ${S?"bg-white text-black":"bg-white/[0.06] text-white/90 border border-white/10"}`,children:[s.jsx("div",{children:_.content}),k?s.jsx("div",{className:`mt-1 text-[10px] ${S?"text-black/50":"text-white/35"}`,children:k}):null]})},_.id)})}),s.jsx("div",{className:"px-6 py-4 border-t-[0.5px] border-white/10",children:s.jsxs("div",{className:"flex items-end gap-3",children:[s.jsx("textarea",{value:c,onChange:_=>u(_.target.value),placeholder:"Type a message",rows:1,className:"flex-1 min-w-0 max-h-32 resize-none rounded-2xl bg-black border border-white/10 px-4 py-3 text-[13px] text-white/85 placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-white/10",onKeyDown:_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),x())}}),s.jsx("button",{type:"button",onClick:x,disabled:d||!c.trim(),className:"h-11 w-11 rounded-2xl bg-white text-black grid place-items-center disabled:opacity-50","aria-label":"Send",title:"Send",children:s.jsx(Zx,{className:"h-4 w-4"})})]})})]})})}):s.jsx(Er,{children:s.jsx("div",{className:"p-8 text-sm text-white/60",children:"Coach chat is only available for setter accounts."})})}function _De(){const e="acq_vid";try{const r=localStorage.getItem(e);if(r&&r.length>=8)return r}catch{}const t=typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`v-${Date.now()}-${Math.random().toString(16).slice(2)}`;try{localStorage.setItem(e,t)}catch{}return t}function SDe(){const{slug:e}=db(),t=Hn(),[r,n]=h.useState(null),a=h.useMemo(()=>{const o=new URLSearchParams(t.search||""),l=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],c={};for(const u of l){const d=o.get(u);d&&(c[u]=d)}return c},[t.search]),i=h.useMemo(()=>{const o=new URLSearchParams(t.search||""),c=((...u)=>{for(const d of u){const f=o.get(d);if(f)return f}return null})("vid","video","video_id","videoId","youtube_video_id","youtubeVideoId","v");return c?{youtubeVideoId:c}:null},[t.search]);return h.useEffect(()=>{let o=!1;return(async()=>{const c=String(e||"").trim();if(!c){n("Invalid link");return}const u=_De(),d=typeof document<"u"?document.referrer:"",{data:f,error:m}=await z.functions.invoke("link-tracker",{body:{action:"click",slug:c,visitorId:u,referrer:d,meta:{path:t.pathname,search:t.search,utm:a,attribution:i}}});if(o)return;if(m){n("Link is unavailable");return}const p=f!=null&&f.destinationUrl?String(f.destinationUrl):"";if(!p){n("Link is unavailable");return}window.location.replace(p)})().catch(c=>{o||n((c==null?void 0:c.message)||"Link is unavailable")}),()=>{o=!0}},[e,t.pathname,t.search,a,i]),s.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center px-6",children:r?s.jsxs("div",{className:"max-w-md w-full rounded-3xl border border-white/10 bg-black p-6 text-center",children:[s.jsx("div",{className:"text-lg font-medium",children:"This link is unavailable"}),s.jsx("div",{className:"mt-2 text-sm text-white/55",children:r})]}):s.jsxs("div",{className:"flex items-center gap-3 text-white/70",children:[s.jsx(bn,{className:"w-5 h-5 animate-spin"}),s.jsx("div",{className:"text-sm",children:"Redirecting"})]})})}function jM(){const e="acq_vid";try{const r=localStorage.getItem(e);if(r&&r.length>=8)return r}catch{}const t=typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`v-${Date.now()}-${Math.random().toString(16).slice(2)}`;try{localStorage.setItem(e,t)}catch{}return t}function kM(e){try{return new URL(e).hostname.toLowerCase().includes("calendly.com")}catch{return!1}}function jDe(){return document.querySelector('script[data-calendly-widget="1"]')?Promise.resolve():new Promise((t,r)=>{const n=document.createElement("script");n.src="https://assets.calendly.com/assets/external/widget.js",n.async=!0,n.dataset.calendlyWidget="1",n.onload=()=>t(),n.onerror=()=>r(new Error("Failed to load Calendly")),document.head.appendChild(n)})}function kDe(){const{slug:e}=db(),t=Hn(),[r,n]=h.useState(null),[a,i]=h.useState(!0),[o,l]=h.useState(null),[c,u]=h.useState(!1),d=h.useMemo(()=>{const v=new URLSearchParams(t.search||""),g=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],b={};for(const y of g){const w=v.get(y);w&&(b[y]=w)}return b},[t.search]),f=h.useMemo(()=>{const v=new URLSearchParams(t.search||""),b=((...y)=>{for(const w of y){const x=v.get(w);if(x)return x}return null})("vid","video","video_id","videoId","youtube_video_id","youtubeVideoId","v");return b?{youtubeVideoId:b}:null},[t.search]);h.useEffect(()=>{let v=!1;return(async()=>{const b=String(e||"").trim();if(!b){l("Invalid link"),i(!1);return}const y=jM(),w=typeof document<"u"?document.referrer:"",{data:x,error:_}=await z.functions.invoke("link-tracker",{body:{action:"click",slug:b,visitorId:y,referrer:w,meta:{mode:"booking",path:t.pathname,search:t.search,utm:d,attribution:f}}});if(v)return;if(_){l("Link is unavailable"),i(!1);return}const S=x!=null&&x.destinationUrl?String(x.destinationUrl):"";if(!S){l("Link is unavailable"),i(!1);return}n(S),i(!1)})().catch(b=>{v||(l((b==null?void 0:b.message)||"Link is unavailable"),i(!1))}),()=>{v=!0}},[e,t.pathname,t.search,d,f]),h.useEffect(()=>{if(!r||!kM(r))return;let v=!1;const g=async y=>{const w=y==null?void 0:y.data,x=typeof(w==null?void 0:w.event)=="string"?w.event:"";if(!x||x!=="calendly.event_scheduled"||c)return;u(!0);const _=String(e||"").trim(),S=jM(),k=typeof document<"u"?document.referrer:"";try{await z.functions.invoke("link-tracker",{body:{action:"conversion",slug:_,visitorId:S,referrer:k,meta:{calendly:w,path:t.pathname,search:t.search,utm:d,attribution:f}}})}catch{}};return(async()=>{await jDe(),!v&&window.addEventListener("message",g)})().catch(()=>{}),()=>{v=!0,window.removeEventListener("message",g)}},[r,e,c,d,f,t.pathname,t.search]);const m=()=>{r&&(window.location.href=r)};if(a)return s.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center px-6",children:s.jsxs("div",{className:"flex items-center gap-3 text-white/70",children:[s.jsx(bn,{className:"w-5 h-5 animate-spin"}),s.jsx("div",{className:"text-sm",children:"Loading booking page"})]})});if(o||!r)return s.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center px-6",children:s.jsxs("div",{className:"max-w-md w-full rounded-3xl border border-white/10 bg-black p-6 text-center",children:[s.jsx("div",{className:"text-lg font-medium",children:"This link is unavailable"}),s.jsx("div",{className:"mt-2 text-sm text-white/55",children:o||"Link is unavailable"})]})});const p=kM(r);return s.jsx("div",{className:"min-h-screen bg-black text-white",children:s.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-10",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-semibold",children:"Book a call"}),s.jsx("div",{className:"mt-2 text-sm text-white/55",children:p?"Pick a time below. Well track the booking once its scheduled.":"This booking page supports Calendly embeds only. Well still count your click."})]}),s.jsx(ze,{variant:"outline",className:"rounded-2xl border-white/15",onClick:m,children:"Open in browser"})]}),c?s.jsx("div",{className:"mt-6 rounded-3xl border border-white/10 bg-black p-5 text-sm text-white/75",children:"Booking captured. You can close this tab."}):null,s.jsx("div",{className:"mt-8 rounded-3xl border border-white/10 overflow-hidden",children:p?s.jsx("div",{className:"calendly-inline-widget","data-url":r,style:{minWidth:320,height:820}}):s.jsxs("div",{className:"p-6 text-sm text-white/65",children:[s.jsx("div",{className:"font-medium text-white/85",children:"Unsupported scheduler"}),s.jsx("div",{className:"mt-2",children:"Use a Calendly link to track booked calls automatically, or open your link directly."}),s.jsx("div",{className:"mt-4",children:s.jsx(ze,{className:"rounded-2xl",onClick:m,children:"Continue"})})]})})]})})}const jn={brand:"Integrity",nav:[{label:"Product",href:"#product"},{label:"Pricing",href:"#pricing"},{label:"Contact",href:"#contact"}],hero:{title:["The lead conversion","system for info-businesses"],description:"Built to triage conversations fast, track lead stages, and automate your outreach with an AI setter."},heroStatement:{strong:"A new standard",muted:"for inbox operations. Built for teams that need consistent triage, assignment, follow-up, and conversion tracking."},features:[{title:"Route inbound in real time",description:"Sort every new conversation by phase, urgency, and ownership before it stalls.",stat:"Avg triage under 90s"},{title:"Run one-click lead decisions",description:"Qualify, disqualify, remove, or assign from the same working surface.",stat:"4 actions, 1 surface"},{title:"Keep setters aligned",description:"Attach internal notes, ownership history, and next actions to each lead.",stat:"Full lead context"},{title:"Track link outcomes",description:"See when a lead clicks, returns, and books so follow-up timing stays precise.",stat:"Click to booked visibility"},{title:"Protect the priority inbox",description:"Filter low-signal spam and surface leads with buying intent first.",stat:"Priority-first workflow"},{title:"Operate by phase",description:"Move pipeline stages with clear rules instead of ad hoc status guessing.",stat:"Phase-driven pipeline"}],howItWorks:[{title:"Ingest",description:"Bring inbound DMs into one stream with clean lead identity and timestamps.",detail:"Source channels sync into a shared inbox timeline."},{title:"Triage",description:"Apply phase and temperature quickly so the right leads rise immediately.",detail:"Quick actions handle qualify, disqualify, remove, assign."},{title:"Assign",description:"Route ownership to setters with context attached to every thread.",detail:"Notes, tasks, and activity stay on the same lead record."},{title:"Follow up",description:"Track the next action and keep time-based accountability visible.",detail:"Lead-level reminders prevent stale conversations."},{title:"Convert",description:"Attribute clicks and booked calls back to the conversation that drove them.",detail:"Pipeline quality ties directly to booked outcomes."}],updates:{title:"Updates",subtitle:"Recent product changes",items:[{title:"Priority Queue Controls",text:"Manual triage controls now persist instantly across owner and setter views.",date:"Feb 2026"},{title:"Lead Detail Performance Pass",text:"Client detail tabs and action panels now render with lower layout shift.",date:"Feb 2026"},{title:"Link Attribution Refinement",text:"Booked-call attribution now shows cleaner activity events for each lead.",date:"Jan 2026"}]},logoStrip:["Northline Ops","Summit Systems","Peakline Group","Operator House","Signal Partners","Closeflow"],pricingComparison:{human:{title:"Human Setter",symbol:"cross",bullets:["Coverage depends on shifts and availability","Usually 20-35 active threads/day","Quality ramps over 6-10 weeks","Follow-up consistency varies by rep","Needs weekly management and QA overhead"],cost:"$3000+/mo",costNote:"base pay + commission + supervision"},ai:{title:"AI Setter",symbol:"check",bullets:["Runs continuously across every timezone","Handles 150+ concurrent active threads","Learns your playbook in under 72 hours","Applies the same phase logic every time","Escalates to humans only when needed"],cost:"$229/mo",costNote:"flat subscription  no payroll overhead"}},singlePlan:{name:"Integrity AI Setter",price:"$229/mo",note:"per month",cta:"Get started",bullets:["Inbox triage and lead routing","Phase movement with consistent logic","Always-on responses and follow-up","Setter handoff notes when needed","24/7 coverage across all timezones","Consistent follow-up cadence by default","High-volume thread handling without extra headcount"]},faq:[{question:"What channels does Integrity support?",answer:"Integrity is built around DM-style inbound workflows. You can centralize lead conversations and operate phases from one interface."},{question:"Can setters work independently inside the system?",answer:"Yes. Ownership, notes, and lead actions are setter-ready, with controls so managers can keep workflow quality tight."},{question:"How do phases and lead status stay consistent?",answer:"Phase decisions are recorded at conversation level and mirrored in pipeline views so reports and actions stay aligned."},{question:"Do you track booked calls?",answer:"Yes. Integrity captures link and booking activity so teams can tie outreach effort to conversion outcomes."},{question:"Is this only for coaches?",answer:"No. It is optimized for coaches and agencies, but any inbound-heavy sales workflow can use it."},{question:"Can we migrate without downtime?",answer:"Most teams start with one workspace and phase map, then shift setter operations once inbox flow is stable."}],finalCta:{title:"For those who care about speed and quality",description:"Set your routing rules once, keep the inbox clean, and move leads toward booked calls with less drag.",primary:{label:"Get started",href:"/auth"},secondary:{label:"Contact sales",href:"mailto:support@theacq.app"}},footer:{columns:[{title:"Product",links:[{label:"Homepage",href:"/homepage"},{label:"Product",href:"/homepage#product"},{label:"Pricing",href:"/homepage#pricing"},{label:"Contact",href:"/homepage#contact"}]},{title:"Company",links:[{label:"Get started",href:"/auth"},{label:"Updates",href:"/homepage#updates"},{label:"Support",href:"mailto:support@theacq.app"}]},{title:"Resources",links:[{label:"Privacy",href:"/privacy"},{label:"Terms",href:"/terms"},{label:"Data deletion",href:"/data-deletion"}]},{title:"Legal",links:[{label:"Dashboard",href:"/dashboard"},{label:"Messages",href:"/messages"},{label:"Leads",href:"/outreach"}]}],legalLinks:[{label:"Privacy",href:"/privacy"},{label:"Terms",href:"/terms"},{label:"Data deletion",href:"/data-deletion"}]},appMock:{sidebar:["Inbox","Priority","Phases","Tasks","Meetings","Links","Settings"],conversations:[{name:"Nina - Fitness Brand",preview:"Can you send the booking link?",phase:"Qualified",time:"2m"},{name:"Julian - Agency Owner",preview:"Need help with setter workflow.",phase:"In contact",time:"7m"},{name:"Ana - Course Creator",preview:"Just clicked the offer page.",phase:"Priority",time:"11m"},{name:"Corey - Consultant",preview:"What is included in onboarding?",phase:"New lead",time:"21m"}],feed:["Lead clicked booking link  09:14","Setter assigned to Nina thread  09:11","Phase moved to Qualified  09:09","Call booked confirmation captured  09:05"]}};function Cl({children:e,loggedInHref:t="/dashboard",loggedOutHref:r="/book-call",...n}){const{user:a,loading:i}=Kt(),o=!i&&a?t:r;return s.jsx("a",{...n,href:o,children:e})}function Rz(){const[e,t]=h.useState(!1),r=jn.nav.filter(i=>["Product","Pricing","Contact"].includes(i.label)),n=r.filter(i=>i.label!=="Contact"),a=r.find(i=>i.label==="Contact");return h.useEffect(()=>{if(!e)return;const{body:i}=document,o=i.style.overflow;return i.style.overflow="hidden",()=>{i.style.overflow=o}},[e]),s.jsxs("header",{className:"fixed inset-x-0 top-0 z-50 border-b border-white/10 bg-[#080808]/85 pt-[env(safe-area-inset-top)] backdrop-blur-[20px] sm:pt-0",children:[s.jsxs("div",{className:"mx-auto flex h-[74px] w-full max-w-[1320px] items-center gap-3 px-5 sm:h-[66px] sm:px-8 lg:px-10",children:[s.jsx("a",{href:"/homepage",className:"shrink-0","aria-label":"Integrity homepage",children:s.jsx("img",{src:"/Integrity%20Full%20Logo.png",alt:"Integrity",className:"h-[22px] w-auto object-contain select-none sm:h-[24px]",loading:"eager",draggable:!1,onDragStart:i=>i.preventDefault()})}),s.jsx("nav",{"aria-label":"Primary",className:"ml-auto hidden items-center gap-5 lg:flex",children:jn.nav.map(i=>s.jsx("a",{href:i.href,className:"rounded-md px-2 py-1 text-sm text-white/30 transition-colors duration-200 hover:bg-white/[0.05] hover:text-white/60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/35",children:i.label},i.label))}),s.jsxs("div",{className:"hidden items-center gap-3 lg:flex",children:[s.jsx("span",{className:"text-sm text-white/30 select-none","aria-hidden":"true",children:"|"}),s.jsx("a",{href:"/auth",className:"rounded-md px-3 py-2 text-sm text-white/30 transition-colors duration-200 hover:bg-white/[0.05] hover:text-white/60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/35",children:"Log in"}),s.jsx(Cl,{loggedInHref:"/dashboard",className:"inline-flex items-center bg-white px-4 py-2 text-sm font-semibold text-black rounded-none transition-[border-radius,background-color] duration-200 hover:rounded-md hover:bg-white/95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/45",children:"Book a demo"})]}),s.jsx(Cl,{loggedInHref:"/dashboard",className:"ml-auto inline-flex items-center bg-white px-3.5 py-2 text-[12px] font-semibold text-black rounded-none transition-[border-radius,background-color] duration-200 hover:rounded-md hover:bg-white/95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/45 lg:hidden",children:"Book a demo"}),s.jsx("button",{type:"button","aria-label":e?"Close navigation menu":"Open navigation menu","aria-expanded":e,onClick:()=>t(i=>!i),className:"inline-flex h-11 w-11 items-center justify-center rounded-md bg-transparent text-white/74 transition-colors duration-200 hover:text-white/92 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/35 lg:hidden",children:s.jsx("svg",{viewBox:"0 0 20 20",className:"h-[22px] w-[22px] fill-none stroke-current stroke-[1.8]",children:e?s.jsx("path",{d:"M5 5l10 10M15 5L5 15"}):s.jsx("path",{d:"M3.5 5.25h13M3.5 10h13M3.5 14.75h13"})})})]}),s.jsxs("nav",{"aria-label":"Mobile primary",className:`fixed inset-0 z-[70] transition-[opacity,visibility] duration-300 ease-out lg:hidden ${e?"visible opacity-100":"invisible opacity-0 pointer-events-none"}`,children:[s.jsx("div",{className:`pointer-events-none absolute inset-0 z-0 bg-[#080808]/88 backdrop-blur-[22px] transition-opacity duration-300 ease-out ${e?"opacity-100":"opacity-0"}`}),s.jsxs("div",{className:`relative z-10 flex h-full flex-col transition-[opacity,transform] duration-320 ease-out ${e?"translate-y-0 opacity-100":"-translate-y-3 opacity-0"}`,children:[s.jsx("div",{className:"border-b border-white/10 pt-[env(safe-area-inset-top)]",children:s.jsxs("div",{className:"mx-auto flex h-[74px] w-full max-w-[1320px] items-center gap-3 px-5 sm:px-8",children:[s.jsx("a",{href:"/homepage",onClick:()=>t(!1),className:"shrink-0","aria-label":"Integrity homepage",children:s.jsx("img",{src:"/Integrity%20Full%20Logo.png",alt:"Integrity",className:"h-[22px] w-auto object-contain select-none",loading:"eager",draggable:!1,onDragStart:i=>i.preventDefault()})}),s.jsx("a",{href:"/auth",onClick:()=>t(!1),className:"ml-auto rounded-md px-3 py-2 text-[12px] text-white/58 transition-colors duration-200 hover:bg-white/[0.05] hover:text-white/76",children:"Log in"}),s.jsx(Cl,{loggedInHref:"/dashboard",onClick:()=>t(!1),className:"inline-flex items-center bg-white px-3.5 py-2 text-[12px] font-semibold text-black rounded-none transition-[border-radius,background-color] duration-200 hover:rounded-md hover:bg-white/95",children:"Book a demo"}),s.jsx("button",{type:"button","aria-label":"Close navigation menu",onClick:()=>t(!1),className:"inline-flex h-11 w-11 items-center justify-center rounded-md bg-transparent text-white/74 transition-colors duration-200 hover:text-white/92 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/35",children:s.jsx("svg",{viewBox:"0 0 20 20",className:"h-[22px] w-[22px] fill-none stroke-current stroke-[1.8]",children:s.jsx("path",{d:"M5 5l10 10M15 5L5 15"})})})]})}),s.jsxs("div",{className:"mx-auto flex w-full max-w-[1320px] flex-1 flex-col px-5 pb-[max(24px,env(safe-area-inset-bottom))] pt-8 sm:px-8",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[13px] uppercase tracking-[0.14em] text-white/34",children:"System"}),s.jsx("div",{className:"mt-4 flex flex-col gap-4",children:n.map(i=>s.jsx("a",{href:i.href,onClick:()=>t(!1),className:"text-[3rem] leading-[1.02] tracking-tight text-white/92 transition-colors duration-200 hover:text-white",children:i.label},i.label))})]}),a?s.jsxs("div",{className:"mt-10",children:[s.jsx("p",{className:"text-[13px] uppercase tracking-[0.14em] text-white/34",children:"Resources"}),s.jsx("a",{href:a.href,onClick:()=>t(!1),className:"mt-4 block text-[3rem] leading-[1.02] tracking-tight text-white/92 transition-colors duration-200 hover:text-white",children:a.label})]}):null]})]})]})]})}const NDe=["No setters yet","1 setter","2-3 setters","4-6 setters","7+ setters"],CDe=["Under 300 per month","300-1,000 per month","1,000-2,500 per month","2,500+ per month"],Jv="h-11 w-full rounded-xl border border-white/12 bg-white/[0.03] px-4 text-sm text-white/86 outline-none transition-colors placeholder:text-white/30 focus:border-white/28",NM="book-call-select h-11 w-full rounded-xl border border-white/12 bg-white/[0.03] px-4 text-sm text-white/86 outline-none transition-colors focus:border-white/28",EDe="min-h-[116px] w-full rounded-xl border border-white/12 bg-white/[0.03] px-4 py-3 text-sm text-white/86 outline-none transition-colors placeholder:text-white/30 focus:border-white/28";function ADe(){const e="integrity_demo_session";try{const r=window.localStorage.getItem(e);if(r&&r.length>12)return r}catch{}const t=typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`demo-${Date.now()}-${Math.random().toString(16).slice(2)}`;try{window.localStorage.setItem(e,t)}catch{}return t}function PDe(){return document.querySelector("script[data-calendly-widget='1']")?Promise.resolve():new Promise((t,r)=>{const n=document.createElement("script");n.src="https://assets.calendly.com/assets/external/widget.js",n.async=!0,n.dataset.calendlyWidget="1",n.onload=()=>t(),n.onerror=()=>r(new Error("Failed to load Calendly widget")),document.head.appendChild(n)})}function TDe(){const[e,t]=h.useState("form"),[r]=h.useState(()=>ADe()),[n,a]=h.useState(!1),[i,o]=h.useState(null),[l,c]=h.useState({fullName:"",workEmail:"",setterCount:"",monthlyConversationVolume:"",currentChallenge:"",phone:"",instagramHandle:""}),u=h.useRef(!1),d=async(m,p)=>{const v=z,{error:g}=await v.from("landing_demo_intake_events").insert([{session_key:r,stage:m,payload:p}]);if(g)throw g},f=async()=>{if(o(null),!l.fullName.trim()||!l.workEmail.trim()||!l.setterCount||!l.currentChallenge.trim()){o("Fill full name, work email, setter count, and your current challenge before continuing.");return}try{a(!0),await Promise.all([d("qualification",{setterCount:l.setterCount,monthlyConversationVolume:l.monthlyConversationVolume,currentChallenge:l.currentChallenge}),d("contact",{fullName:l.fullName,workEmail:l.workEmail,phone:l.phone,instagramHandle:l.instagramHandle})]),t("calendar")}catch(m){o((m==null?void 0:m.message)||"Could not save your information. Please retry.")}finally{a(!1)}};return h.useEffect(()=>{document.title="Book a Demo | Integrity"},[]),h.useEffect(()=>{if(e!=="calendar")return;let m=!1;const p=async()=>{await PDe(),!(m||u.current)&&(u.current=!0,await d("calendar_view",{viewedAt:new Date().toISOString()}))},v=async g=>{var y;if((typeof((y=g==null?void 0:g.data)==null?void 0:y.event)=="string"?g.data.event:"")==="calendly.event_scheduled")try{await d("calendar_scheduled",{scheduledAt:new Date().toISOString(),calendly:g.data})}catch{}};return p().catch(g=>{m||o((g==null?void 0:g.message)||"Calendly failed to load. Refresh and try again.")}),window.addEventListener("message",v),()=>{m=!0,window.removeEventListener("message",v)}},[e]),s.jsxs("div",{className:"landing-root min-h-screen bg-[#080808] font-sans text-[#f0f0f0]",children:[s.jsx(Rz,{}),s.jsx("main",{className:"pb-24 pt-34 sm:pb-28 sm:pt-32",children:s.jsx("section",{className:"mx-auto w-full max-w-[1320px] px-5 sm:px-8 lg:px-10",children:e==="form"?s.jsxs("div",{className:"grid items-start gap-8 lg:grid-cols-[minmax(0,1fr)_minmax(0,1.04fr)] lg:gap-10",children:[s.jsxs("div",{className:"pt-1",children:[s.jsx("h1",{className:"font-display text-[1.95rem] leading-[1] text-white sm:text-[2.4rem]",children:"Book a strategy call"}),s.jsxs("ul",{className:"mt-7 space-y-3.5 text-base text-white/85",children:[s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"mt-1 inline-flex h-4 w-4 items-center justify-center rounded-full border border-white/24 text-[10px] text-white/84",children:""}),s.jsx("span",{children:"See where your current inbox flow is leaking qualified leads."})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"mt-1 inline-flex h-4 w-4 items-center justify-center rounded-full border border-white/24 text-[10px] text-white/84",children:""}),s.jsx("span",{children:"Map the fastest path to consistent setter execution."})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"mt-1 inline-flex h-4 w-4 items-center justify-center rounded-full border border-white/24 text-[10px] text-white/84",children:""}),s.jsx("span",{children:"Leave with a practical rollout plan based on your volume."})]})]}),s.jsxs("div",{className:"mt-12 border-t border-white/10 pt-7",children:[s.jsx("p",{className:"text-base text-white/34",children:"Need product help before booking?"}),s.jsxs("a",{href:"mailto:support@theacq.app",className:"mt-2.5 inline-flex items-center gap-2 text-base text-white/34 transition-colors duration-200 hover:text-white/56",children:["Contact support",s.jsx("span",{"aria-hidden":"true",children:""})]})]})]}),s.jsxs("div",{className:"overflow-hidden rounded-[16px] border border-white/10 bg-transparent",children:[s.jsx("div",{className:"border-b border-white/10 px-5 py-3.5 text-base text-white/86",children:"Tell us where you need leverage"}),s.jsxs("div",{className:"px-5 py-5",children:[i?s.jsx("div",{className:"mb-5 rounded-xl border border-[#ff6f6f]/35 bg-[#2a1010]/45 px-4 py-3 text-sm text-[#ffc6c6]",children:i}):null,s.jsxs("div",{className:"space-y-5",children:[s.jsxs("label",{className:"grid gap-2",children:[s.jsx("span",{className:"text-sm text-white/34",children:"Full name"}),s.jsx("input",{value:l.fullName,onChange:m=>c(p=>({...p,fullName:m.target.value})),placeholder:"Your name",className:Jv})]}),s.jsxs("label",{className:"grid gap-2",children:[s.jsx("span",{className:"text-sm text-white/34",children:"Work email"}),s.jsx("input",{type:"email",value:l.workEmail,onChange:m=>c(p=>({...p,workEmail:m.target.value})),placeholder:"you@company.com",className:Jv})]}),s.jsxs("label",{className:"grid gap-2",children:[s.jsx("span",{className:"text-sm text-white/34",children:"How many setters do you have?"}),s.jsxs("select",{value:l.setterCount,onChange:m=>c(p=>({...p,setterCount:m.target.value})),className:NM,children:[s.jsx("option",{value:"",className:"bg-[#080808] text-white/70",children:"Select team size"}),NDe.map(m=>s.jsx("option",{value:m,className:"bg-[#080808] text-white",children:m},m))]})]}),s.jsxs("label",{className:"grid gap-2",children:[s.jsx("span",{className:"text-sm text-white/34",children:"Monthly conversation volume (optional)"}),s.jsxs("select",{value:l.monthlyConversationVolume,onChange:m=>c(p=>({...p,monthlyConversationVolume:m.target.value})),className:NM,children:[s.jsx("option",{value:"",className:"bg-[#080808] text-white/70",children:"Select volume"}),CDe.map(m=>s.jsx("option",{value:m,className:"bg-[#080808] text-white",children:m},m))]})]}),s.jsxs("label",{className:"grid gap-2",children:[s.jsx("span",{className:"text-sm text-white/34",children:"What should we solve first?"}),s.jsx("textarea",{value:l.currentChallenge,onChange:m=>c(p=>({...p,currentChallenge:m.target.value})),placeholder:"Describe your current process, bottlenecks, and what outcome you want from this call.",className:EDe})]}),s.jsxs("div",{className:"grid gap-5 sm:grid-cols-2",children:[s.jsxs("label",{className:"grid gap-2",children:[s.jsx("span",{className:"text-sm text-white/34",children:"Phone (optional)"}),s.jsx("input",{value:l.phone,onChange:m=>c(p=>({...p,phone:m.target.value})),placeholder:"+1 000 000 0000",className:Jv})]}),s.jsxs("label",{className:"grid gap-2",children:[s.jsx("span",{className:"text-sm text-white/34",children:"Instagram handle (optional)"}),s.jsx("input",{value:l.instagramHandle,onChange:m=>c(p=>({...p,instagramHandle:m.target.value})),placeholder:"@youraccount",className:Jv})]})]})]}),s.jsxs("div",{className:"mt-7 flex flex-wrap items-center justify-between gap-3",children:[s.jsx("p",{className:"text-sm text-white/36",children:"Prefer email? support@theacq.app"}),s.jsx("button",{type:"button",onClick:f,disabled:n,className:"inline-flex items-center bg-white px-5 py-2.5 text-sm font-semibold text-black rounded-none transition-[border-radius,background-color] duration-200 hover:rounded-md hover:bg-white/95 disabled:cursor-not-allowed disabled:opacity-70",children:n?"Saving...":"Continue to calendar"})]})]})]})]}):s.jsxs("div",{className:"mx-auto w-full max-w-[1040px] rounded-[20px] border border-white/10 bg-transparent p-5 sm:p-7",children:[i?s.jsx("div",{className:"mb-5 rounded-xl border border-[#ff6f6f]/35 bg-[#2a1010]/45 px-4 py-3 text-sm text-[#ffc6c6]",children:i}):null,s.jsx("h2",{className:"font-display text-[1.7rem] leading-[1.02] text-white sm:text-[2.2rem]",children:"Choose a time"}),s.jsx("p",{className:"mt-3 text-sm leading-7 text-white/58 sm:text-base",children:"Pick a slot below. We already captured your intake details and will tailor the session before the call."}),s.jsx("div",{className:"mt-6 overflow-hidden rounded-xl border border-white/10 bg-white",children:s.jsx("div",{className:"calendly-inline-widget","data-url":"https://calendly.com/edwardsens-contact/30min",style:{minWidth:320,height:700}})})]})})})]})}function ODe(){const e=Xt(),[t,r]=h.useState("processing"),[n,a]=h.useState(null);return h.useEffect(()=>{(async()=>{var o,l,c,u;try{console.log("[YouTubeCallback] Processing OAuth callback...");const d=new URLSearchParams(window.location.search),f=d.get("error_description")||d.get("error");if(f)throw new Error(decodeURIComponent(f.replace(/\+/g," ")));let{data:{session:m},error:p}=await z.auth.getSession();if(p)throw console.error("[YouTubeCallback] Session error:",p),new Error("Failed to get session");if(!(m!=null&&m.provider_token)){const x=d.get("code");if(x){const{data:_,error:S}=await z.auth.exchangeCodeForSession(x);S?console.error("[YouTubeCallback] Exchange code error:",S):_!=null&&_.session&&(m=_.session)}}if(!m)throw console.error("[YouTubeCallback] No session found"),new Error("No session found. Please try again.");if(console.log("[YouTubeCallback] Session found:",{userId:m.user.id,hasProviderToken:!!m.provider_token,provider:(o=m.user.app_metadata)==null?void 0:o.provider}),!m.provider_token)throw console.error("[YouTubeCallback] No provider token in session"),new Error("No YouTube access token received. Please try connecting again.");const{data:v,error:g}=await z.from("profiles").select("current_workspace_id").eq("id",m.user.id).single();if(g&&g.code!=="PGRST116")throw console.error("[YouTubeCallback] Profile error:",g),new Error("Failed to load user profile");let b=(v==null?void 0:v.current_workspace_id)??null;if(!b){const x=((l=m.user.email)==null?void 0:l.split("@")[0])||"Workspace",_=((c=m.user.user_metadata)==null?void 0:c.full_name)||((u=m.user.email)==null?void 0:u.split("@")[0])||null,{data:S,error:k}=await z.rpc("create_workspace_for_user",{p_workspace_name:x,p_user_id:m.user.id});if(!k&&S)b=S;else{console.error("[YouTubeCallback] Workspace RPC error:",k);const C=crypto.randomUUID(),{data:j,error:N}=await z.from("workspaces").insert({id:C,name:x}).select().single();if(N)console.error("[YouTubeCallback] Workspace fallback insert error:",N);else if(j!=null&&j.id){const{error:A}=await z.from("workspace_members").insert({id:crypto.randomUUID(),workspace_id:C,user_id:m.user.id,role:"owner",display_name:_});if(A&&String((A==null?void 0:A.code)||"")!=="23505")console.error("[YouTubeCallback] Workspace fallback owner insert error:",A);else{b=C;const{error:P}=await z.from("onboarding_responses").insert({id:crypto.randomUUID(),workspace_id:C,business_name:x});P&&String((P==null?void 0:P.code)||"")!=="23505"&&console.warn("[YouTubeCallback] Workspace fallback onboarding seed warning:",P),await z.from("profiles").update({current_workspace_id:C,onboarding_completed:!0}).eq("id",m.user.id)}}}}if(b){const{data:x,error:_}=await z.from("workspace_members").select("workspace_id").eq("workspace_id",b).eq("user_id",m.user.id).limit(1).maybeSingle();_&&console.warn("[YouTubeCallback] Membership validation warning:",_),x!=null&&x.workspace_id||(b=null)}if(!b)throw new Error("Could not bootstrap a valid workspace for this account. Please try again.");console.log("[YouTubeCallback] Connecting YouTube channel to workspace:",b);const y=await fetch("https://efpagcbqixencqosalgr.supabase.co/functions/v1/youtube-channel",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m.access_token}`},body:JSON.stringify({action:"connect-oauth",providerToken:m.provider_token,workspaceId:b})}),w=await y.json();if(!y.ok)throw console.error("[YouTubeCallback] Channel connect error:",w),new Error(w.error||"Failed to connect YouTube channel");console.log("[YouTubeCallback] Channel connected successfully:",w),r("success"),w.alreadyConnected?ee.info("YouTube channel already connected!"):ee.success("YouTube channel connected successfully!"),e("/content",{replace:!0})}catch(d){console.error("[YouTubeCallback] Error:",d),r("error"),a(d instanceof Error?d.message:"An unexpected error occurred")}})()},[e]),t==="error"?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-6",children:s.jsx(Hx,{className:"w-8 h-8 text-red-500"})}),s.jsx("h1",{className:"text-xl font-medium mb-2",children:"Connection Failed"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:n||"Failed to connect your YouTube channel. Please try again."}),s.jsxs("div",{className:"flex gap-3 justify-center",children:[s.jsx(ze,{variant:"outline",onClick:()=>e("/content",{replace:!0}),children:"Go to Content"}),s.jsx(ze,{onClick:()=>{e("/content",{replace:!0})},children:"Try Again"})]})]})}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx(bn,{className:"w-8 h-8 animate-spin text-primary mx-auto mb-4"}),s.jsx("h1",{className:"text-xl font-medium mb-2",children:t==="success"?"Connected!":"Connecting YouTube..."}),s.jsx("p",{className:"text-muted-foreground",children:t==="success"?"Redirecting to your dashboard...":"Please wait while we connect your channel."})]})})}function IDe(){const e=Xt(),[t,r]=h.useState("processing"),[n,a]=h.useState(null);return h.useEffect(()=>{(async()=>{var o,l,c,u;try{console.log("[CalendarCallback] Processing OAuth callback...");const d=new URLSearchParams(window.location.search),f=d.get("error_description")||d.get("error");if(f)throw new Error(decodeURIComponent(f.replace(/\+/g," ")));const m=d.get("code");let p=null;if(m){const{data:x,error:_}=await z.auth.exchangeCodeForSession(m);_?console.error("[CalendarCallback] Exchange code error:",_):x!=null&&x.session&&(p=x.session)}if(!p){const{data:x,error:_}=await z.auth.getSession();if(_)throw console.error("[CalendarCallback] Session error:",_),new Error("Failed to get session");p=x.session??null}if(!p)throw console.error("[CalendarCallback] No session found"),new Error("No session found. Please try again.");if(console.log("[CalendarCallback] Session found:",{userId:p.user.id,hasProviderToken:!!p.provider_token,provider:(o=p.user.app_metadata)==null?void 0:o.provider}),!p.provider_token)throw console.error("[CalendarCallback] No provider token in session"),new Error("No Google Calendar access token received. Please try connecting again.");const{data:v,error:g}=await z.from("profiles").select("current_workspace_id").eq("id",p.user.id).single();if(g&&g.code!=="PGRST116")throw console.error("[CalendarCallback] Profile error:",g),new Error("Failed to load user profile");let b=(v==null?void 0:v.current_workspace_id)??null;if(!b){const x=((l=p.user.email)==null?void 0:l.split("@")[0])||"Workspace",_=((c=p.user.user_metadata)==null?void 0:c.full_name)||((u=p.user.email)==null?void 0:u.split("@")[0])||null,{data:S,error:k}=await z.rpc("create_workspace_for_user",{p_workspace_name:x,p_user_id:p.user.id});if(!k&&S)b=S;else{console.error("[CalendarCallback] Workspace RPC error:",k);const C=crypto.randomUUID(),{data:j,error:N}=await z.from("workspaces").insert({id:C,name:x}).select().single();if(N)console.error("[CalendarCallback] Workspace fallback insert error:",N);else if(j!=null&&j.id){const{error:A}=await z.from("workspace_members").insert({id:crypto.randomUUID(),workspace_id:C,user_id:p.user.id,role:"owner",display_name:_});if(A&&String((A==null?void 0:A.code)||"")!=="23505")console.error("[CalendarCallback] Workspace fallback owner insert error:",A);else{b=C;const{error:P}=await z.from("onboarding_responses").insert({id:crypto.randomUUID(),workspace_id:C,business_name:x});P&&String((P==null?void 0:P.code)||"")!=="23505"&&console.warn("[CalendarCallback] Workspace fallback onboarding seed warning:",P),await z.from("profiles").update({current_workspace_id:C,onboarding_completed:!0}).eq("id",p.user.id)}}}}if(b){const{data:x,error:_}=await z.from("workspace_members").select("workspace_id").eq("workspace_id",b).eq("user_id",p.user.id).limit(1).maybeSingle();_&&console.warn("[CalendarCallback] Membership validation warning:",_),x!=null&&x.workspace_id||(b=null)}if(!b)throw new Error("Could not bootstrap a valid workspace for this account. Please try again.");console.log("[CalendarCallback] Connecting Google Calendar to workspace:",b),console.log("[CalendarCallback] Has refresh token:",!!p.provider_refresh_token);const y=await fetch("https://efpagcbqixencqosalgr.supabase.co/functions/v1/google-calendar",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.access_token}`},body:JSON.stringify({action:"connect-oauth",providerToken:p.provider_token,providerRefreshToken:p.provider_refresh_token,workspaceId:b})}),w=await y.json();if(!y.ok)throw console.error("[CalendarCallback] Calendar connect error:",w),new Error(w.error||"Failed to connect Google Calendar");console.log("[CalendarCallback] Calendar connected successfully:",w),r("success"),w.alreadyConnected?ee.info("Google Calendar already connected!"):ee.success("Google Calendar connected successfully!"),e("/meetings",{replace:!0})}catch(d){console.error("[CalendarCallback] Error:",d),r("error"),a(d instanceof Error?d.message:"An unexpected error occurred")}})()},[e]),t==="error"?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-6",children:s.jsx(Hx,{className:"w-8 h-8 text-red-500"})}),s.jsx("h1",{className:"text-xl font-medium mb-2",children:"Connection Failed"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:n||"Failed to connect your Google Calendar. Please try again."}),s.jsxs("div",{className:"flex gap-3 justify-center",children:[s.jsx(ze,{variant:"outline",onClick:()=>e("/meetings",{replace:!0}),children:"Go to Meetings"}),s.jsx(ze,{onClick:()=>e("/meetings",{replace:!0}),children:"Try Again"})]})]})}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx(bn,{className:"w-8 h-8 animate-spin text-primary mx-auto mb-4"}),s.jsx("h1",{className:"text-xl font-medium mb-2",children:t==="success"?"Connected!":"Connecting Google Calendar..."}),s.jsx("p",{className:"text-muted-foreground",children:t==="success"?"Redirecting to your meetings...":"Please wait while we connect your calendar."})]})})}function MDe(e){if(!e)return null;try{const t=atob(decodeURIComponent(e)),r=JSON.parse(t);return r&&typeof r=="object"?r:null}catch{return null}}async function RDe(e){const t=e,r=String((t==null?void 0:t.message)||"").trim(),n=t==null?void 0:t.context;if(!n)return r||"Failed to connect Instagram.";try{const a=await n.clone().json(),i=String((a==null?void 0:a.error)||(a==null?void 0:a.message)||"").trim();if(i)return i}catch{}try{const a=String(await n.clone().text()).trim();if(a)return a}catch{}return r||"Failed to connect Instagram."}function $De(){const e=Xt(),[t,r]=h.useState("processing"),[n,a]=h.useState(null),i=h.useMemo(()=>new URLSearchParams(window.location.search),[]);return h.useEffect(()=>{(async()=>{try{const l=i.get("error_description")||i.get("error_message")||i.get("error")||i.get("error_reason");if(l)throw new Error(decodeURIComponent(l.replace(/\+/g," ")));const c=i.get("code");if(!c)throw new Error("Missing OAuth code. Please try connecting again.");const u=MDe(i.get("state")),d=sessionStorage.getItem("ig_connect_workspace_id")||void 0,{data:f,error:m}=await z.auth.getSession();m&&console.error("[InstagramCallback] getSession error:",m);const p=f.session;if(!p)throw new Error("You are not logged in. Please log in and try connecting again.");const{error:v}=await z.auth.refreshSession();if(v)throw new Error("Session expired. Please log in again and reconnect Instagram.");let g=(u==null?void 0:u.workspaceId)||d||null;if(!g){const{data:w,error:x}=await z.from("profiles").select("current_workspace_id").eq("id",p.user.id).single();x&&x.code!=="PGRST116"&&console.error("[InstagramCallback] profile error:",x),g=(w==null?void 0:w.current_workspace_id)??null}if(!g)throw new Error("No workspace found. Open the app, create/select a workspace, then try again.");const{data:b,error:y}=await z.functions.invoke("instagram-connect",{body:{action:"exchange-code",workspaceId:g,code:c}});if(y){console.error("[InstagramCallback] exchange-code invoke error:",y);const w=await RDe(y);throw new Error(w||"Failed to connect Instagram.")}if(!(b!=null&&b.success))throw new Error((b==null?void 0:b.error)||"Failed to connect Instagram.");r("success"),ee.success("Instagram connected!"),sessionStorage.removeItem("ig_connect_workspace_id"),e("/messages",{replace:!0})}catch(l){console.error("[InstagramCallback] Error:",l),r("error"),a(l instanceof Error?l.message:"An unexpected error occurred")}})()},[e,i]),t==="error"?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-6",children:s.jsx(Hx,{className:"w-8 h-8 text-red-500"})}),s.jsx("h1",{className:"text-xl font-medium mb-2",children:"Instagram Connection Failed"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:n||"Failed to connect your Instagram account. Please try again."}),s.jsxs("div",{className:"flex gap-3 justify-center",children:[s.jsx(ze,{variant:"outline",onClick:()=>e("/messages",{replace:!0}),children:"Go to Inbox"}),s.jsx(ze,{onClick:()=>e("/messages",{replace:!0}),children:"Try Again"})]})]})}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx(bn,{className:"w-8 h-8 animate-spin text-primary mx-auto mb-4"}),s.jsx("h1",{className:"text-xl font-medium mb-2",children:t==="success"?"Connected!":"Connecting Instagram..."}),s.jsx("p",{className:"text-muted-foreground",children:t==="success"?"Redirecting to your inbox...":"Please wait while we complete the connection."})]})})}async function DDe(){try{const t=new URLSearchParams(window.location.search).get("code");if(t){const{error:r}=await z.auth.exchangeCodeForSession(t);if(r)throw r}}catch(e){throw e}await new Promise(e=>setTimeout(e,0))}function LDe(){const e=Xt(),{user:t,profile:r,loading:n}=Kt(),[a,i]=h.useState("processing"),[o,l]=h.useState(null),c=h.useMemo(()=>{const d=window.location.hash.includes("access_token="),f=window.location.search.includes("code=");return d||f},[]);if(h.useEffect(()=>{(async()=>{try{c&&await DDe();const{data:f}=await z.auth.getSession();if(!f.session)throw new Error("No session found. Please log in again and retry the email link.");try{await z.from("profiles").update({email_verified:!0}).eq("id",f.session.user.id)}catch{}i("success"),ee.success("Email verified!")}catch(f){console.error("[EmailVerified] Error:",f),i("error"),l(String((f==null?void 0:f.message)||"Failed to verify email"))}})()},[c]),n&&a!=="error")return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx(bn,{className:"w-8 h-8 animate-spin text-primary mx-auto mb-4"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Finalizing verification"})]})});if(a==="error")return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-6",children:s.jsx(Hx,{className:"w-8 h-8 text-red-500"})}),s.jsx("h1",{className:"text-xl font-medium mb-2",children:"Verification Failed"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:o||"We could not verify your email. Please try again."}),s.jsx("div",{className:"flex gap-3 justify-center",children:s.jsx(ze,{variant:"outline",onClick:()=>e("/auth",{replace:!0}),children:"Back to login"})})]})});const u=(t==null?void 0:t.email)||(r==null?void 0:r.display_name)||"";return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/10 flex items-center justify-center mx-auto mb-6",children:s.jsx(Vx,{className:"w-8 h-8 text-green-500"})}),s.jsx("h1",{className:"text-xl font-medium mb-2",children:"Email verified"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:u?s.jsxs(s.Fragment,{children:["Youre verified as ",s.jsx("strong",{children:u}),"."]}):"Your email is verified."}),s.jsx(ze,{onClick:()=>e("/messages",{replace:!0}),children:"View dashboard"})]})})}function FDe(){return s.jsxs("div",{className:"min-h-screen bg-background text-foreground p-8 max-w-3xl mx-auto",children:[s.jsx("h1",{className:"text-2xl font-medium mb-6",children:"Privacy Policy"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Last updated: January 2026"}),s.jsxs("div",{className:"space-y-6 text-sm text-muted-foreground",children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-foreground font-medium mb-2",children:"Information We Collect"}),s.jsx("p",{children:"We collect information you provide directly, including your name, email address, and any content you create within the platform."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-foreground font-medium mb-2",children:"How We Use Your Information"}),s.jsx("p",{children:"We use your information to provide and improve our services, communicate with you, and ensure the security of our platform."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-foreground font-medium mb-2",children:"Third-Party Services"}),s.jsx("p",{children:"We may integrate with third-party services like YouTube and Google Calendar. Your use of these integrations is subject to their respective privacy policies."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-foreground font-medium mb-2",children:"Data Security"}),s.jsx("p",{children:"We implement appropriate security measures to protect your personal information from unauthorized access or disclosure."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-foreground font-medium mb-2",children:"Contact"}),s.jsxs("p",{children:["For privacy-related questions, contact us at ",s.jsx("a",{href:"mailto:support@theacq.app",className:"text-primary hover:underline",children:"support@theacq.app"})]})]})]})]})}function BDe(){return s.jsxs("div",{className:"min-h-screen bg-background text-foreground p-8 max-w-3xl mx-auto",children:[s.jsx("h1",{className:"text-2xl font-medium mb-6",children:"Terms of Service"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Last updated: January 2026"}),s.jsxs("div",{className:"space-y-6 text-sm text-muted-foreground",children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-foreground font-medium mb-2",children:"Acceptance of Terms"}),s.jsx("p",{children:"By accessing or using The ACQ Dashboard, you agree to be bound by these Terms of Service."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-foreground font-medium mb-2",children:"Use of Service"}),s.jsx("p",{children:"You agree to use our service only for lawful purposes and in accordance with these terms. You are responsible for maintaining the confidentiality of your account."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-foreground font-medium mb-2",children:"User Content"}),s.jsx("p",{children:"You retain ownership of content you create. By using our service, you grant us a license to host and display your content as necessary to provide the service."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-foreground font-medium mb-2",children:"Third-Party Integrations"}),s.jsx("p",{children:"Our service may integrate with third-party platforms. Your use of these integrations is subject to their terms of service."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-foreground font-medium mb-2",children:"Limitation of Liability"}),s.jsx("p",{children:'We provide our service "as is" without warranties. We are not liable for any indirect, incidental, or consequential damages.'})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-foreground font-medium mb-2",children:"Contact"}),s.jsxs("p",{children:["For questions about these terms, contact us at ",s.jsx("a",{href:"mailto:support@theacq.app",className:"text-primary hover:underline",children:"support@theacq.app"})]})]})]})]})}function UDe(){return s.jsxs("div",{className:"min-h-screen bg-background text-foreground p-8 max-w-3xl mx-auto",children:[s.jsx("h1",{className:"text-2xl font-medium mb-6",children:"Data Deletion Instructions"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Last updated: February 2026"}),s.jsxs("div",{className:"space-y-6 text-sm text-muted-foreground",children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-foreground font-medium mb-2",children:"How to Request Deletion"}),s.jsxs("p",{children:["Email us at"," ",s.jsx("a",{href:"mailto:support@theacq.app",className:"text-primary hover:underline",children:"support@theacq.app"})," ","with the subject line ",s.jsx("strong",{children:"Data Deletion Request"}),"."]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-foreground font-medium mb-2",children:"What to Include"}),s.jsx("p",{children:"Please include the following to help us verify your account:"}),s.jsxs("ul",{className:"list-disc pl-5 mt-2 space-y-1",children:[s.jsx("li",{children:"Your account email address"}),s.jsx("li",{children:"Your workspace name"}),s.jsx("li",{children:"Any connected Instagram username(s)"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-foreground font-medium mb-2",children:"What We Delete"}),s.jsx("p",{children:"We will remove your account data, connected integrations, and stored messages associated with your workspace, subject to legal and billing obligations."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-foreground font-medium mb-2",children:"Timeline"}),s.jsx("p",{children:"We typically process deletion requests within 30 days. We will confirm by email once the request is completed."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-foreground font-medium mb-2",children:"Contact"}),s.jsxs("p",{children:["Questions? Email"," ",s.jsx("a",{href:"mailto:support@theacq.app",className:"text-primary hover:underline",children:"support@theacq.app"}),"."]})]})]})]})}const qDe=()=>{const e=Hn();return h.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),s.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})};function zDe(){return s.jsxs("div",{className:"relative mt-14 sm:mt-16",children:[s.jsx("div",{className:"pointer-events-none absolute left-[calc(50%-50vw)] top-[-142px] bottom-[-104px] z-0 w-screen overflow-hidden hero-seq-item",style:{animationDelay:"760ms"},children:s.jsx("div",{className:"h-full w-full rounded-b-[18px] bg-[linear-gradient(to_bottom,rgba(160,169,179,0)_0%,rgba(160,169,179,0.012)_16%,rgba(159,168,178,0.05)_33%,rgba(157,166,176,0.14)_52%,rgba(153,162,172,0.27)_72%,rgba(149,159,169,0.40)_88%,rgba(145,155,166,0.50)_100%)]"})}),s.jsx("div",{className:"pointer-events-none absolute left-[calc(50%-50vw)] bottom-[-34px] z-[1] w-screen hero-seq-item",style:{animationDelay:"760ms"},children:s.jsx("div",{className:"mx-auto h-[clamp(72px,9vw,132px)] w-[clamp(360px,44vw,840px)] rounded-full bg-[radial-gradient(ellipse_at_center,rgba(255,255,255,0.2)_0%,rgba(255,255,255,0.08)_42%,rgba(255,255,255,0)_78%)] blur-[10px]"})}),s.jsx("div",{className:"relative z-10 -ml-[18px] w-[calc(100%+36px)] sm:-ml-[32px] sm:w-[calc(100%+64px)] lg:-ml-[72px] lg:w-[calc(100%+144px)] hero-seq-item",style:{animationDelay:"1080ms"},children:s.jsx("img",{src:"/app%20show-off.png",alt:"Integrity app interface",className:"block h-auto w-full max-w-none select-none",loading:"eager",decoding:"async",draggable:!1,onDragStart:e=>e.preventDefault()})})]})}function WDe(){return s.jsx("section",{className:"pb-20 pt-44 sm:pb-28 sm:pt-52 lg:pb-36 lg:pt-58",children:s.jsxs("div",{className:"mx-auto w-full max-w-[1320px] px-5 sm:px-8 lg:px-10",children:[s.jsxs("div",{className:"max-w-[1280px] sm:pl-4 lg:pl-8",children:[s.jsxs("h1",{className:"font-display text-[2.35rem] font-normal leading-[0.98] tracking-tight text-white sm:text-[3.35rem] lg:text-[4rem]",children:[s.jsx("span",{className:"hero-line-reveal",style:{animationDelay:"80ms"},children:jn.hero.title[0]}),s.jsx("span",{className:"hero-line-reveal",style:{animationDelay:"280ms"},children:jn.hero.title[1]})]}),s.jsxs("div",{className:"mt-7 flex items-end justify-between gap-6",children:[s.jsx("p",{className:"max-w-[980px] text-sm leading-6 text-white/30 sm:text-base sm:leading-7",children:s.jsx("span",{className:"hero-line-reveal sm:whitespace-nowrap",style:{animationDelay:"500ms"},children:jn.hero.description})}),s.jsxs(Cl,{loggedInHref:"#pricing",className:"hero-seq-item hero-seq-item-late group hidden shrink-0 items-center gap-2 text-base lg:inline-flex",style:{animationDelay:"1760ms"},children:[s.jsx("span",{className:"font-semibold text-white",children:"New"}),s.jsx("span",{className:"text-white/42",children:" AI setter"}),s.jsx("svg",{viewBox:"0 0 20 20",className:"h-4 w-4 fill-none stroke-current text-white/42 stroke-[1.8] transition-transform duration-300 ease-out group-hover:translate-x-1",children:s.jsx("path",{d:"M4 10h11M11 6l4 4-4 4"})})]})]})]}),s.jsx(zDe,{})]})})}function ms({children:e,className:t,delayMs:r=0}){const n=h.useRef(null),[a,i]=h.useState(!1);return h.useEffect(()=>{const o=n.current;if(!o)return;const l=new IntersectionObserver(c=>{for(const u of c)u.isIntersecting&&(i(!0),l.unobserve(u.target))},{threshold:.18,rootMargin:"0px 0px -40px 0px"});return l.observe(o),()=>l.disconnect()},[]),s.jsx("div",{ref:n,className:Pe("landing-reveal",a&&"is-visible",t),style:{transitionDelay:`${Math.max(0,r)}ms`},children:e})}function HDe(){return s.jsx("section",{className:"pt-32 sm:pt-44",children:s.jsx("div",{className:"mx-auto w-full max-w-[1320px] px-5 sm:px-8 lg:px-10",children:s.jsx(ms,{children:s.jsxs("p",{className:"max-w-[980px] text-[1.6rem] font-semibold leading-[1.12] tracking-tight text-white sm:text-[2.2rem] lg:text-[3rem]",children:[s.jsx("span",{className:"text-white",children:jn.heroStatement.strong})," ",s.jsx("span",{className:"text-[rgba(255,255,255,0.36)]",children:jn.heroStatement.muted})]})})})})}function VDe(){return s.jsx("section",{id:"how-it-works",className:"pt-40 sm:pt-56",children:s.jsxs("div",{className:"mx-auto w-full max-w-[1320px] px-5 sm:px-8 lg:px-10",children:[s.jsx(ms,{children:s.jsxs("div",{className:"grid gap-8 py-14 lg:grid-cols-[1fr_1fr] lg:gap-16",children:[s.jsx("h2",{className:"font-display text-3xl leading-tight text-white sm:text-5xl",children:"Move each conversation through a clear operating path."}),s.jsx("p",{className:"max-w-[620px] text-base leading-7 text-white/26 sm:text-lg",children:"Integrity keeps the pipeline readable: ingest, triage, assign, follow up, and convert. Every action stays attached to the same lead record."})]})}),s.jsx("div",{className:"mt-10 grid gap-4 lg:grid-cols-5",children:jn.howItWorks.map((e,t)=>s.jsx(ms,{delayMs:t*36,children:s.jsxs("article",{className:"landing-panel h-full rounded-[18px] border border-white/10 bg-transparent p-4 sm:p-5",children:[s.jsx("div",{className:"mb-4",children:s.jsxs("span",{className:"rounded-md border border-white/12 bg-transparent px-2 py-1 text-[11px] uppercase tracking-[0.12em] text-white/50",children:["Step ",t+1]})}),s.jsx("h3",{className:"text-lg font-semibold text-white/90",children:e.title}),s.jsx("p",{className:"mt-2 text-sm leading-6 text-white/58",children:e.description}),s.jsx("div",{className:"mt-4 rounded-xl border border-white/10 bg-transparent px-3 py-2.5 text-xs leading-5 text-white/56",children:e.detail})]})},e.title))})]})})}function KDe(){return s.jsx("section",{id:"updates",className:"pt-0",children:s.jsxs("div",{className:"mx-auto w-full max-w-[1320px] px-5 sm:px-8 lg:px-10",children:[s.jsx(ms,{children:s.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-4",children:[s.jsx("div",{children:s.jsx("h2",{className:"font-display text-3xl text-white sm:text-5xl",children:jn.updates.title})}),s.jsxs(Cl,{loggedInHref:"/dashboard",className:"group inline-flex items-center gap-2 text-base text-white",children:[s.jsx("span",{children:"Open app"}),s.jsx("svg",{viewBox:"0 0 20 20",className:"h-4 w-4 fill-none stroke-current text-white/42 stroke-[1.8] transition-transform duration-300 ease-out group-hover:translate-x-1",children:s.jsx("path",{d:"M4 10h11M11 6l4 4-4 4"})})]})]})}),s.jsx("div",{className:"mt-8 grid gap-4 lg:grid-cols-3",children:jn.updates.items.map((e,t)=>s.jsx(ms,{delayMs:t*34,children:s.jsxs("article",{className:"landing-panel rounded-[18px] border border-white/10 bg-transparent p-5",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.1em] text-white/42",children:e.date}),s.jsx("h3",{className:"mt-3 text-lg font-semibold text-white/88",children:e.title}),s.jsx("p",{className:"mt-2 text-sm leading-6 text-white/58",children:e.text})]})},e.title))})]})})}function GDe({title:e,bullets:t,cost:r,costNote:n,symbol:a}){const i=a==="check"?"":"";return s.jsxs("article",{className:"landing-panel rounded-[18px] border border-white/10 bg-transparent p-5 sm:p-6",children:[s.jsx("p",{className:"text-[13px] uppercase tracking-[0.2em] text-white/50",children:e}),s.jsx("ul",{className:"mt-5 space-y-2.5",children:t.map(o=>s.jsxs("li",{className:"flex items-start gap-2.5 text-sm text-white/66",children:[s.jsx("span",{className:"mt-[2px] inline-flex w-4 shrink-0 text-white/72",children:i}),s.jsx("span",{children:o})]},o))}),s.jsxs("div",{className:"mt-6 border-t border-white/10 pt-5",children:[s.jsx("p",{className:"text-4xl font-semibold text-white",children:r}),s.jsx("p",{className:"mt-1 text-sm text-white/46",children:n})]})]})}function YDe(){return s.jsx("div",{className:"relative left-1/2 my-40 w-screen -translate-x-1/2 border-t border-white/10"})}function XDe(){const{human:e}=jn.pricingComparison,t=jn.singlePlan;return s.jsx("section",{id:"pricing",className:"pt-0",children:s.jsxs("div",{className:"mx-auto w-full max-w-[1320px] px-5 sm:px-8 lg:px-10",children:[s.jsx(ms,{children:s.jsx("div",{className:"max-w-[980px]",children:s.jsx("h2",{className:"font-display text-3xl text-white sm:text-5xl",children:"A setter that costs less and executes more."})})}),s.jsx(ms,{className:"mt-10",children:s.jsx(GDe,{title:e.title,bullets:e.bullets,cost:e.cost,costNote:e.costNote,symbol:e.symbol})}),s.jsxs(ms,{className:"mt-8 rounded-[18px] bg-[#dcdcdc] p-6 sm:p-7",children:[s.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm uppercase tracking-[0.15em] text-[#080808]",children:"One Plan"}),s.jsx("h3",{className:"mt-2 text-2xl font-semibold text-[#080808]",children:t.name})]}),s.jsx("p",{className:"text-4xl font-semibold text-[#080808]",children:t.price})]}),s.jsx("ul",{className:"mt-6 grid gap-2 sm:grid-cols-2",children:t.bullets.map(r=>s.jsxs("li",{className:"flex items-start gap-2.5 text-sm text-[#080808]",children:[s.jsx("span",{className:"mt-[2px] inline-flex w-4 shrink-0 text-[#080808]",children:""}),s.jsx("span",{children:r})]},r))}),s.jsxs(Cl,{loggedInHref:"/dashboard",className:"mt-6 inline-flex items-center rounded-none bg-[#080808] px-5 py-2.5 text-sm font-semibold text-[#dcdcdc] transition-[border-radius,background-color] duration-200 hover:rounded-md hover:bg-[#080808]/94 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-black/30",children:[t.cta," "]})]}),s.jsx(YDe,{}),s.jsxs(ms,{className:"rounded-[20px] border border-white/10 bg-transparent p-5 sm:p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white/88",children:"FAQs"}),s.jsx("div",{className:"mt-2 divide-y divide-white/10",children:jn.faq.map(r=>s.jsxs("details",{className:"group py-4",children:[s.jsxs("summary",{className:"flex cursor-pointer list-none items-center justify-between gap-4 text-sm text-white/84 marker:content-none [&::-webkit-details-marker]:hidden",children:[s.jsx("span",{children:r.question}),s.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center text-white/55 transition-transform duration-200 group-open:rotate-180","aria-hidden":"true",children:s.jsx("svg",{viewBox:"0 0 20 20",className:"h-4 w-4 fill-none stroke-current stroke-[1.8]",children:s.jsx("path",{d:"M5 8l5 5 5-5"})})})]}),s.jsx("div",{className:"faq-answer",children:s.jsx("p",{className:"pt-2 text-sm leading-7 text-white/58",children:r.answer})})]},r.question))})]})]})})}function QDe(){return s.jsx("section",{id:"contact",className:"pt-56 sm:pt-72",children:s.jsx("div",{className:"mx-auto w-full max-w-[1320px] px-5 sm:px-8 lg:px-10",children:s.jsxs(ms,{className:"px-6 py-2 text-center sm:px-10",children:[s.jsx("h2",{className:"font-display mx-auto max-w-[680px] text-[3rem] leading-[0.98] text-white sm:text-[5rem]",children:jn.finalCta.title}),s.jsxs("div",{className:"mt-20 flex flex-wrap justify-center gap-2",children:[s.jsx(Cl,{loggedInHref:"/dashboard",className:"inline-flex items-center bg-white px-5 py-2.5 text-sm font-semibold text-black rounded-none transition-[border-radius,background-color] duration-200 hover:rounded-md hover:bg-white/95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/35",children:jn.finalCta.primary.label}),s.jsx(Cl,{loggedInHref:jn.finalCta.secondary.href,className:"rounded-md px-4 py-2.5 text-sm text-white/58 transition-colors duration-200 hover:bg-white/[0.05] hover:text-white/78 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/35",children:jn.finalCta.secondary.label})]})]})})})}function JDe(){return s.jsx("footer",{className:"mt-20 border-t border-white/10 pb-14 pt-10 sm:pt-12",children:s.jsxs("div",{className:"mx-auto w-full max-w-[1320px] px-5 sm:px-8 lg:px-10",children:[s.jsxs("div",{className:"grid gap-8 sm:grid-cols-2 lg:grid-cols-5",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsx("img",{src:"/Integrity%20Full%20Logo.png",alt:"Integrity",className:"h-7 w-auto object-contain opacity-95 select-none",loading:"lazy",draggable:!1,onDragStart:e=>e.preventDefault()})}),jn.footer.columns.map(e=>s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-white/80",children:e.title}),s.jsx("ul",{className:"mt-4 space-y-2.5",children:e.links.map(t=>s.jsx("li",{children:s.jsx("a",{href:t.href,className:"rounded-md px-1 py-1 text-sm text-white/50 transition-colors duration-200 hover:bg-white/[0.05] hover:text-white/78 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/35",children:t.label})},t.label))})]},e.title))]}),s.jsx("div",{className:"mt-10 flex flex-wrap items-center gap-4 border-t border-white/10 pt-6",children:jn.footer.legalLinks.map(e=>s.jsx("a",{href:e.href,className:"rounded-md px-2 py-1 text-sm text-white/52 transition-colors duration-200 hover:bg-white/[0.05] hover:text-white/78 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/35",children:e.label},e.label))})]})})}function CM(){return s.jsx("div",{className:"relative left-1/2 my-40 w-screen -translate-x-1/2 border-t border-white/10"})}function ZDe(){return h.useEffect(()=>{document.title="Integrity | Revenue Operating System"},[]),s.jsxs("div",{className:"landing-root min-h-screen bg-[#080808] font-sans text-[#f0f0f0]",children:[s.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:fixed focus:left-4 focus:top-4 focus:z-[100] focus:bg-white focus:px-3 focus:py-2 focus:text-sm focus:text-black",children:"Skip to content"}),s.jsx(Rz,{}),s.jsxs("main",{id:"main-content",children:[s.jsx(WDe,{}),s.jsx(HDe,{}),s.jsx(VDe,{}),s.jsx(CM,{}),s.jsx(KDe,{}),s.jsx(CM,{}),s.jsx(XDe,{}),s.jsx(QDe,{})]}),s.jsx(JDe,{})]})}const e3e=new DJ;class t3e extends h.Component{constructor(t){super(t),this.state={hasError:!1,message:""}}static getDerivedStateFromError(t){return{hasError:!0,message:(t==null?void 0:t.message)||"Unexpected app error"}}componentDidCatch(t,r){console.error("App render error:",t,r)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center px-6",children:s.jsxs("div",{className:"max-w-lg text-center space-y-3",children:[s.jsx("div",{className:"text-lg font-medium",children:"Page failed to load"}),s.jsx("div",{className:"text-sm text-white/60",children:this.state.message}),s.jsx("button",{type:"button",className:"h-10 px-4 rounded-xl border border-white/20 text-sm text-white/85 hover:bg-white/5",onClick:()=>window.location.reload(),children:"Reload"})]})}):this.props.children}}function r3e(){const e=Hn(),{user:t,loading:r}=Kt(),{portalRole:n,loading:a}=Qi(),{userRole:i,loading:o}=on(),l=typeof window<"u"&&window.sessionStorage.getItem("acq_signin_intent")==="setter",c=!!(t!=null&&t.id)&&yo(t.id),u=xo(t==null?void 0:t.user_metadata);if(r||a||o)return s.jsx(UN,{});if(!t)return s.jsx(fc,{to:"/auth",replace:!0});if(n==="client")return s.jsx(fc,{to:"/portal/meetings",replace:!0});const d=l||c||u||i==="setter"||n==="setter",f=["/setter-portal/messages","/setter-portal/outreach","/setter-portal/setters"],m=[{from:"/messages",to:"/setter-portal/messages"},{from:"/outreach",to:"/setter-portal/outreach"},{from:"/setters",to:"/setter-portal/setters"}];if(d){const p=e.pathname||"";for(const{from:g,to:b}of m)if(p===g||p.startsWith(`${g}/`)){const y=p.slice(g.length);return s.jsx(fc,{to:`${b}${y}`,replace:!0})}if(!f.some(g=>p===g||p.startsWith(`${g}/`)))return s.jsx(fc,{to:"/setter-portal/messages",replace:!0})}else{const p=e.pathname||"";if(f.some(g=>p===g||p.startsWith(`${g}/`)))return s.jsx(fc,{to:"/dashboard",replace:!0})}return s.jsx(DZ,{})}function n3e(){return s.jsxs(FZ,{children:[s.jsx(Nt,{path:"/",element:s.jsx(one,{})}),s.jsx(Nt,{path:"/auth",element:s.jsx(lne,{})}),s.jsx(Nt,{path:"/email-verified",element:s.jsx(LDe,{})}),s.jsx(Nt,{path:"/accept-invite",element:s.jsx(t4e,{})}),s.jsxs(Nt,{element:s.jsx(r3e,{}),children:[s.jsx(Nt,{path:"/onboarding",element:s.jsx(b4e,{})}),s.jsx(Nt,{path:"/dashboard",element:s.jsx(gOe,{})}),s.jsx(Nt,{path:"/dashboard/chat-log",element:s.jsx(xOe,{})}),s.jsx(Nt,{path:"/messages",element:s.jsx(X4,{})}),s.jsx(Nt,{path:"/outreach",element:s.jsx(uM,{})}),s.jsx(Nt,{path:"/setter-portal/messages",element:s.jsx(X4,{})}),s.jsx(Nt,{path:"/setter-portal/outreach",element:s.jsx(uM,{})}),s.jsx(Nt,{path:"/setter-portal/setters",element:s.jsx(_M,{})}),s.jsx(Nt,{path:"/content",element:s.jsx(VIe,{})}),s.jsx(Nt,{path:"/youtube-callback",element:s.jsx(ODe,{})}),s.jsx(Nt,{path:"/calendar-callback",element:s.jsx(IDe,{})}),s.jsx(Nt,{path:"/instagram-callback",element:s.jsx($De,{})}),s.jsx(Nt,{path:"/ask-ai",element:s.jsx(GIe,{})}),s.jsx(Nt,{path:"/clients",element:s.jsx($Me,{})}),s.jsx(Nt,{path:"/clients/:id",element:s.jsx(N$e,{})}),s.jsx(Nt,{path:"/settings",element:s.jsx(JIe,{})}),s.jsx(Nt,{path:"/meetings",element:s.jsx(cDe,{})}),s.jsx(Nt,{path:"/tasks",element:s.jsx(dDe,{})}),s.jsx(Nt,{path:"/chat",element:s.jsx(wDe,{})}),s.jsx(Nt,{path:"/team",element:s.jsx(yDe,{})}),s.jsx(Nt,{path:"/setters",element:s.jsx(_M,{})}),s.jsx(Nt,{path:"/profile",element:s.jsx(xDe,{})}),s.jsx(Nt,{path:"/run/:runId",element:s.jsx(_ne,{})})]}),s.jsx(Nt,{path:"/l/:slug",element:s.jsx(SDe,{})}),s.jsx(Nt,{path:"/book/:slug",element:s.jsx(kDe,{})}),s.jsx(Nt,{path:"/book-call",element:s.jsx(TDe,{})}),s.jsx(Nt,{path:"/setter-portal",element:s.jsx(C$e,{})}),s.jsx(Nt,{path:"/setter-portal/login",element:s.jsx(E$e,{})}),s.jsx(Nt,{path:"/setter-portal/onboarding",element:s.jsx($$e,{})}),s.jsx(Nt,{path:"/setter-portal/magic-callback",element:s.jsx(D$e,{})}),s.jsx(Nt,{path:"/portal/login",element:s.jsx(L$e,{})}),s.jsx(Nt,{path:"/portal/forgot-pin",element:s.jsx(F$e,{})}),s.jsx(Nt,{path:"/portal/magic-callback",element:s.jsx(K$e,{})}),s.jsx(Nt,{path:"/portal/onboarding",element:s.jsx(q$e,{})}),s.jsx(Nt,{path:"/portal/meetings",element:s.jsx(V$e,{})}),s.jsx(Nt,{path:"/portal/tasks",element:s.jsx(W$e,{})}),s.jsx(Nt,{path:"/portal/files",element:s.jsx(H$e,{})}),s.jsx(Nt,{path:"/portal",element:s.jsx(B$e,{})}),s.jsx(Nt,{path:"/privacy",element:s.jsx(FDe,{})}),s.jsx(Nt,{path:"/terms",element:s.jsx(BDe,{})}),s.jsx(Nt,{path:"/data-deletion",element:s.jsx(UDe,{})}),s.jsx(Nt,{path:"/homepage",element:s.jsx(ZDe,{})}),s.jsx(Nt,{path:"/landing.html",element:s.jsx(fc,{to:"/homepage",replace:!0})}),s.jsx(Nt,{path:"*",element:s.jsx(qDe,{})})]})}function a3e({children:e}){return s.jsx(FJ,{client:e3e,children:s.jsx(uee,{children:s.jsx(nne,{children:s.jsx(sne,{children:s.jsxs(hJ,{children:[s.jsx(QY,{}),s.jsx(AX,{}),s.jsx(i3e,{children:e})]})})})})})}function i3e({children:e}){return s.jsx("div",{className:"app-shell",children:s.jsx("div",{className:"app-content app-content--visible",children:s.jsx(t3e,{children:e})})})}const s3e=()=>s.jsx(a3e,{children:s.jsx(n3e,{})});X$(document.getElementById("root")).render(s.jsx(V.StrictMode,{children:s.jsx(s3e,{})}));
